2001-01-11  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/buffer.C (getTocList): make the method const, so that
	InsetTOC::Ascii compiles.

	* src/insets/insettoc.C (Ascii): return 0

2001-01-11  Dekel Tsur  <dekelts@tau.ac.il>

	* src/insets/insettoc.C (Ascii): New method.

	* src/lyx_main.C (init) Set first_start to false when running
	without a GUI.

2000-12-19  Dekel Tsur  <dekelts@tau.ac.il>

	* src/paragraph.C (TeXOnePar,SimpleTeXOnePar) Fix problem with
	aligned paragraphs.

2001-01-11  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/buffer.C (writeFile): add missing ' ' after lyxformat.

	* src/buffer.h: change format to int, and change name to file_format

	* src/buffer.C: change LYX_FORMAT to int, and bump version number
	to 218.
	(readLyXformat2): handle it
	handle it
	(readFile): handle it
	(writeFile): handle it

2001-01-10  Dekel Tsur  <dekelts@tau.ac.il>

	* src/insets/insettext.C (LocalDispatch): Add handling of
	LFUN_BREAKPARAGRAPHKEEPLAYOUT.

2001-01-10  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/tabular.C (Write): write lowercase identifiers
	(Read): read lowercase identifiers

2001-01-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/lyxstring.C (rfind): better fix (from Dekel).

	* src/tabular.h: add a couple std:: qualifiers.

2001-01-10  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxstring.C (rfind): also test the first char in the
	string and be sure that t >= 0.

2001-01-09  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/tabular.C (ReadNew): new method
	(Read): changed to call ReadNew or ReadOld depending on the
	tabular version found.

	* src/tabular-old.C: new file with the support functions and the
	ReadOld method.
	(ReadOld): new method

	* src/frontends/xforms/FormDocument.C (CheckChoiceClass): make tc
	unsigned to remove a signed/usigned warning.

	* src/tabular.C (tostr): new spesializations, replaces type2string
	(Write): use the new spesializations

2001-01-09  Juergen Vigna  <jug@sad.it>

	* src/tabular.C (OldFormatRead): convert the footer/header information
	to the right row.
	(getTokenValue): chaned this functions again.
	(string2type): added a bunch of this functions per type.
	(Write): use type2string and write columns first.
	(type2string): added a bunch of this functions per type.
	(TeXBottomHLine):
	(TeXTopHLine): check row parameter.

2001-01-08  Dekel Tsur  <dekelts@tau.ac.il>

	* src/tabular.C (getTokenValue): Fix crash with malformed files.
	(Read): Read the rotate attribute.

2001-01-09  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/FormDocument.C (CheckChoiceClass): fix
	class switching; do not do anything if class has not been changed.

2001-01-07  Dekel Tsur  <dekelts@tau.ac.il>

	* lib/build-listerrors: Exit if literate-article doesn't appear in
	textclass.lst

2001-01-09  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/combox.h (getline): small fix for sun CC 6.0
	* src/combox.C (input_cb): ditto.
	* src/spellchecker.C (sigchldhandler): ditto.

	* src/lyx_main.C (init): do not query for creation of user
	directory when running without a GUI.

2001-01-08  Dekel Tsur  <dekelts@tau.ac.il>

	* src/mathed/formula.C (LocalDispatch): Toggle font properties.

2001-01-07  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView2.C (open_new_inset): Added 2nd argument.
	(getParentText, getParentLanguage): New methods.

	* src/lyxfunc.C (Dispatch): Fixed handling of LFUN_LEFT and
 	LFUN_INSET_TABULAR for RTL text.

	* src/tabular.C (Latex): Put \R{} around RTL cells.

	* src/text2.C (InsertInset): Change cursor position for highly
	editable insets.

	* src/frontends/xforms/FormTabularCreate.C (apply): Create the
	tabular inset by calling to LyXFunc::Dispatch(LFUN_INSET_TABULAR,...)

	* src/insets/insettabular.C (LocalDispatch): When dispatching
	LFUN_TAB/LFUN_SHIFT_TAB, if the insettext of the old cell was
	locked, then the insettext of the new cell will be locked.
 	(moveLeft, moveRight): Fixed for RTL tabulars.
 	(moveNextCell, movePrevCell): Ditto.
	(isRightToLeft): New method.

	* src/insets/insettext.C (LocalDispatch): Fixed handling of
	non-dispatched function in the locking inset.
	(Edit): If the inset is empty set the language of the current font
 	to the language to the surronding text (this code was moved from
	LocalDispatch to allow the user to change the languaeg before
	inserting text).
	(moveRight, moveLeft): Fixed for RTL text.
	(checkAndActivateInset): Fixed.

	* src/tabular.C (OldFormatRead): Use ALL_INHERIT font as the base font.

2001-01-08  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/Toolbar_pimpl.C (BubbleTimerCB): translate
	the tooltip.
	(set): ditto.

	* src/spellchecker.C (sigchldhandler): add an #ifndef USE_PSPELL
	around some ispell code.

	* src/lyxcursor.[Ch]: add proper constructor, to avoid tons of
	Unitialized Memory Read in purify.

	* lib/examples/nl_splash.lyx: update from Tino Meinen.

2001-01-04  Dekel Tsur  <dekelts@tau.ac.il>

	* src/frontends/xforms/FormDocument.C (FormDocument::build):
	Disable class_->choice_doc_class and language_->choice_language to
	allow using the class/language combox with keyboard.

2001-01-08  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/snprintf.c (va_copy): only define va_copy if undefined

2001-01-06  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyxvc.C (showLog): give the tempfile a mask

	* src/lyx_cb.C (AutoSave): five tempfile a mask, enter the failed
	branch on !rename

	* src/support/filetools.C (IsDirWriteable): give the tempfile a
	mask and unlink the tempfile after use.

2001-01-04  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (resetPos): an extra scroll, but we
	really should redo all this scrolling code!
	(TabularFeatures): unlock the_locking_inset before add/del rows/colums.

	* src/text.C (GetVisibleRow): check that y/h values are good otherwise
	change them.

	* src/insets/insettabular.C (LocalDispatch): fixes to PASTESELECTION.
	(pasteSelection): pay attention to multicolumn cells.
	(calculate_dimensions_of_cells): forgot to reset maxAsc/Desc.

2001-01-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/mathed/math_panel.C (deco_cb): check the decoration index is
	valid.

	* src/frontends/xforms/FormPreferences.C (feedback): apply
	formatting to the translated string, not to the original one.
	(printWarning): ditto.

	* src/gettext.C (_): translate empty string with empty string.

	* src/frontends/xforms/FormCopyright.C (build): use _() instead of
	N_().

	* NEWS: small update

	* UPGRADING: mention that tabular format has been changed.

2001-01-03  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (InsetButtonPress): look for button==2
	and do Clipboard Paste!

	* src/insets/insettext.C (SetText): added function.

	* src/insets/insettabular.C (LocalDispatch): Fixed LFUN_PASTE and
	new LFUN_PASTESELECTION.

	* src/insets/insettext.C (draw): don't clear if top_x changes.

	* src/insets/insettabular.C (draw): clear only if the inset didn't
	change in the draw routine.

	* src/insets/insettext.C (width): make the width dependant on the
	textWidth too.

	* src/text.C (draw): comment out the UpdateInset call.

	* src/screen.C (DrawOneRow):
	(DrawFromTo): check for bv->text->status not text->status.

	* src/insets/insettabular.C (calculate_dimensions_of_cells): calculate
	dimensions of ascent-descent for the whole row.

	* src/insets/insettext.C (draw): check also for need_update == INIT.

2001-01-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* Makefile.am (EXTRA_DIST): add autogen.sh

2001-01-03  Miyata Shigeru  <miyata@kusm.kyoto-u.ac.jp>

	* development/OS2/quick_fix.patch:
	* lib/configure.cmd: update OS/2 support files.

2001-01-02  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (pasteSelection): rewritten correctly.

	* src/tabular.C (TeXTopHLine):
	(TeXBottomHLine): fixed Lars new code.

	* src/insets/insettext.C (LocalDispatch): added support for math_greek.

	* src/mathed/math_symbols.C (math_insert_greek): removed current_view
	from this function and added a BufferView * parameter.

	* src/mathed/math_symbols.C (math_insert_symbol): ditto

2000-12-31  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/version.h: set to pre3

2000-12-31  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/Makefile.am (lyx_SOURCES): added Floating.C

	* src/Floating.h: moved all the inlines to Floating.C

	* src/Floating.C: new file

2000-12-29  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/FormPreferences.C (feedback): fix
	description of RC_PRINTCOPIESFLAG and RC_PRINTCOLLCOPIESFLAG.

2000-12-29  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/FileInfo.h: move unistd.h to after sys/types.h and
	sys/stat.h.

	* src/support/FileInfo.C: don't include sys/types. and sys/stat.h

	* src/mathed/math_inset.h: move LString.h to be included first

	* src/insets/insetfloat.C: adjust for change in private variable names

	* src/frontends/xforms/xform_helpers.h : don't include config.h

	* src/frontends/xforms/xform_helpers.C: adjust the order of
	includes, some whitespace changes.

	* src/trans.C (Load): constify filename and res

	* src/text2.C (SetCounter): call Floating::name()

	* src/screen.C: change to not use owner from WorkArea, but from
	text instead.

	* src/lyxfunc.C: adjust because of changes in Intl.

	* src/intl.h: make trans a object instead of pointer, inlucd
	trans_mgr.h in this file.
	(getTrans): return a reference to TransManager

	* src/intl.C: don't include trans_mgr.h here
	modify calls to trans to work on object instead of on pointer

	* src/WorkArea.h: add using for Signal1
	comment out forward decl of BufferView.
	add signal scrollCB
	remove class variable owner_ and getter method for this.

	* src/WorkArea.C: don't include BufferView.h
	(WorkArea): change to not take a BufferView.h, use signals
	instead.
	(scroll_cb): emit signal

	* src/LaTeXFeatures.C: include Floatlist.h
	(getPackages): only load float.sty when needed
	(getMacros): prepare for outputting the correct code to preamble.

	* src/Floating.h: make all variables private + rename to var_.
	(Floating): default ctor
	(Floating): complex ctor to set a complete Floating
	(type): getter
	(placement): getter
	(name): getter
	(builtin): getter

	* src/FloatList.C (FloatList): use Floating's constructor
	(begin): new method
	(end): ditto
	(newFloat): call type()
	(defaultPlacement): call placement()
	(operator): new operator

	* src/BufferView_pimpl.C (Pimpl): modify call to WorkArea
	(scrollUp): call pimpl's scrollCB
	(scrollDown): ditto
	(pasteClipboard): constify clip

	* src/BufferView2.C (insertLyXFile): constify fname, fi and c.
	(insertErrors): constify desctext, errortext, msgtxt and errorrow
	(open_new_inset): delete some commented code.

	* src/BufferView.[Ch] (enterView): comment out
	(leaveView): ditto
	(scrollCB): ditto
	(workAreaMotionNotify): ditto
	(workAreaButtonPress): ditto
	(doubleClick): ditto
	(tripleClick): ditto
	(workAreaButtonRelease): ditto
	(workAreaExpose): ditto

	* config/lyxinclude.m4 (cross_compiling): small stuff to be able
	to compile with cvs gcc (2.97).

2000-12-28  Dekel Tsur  <dekelts@tau.ac.il>

	* lib/ui/default.ui: menu structure cleanup.

	* lib/languages: add description of entries.

2000-12-27  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/ExternalTemplate.C (readTemplates): change debug
	messages a bit.
	(readTemplate): use lyxlex.printError to report read errors.
	(readFormat): ditto.

	* src/insets/insetexternal.C (Read): suppress debug message when
	not needed.

2000-12-21  Dekel Tsur  <dekelts@tau.ac.il>

	* src/insets/insetinclude.C (Ascii): New method. Currently
	supports only verbatim input.

2000-12-27  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/bind/fi_menus.bind: update from Pauli Virtanen.

2000-12-22  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (InsetButtonPress): do nothing if we
	have a selection and button == 3.
	(UpdateLocal): if what == INIT clear selection if existent!
	(InsetButtonPress): don't activate the cell inset on button==3
	(Edit): ditto
	(LocalDispatch): move curor up/down if exiting an inset which this
	keys.

2000-12-20  Juergen Vigna  <jug@sad.it>

	* src/mathed/formula.C (LocalDispatch): return UNDISPATCHED when
	calling for the math-panel (do not unlock the math-inset if locked)!

	* src/text.C (GetVisibleRow): fixed drawing of depth lines inside
	text-insets (with x-offset).

	* src/tabular.C (TeXCellPreamble): fixed wrong output of special
	alignment of multicolumn-cells.

2000-12-19  Juergen Vigna  <jug@sad.it>

	* src/lyxfunc.C (Dispatch):
	* src/bufferview_funcs.C (changeDepth): implemented DEPTH functions
	for insettext.

2000-12-19  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/WorkArea.C (work_area_handler): simplify the key/keysym
	handling for XForms 0.89, this might have rendered some cases
	unusable. I have at least deadkeys, accent-xxx and KP_x working.
	Please report proplems.

	* src/lyxfunc.C (processKeySym): make the self-insert handling
	work as it should

2000-12-18  Baruch Even  <baruch.even@writeme.com>

	* src/LaTeX.C (deplog): fix spelling errors
	* src/text2.C (CutSelection): ditto
	* src/lyxfunc.C (Dispatch): ditto

2000-12-18  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* lib/layouts/stdlayouts.inc: only allow align Center for Caption

	* src/mathed/math_inset.C (MathMatrixInset): initialize v_align
	and h_align in default init.
	adjust calls to MathedRowSt

	* src/mathed/math_iter.C: adjust calls to MathedRowSt
	* src/mathed/math_iter.h (getAD): ditto

	* src/mathed/math_defs.h (class MathedRowSt): remove friends, add
	methods setBaseline, ascent, descent
	(class MathMatrixInset): remove method GetAlign, change h_align
	from char* to string

	* src/lyxfunc.C (processKeySym): discover the correct argument if
	the action is LFUN_SELFINSERT

2000-12-18  Dekel Tsur  <dekelts@tau.ac.il>

	* src/mathed/math_cursor.C (Interpret) Suppress a debug message
	in normal run.

2000-12-17  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/copy.C: don't include filetools.h

	* lib/images: revert to old banner, drop the cucumber.

2000-12-12  Dekel Tsur  <dekelts@tau.ac.il>

	* src/converter.C (Formats::View): Change the current directory to
	the directory of the file.

2000-12-17  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/kbsequence.C (addkey): also clear sequence and modifiers if
	length == 0

	* src/BufferView2.C (theLockingInset): return 0 if text is 0

2000-12-17  Dekel Tsur  <dekelts@tau.ac.il>

	* Many files: Fix RTL support for insettext.

2000-12-11  John Levon  <moz@compsoc.man.ac.uk>

	* README: add mention of broken ghostscript versions, remove
	reference to non-existent BUGS file

2000-12-13  Angus Leeming <a.leeming@ic.ac.uk>

	* src/support/lstrings.C (compare_no_case): small fix. When passed
	length, should use it in the size comparison.

2000-12-11  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/insetexternal.C (getScreenLabel): Return a default
	value if the template label is empty.

	* src/lyxlookup.C: do not condition on FL_REVISION.

	* forms/sp_form.fd:
	* src/sp_form.C: fix the font size of some text entries

	* src/frontends/xforms/Menubar_pimpl.C (add_toc): honor separator
	after TOC when there is no TOC.

	* src/lyxrc.C (readBindFileIfNeeded): new method. Reads the main
	bind file if it has not been done yet.
	(read): remove local bindFile variable. Try to fix the handling of
	RC_BIND and RC_BINDFILE.

	* src/lyx_main.C (init): use readBindFileIfNeeded().

	* lib/languages: Change description of german to "German (new
	spelling)".

2000-12-07  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormInset.C (createInset): activate "Ok",
	"Apply" buttons if arg is non-zero.

	* src/lyxfunc.C (Dispatch): enable citation to be inserted without
	launching the popup if sufficient info is passed to
	LFUN_CITATION_CREATE.

2000-11-23  Dekel Tsur  <dekelts@tau.ac.il>

	* src/lyx_cb.C (MenuInsertLabel): Compute a default value for new
 	labels (disabled in 1.1.6).

	* src/lyxrc.[Ch]: New variable label_init_length

	* mathed/formula.C (LocalDispatch): Preserve the label when
	changing from display math to eqnarray (however, the label
	do not appear at the first line, as one might expects, but at the
	second line).
	(LocalDispatch): When inserting a label to a formula which already
	have a label, the old label is used as default value.
	Also, if the label is changed, then all references to the label
 	are changed.

	* src/mathed/math_iter.C (setLabel): Allow to set the label
	even if it is empty. This is needed to allow deletion of a label
	in an eqnarray.

	* src/BufferView2.C (ChangeRefsIfUnique): New method. Changes the
	refernces only if the old label appears once in the document.

2000-12-07  Angus Leeming <a.leeming@ic.ac.uk>

	* lib/languages: added ngerman. Patch courtesy of Andreas Gehlert
	<gehlert@Rcs1.urz.tu-dresden.de>

	* src/frontends/xforms/FormBase.C: comment out debug.h

	* src/frontends/xforms/FormGraphics.[Ch] (browseFile): removed. Reuse
	code in xform_helpers instead.
	(d-tor): comment out "delete dialog;" and so prevent a crash on exit.

	* src/frontends/xforms/FormPreferences.C: use AddName() in more places.
	Use N_(), rather than _() when creating strings to pass to browseFile()
	because browseFile calls gettext() itself now.

	* src/frontends/xforms/xform_helpers.C (browseFile): call gettext() and
	display the filename correctly.

2000-12-09  Dekel Tsur  <dekelts@tau.ac.il>

	* src/converter.C (Move): New method. Used to move file or files
	from temp dir to the output dir. (this fixes the bug that
	exporting linuxdoc/docbook document to html would not move all
	html file from temp directory).

	* src/support/filetools.C (DirList): Fixed.

	* src/lstrings.C (prefixIs): Fixed (how nobody noticed it before??).

2000-12-08  Dekel Tsur  <dekelts@tau.ac.il>

	* src/converter.C (Add): Remove $$i when setting latex_command.

	* src/text.C (IsBoundary): Return false when pos = 0.

2000-12-08  Dekel Tsur  <dekelts@tau.ac.il>

	* lib/kbd/hebrew.kmap: Add Hebrew points (nikud).

2000-12-07  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormDocument.C (checkMarginValues): you don't
	need to empty the fields to turn off use of the geometry package!

2000-12-07  Angus Leeming <a.leeming@ic.ac.uk>

	* src/lyxparagraph.h, src/paragraph.C (CopyIntoMinibuffer): pass a
	(Buffer const &), not a (BufferParams const &) and so fix a crash
	caused by using current_view before it had been initialised. Not
	the best way to do this, but much easier than changing
	Inset::Clone(Buffer const &) to Inset::Clone().

	* src/CutAndPaste.C:
	* src/tabular.C: changed call to CopyIntoMinibuffer().

2000-12-07  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/ui/default.ui: put TOC at the beginning of the TOC menu.

	* src/lyxfunc.C (getStatus): disable insertion of floats in a
	tabular.

2000-12-06  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormPreferences.C (ScreenFonts::build):
	changed filter for screen fonts input filter from int to float

	* src/frontends/xforms/input_validators.c: removed.
	* src/frontends/xforms/input_validators.C: new file. Can now call C++
	functions from within the filter functions.

	* src/frontends/xforms/input_validators.[Ch]
	(fl_unsigned_float_filter): new filter function.

	* src/frontends/xforms/forms/fdfixc.sed: I defy gettext to get
	confused now! And if you think I'm going to do this in
	./forms/fdfix.sh with its "sed -e" declarations, then think again!

2000-12-06  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/buffer.C (asciiParagraph): small NEW_INSETS fix from Levon

	* src/WorkArea.C (work_area_handler): don't handle button requests
	if xbutton.button == 0

2000-12-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/layouts/lyxmacros.inc: do not use \verbatim@font in lyxcode.
	It creates a lot of interesting problems.

2000-12-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/Menubar_pimpl.C (openByName): check that
	the menu exists in the current menubar before opening it.

	* src/MenuBackend.C (hasSubmenu): new method.

	* src/frontends/xforms/Menubar_pimpl.C: fix problem with bogus
	action value by offsetting actions by a large constant (so that
	bogs choice result will be less than this constant).

	* lib/bind/fi_menus.bind: more cleanup to menus.
	* lib/bind/sciword.bind: ditto.
	* lib/bind/xemacs.bind: ditto.
	* lib/bind/emacs.bind: ditto.
	* lib/bind/pt_menus.bind: ditto.
	* lib/bind/hu_menus.bind: ditto.

	* src/gettext.h (locale_init): set locale LC_NUMERIC to "C".

	* INSTALL: update PROBLEMS section.

	* src/lyxlookup.h: remove condition on xforms version, since we
	should not include it if not appropriate.

2000-12-05  John Levon  <moz@compsoc.man.ac.uk>

	* src/LColor.C: "latex text" -> "latex inset" (from
	Angus Leeming)

	* src/lyxrc.C: "it's" -> "its" (from Angus Leeming)

	* src/frontends/kde/FormTabularCreate.C:
	* src/frontends/kde/citationdlg.C:
	* src/frontends/kde/copyrightdlg.C:
	* src/frontends/kde/paradlg.C:
	* src/frontends/kde/paraextradlg.C:
	* src/frontends/kde/parageneraldlg.C:
	* src/frontends/kde/printdlg.C:
	* src/frontends/kde/refdlg.C:
	* src/frontends/kde/tabcreatedlg.C:
	* src/frontends/kde/tocdlg.C:
	* src/frontends/kde/urldlg.C: add necessary headers
	(from Angus Leeming)

	* src/frontends/kde/dlg/emptytable.C:
	* src/frontends/kde/dlg/tabstack.C: ctors shouldn't have
	default parameters (from Angus Leeming)

	* src/frontends/kde/dlg/moc/.cvsignore:
	* src/frontends/kde/dlg/.cvsignore:
	* src/frontends/kde/moc/.cvsignore: fix the library name
	(from Angus Leeming)

	* src/frontends/kde/paradlg.C:
	* src/frontends/kde/parageneraldlg.C:
	* src/frontends/kde/dlg/para.dlg:
	* src/frontends/kde/dlg/paradlgdata.C: added accelerators

	* src/frontends/kde/dlg/README: clarified qtarch version

	* src/frontends/kde/dlg/Makefile.am: removed the
	dlg rules as they created spontaneous rebuilds
	(not a good idea as it requires qtarch)

2000-12-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* config/lyxinclude.m4 (LYX_PATH_XFORMS): display also the
	fixlevel along with xforms version.

	* src/WorkArea.C (work_area_handler): use stuff in lyxlookup.h when
	xforms version is strictly less than 0.89.5.
	* src/lyx_gui.C (LyXGUI): ditto.
	* src/LyXView.C (show): ditto.

2000-12-02  Dekel Tsur  <dekelts@tau.ac.il>

	* src/BufferView_pimpl.C (workAreaMotionNotify): Fixed mouse
	movement in inset in RTL text.
	(checkInsetHit): Fixed mouse movement in scrolled inset in RTL text.
	(workAreaButtonRelease): Do not open a float when there is a selection.

	* src/insets/insettext.C (cx): Fixed for insets in RTL text.

	* src/spellchecker.C (RunSpellChecker): Open all floats before
 	spellchecking.

	* src/text.C (InsertChar): Consider "," as a part of a number
	(for LTR numbers in RTL text code).
	(IsBoundary): Fixed (and simplified).
	(InsertChar): Recalculate cursor boundary.
	(Backspace): Ditto.

2000-12-04  John Levon  <moz@compsoc.man.ac.uk>

	* src/spellchecker.C: fix figures with pspell enabled

	* src/insets/figinset.C: workaround for gs hang xforms bug

2000-12-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/bind/??_menus.bind: comment out the entries corresponding to
	real menus. They should be eventually removed, but I'll let the
	language maintainers do that.

2000-12-04  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/kde/parageneraldlg.C:
	* src/frontends/kde/parageneraldlg.h: don't use
	a derived class for SpaceAbove/Below

	* src/frontends/kde/dlg/README: add some info

	* src/frontends/kde/dlg/*: update data files, update
	dialog files.

	* src/frontends/kde/dlg/moc/Makefile.am: add
	${FRONTEND_INCLUDES}

2000-12-04  John Levon  <moz@compsoc.man.ac.uk>

	* configure.in: add new KDE Makefiles
	* src/vspace.h: return GlueLength not a normal one
	* src/support/lstrings.h:
	* src/support/lstrings.C: add isStrUnsignedInt(),
	strToUnsignedInt()

	* src/frontends/kde/*: big reorganisation, update
	FormParagraph, add FormTabCreate

2000-12-04  Angus Leeming <a.leeming@ic.ac.uk>

	* lib/ui/default.ui: small grammatical change.

	* src/frontends/xforms/xform_macros.h: removed.

	* src/frontends/xforms/FormBase.C:
	* src/frontends/xforms/FormPreferences.C:
	* src/frontends/xforms/Makefile.am: changes associated with removing
	xform_macros.h. Should make Lars' debugging a little easier.

	* src/frontends/xforms/FormPreferences.C:
	* src/frontends/xforms/FormPreferences.h:
	* src/frontends/xforms/forms/form_preferences.fd (Colors tab): no
	longer use X11 color name database. HSV and RGB dials/sliders.
	Please let this be the end of this!

2000-11-30  Dekel Tsur  <dekelts@tau.ac.il>

	* Several files: Allow compilation when the compiler doesn't
	support namespaces.

2000-11-30  Angus Leeming <a.leeming@ic.ac.uk>

	* lyx.man:
	* src/lyx_main.C (commandLineHelp, easyParse): documented remaining
	command line options.

2000-11-17  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/Menubar_pimpl.C (makeMenubar): use
	FL_MENU_BUTTON for items in menu bar. Not sure what difference it
	makes, anyway.

2000-11-29  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormRef.C (updateBrowser):
	* src/frontends/xforms/forms/form_ref.fd: try clicking on
	different insets with the sort key active. Now apply this patch!

2000-11-29  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/xforms/FormPrint.C: set to valid()
	when we update from the passed parameters.

2000-11-29  Angus Leeming <a.leeming@ic.ac.uk>

	* src/LColor.C (getFromGUIName): internationalise the comparison.

	* src/lyx_gui_misc.h (LyXBell): turn off that BLOODY bell until it's a
	FormPreferences choice.

	* src/frontends/xforms/FormPreferences.C: some additional Color safety.
	Should be redundant.

2000-11-29  John Levon  <moz@compsoc.man.ac.uk>

	* src/lyxrc.C: more detail for the printer program config
	dialog.

	* src/LColor.C: ert->latex text. LColor needs a big revamp
	but will have to wait till after 1.1.6

	* src/buffer.C: bring up a dialog if we load a document
	with an un-installed text class, rather than just complain
	on the console.

2000-11-29  Angus Leeming <a.leeming@ic.ac.uk>

	* src/combox.[Ch] )(add, Show): workaround xforms bug when Show()ing
	the browser form for a combox in a tabbed folder. Bug fix courtesy of
	Steve Lamont <spl@ncmir.ucsd.edu>.

	* src/frontends/xforms/FormDocument.C (build):
	* src/frontends/xforms/FormPreferences.C (Language::build):
	pass tabfolders to Combox::add() in order to use this work around.

	* src/frontends/xforms/FormCitation.C (connect): remove max size
	limitation.
	(update): sort list of bibliography keys.

	* src/frontends/xforms/FormRef.[Ch] (connect, showBrowser, hideBrowser,
	setSize): removed.
	No max size limitation. Same popup for new and existing insets. Fixes
	bugs reported by Rob Lahaye.

	* src/frontends/xforms/FormCitation.C (c-tor):
	* src/frontends/xforms/FormCopyright.C (c-tor):
	* src/frontends/xforms/FormError.C (c-tor):
	* src/frontends/xforms/FormGraphics.C (c-tor):
	* src/frontends/xforms/FormIndex.C (c-tor):
	* src/frontends/xforms/FormRef.C (c-tor):
	* src/frontends/xforms/FormToc.C (c-tor):
	* src/frontends/xforms/FormUrl.C (c-tor):
	use correct policy for ButtonController.

	* src/frontends/xforms/FormPreferences.[Ch]: cleaned up a little more.

	* src/frontends/xforms/Menubar_pimpl.C (create_submenu): modified lyxerr
	call a little.

	* src/frontends/xforms/forms/form_citation.fd: some resizing changes.

	* src/frontends/xforms/forms/form_ref.fd: new Restore, Apply buutons.
	Some resizing changes.

2000-11-28  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* configure.in: fix typo

	* lib/languages: add ukraninian and change no to no_NO

	* src/lyxfont.[Ch] (setGUISize): comment out setGUISize

	* src/bufferview_funcs.C (FontSize): use setLyXSize

2000-11-24  Kayvan A. Sylvan <kayvan@sylvan.com>

	* acconfig.h, configure.in, config/lyxinclude.m4: Added autoconf tests
	to check for systems where mkstemp() is available but not declared
	in headers. The new autoconf macro lyx_CHECK_DECL can be used
	to check for declarations in headers.

2000-11-23  Angus Leeming <a.leeming@ic.ac.uk>

	* forms/bibforms.fd: tiny fix to get it to run with fdesign.

	* forms/makefile: added bibforms.fd, include_form.fd.
	Removed lyx_sendfax.fd.

	* src/LaTeXLog.C (ShowLatexLog):
	* src/LyXAction.C (init):
	* src/bufferparams.C (readLanguage): altered messages as suggested by
	John Levon.

	* src/LyXView.C (c-tor): connected RedrawAllBufferRelatedDialogs() to
	Dialogs::redrawGUI.

	* src/credits.C: made fd_form_credits non-static, so that it can be
	redrawn should the xforms colors be re-mapped.
	* src/spellchecker.C ditto fd_form_spell_options.

	* src/filedlg.[Ch] (redraw):
	* src/intl.[Ch] (redraw):
	* src/lyxfr0.[Ch] (redraw):
	* src/insets/figinset.[Ch] (redraw):
	* src/insets/insetexternal.[Ch] (redraw):
	new methods, connected to Dialogs::redrawGUI.

	* src/lyx_gui_misc.[Ch] (RedrawAllBufferRelatedDialogs): new function
	to be connected to Dialogs::redrawGUI.

	* src/frontends/xforms/FormCitation.C (build):
	* src/frontends/xforms/FormCopyright.C (build):
	* src/frontends/xforms/FormError.C (build):
	* src/frontends/xforms/FormGraphics.C (build):
	* src/frontends/xforms/FormIndex.C (build):
	* src/frontends/xforms/FormTabularCreate.[Ch] (update):
	* src/frontends/xforms/FormToc.C (build):
	* src/frontends/xforms/FormUrl.C (build):
	use the ButtonController correctly.

	* src/frontends/xforms/FormCopyright.C (build):
	* src/frontends/xforms/forms/form_copyright.fd: moved the text out of
	the .fd file and into build().

	* src/frontends/xforms/FormPreferences.C: tiny clean-up.

	* src/frontends/xforms/FormToc.[Ch]: Don't use apply(). Use input().

	* src/frontends/xforms/forms/form_citation.fd:
	* src/frontends/xforms/forms/form_copyright.fd:
	* src/frontends/xforms/forms/form_error.fd:
	* src/frontends/xforms/forms/form_graphics.fd:
	* src/frontends/xforms/forms/form_index.fd:
	* src/frontends/xforms/forms/form_toc.fd:
	* src/frontends/xforms/forms/form_url.fd:
	renamed some of the objects. Named others explicitly for the first time.
	Added Restore and Apply buttons where appropriate.

	* src/insets/Makefile.am: removed form_graphics.[Ch] as they are not
	used.

2000-11-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/version.h: try the pre2 again

2000-11-22  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/kde/Dialogs.C: added signal Dialogs::redrawGUI.

	* src/frontends/kde/FormParagraph.C: added using directive.

	* src/frontends/kde/paradlg.C: added config.h and using directive.

	* src/frontends/kde/paradlg.h: added std::qualifier.

	* src/frontends/kde/Makefile.am: added Color.lo to libkde_la_OBJADD.

2000-11-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* configure.in (AC_OUTPUT): don't output src/xtl/Makefile

	* src/lyx_sendfax.[Ch]  src/lyx_sendfax_main.C: delete files

2000-11-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/version.h: set back to 1.1.6cvs

2000-11-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/version.h: set to 1.1.6pre2

2000-11-20  Marko Vendelin <markov@ioc.ee>

	* src/frontends/gnome/Dialogs.C: added signal Dialogs::redrawGUI

	* src/frontends/gnome/Makefile.am: updated list of XForms object files

2000-11-21  Angus Leeming <a.leeming@ic.ac.uk>

	* src/LColor.C (init):
	* src/lyxrc.C (getDescription): changed some comments as suggested by
	John Levon.

	* src/frontends/xforms/FormBase.[Ch]: modified to connect and
	disconnect the redrawGUI signal in best-practice fashion.

	* src/frontends/xforms/FormPreferences.[Ch]: renamed usage_tab_ as
	long_opts_tab to reflect the change in name of this tabfolder, as
	suggested by John Levon.
	(connect, disconnect): new methods. Don't do much at present other than
	ensuring that we can't resize the dialog. This just makes xforms go
	crazy.
	(lots of methods in Colors): made void rather than bool. The idea is
	to have an isOk() function that keeps track of whether any input is
	genuinely invalid and should therefore block Save, Apply.
	Easier to manipulate the counters rapidly.
	(Colors::InputBrowserLyX, Colors::Modify): rewritten so that Amir's
	compiler will like this code. Much cleaner way of doing things.

	* src/frontends/xforms/forms/fdfix.sh: a little speed up fix.

	* src/frontends/xforms/forms/form_preferences.fd: used normal counters
	rather than simple counters, following suggestion by John Levon.

	* src/frontends/xforms/forms/form_print.fd: used labelframe rather
	than engraved frame + text.

	* src/frontends/xforms/forms/makefile: removed spurious command.

2000-11-17  Angus Leeming <a.leeming@ic.ac.uk>

	* src/LColor.C (c-tor): fixed a couple of items in the ColorEntry
	array.
	* src/LyXAction.C (init): LFUN_SET_COLOR now has the attrib
	ReadOnly|NoBuffer.

	* src/frontends/xforms/Color.C: (HSVColor c-tor): another bug fix.

	* src/frontends/xforms/FormPreferences.C: re-formatted so that I can
	see what Lars has changed and what is just white space!
	Now used X directly to ascertain the RGB color associated with the
	color name.
	Replaced the RGB sliders with HSV equivalent. Should be more intuitive
	to use.
	Added some sort capability.
	The X11 color name database input is only displayed if the database
	isn't found in the standard place.
	Got rid of struct compare_converter; it wasn't used.
	Probably some other stuff that I've forgotten.

	* src/frontends/xforms/FormPreferences.h: changed the names of some
	methods in the Colors struct. Added a couple of structs to help sort
	colors by name and by RGBColor.

	* src/frontends/xforms/xform_helpers.[Ch]: moved the ReadableDir etc
	functions into a new class RWInfo.

	* src/frontends/xforms/forms/form_citation.fd: Added some shortcuts.
	The dialog is now almost navigable using the keyboard. Unfortunately,
	the cursor has to be inside a browser for it to be activated. There is
	no visual feedback for the key shortcuts to the arrow keys (use
	Alt-appropriate arrow key, Alt-x).

	* src/frontends/xforms/forms/form_preferences.fd: hacked the Colors tab
	around a lot.

	* src/support/filetools.[Ch]: moved out ReadableFile etc and into
	xform_helpers.[Ch]. See above.

2000-11-17  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* config/lyxinclude.m4 (LYX_PROG_CXX): please somebody

	* src/screen.C (setCursorColor): new method. Sets the color of the
	cursor.
	(ShowManualCursor): call it.
	Constify some local variables.

	* src/LColor.[Ch] (LColor): add entry for cursor
	* lib/configure(.m4) (word_to_latex_command): add quotes, removes
	a warning.

2000-11-19  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (draw): fixed text border redraw problem.
	(calculate_dimensions_of_cells): try to boost up when inserting chars.

2000-11-15  Rob Lahaye  <lahaye@postech.edu>

	* lib/ui/default.ui: OptItem used for Fax entry

2000-11-17  Matej Cepl  <cepl@bigfoot.com>

	* lib/kbd/czech.kmap: add apostroph mark to the Czech keyboard.

2000-11-15  John Levon  <moz@compsoc.man.ac.uk>

	* src/vspace.C (nextToken): fix so it can handle length phrases like
		"10mm+-20mm", "40inplus16mmminus10cm" etc.

2000-11-17  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/frontends/xforms/FormPreferences.C: constify several variables
	(BrowserLyX): rewrite to not need the choice variable
	(Modify): rewrite to not need the choide variable
	(compare_converter): make operator const

	* src/lyxrc.C (output): be a bit nicer og os usage, and try to
	correct the writing of \set_color
	(getDescription): return a const string

	* src/kbsequence.[Ch] (addkey): remove dead code

	* src/Painter.C (text): remove some commented code

2000-11-15  Angus Leeming <a.leeming@ic.ac.uk>

	* src/ColorHandler.[Ch]: removed some header files from .h file.
	Included LColor.h in .C file.

	* src/LColor.[Ch]: made class copyable so that I could create a
	system_lcolor instance.

	* src/Painter.h: removed LColor.h.

	* src/lyx_gui.C (create_forms): used AddName.

	* src/lyx_main.C (init): copied lcolor to system_lcolr prior to reading
	of user preferences/lyxrc file.

	* src/lyxrc.C (output): output changes to lcolor.

	* src/frontends/xforms/Color.[Ch]: Changed X11Color to a new struct,
	NamedColor.
	Moved class xformColor to files xform_helpers.[Ch]. These files,
	Color.[Ch], could now be moved into src if they would be useful to
	other GUIs.

	* src/frontends/xforms/xform_helpers.[Ch]: moved class XformColor here.
	Also moved FormPreferences::browseFile here as it can be used by any
	xform dialog with a "Browse" button. FormGraphics is a perfect example.

	* src/support/filetools.[Ch] (WriteableDir, ReadableDir, WriteableFile,
	ReadableFile): changed the FormPreferences methods a little and moved
	them here as they'll be useful elsewhere also.

	* src/frontends/xforms/FormPreferences.h: a bit more cleaning up.
	Removed some header files and used forward declarations instead.
	Better commenting.
	Removed some methods as they'll be useful elsewhere (see above).

	* src/frontends/xforms/FormPreferences.C: a bit more cleaning up.
	Can also now modify the LyX LColors. However, for reasons that I don't
	yet understand, it appears that we can use
	LyXFunc::Dispatch(LFUN_SET_COLOR, arg) only when we have a buffer
	present. The problem appears to lie in ColorHandler, because I can
	change the color using LColor.SetColor(). Similarly, when reading in a
	preferences file with some set_color instances, I'll get a warning
	like: Color sea green is undefined or may not be redefined
	Bad lyxrc set_color for sea green

	Once the buffer is loaded, however, I can happily change to this color.

	Finally, it appears that I have to set the color of "inset frame"
	explicitly, or it oscillates from "black" to "indian red" with each
	successive "Apply".

2000-11-15  Angus Leeming <a.leeming@ic.ac.uk>

	* ANNOUNCE: corrected a spelling mistake.

	* src/tabular.C (OldFormatRead): variable "h" was set but never used.
	Removed.

2000-11-15  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/kbsequence.C (addkey): use a vector as per Andre Poenitz patch.

	* lib/Makefile.am (dist-hook): also delete doc/.cvsignore from
	distdir.

	* src/support/lyxfunctional.h: make back_insert_fun_iterator(s)
	match the requirements from the standard better. This is required
	to work with gnu libstdc++-v3

	* src/frontends/xforms/FormPreferences.C: add explict pair
	arguments to browse calls. include support/lyxmanip.h remvoe
	extern fmt. whitespace changes. reorder variables in
	FormPreferences.h, to match initalizaton order.

	* several files: constify more local variables.

	* src/buffer.C: remove some commented functions.

	* src/DepTable.C (remove_files_with_extension): temporary
	work around for gcc 2.97
	* src/filedlg.C (find): ditto
	* src/Variables.C (set): ditto
	* src/LyXAction.C (searchActionArg): ditto
	(retrieveActionArg): ditto

	* configure.in: check for mktemp too

	* UPGRADING: prepare for 1.1.6

	* Makefile.am (lgbtags): add backup tags for when etags are
	different than usual.

	* ANNOUNCE: prepare for 1.1.6

	* src/support/tempname.C (make_tempfile): new function, wrapper
	around mkstemp and mktemp. Only mkstemp has been tested.
	(tempName): call it.

2000-11-14  Rob Lahaye  <lahaye@postech.edu>

	* default.ui: capitalized some menu items to improve shortcuts.

2000-11-14  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/FormPreferences.C (ok): use AddName().

	* src/frontends/xforms/Dialogs.C: add "using" directive.

2000-11-13  Angus Leeming <a.leeming@ic.ac.uk>

	* src/filedlg.C (Select): highlight suggested file in browser, if
	it is present.

	* src/frontends/xforms/FormPreferences.[Ch]: re-written so that
	each tab folder is encapsulated in its own class.
	The Language keymaps are now chosen using a text input and a
	browser button, rather than a Combox.
	All the browser buttons are now functional, although LyXFileDlg
	still needs to be modified to make it straighhtforward to return a
	directory if that is what is desired.

	* src/frontends/xforms/forms/form_preferences.fd: use text input
	and browse button to input the Language keymaps. Add a few
	callbacks for the browse buttons.

2000-11-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/tempname.C (tempName): small changes to make it
	safer. remove the '.' before XXXXXX

	* src/support/filetools.C (TmpFileName): remove func
	(GetCWD): ditto

	* src/frontends/xforms/FormRef.C (FormRef): explicit call the bp
	* src/frontends/xforms/FormUrl.C (FormUrl): ditto
	* src/frontends/xforms/FormTabularCreate.C (FormTabularCreate): ditto
	* src/frontends/xforms/FormTabular.C (FormTabular): ditto

	* src/frontends/xforms/FormInset.h (FormInset): remove default for bp
	(FormCommand): ditto

	* src/frontends/xforms/FormGraphics.C (FormGraphics): explicit
	call the bp

	* src/frontends/xforms/FormError.C (FormError): use IgnorantPolicy
	for bp (this fixes a reproducible hard crash)

	* src/frontends/xforms/FormCopyright.C (FormCopyright): explicit
	call the bp

	* src/frontends/xforms/FormBase.h: make bp_ private
	(FormBaseBI): remove default for bp
	(FormBaseBD): ditto

	* src/frontends/xforms/Dialogs.C (Dialogs): use the old method it
	is safe enough.

	* src/frontends/xforms/Color.C (RGBColor): made several vars
	const, changed initialization of j to allow it to be const
	(HSVColor): similar

	* several files: added const to local variables.

	* src/lyx_cb.C: removed several function prototypes and moved them
	to lyx_cb.h
	(MenuWrite):
	(MenuWriteAs):
	(UpdateLayoutPreamble):
	(MenuLayoutSave):
	(MenuInsertLabel): add BufferView as arguemnt
	(LayoutsCB): make tmp const

	* src/layout_forms.h: regenerated

	* src/debug.C: add Debug::FILES
	(showLevel) (showTags): translate the desc

	* src/debug.h: add FILES as debug target

	* src/bufferlist.C: use current_view as an interim measure becuase
	of added arguments to MenuWrite and MenuWriteAs

	* forms/layout_forms.h.patch: make the patch more correct and more appalyable

	* config/lyxinclude.m4 (LYX_STD_COUNT): change test to not involve
	string.
	(LYX_PROG_CXX): change 2.97 rules to include the -f.. that
	libstdc++ is compiled with.

2000-11-13  José Abílio Matos <jamatos@fep.up.pt>

	* lib/layouts/docbook-book.layout
	* lib/layouts/docbook.layout
	* lib/layouts/linuxdoc.layout: No need for "dummy" paragraphs, now
	those paragraphs are expresse as SGML comments <!-- -->.

	* src/LaTeXFeatures.h
	* src/LaTeXFeatures.C (getIncludedFiles): takes a filename as
	parameter, this allows to express all the include files as relative
	paths to the master buffer. The verbatim insert works as the other
	include file modes.

	* src/buffer.C (sgmlOpenTag) (sgmlCloseTag): don't write if latexname
	is a SGML comment.
	(MakeLinuxdocFile) (MakeDocBookFile): included files are relative
	to master path.
	(MakeDocBookFile): top_element is always written. Some clean up, as
	sgmlOpenTag() and sgmlCloseTag() take care of the SGML comment case.

	* src/insets/insetinclude.C (Linuxdoc): Added verbatim file fix.
	(DocBook) added close tag to inlinegraphics trick for verbatim. Now
	a reference is written instead of the name.
	(Validate): use the relative path for the filename.

	* src/insets/insetlabel.C (DocBook): write end tag, for XML
	compatibility.

	* src/support/filetools.h
	* src/support/filetools.C (IsSGMLFilename): added.
	(BasePath): added.

2000-11-13  Miyata Shigeru  <miyata@kusm.kyoto-u.ac.jp>

	* development/OS2/quick_fix.patch:
	* lib/configure.cmd:
	* README.OS2: quick update to the OS/2 port.

2000-11-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/converter.C: add "using" directive.

	* src/frontends/xforms/FormPreferences.C: add "using" directive.
	(compare_converter): add "int" as return type.

	* src/frontends/xforms/Color.C: comment out FL_LIGHTER_COL1 here
	too.

2000-11-11  Angus Leeming <a.leeming@ic.ac.uk>

	* src/lyx_gui.C (create_forms): map the xform colours, should a
	mapping exist. Ie, call XformColor::read().

	* src/frontends/xforms/Color.[Ch] renamed struct RGB as RGBColor
	and struct HSV as HSVColor.
	(XformColor::read, XformColor::write) : new methods that
	input/output any changes to the cform GUI colors.

	* src/frontends/xforms/Dialogs.C: FORMS_H_LOCATION no longer
	included.

	* src/frontends/xforms/FormPreferences.C Lots of little changes
	associated with the changed name of the RGB and HSV structs. Can
	now save changes to xforms GUI to file. Commented out
	FL_LIGHTER_COL1 to allow compilation with xforms 0.88. It isn't
	used currently anyway.

2000-11-11  Dekel Tsur  <dekelts@tau.ac.il>

	* src/converter.C: A lot of changes:
	- It is no longer possible to choose between two or more ways to
	export to some format (the new code uses only the shortest path).
	However, it is still possible to choose between pdflatex/ps2pdf
	for  creating a PDF file, by defining two PDF formats: pdf & pdf2.
	- Added several methods that makes  the FormPreferences code simpler.
	- Changed the tokens $$FName and $$OutName to $$i and $$o.

	* src/exporter.C (Export): lyxrc.use_pdf is set before
	makeLaTeXFile is called. This works but not very nice.

	* src/frontends/xforms/FormPreferences.C: The formats/converters
	tabs are now fully functional.

	* src/buffer.C (getTocList): Add numbers to the captions.

	* lib/lyxrc.example: Removed fax section

	* src/support/rename.C (rename): Delete the old file if lyx::copy
	is called.

2000-11-13  Rob Lahaye <lahaye@postech.edu>

	* lib/ui/default.ui: minor polishing.

2000-11-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/Color.C: include <algorithm> and <cmath>
	headers.

	* lib/Makefile.am (DOCINST): do not install everything in the
	documentation directory.

2000-11-10  John Levon  <moz@compsoc.man.ac.uk>

	* src/bufferlist.C (newFile): set the filename to the constructed
	newfileXX.lyx

	* src/lyx_cb.C (MenuWriteAs): if a buffer is "unnamed", pass the
	constructed "newfileXX.lyx" name to the dialog

	* src/frontends/DialogBase.h: make update() non-abstract so
	KDE doesn't need to implement two update methods for every form

	* src/frontends/kde/Makefile.am: add missing xforms objects
	to compile again

	* src/frontends/kde/Dialogs.C: Add FormTabularCreate dialog

2000-11-09  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/Color.[Ch]: new files, defining the color
	structs RGB and HSV. May not be the best place for these files.
	Perhaps move them into src ?

	* src/frontends/xforms/Makefile.am: added new files.

	* src/frontends/xforms/forms/form_preferences.fd:
	* src/frontends/xforms/FormPreferences.[Ch]: bowed to reality and
	replaced all instances of "colour" with "color"!

	* src/frontends/xforms/forms/form_preferences.fd: modified Colors tab
	slightly yet again.

	* src/frontends/xforms/FormPreferences.[Ch]: functioning Colors
	tab. Can now alter the colors of the xform's GUI on the fly. With
	the aid of a single static Signal (see below), can "Apply" these
	changes to all currently open dialogs. (Well, to all of the NEW
	dialogs and to LyXView. The OLD dialogs are not yet redrawn.) ALL
	subsequently opened dialogs will, of course, also have the new
	color scheme. Cannot yet save (or load) the choices to file, so
	they are lost when exiting LyX.

	* src/frontends/Dialogs.h:
	* src/frontends/xforms/Dialogs.C (redrawGUI): new static Signal.
	Used to trigger a redraw of any dialogs connected to it because,
	for example, the GUI colours have been re-mapped.

	* src/frontends/xforms/FormBase.[Ch]:
	* src/frontends/xforms/FormDocument.[Ch]:
	* src/frontends/xforms/FormParagraph.[Ch]:
	* src/frontends/xforms/FormPreferences.[Ch]:
	* src/frontends/xforms/FormTabular.[Ch]: (redraw): new virtual
	method, to be connected to Dialogs::redrawGUI. Method must be
	virtual, because dialogs with tabbed folders need to redraw the
	forms of each tab folder.

	* src/LyXView.C (d-tor):
	* src/frontends/xforms/FormBase.C (d-tor): connected
	Dialogs::redrawGUI signal to redraw().

	* src/frontends/xforms/FormBase.C (~FormBaseBI, ~FormBaseBD):
	removed Assert, because it is identical to that in FormBase.

2000-11-10  Rob Lahaye <lahaye@postech.edu>

	* lib/ui/default.ui: minor polishing.

2000-11-10  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (resizeLyXText): check !cache[bv]
	(deleteLyXText): ditto

	* src/insets/insettabular.C (InsetButtonPress): don't clear the
	selection on mouse-button-3.

	* src/insets/insettabular.h: new function clearSelection(), use this
	functions inside insettabular.C.

	* src/insets/insettabular.C (TabularFeatures): clear the selection
	on remove_row/column.

	* src/insets/inset.C (scroll): fixed some scroll stuff.

	* src/insets/insettabular.C (draw): fixed another minor draw problem.

2000-11-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/CREDITS: add Yves Bastide

2000-11-03  Yves Bastide  <stid@libd-pc11.univ-bpclermont.fr>

	* config/lyxinclude.m4 (LYX_CXX_GLOBAL_CSTD): new function to
	check whether C library functions are in the global namespace.

	* configure.in: calls it.

	* src/support/lstrings.C: #ifndef CXX_GLOBAL_CSTD instead of
	#ifndef __GLIBCPP__.

2000-11-08  Dekel Tsur  <dekelts@tau.ac.il>

	* src/frontends/xforms/FormPreferences.C (updateLanguage): Check
	iterators to prevent crash.

2000-11-08  Angus Leeming <a.leeming@ic.ac.uk>

	* src/converter.h (getprettyname, getFromToPrettyname): new methods.

	* src/frontends/xforms/xform_macros.h (C_PREPOSTHANDLER): new macro
	shortcut for xforms CB to the preemptive or post-handler function.

	* src/frontends/xforms/forms/form_preferences.fd (form_preferences):
	removed the HIDDEN_TIMER as it's no longer used.
	Various other small changes.

	* src/frontends/xforms/FormPreferences.[Ch]: removed timer. Use a
	preemptive handler to obtain feedback, rather than the post-handler.
	(ColoursLoadBrowser): find "black" and "white" based on RGB values
	rather than name.
	Formats tab is now complete. Converters tab is nearly so.

2000-11-09  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (~InsetText):
	(clear):
	(Read):
	(SetParagraphData): set cache.second to 0 after deleting it!
	(getLyXText): check if cache.second is not 0 if finding it.

2000-11-08  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/FormPreferences.C (ColoursLoadBrowser): use
	lyxlex to parse the rgb.txt file.

	* src/lyxlex.[Ch]:
	* src/lyxlex_pimpl.[Ch]: implement setCommentChar method, to
	replace the default '#' comment character.

	* src/support/tempname.C: add "using" directive
	* src/frontends/ButtonPolicies.C: ditto.

	* src/support/filetools.C (DirList): add an explicit cast to avoid
	a compile error (probably not the right fix)

2000-11-08  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/filetools.C (DirList): implement using system functions

	* src/support/tempname.C: new file

	* src/support/Makefile.am (libsupport_la_SOURCES): add tempname.C

	* src/insets/insetexternal.C (InsetExternal): use lyx::tempName

	* src/graphics/GraphicsCacheItem_pimpl.C (renderXPM): use
	lyx::tempName

	* src/frontends/xforms/ButtonController.C: new file

	* src/os2_defines.h: remove getcwd define

	* src/lyxvc.C: include support/lyxlib.h
	(showLog): use lyx::tempName

	* src/lyx_cb.C: comment out includes that we don't need
	(AutoSave): use lyx::tempName

	* src/filedlg.C: include support/lyxlib.h
	(Reread): use lyx::getcwd

	* src/converter.C: include support/filetools.h
	(add_options): change to static inline, make tail const
	(Add): make old_viewer const
	(GetAllFormats): make it a const method, use const_iterator
	(enable): make static inline
	(SplitFormat): make using_format const

	* src/LaTeX.C (run): use lyx::getcwd

	* configure.in: check for mkstemp as well

2000-11-07  Angus Leeming <a.leeming@ic.ac.uk>

	* src/converter.[Ch] (GetAllCommands): new method.

	* src/support/filetools.[Ch] (DirList): new method.

	* src/frontends/xforms/FormPreferences.C: started (just!) adding
	functionality to the converters tab.
	The formats tab is now nearly complete.
	The kbmap choices in Languages tab now display the contents of
	system_lyxdir/kbd/*.kmap in readable form.

	* src/frontends/xforms/FormPreferences.h: made struct RGB private.
	Moved some variables into the class.

	* src/frontends/xforms/forms/form_preferences.fd: Revert colour of
	inactive tab folder to FL_COL1. Haven't yet worked out how to change
	colour of active folder to lighter grey instead. Any takers?
	(form_colours): added an "Apply" button.
	(form_converters): added a "Flags" input field.
	(form_formats): added a "Shortcut" input field. Note that we can't use
	names such as "input_shortcut" as this buggers up the sed script stuff.

2000-11-07  Angus Leeming <a.leeming@ic.ac.uk>

	* src/LaTeXLog.C:
	* src/LyXSendto.C:
	* src/credits.C:
	* src/filedlg.C:
	* src/intl.C:
	* src/lyx_cb.C:
	* src/lyx_sendfax_main.C:
	* src/lyxfr0.C:
	* src/lyxvc.C:
	* src/spellchecker.C:
	* src/insets/figinset.C:
	* src/insets/insetbib.C:
	* src/insets/insetexternal.C:
	* src/insets/insetinclude.C:
	* src/insets/insetinfo.C:
	* src/mathed/math_panel.C:
	use FL_PLACE_MOUSE | FL_FREE_SIZE, FL_TRANSIENT in fl_show_form(), so
	all "daughter" dialogs now have identical "feel".

2000-11-07  Angus Leeming <a.leeming@ic.ac.uk>

	* src/lyx_gui_misc.[Ch] (IgnoreCloseBoxCB): removed as it's no longer
	used (and was only used in one place prior to this patch. Incorrectly!)

	* src/frontends/xforms/FormDocument.C: changed some instances of
	FL_RETURN_ALWAYS to FL_RETURN_CHANGED as I think that this makes more
	sense. Also added fl_set_input_return() for class_->input_doc_extra and
	for options_->input_float_placement. This fixes a bug reported by
	Rob Lahaye.

	* src/frontends/xforms/FormGraphics.[Ch] (free): removed. Placed
	functionality into d-tor.

	* src/frontends/xforms/input_validators.c (fl_lowercase_filter): allow
	input of numerals also.

	* src/insets/insetinclude.C (Edit): use CancelCloseBoxCB in
	fl_set_form_atclose(). Can now close dialog from window manager,
	fixing a bug reported by Rob Lahaye.

2000-11-06  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/forms/form_preferences.fd: Inactive tab folders
	are no longer dark. Haven't yet worked out how to lighten the colour of
	the active tabfolder. Any ideas anybody?
	Adjusted Colours tab a little.
	Added Shortcut field to converters tab. Note that we can't create an
	fdesign label like "input_shortcut" as this buggers up the sed-script
	stuff.

	* src/frontends/xforms/FormPreferences.[Ch]:
	(feedback): fixed crash due to to ob=0.
	(LanguagesXXX): the kbmap choices now contain the files
	sytem_lyxdir/kbd/*.kmap. I think that these choices should eventually
	be replaced by an input with a file browse button, but since the browse
	buttons don'y yet work, this'll do for the moment.
	(FormatsXXX): think that this is now nearly fully functional.
	Some points/questions though:
	1. Does "Apply" remove formats if no longer present?
	2. I think that the browser should list the GUI names rather than the
	   format names.
	3. Must ensure that we can't delete Formats used by an existing
	   Converter.

	* src/support/filetools.[Ch] (DirList): new function. Not at all sure
	if this is the best way to do this.

2000-11-07  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/reLyX/acinclude.m4 (RELYX_CHECK_ERRORS): remove useless message.

	* lib/configure.m4 (latex_to_html_command): avoid spaces around =
	for variable assignment.

2000-11-07 Rob Lahaye <lahaye@postech.edu>

	* src/lib/ui/default.ui: added sub/superscripts to menu as
	Insert->Special characters  and  cleaned-up the file a bit

2000-11-07  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/FormPreferences.C (feedback): make sure
	ob isn't 0 before using it.  See comments in function.

	* src/frontends/xforms/forms/fdfixc.sed: tiny spacing fix.

	* src/frontends/xforms/form_*.C: regenerated

2000-11-07  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/LaTeX.C (deplog): change reg1 to handle (/.../.../fil.sty)

	* config/lyxinclude.m4 (LYX_PROG_CXX): remove -fno-rtti when
	compiling with gcc-2.96

2000-11-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/lyxstring.C: add a couple "using" directives.

	* src/frontends/xforms/FormPreferences.C (ColoursLoadBrowser): add
	a .c_str() here too for good measure.
	* src/Spacing.C (set): ditto.
	* src/lyxfunc.C (Dispatch): ditto.

	* src/insets/insettabular.C (copySelection): change .str() to
	.str().c_str() to fix problems with lyxstring.
	* src/support/filetools.C (GetFileContents): ditto.
	* src/buffer.C (asciiParagraph): ditto.
	* src/paragraph.C (String): ditto.

	* lib/bind/fi_menus.bind: change symbol-insert to math-insert.
	* lib/bind/sciword.bind: ditto.

	* src/LyXAction.C (init): remove "symbol-insert" function, which
	shared LFUN_INSERT_MATH with "math-insert".

	* lib/configure.m4: == is not a valid operator for command test.

	* src/lyxrc.C: add using directive.

	* src/converter.h: add std:: qualifier.

2000-11-03   Dekel Tsur  <dekelts@tau.ac.il>

	* src/converter.[Ch] and other files: Change the Format class to a
	real class, and create two instances: formats and system_format.

	* src/lyxrc.C (output): Output the difference between formats and
 	system_formats.

	* src/frontends/xforms/FormPreferences.C (input): Simplify.
	(buildFormats): Insert formats into browser.
	(inputFormats): Made the browser and add button functional.
	(applyFormats): Update formats from format_vec.

	* src/converter.C: Changed all (*it). to it->
	(Format::dummy): New method.
	(Format::importer): New format flag.
	(Formats::GetAllFormats): New method.
	(Formats::Add): Delete format from the map if prettyname is empty.
	(Converter::Convert): Print an error message if moving the file fails.
	(Converter::GetReachableTo): New method

	* src/MenuBackend.[Ch]: Add support for importformats tag.

	* src/support/rename.C (rename): Call to lyx::copy if ::rename fails.

	* lib/configure.m4: Add word->tex and ps->fax converters.

	* lib/ui/default.ui: Use ImportFormats on file->import menu.
	Return fax to file menu.

	* NEWS: Updated.

2000-11-04  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/frontends/xforms/FormPreferences.h (operator=): move out of RGB
	(operator!): ditto

	* src/frontends/xforms/FormPreferences.C (WriteableFile): simplify
	the use of FileInfo

	* src/lyxfunc.C (processKeyEvent): removed

	* src/bufferlist.C (emergencyWrite): removed the out commented
	emergency write code.

	* src/Makefile.am (lyx_main.o): add dep for commandtags.h

	* src/LyXView.[Ch]: remove the outcommented raw_callback code

	* many files: change formatting to be a bit more uniform for
	if,while,for,switch statements, remove some parantesis not needed.


2000-11-03  John Levon  <moz@compsoc.man.ac.uk>

	* config/kde.m4: make config more robust when KDEDIR is set

2000-11-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/Toolbar_pimpl.C: do not crash if mathed has
	not returned a pixmap for "math-insert".

	* src/LyXAction.C (init): sort the entries a bit.

2000-11-03  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.h: added fixed number to update codes so
	that update is only in one direction.

	* src/insets/insettabular.C (UpdateLocal): modified a bit don't think
	it matters.

	* src/insets/insettext.C (InsetButtonPress): set the_locking_inset
	before call to edit because of redraw.

	* src/insets/insetcollapsable.C (draw): fixed clearing too much.

2000-11-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/ui/default.ui: Populate "edit_float" menu

	* src/lyxfunc.C (Dispatch): implement LFUN_FLOATSOPERATE.

	* src/LyXAction.C (init): add new entry LFUN_FLOATSOPERATE, name
	"floats-operate". The name is ugly (and the func also), but this
	is just a band-aid until we switch to new insets.

2000-11-03  Rob Lahaye  <lahaye@postech.edu>

	* lib/ui/default.ui: update again the menu layout (fix some
	shortcuts).

2000-11-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/MenuBackend.h (fulllabel): new method.

	* src/MenuBackend.C (checkShortcuts): new method. Checks whether
	the menu shortcuts of a menu are unique and whether they
	correspond to a letter of the label.
	(expand): call checkShortcuts when debugging.

2000-11-03  Andre Poenitz  <poenitz@HTWM.De>

	* src/insets/insettext.C (InsetButtonPress): shut off warning.

2000-11-02  Lior Silberman  <lior@Princeton.EDU>

	* lib/examples/*.lyx : '\language default' => '\language english'

	* lib/examples/it_splash.lyx : except where it should be italian

	* lib/templates/*.lyx : the same

	* doc/*.lyx* : the same

2000-11-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/bind/menus.bind: remove the Layout menu entries, which I
	somehow forgot earlier.

2000-11-03  Rob Lahaye  <lahaye@postech.edu>

	* lib/ui/old-default.ui: keep the old one here for reference (to
	be deleted later).

	* lib/ui/default.ui: update the menu layout

2000-11-02  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormCitation.C: made use of ButtonController.
	Can now Apply to different insets without closing the dialog.

	* src/frontends/xforms/FormPreferences.C: new Colour and Format tabs.
	Can't actually DO anything with them yet, but I'd like a little
	feedback.

	* src/frontends/xforms/input_validators.[ch]
	(fl_lowercase_filter): new.

2000-10-27   Dekel Tsur  <dekelts@tau.ac.il>

	* src/mathed/formulamacro.h (LyxCode) Return MATHMACRO_CODE instead
	of MATH_CODE. This fixes a bug with math-macros in RTL text.

	* src/text.C (PrepareToPrint): Show math-macros block aligned.

2000-11-02  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (LocalDispatch): return a DISPATCHED_NOUPDATE
	on char insertion as it has already be updated by bv->updateInset().

	* src/insets/insettabular.C (UpdateInsetInInset): update the inset
	if an inset inside was updated.

	* lib/configure.cmd: commented out fax-search code

2000-11-01  Yves Bastide  <stid@acm.org>

	* src/tabular.C (OldFormatRead): set tabular language to the
	document's one.

2000-11-02  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/reLyX/MakePreamble.pm (translate_preamble): fix reading of
	class names with non-letter characters (from Yves Bastide).

	* lib/ui/default.ui: change Item to OptItem in import menu.
	Comment out fax stuff.

	* lib/configure.m4: comment out fax-related stuff.

2000-10-31  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/xform_helpers.[Ch]: new files. Repository for
	useful xforms helper functions. At present contains only formatted().
	Input a string and it returns it with line breaks so that in fits
	inside the label.

	* src/frontends/xforms/Makefile.am: add new files.

	* src/lyxrc.[Ch] (getDescription): new name for getFeedback.
	* src/lyxrc.C (getDescription): Removed '\n's from strings. Corrected
	punctuation.

	* src/frontends/xforms/FormPreferences.[Ch]:
	* src/frontends/xforms/forms/form_preferences.fd: No new functionality
	but lots of little clean ups. Removed enum State. Make use of
	formatted(). Constify lots of methods. Perhaps best of all: removed
	requirement for that horrible reinterpret_cast from pointer to long in
	feedbackPost().

2000-11-02  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyxlookup.C: include FORMS_H_LOCATION to get at FL_REVISION,
	conditionalize build on xforms < 0.89

	* src/lyx_gui.C (LyXGUI): only close lyxlookup if not xforms 0.89

	* src/lyxfunc.C (getStatus): commenout LFUN_FAX

	* src/LyXAction.C (init): comment out fax

	* src/lyxrc.h: comment out the fax enums
	comment out the fax variables

	* src/commandtags.h: comment out LFUN_FAX

	* src/lyxrc.C: disable fax variables.
	(read): disable parsing of fax variables
	(output): disable writing of fax variables
	(getFeedback): now description for fax variables

	* src/lyxfunc.C: comment out MenuFax
	(Dispatch): disable LFUN_FAX

	* src/lyx_cb.C (MenuFax): comment out

	* src/WorkArea.C: add <cctype>
	(work_area_handler): better key handling, should be ok now.
	for accented chars + etc

	* src/Makefile.am (lyx_SOURCES): remove lyx_sendfax.C
	lyx_sendfax.h and lyx_sendfax_man.C

	* src/LyXView.C: don't include lyxlookup.h when using xforms 0.89
	(show): don't call InitLyXLookup when using xforms 0.89

2000-11-01  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/trans.C (AddDeadkey): better fix, the other one could crash...

	* src/support/filetools.C (GetFileContents): close to dummy change

2000-10-31  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/trans.C (AddDeadkey): workaround stupid compilers.

2000-10-31  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/FormDocument.C (class_update): fix setting
	of two-sided document.

2000-10-31  Juergen Vigna  <jug@sad.it>

	* src/WorkArea.C (work_area_handler): honor xforms 0.88 defines.

	* src/insets/insettabular.C (ActivateCellInset): passed the wrong
	xposition to the Edit call.

2000-10-31  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/trans.C (AddDeadkey): cast explicitly to char.

2000-10-30  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/tabular.C (AsciiBottomHLine): simplify?
	(AsciiTopHLine): simplify?
	(print_n_chars): simplify
	(DocBook): remove most of the << endl; we should flush the stream
	as seldom as possible.
	(Latex): ditto
	(TeXBottomHLine): ditto
	(TeXTopHLine): ditto
	(Write): formatting
	(write_attribute): try a templified version.
	(set_row_column_number_info): lesson scope of variables

	* src/support/lstrings.h (tostr): new specialization of tostr

	* src/trans.C (AddDeadkey): slightly cleaner fix.

2000-10-28  Dekel Tsur  <dekelts@tau.ac.il>

	* src/frontends/xforms/Menubar_pimpl.C (add_toc): Replace '%' by
	'%%' in Toc menu labels.
	(add_toc2): ditto

	* src/insets/insetlatexaccent.C (draw): Correct rendering when
	font_norm is iso10646-1.

	* src/font.C (ascent): Fixed for 16bit fonts
	(descent,lbearing,rbearing): ditto

2000-10-30  Angus Leeming <a.leeming@ic.ac.uk>

	* src/lyxrc.C.[Ch]: moved LyXRCTags into public part of header file.
	(getFeedback): new static method.

	* src/frontends/xforms/FormPreferences.[Ch]: one or two new inputs.
	Now use combox rather than choice to display languages.
	Feedback is now output using a new timer callback mechanism, identical
	to that in Toolbar_pimpl. Individual messages obtained from lyxrc.

2000-10-30  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/minibuffer.C: fix for older compilers

2000-10-30  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (InsertInset): fixed this as the cursor
	has to be Left of the inset otherwise LyXText won't find it!

	* src/BufferView2.C (open_new_inset): delete the inset if it can
	not be inserted.

2000-10-30  Rob Lahaye  <lahaye@postech.edu>

	* lyx.man: fix typo.

2000-10-29  Marko Vendelin <markov@ioc.ee>
	* src/frontends/gnome/FormCitation.C
	* src/frontends/gnome/FormCitation.h
	* src/frontends/gnome/FormCopyright.C
	* src/frontends/gnome/FormCopyright.h
	* src/frontends/gnome/FormError.C
	* src/frontends/gnome/FormError.h
	* src/frontends/gnome/FormIndex.C
	* src/frontends/gnome/FormIndex.h
	* src/frontends/gnome/FormPrint.C
	* src/frontends/gnome/FormPrint.h
	* src/frontends/gnome/FormRef.C
	* src/frontends/gnome/FormRef.h
	* src/frontends/gnome/FormToc.C
	* src/frontends/gnome/FormToc.h
	* src/frontends/gnome/FormUrl.C
	* src/frontends/gnome/FormUrl.h
	* src/frontends/gnome/Menubar_pimpl.C
	* src/frontends/gnome/mainapp.C
	* src/frontends/gnome/mainapp.h
	* src/frontends/gnome/pixbutton.h: replacing NULL with 0 and
	changing update() to updateSlot() where appropriate

2000-10-27  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormPreferences.[Ch]:
	* src/frontends/xforms/forms/form_preferences.fd: added a Languagues
	tab.

2000-10-28  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (draw): fixed drawing bug.

	* src/insets/insettext.C (clear):
	(Read):
	(SetParagraphData): clearing the TEXT buffers when deleting the
	paragraphs used by it.

	* src/BufferView_pimpl.C (cursorNext): fixed PageDown problem.

	* src/trans.C (AddDeadkey): fixed bug in inizializing keymap array.

2000-10-27  Juergen Vigna  <jug@sad.it>

	* src/tabular.C (~LyXTabular): removed not needed anymore.

	* src/tabular.h: changed rowofcell and columnofcell to vector<int>
	(from Andre).

2000-10-27  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/Dialogs.h: remove hideTabular signal as it is no
	longer used.

	* src/frontends/xforms/FormRef.[Ch]: fix bug when setting the min
	size.

	* src/frontends/xforms/FormPreferences.[Ch]:
	* src/frontends/xforms/forms/form_preferences.fd: lots and lots!
	Reorganised as modules based on tabs. Much easier to follow the
	flow and to add new tabs. Added warning and feedback messages.
	Added new tabs.

2000-10-27  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/tabular.h (DocBook): add std:: qualifier.

2000-10-26  José Abílio Matos <jamatos@fep.up.pt>

	* src/buffer.h (SimpleDocBookOnePar): becomes public and const.
	* src/buffer.C (SimpleDocBookOnePar): this method goes const.

	* insettabular.h
	* insettabular.C (DocBook): uses the tabular methods to export
	docbook

	* src/insets/insettext.h
	* src/insets/insettext.C (DocBook): Implemented export for docbooc.

2000-10-26  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/frontends/ButtonPolicies.h (operator<<): reinsert for State
	and SMInput

	* src/lyxfunc.C (MenuNew): lessen the scope of fname
	moved misplaced AllowInput two lines up.

	* src/buffer.C (readFile): compare float with float, not with int

2000-10-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/minibuffer.C: add "using SigC::slot" statement.

2000-10-25  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/forms/README: updated section about make.

	* src/frontends/xforms/forms/form_*.fd: lots and lots of shortcuts.
	Tidied some forms up, made two of form_tabular's tabs more
	self-consistent, fixed Jean-Marc's size problem in form_preferences,
	fixed translation problem with "Column".

2000-10-25  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/minibuffer.h: use Timeout instead of the xforms timer
	object.
	(setTimer) rewrite for the Timeout, change to unsigned arg
	(set): change to unsigned timer arg
	(TimerCB): remove

	* src/minibuffer.C (TimerCB): removed func
	(C_MiniBuffer_TimerCB): removed func
	(C_MiniBuffer_ExecutingCB): rewrite to not depend on TimerCB
	(peek_event): use a switch statement
	(add): don't use fl_add_timer.
	(Set): rewrite to use the Timeout
	(Init): ditto

	* src/Timeout.[Ch] (setType): return a Timeout &
	(setTimeout): ditto, change to unsigned arg for timeout

2000-10-25  Dekel Tsur  <dekelts@tau.ac.il>

	* src/mathed/formula.C (mathed_string_width): Use string instead
	of a constant size char array.

2000-10-25  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/frontends/ButtonPolicies.h: remove the LOstream and remove
	the two recently added operator<< for SMInput and State.

	* src/frontends/ButtonPolicies.C (PreferencesPolicy): cast
	SMI_TOTAL to int.
	(OkCancelPolicy): ditto
	(OkCancelReadOnlyPolicy): ditto
	(NoRepeatedApplyReadOnlyPolicy): ditto
	(OkApplyCancelReadOnlyPolicy): ditto
	(OkApplyCancelPolicy): ditto
	(NoRepeatedApplyPolicy): ditto

2000-10-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/ButtonPolicies.h: include "support/LOstream.h" and
	add the usual std:: qualifiers.

2000-10-25  Juergen Vigna  <jug@sad.it>

	* src/screen.C (ShowManualCursor): fixed another uint -> int problem.

2000-10-25  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/filetools.C (MakeRelPath): change some types to
	string::size_type

	* src/frontends/ButtonPolicies.h (operator<<): new operator for
	ButtonPolicy::SMInput and ButtonPolicy::State.

	* src/FontLoader.C (reset): small cleanup
	(unload): small cleanup

	* src/FontInfo.C (getFontname): initialize error to 10000.0

2000-10-24  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormPreferences.[Ch]:
	* src/frontends/xforms/forms/form_preferences.fd: added spell checker,
	TeX encoding and default paper size sections.

2000-10-24  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/frontends/xforms/FormTabularCreate.C: add missing #pragma
	implementation

	* src/frontends/xforms/FormError.C (disconnect): use erase() to
	make the message_ empty.
	(FormError): don't initialize message_ in initializer list.

2000-10-24  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormInset.[Ch]: Aieeeeee! Ok, I'm an idiot.

2000-10-24  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/kbd/latvian.kmap: new file from Janne Pänkälä (epa@iki.fi)

2000-10-24  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/kde/*data.[Ch]: _("") is not
	allowed

2000-10-24  Angus Leeming <a.leeming@ic.ac.uk>

	* src/buffer.C: removed redundant using directive.

	* src/frontends/DialogBase.h: revert to original definition of
	update().

	* src/frontends/xforms/Dialogs.C (c-tor): splitting the tabular
	stuff into two classes, one for each dialog, requires a new
	element in the dialogs vector, FormTabularCreate.

	* src/frontends/xforms/FormXXX.[Ch] (update): revert to original
	definition.

	* src/frontends/xforms/FormBase.[Ch] (FormBaseBD::updateSlot): new
	method. Continues Allan's idea, but means that derived classes
	don't need to worry about "update or hide?".

	* src/frontends/xforms/FormError.C (showInset): add connection
	again ;-)

	* src/frontends/xforms/FormTabular.[Ch]: split into two classes,
	one for each dialog. FormTabular now contains main tabular dialog
	only.

	* src/frontends/xforms/FormTabularCreate.[Ch]:
	* src/frontends/xforms/forms/form_tabular_create.fd: the create
	dialog.

	* src/frontends/xforms/FormGraphics.[Ch]:
	* src/frontends/xforms/forms/form_graphics.fd
	* src/frontends/xforms/FormTabular.[Ch]:
	* src/frontends/xforms/forms/form_tabular.fd: made daughter
	classes of FormInset.

	* src/frontends/xforms/forms/fdfix.sh: small fix. Can now create
	class names properly. Eg, form_my_new_dialog -> FormMyNewDialog.

	* src/frontends/xforms/Makefile.am:
	* src/frontends/xforms/forms/makefile: added new files.

	* src/insets/insettabular.[Ch]: removed (Dialogs *) member
	variable. added Signal0 hide signal, in keeping with other GUI-I
	insets.

	* src/support/lstrings.h: removed redundant std:: qualifier as
	it's already declared in Lsstream.h.

2000-10-23  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/figinset.C (GhostscriptMsg): use DisplayString() to
	open a new display.
	(runqueue): ditto.

2000-10-24  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/tabular.C (Ascii): minimize scope of cell.

	* src/BufferView2.C (nextWord): return string() instead of 0;

2000-10-23  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/converter.h: add a std:: qualifier

2000-10-21  Dekel Tsur  <dekelts@tau.ac.il>

	* src/importer.[Ch]: New files. Used for importing files into LyX.

	* src/lyxfunc.C (doImport): Use the new Importer class.

	* src/converter.h: Add shortcut member to the Format class.
	Used for holding the menu shortcut.

	* src/converter.C and other files: Made a distinction between
	format name and format extension. New formats can be defined using
	the \format lyxrc tag.
	Added two new converter flags: latex and disable.

2000-10-20  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/lyxlib.h: unify namespace/struct implementation.
	Remove extra declarations.

	* src/support/chdir.C (chdir): remove version taking char const *
	argument.
	* src/support/rename.C: ditto.
	* src/support/lyxsum.C: ditto.

2000-10-19  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormBase.[Ch]:
	* src/frontends/xforms/FormXXX.[Ch] where XXX is a FormBase daughter:
	read the xforms manual to discover that fl_set_form_minsize()/maxsize()
	work only for the next call to fl_show_form(). The correct place to set
	them, therefore is in connect() immediately BEFORE fl_show_form(). Now
	done. FormBase also stores minw_, minh_ itself. All dialogs derived
	from FormBase have the minimum size set; no more stupid crashes with
	tabbed folders etc.

2000-10-20  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/ui/default.ui: fix shortcut for Insert->Include File.

2000-10-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/CREDITS: add Andre' Poenitz and Kornelia Pietsch

	* src/support/lyxlib.h: changed second argument of mkdir to
	unsigned long int (unsigned int would probably have been enough,
	but...). Removed <sys/types.h> header.
	* src/support/mkdir.C (mkdir): ditto.

	* NEWS: update.

2000-10-19  Juergen Vigna  <jug@sad.it>

	* src/lyxfunc.C (MenuNew): small fix (form John)

	* src/screen.C (Update): removed unneeded code.

	* src/tabular.C (Ascii): refixed int != uint bug!

	* src/support/lyxlib.h: added sys/types.h include for now permits
	compiling, but I don't like this!

2000-10-18  Juergen Vigna  <jug@sad.it>

	* src/text2.C (ClearSelection): if we clear the selection we need
	more refresh so set the status apropriately

	* src/insets/insettext.C (draw): hopefully finally fixed draw
	problems!

2000-10-12  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (draw): another small fix and make a block
	so that variables are localized.

2000-10-18  Angus Leeming <a.leeming@ic.ac.uk>

	* src/support/lstrings.C (lowercase, uppercase):
	use explicit casts to remove compiler warnings.

	* src/support/LRegex.C (Impl):
	* src/support/StrPool.C (add):
	* src/support/filetools.C (MakeAbsPath, NormalizePath, MakeRelPath)
	(AddPath, MakeDisplayPath):
	* src/support/lstrings.C (prefixIs, subst):
	use correct type to remove compiler warnings.

	* src/support/lstrings.[Ch] (countChar): returns string::size_type.

	* src/support/lyxlib.h:
	* src/support/mkdir.C (mkdir): change parameter to mode_t for
	portability and to remove compiler warning with DEC cxx.

	* src/support/FileInfo.[Ch] (flagRWX): ditto.

2000-10-18  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/minibuffer.C (peek_event): retun 1 when there has been a
	mouseclick in the minibuffer.

	* NEWS: updated.

2000-10-17  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/xforms/FormParagraph.C: more space above/below
	fixes

2000-10-17  Dekel Tsur  <dekelts@tau.ac.il>

	* src/lyxfunc.C (Dispatch): Call to showState() after insertion of
	a char only if real_current_font was changed.

2000-10-17  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* NEWS: update somewhat for 1.1.6

	* lib/ui/default.ui: clean up.

2000-10-17  Angus Leeming <a.leeming@ic.ac.uk>

	* lib/CREDITS: clean up

2000-10-16  Angus Leeming <a.leeming@ic.ac.uk>

	* src/combox.[Ch] (select): changed argument back to int
	* src/combox.C (peek_event): removed num_bytes as it is declared but
	never referenced.

	* src/frontends/xforms/FormDocument.C (class_apply, bullets_apply):
	modified calls to Combox::select() to remove warnings about type
	conversion.

	* src/insets/insetbutton.C (width): explicit cast to remove warning
	about type conversion.

	* src/insets/insetcite.C (getScreenLabel): use string::size_type not
	size_t.

	* src/insets/insettabular.[Ch]: variables inset_pos, sel_pos_start and
	sel_pos_end, refering to cursor position are changed to
	LyXParagraph::size_type.

	* src/insets/insettext.h (cpos): returns LyXParagraph::size_type,
	consistent with LyXCursor::pos().
	(inset_pos): changed to LyXParagraph::size_type for same reason.

	* src/insets/insettext.C (resizeLyXText): changed some temporary
	variables refing to cursor position to LyXParagraph::size_type.

2000-10-16  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/kde/<various>: The Great Renaming,
	add FormParagraph

2000-10-17  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/support/Makefile.am (EXTRA_DIST): re-fix.

2000-10-16  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/mathed/math_macro.C (MathMacroTemplate): initialize args to
	0 when there are no arguments.

2000-10-16  Angus Leeming <a.leeming@ic.ac.uk>

	* src/insets/insetbib.C: re-introduce current_view as a temporary fix
	to segfaults when pressing Ok in InsetBibtex dialog.

2000-10-16  Angus Leeming <a.leeming@ic.ac.uk>

	* forms/layout_forms.fd:
	* src/layout_forms.C (create_form_form_character): small change to use
	labelframe rather than engraved frame + text

	* src/lyx_gui.C (create_forms): initialise choice_language with some
	arbitrary value to prevent segfault when dialog is shown.

2000-10-16  Baruch Even  <baruch.even@writeme.com>

	* src/converter.C (runLaTeX, scanLog): Added a warning when there
	is no resulting file. This pertains only to LaTeX output.

2000-10-14  Dekel Tsur  <dekelts@tau.ac.il>

	* src/text.C (Backspace): Make sure that the row of the cursor is
	rebreaked.

	* src/lyxfunc.C (Dispatch): Call to showState() after insertion of
	a char.

	* src/lyx_gui.C (init): Prevent a crash when only one font from
	menu/popup fonts is not found.

	* lib/lyxrc.example: Add an example for binding a key for language
	switching.

2000-10-15  Dekel Tsur  <dekelts@tau.ac.il>

	* src/converter.C (GetReachable): Changed the returned type to
	vector<FormatPair>
	(IsReachable): New method

	* src/MenuBackend.C (expand): Handle formats that appear more
	than once

2000-10-16  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/support/Makefile.am
	(libfrontendsupport_la_EXTRA_DIST): add LyXImage_X.[Ch] here and
	not in SOURCES.

	* lib/CREDITS: add Garst Reese.

	* src/support/snprintf.h: add extern "C" {} around the definitions.

	* src/cheaders/cstdarg: new header file, taken from GNU libstdc++.

2000-10-13  Angus Leeming <a.leeming@ic.ac.uk>

	* src/combox.[Ch]:
	* src/frontends/xforms/FormDocument.C:
	* src/frontends/xforms/Menubar_pimpl.C: small changes so that they
	compile without "conversion to integral type of smaller size"
	warnings.

2000-10-13  Dekel Tsur  <dekelts@tau.ac.il>

	* src/text.C (GetColumnNearX): Fixed disabled code.

2000-10-13  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* configure.in (CPPFLAGS): add snprintf and vsnprintf to
	AC_CHECK_FUNCS

	* src/support/snprintf.[ch]: new files

2000-10-13  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/kde/formprintdialog.C: add
	file browser for selecting postscript output

	* src/frontends/kde/formprintdialogdata.C:
	* src/frontends/kde/formprintdialogdata.h: re-generate
	correctly

2000-10-13  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/gnome/Makefile.am:
	* src/frontends/kde/Makefile.am:  FormCommand.C
	disappeared from xforms

	* src/frontends/kde/FormCitation.C:
	* src/frontends/kde/FormIndex.C: read-only
	correctness

2000-10-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/lyxfunctional.h (void_class_fun_t): fix name of
	constructor.

	* src/bufferlist.C: add using directive.

2000-10-13  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxfunctional.h: version of class_fun for void
	returns added, const versions of back_inseter_fun and compare_fun
	added.

2000-10-13  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormInset.C (showInset): fix typo.

2000-10-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* ChangeLog: cleanup.

	* lib/CREDITS: update to add all the contributors we've forgotten.
	I have obviously missed some, so tell me whether there were
	errors.

2000-10-13  Marko Vendelin <markov@ioc.ee>

	* src/frontends/gnome/FormCitation.C
	* src/frontends/gnome/FormCitation.h
	* src/frontends/gnome/FormError.C
	* src/frontends/gnome/FormIndex.C
	* src/frontends/gnome/FormRef.C
	* src/frontends/gnome/FormRef.h
	* src/frontends/gnome/FormUrl.C: hide dialogs on "update" signal

	* src/frontends/gnome/FormCitation.C
	* src/frontends/gnome/FormCopyright.C
	* src/frontends/gnome/FormError.C
	* src/frontends/gnome/FormIndex.C
	* src/frontends/gnome/FormRef.C
	* src/frontends/gnome/FormToc.C
	* src/frontends/gnome/FormUrl.C: replacing gettext N_() with _() where
	appropriate.

	* src/frontends/gnome/Menubar_pimpl.C
	* src/frontends/gnome/Menubar_pimpl.h: using new Menu::expand method to
	fill the menus.

2000-10-11  Baruch Even  <baruch.even@writeme.com>

	* src/minibuffer.h:
	* src/minibuffer.C: Changed the method ExecCommand to PrepareForCommand
	to convey its real action.

	* src/minibuffer.C (peek_event): Added action when mouse clicks to
	clear the minibuffer and prepare to enter a command.

	* src/mathed/formula.C (LocalDispatch): Changed to conform with
	the rename from ExecCommand to PrepareForCommand.
	* src/lyxfunc.C (Dispatch): ditto.

2000-10-11  Baruch Even  <baruch.even@writeme.com>

	* src/buffer.C (writeFile): Added test for errors on writing, this
	catches all errors and not only file system full errors as intended.

2000-10-13  Dekel Tsur  <dekelts@tau.ac.il>

	* src/lyx_gui.C (create_forms): better fix for crash with
	translated interface.

2000-10-12  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/kde/Makefile.am:
	* src/frontends/kde/FormCopyright.C:
	* src/frontends/kde/formcopyrightdialog.C:
	* src/frontends/kde/formcopyrightdialog.h:
	* src/frontends/kde/formcopyrightdialogdata.C:
	* src/frontends/kde/formcopyrightdialogdata.h:
	* src/frontends/kde/dlg/formcopyrightdialog.kdevdlg:
	* src/frontends/kde/dlg/formcopyrightdialog.dlg: convert
	copyright to use qtarch

2000-10-12  Dekel Tsur  <dekelts@tau.ac.il>

	* src/encoding.C (read): Fixed bug that caused an error message at
	the end of the file.

	* po/Makefile.in.in: Fixed rule for ext_l10n.h

	* lib/lyxrc.example: Fixed hebrew example.

2000-10-13  Allan Rae <rae@lyx.org>

	* src/frontends/xforms/FormPreferences.C (input): reworking the
	checking
	(build, update, apply): New inputs in various tabfolders

	* src/frontends/xforms/FormToc.C: use new button policy.
	* src/frontends/ButtonPolicies.h (class IgnorantPolicy): for
	dialogs that either can't use any existing policy or where it just
	doesn't care.

	* src/frontends/xforms/FormTabular.h: removed copyright notice that
	said it was mine.

	* src/lyx_gui_misc.[Ch] (updateAllVisibleBufferRelatedDialogs):
	added a bool parameter which is ignored.

	* src/buffer.C (setReadonly):
	* src/BufferView_pimpl.C (buffer):
	* src/frontends/kde/FormCopyright.h (update):
	* src/frontends/kde/FormCitation.[Ch] (update):
	* src/frontends/kde/FormIndex.[Ch] (update):
	* src/frontends/kde/FormPrint.[Ch] (update):
	* src/frontends/kde/FormRef.[Ch] (update):
	* src/frontends/kde/FormToc.[Ch] (update):
	* src/frontends/kde/FormUrl.[Ch] (update):
	* src/frontends/gnome/FormCopyright.h (update):
	* src/frontends/gnome/FormCitation.[Ch] (update):
	* src/frontends/gnome/FormError.[Ch] (update):
	* src/frontends/gnome/FormIndex.[Ch] (update):
	* src/frontends/gnome/FormPrint.[Ch] (update):
	* src/frontends/gnome/FormRef.h (update):
	* src/frontends/gnome/FormToc.[Ch] (update):
	* src/frontends/gnome/FormUrl.[Ch] (update):
	* src/frontends/xforms/FormGraphics.[Ch] (update): reflect new changes
	to updateBufferDependent and DialogBase

	* src/frontends/xforms/FormCitation.[hC]:
	* src/frontends/xforms/FormDocument.[hC]: also removed restore()
	* src/frontends/xforms/FormError.[Ch]:
	* src/frontends/xforms/FormGraphics.[Ch]:
	* src/frontends/xforms/FormIndex.[Ch]:
	* src/frontends/xforms/FormParagraph.[Ch]: also added missing "virtual"s
	and fixed readOnly handling.
	* src/frontends/xforms/FormPrint.[Ch]:
	* src/frontends/xforms/FormRef.[Ch]:
	* src/frontends/xforms/FormTabular.[Ch]:
	* src/frontends/xforms/FormToc.[Ch]:
	* src/frontends/xforms/FormUrl.[Ch]:
	* src/frontends/xforms/FormInset.[Ch]:
	* src/frontends/xforms/FormBase.[hC]: modifications to use the new
	form of updateBufferDependent.

	* src/frontends/xforms/FormBase.C (hide): only call disconnect()
	if form()->visible just in case someone does stuff to the form in a
	derived class.

	* src/frontends/DialogBase.h (enum): removed enum since we can now use
	the buttoncontroller for everything the enum used to be used for.
	(update) It would seem we need to force all dialogs to use a bool
	parameter or have two update functions.  I chose to go with one.
	I did try removing update() from here and FormBase and defining the
	appropriate update signatures in FormBaseB[DI] but then ran into the
	problem of the update() call in FormBase::show().  Whatever I did
	to get around that would require another function and that just
	got more confusing.  Hence the decision to make everyone have an
	update(bool). An alternative might have been to override show() in
	FormBaseB[DI] and that would allow the different and appropriate
	update signatures.

	* src/frontends/Dialogs.h (updateBufferDependent): now takes a bool.
	true == buffer change occurred.  I decided against using a default
	template parameter since not all compilers support that at present.

2000-10-11  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormBase.[Ch] (FormBase) : made less of a "swiss
	army knife" by removing functionality.
	(clearStore): removed. All such housekeeping on hide()ing the dialog
	is to be carried out by overloaded disconnect() methods.
	(dialogIsOpen): removed. Relevant only to Inset dialogs anyway, but
	superceded by Baruch's neat test (FormGraphics) to update an existing
	dialog if a new signal is recieved rather than block all new signals
	until it is closed.
	(cba_, parent_, updateOrHide): removed to new FormInset class. Relevant
	only to Inset dialogs.
	(FormBaseBI, FormBaseBD): new classes derived from FormBase for
	"Buffer Independent" and "Buffer Dependent" dialogs respectively.

	* src/frontends/xforms/FormCommand.[Ch]: renamed as FormInset.[Ch]

	* src/frontends/xforms/FormInset.[Ch] (FormInset): New class, defined
	as a base class to all inset dialogs. Used solely to connect/disconnect
	the Inset::hide signal and to define what action to take on receipt of
	a UpdateBufferDependent signal.
	(FormCommand): now derived from FormInset.

	* src/frontends/xforms/FormCitation.[Ch] (clearStore): reworked as
	disconnect().

	* src/frontends/xforms/FormCopyright.[Ch]:
	* src/frontends/xforms/FormPreferences.[Ch]:
	now derived from FormBaseBI.

	* src/frontends/xforms/FormDocument.[Ch]:
	* src/frontends/xforms/FormParagraph.[Ch]:
	* src/frontends/xforms/FormPrint.[Ch]:
	now derived from FormBaseBD.

	* src/frontends/xforms/FormError.[Ch]: now derived from FormInset.

	* src/frontends/xforms/FormCitation.[Ch]:
	* src/frontends/xforms/FormError.[Ch]:
	* src/frontends/xforms/FormRef.[Ch]:
	* src/frontends/xforms/FormToc.[Ch]:
	(clearStore): reworked as disconnect().

	* src/frontends/xforms/Makefile.am: removed FormCommand.[Ch], adding
	FormInset.[Ch].

2000-10-12  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/converter.C (runLaTeX): constify buffer argument
	(scanLog): ditto.

	* src/frontends/support/Makefile.am (INCLUDES): fix.

	* src/buffer.h: add std:: qualifier
	* src/insets/figinset.C (addpidwait): ditto
	* src/MenuBackend.C: ditto
	* src/buffer.C: ditto
	* src/bufferlist.C: ditto
	* src/layout.C: ditto
	* src/lyxfunc.C: ditto

2000-10-11  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxtext.h (bidi_level): change return type to
	LyXParagraph::size_type.

	* src/lyxparagraph.h: change size_type to
	TextContainer::difference_type. This should really be
	TextContainer::size_type, but we need currently to support signed
	values.

2000-10-11  Marko Vendelin <markov@ioc.ee>
	* src/frontends/gnome/FormError.h
	* src/frontends/gnome/FormRef.C
	* src/frontends/gnome/FormRef.h
	* src/frontends/gnome/FormError.C
	* src/frontends/gnome/Makefile.am
	* src/frontends/gnome/pixbutton.h: FormError and FormRef are ported
	to Gnome frontend. Both dialogs	use "action" area.

2000-10-12  Baruch Even  <baruch.even@writeme.com>

	* src/graphics/GraphicsCacheItem_pimpl.C:
	* src/graphics/Renderer.C:
	* src/graphics/XPM_Renderer.C: Corrected resolution of conflicts.
	It now compiles.

2000-10-12  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (draw): fixed drawing bug (specifically
	visible when selecting).

	* development/Code_rules/Rules: fixed some typos.

2000-10-09  Baruch Even  <baruch.even@writeme.com>

	* src/filedlg.C (GroupCache::find): de-inlined the function, makes
	compiling on egcs 1.1.2 possible.

	* src/filedlg.C (comp_direntry::operator() ): ditto.

2000-08-31  Baruch Even  <baruch.even@writeme.com>

	* src/lyx_cb.[hC] (ShowMessage): Result of the const-ificiation of the
	Buffer parameter.

	* src/frontends/xforms/FormGraphics.C: Changed the dialog to be
	transient it now only gets freed when the object is destructed.

2000-08-24  Baruch Even  <baruch.even@writeme.com>

	* src/frontends/FormGraphics.h:
	* src/frontends/FormGraphics.C: Changed to use ButtonController and
	ButtonPolicies.

2000-08-20  Baruch Even  <baruch.even@writeme.com>

	* src/insets/insetgraphics.C:
	(draw): Added messages to the drawn rectangle to report status.
	(updateInset): Disabled the use of the inline graphics,
	(draw): ditto.

2000-08-17  Baruch Even  <baruch.even@writeme.com>

	* src/frontends/support: Directory added for the support of GUII LyX.

	* src/frontends/support/LyXImage.h:
	* src/frontends/support/LyXImage.C:  Base class for GUII holding of
	images.

	* src/frontends/support/LyXImage_X.h:
	* src/frontends/support/LyXImage_X.C: Implementation of the Xlib
	version of LyXImage, this uses the Xlib Pixmap.

	* src/PainterBase.h:
	* src/PainterBase.C:
	* src/Painter.h:
	* src/Painter.C: Added a new method image() to draw LyXImage-s, a GUII
	replacement	to Pixmap.

	* src/insets/insetgraphics.h:
	* src/insets/insetgraphics.C:
	* src/graphics/GraphicsCacheItem.h:
	* src/graphics/GraphicsCacheItem.C:
	* src/graphics/GraphicsCacheItem_pimpl.h:
	* src/graphics/GraphicsCacheItem_pimpl.C: Changed to use LyXImage
	instead  of Pixmap.

	* src/graphics/GraphicsCacheItem.h:
	* src/graphics/GraphicsCacheItem.C: Added the Clone() method to create
	another copy of the object.

	* src/insets/insetgraphics.C (Clone): Changed to create a second copy
	of cacheHandle, this fixed a bug that sent LyX crashing.

	* src/graphics/XPM_Renderer.h:
	* src/graphics/XPM_Renderer.C:
	* src/graphics/EPS_Renderer.h:
	* src/graphics/EPS_Renderer.C: Changed to Unix LF from DOS CRLF.

2000-10-12  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyxfunc.C (processKeySym): only handle the
	lockinginset/inset stuff if we have a buffer and text loaded...

	* lib/Makefile.am (EXTRA_DIST): add encodings and languages

2000-10-12  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxfunctional.h: add operator= that takes a reference

	* src/lyxserver.C (mkfifo): make first arg const

	* src/layout.h: renamed name(...) to setName(...) to work around
	bugs in egcs.

	* src/buffer.C (setFileName): had to change name of function to
	work around bugs in egcs. (renamed from fileName)

2000-10-11  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/translator.h: move helper template classes to
	lyxfunctional.h, include "support/lyxfunctional.h"

	* src/support/lyxmanip.h: add delaration of fmt

	* src/support/lyxfunctional.h: new file
	(class_fun_t): new template class
	(class_fun): helper template function
	(back_insert_fun_iterator): new template class
	(back_inserter_fun): helper template function
	(compare_memfun_t): new template class
	(compare_memfun): helper template function
	(equal_1st_in_pair): moved here from translator
	(equal_2nd_in_pair): moved here from translator

	* src/support/fmt.C: new file
	(fmt): new func, can be used for a printf substitute when still
	using iostreams ex. lyxerr << fmt("Hello %s", "Jürgen") << endl;

	* src/support/StrPool.C: add some comments

	* src/support/Makefile.am (libsupport_la_SOURCES): add fmt.C and
	lyxfunctional.h

	* src/insets/figinset.C (addpidwait): use std::copy with
	ostream_iterator to fill the pidwaitlist

	* src/graphics/XPM_Renderer.C (renderImage): use ScreenOfDisplay

	* src/frontends/xforms/Toolbar_pimpl.C (updateLayoutList): remove
	c_str()

	* src/frontends/xforms/Menubar_pimpl.C: make several file scope
	variables static

	* src/frontends/xforms/FormParagraph.C (input): use lyx::atoi

	* src/frontends/xforms/FormDocument.C (build): remove c_str()
	(class_update): ditto
	(BulletPanel): ditto
	(CheckChoiceClass): move initialization of tc and tct

	* src/tabular.C: remove current_view
	(OldFormatRead): similar to right below [istream::ignore]

	* src/lyxlex_pimpl.C (next): add code for faster skipping of
	chars, unfortunately this is buggy on gcc 2.95.2, so currently
	unused [istream::ignore]

	* src/lyxfunc.C: include "support/lyxfunctional.h"
	(getInsetByCode): use std::find_if and compare_memfun

	* src/lyxfont.C (stateText): remove c_str()

	* src/lyx_main.C (setDebuggingLevel): make static
	(commandLineHelp): make static

	* src/lyx_gui_misc.C (getScreenDPI): use ScreenOfDisplay to get
	Screen* together with fl_get_display() and fl_screen

	* src/lyx_gui.C (LyXGUI): use ScreenOfDisplay to get Screen*
	togheter with fl_get_display() and fl_screen
	(create_forms): remove c_str()

	* src/layout.C: include "support/lyxfunctional.h"
	(hasLayout): use std::find_if and compare_memfun
	(GetLayout): use std::find_if and comapre_memfun
	(delete_layout): use std::remove_if and compare_memfun
	(NumberOfClass): use std:.find_if and compare_memfun

	* src/gettext.h: change for the new functions

	* src/gettext.C: new file, make _(char const * str) and _(string
	const & str) real functions.

	* src/font.C (width): rewrite slightly to avoid one extra variable

	* src/debug.C: initialize Debug::ANY here

	* src/commandtags.h: update number comments

	* src/combox.h (get): make const func
	(empty): make const
	(getline): make const

	* src/combox.C (input_cb): handle case where fl_get_input can
	return NULL

	* src/bufferlist.C: add <functional>, "support/lyxmanip.h",
	"support/lyxfunctional.h", remove current_view variable.
	(resize): use std::for_each with std::mem_fun
	(getFileNames): use std::copy with back_inserter_fun
	(getBuffer): change arg type to unsigned int
	(emergencyWriteAll): call emergencyWrite with std::for_each and
	class_fun.
	(emergencyWrite): new method, the for loop in emergencyWriteAll
	has been unrolled.
	(exists): use std::find_if with compare_memfun
	(getBuffer): use std::find_if and compare_memfun

	* src/buffer.h: add typedefs for iterator_category, value_type
	difference_type, pointer and reference for inset_iterator
	add postfix ++ for inset_iterator
	make inset_iterator::getPos() const

	* src/buffer.C: added support/lyxmanip.h
	(readFile): use lyxerr << fmt instead of printf
	(makeLaTeXFile): use std::copy to write out encodings

	* src/Painter.C (text): rewrite slightly to avoid extra font variable

	* src/MenuBackend.C (read): remove c_str(), as well as strdup and
	free and the char * temp.
	(hasMenu): use std::find_if and compare_memfun
	(getMenu): ditto

	* src/Makefile.am (lyx_SOURCES): added gettext.C

	* src/LyXAction.C (retrieveActionArg): clear the arg, use
	string::insert small change to avoid temporary

	* src/LColor.C (getGUIName): remove c_str()

	* several files: change all occurrences of fl_display to
	fl_get_display()

	* config/lyxinclude.m4 (LYX_PROG_CXX): add a 2.97 clause so
	that -pedantic is not used for gcc 2.97 (cvs gcc)

	* boost/Makefile.am: begin slowly to prepare for a real boost lib

2000-10-11  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/FormPreferences.C (input): template path must be
	a readable directory.  It doesn't need to be writeable.
	(build, delete, update, apply): New inputs in the various tabfolders

	* src/frontends/xforms/forms/form_preferences.fd:
	* src/frontends/xforms/FormPreferences.h: New tabfolder and added
	several new entries to existing folders.  Shuffled some existing stuff
	around.

	* src/frontends/xforms/forms/form_print.fd:
	* src/frontends/xforms/FormPrint.C (apply): rename unsorted to collated.
	Should probably rework PrinterParams as well.  Note that the switch to
	collated is effectively the same as !unsorted so changing PrinterParams
	will require a lot of fiddly changes to reverse the existing logic.

	* src/lyx_cb.C (TimerCB): cleaned up Angus's patch.

2000-10-10  Angus Leeming <a.leeming@ic.ac.uk>

	* src/lyx_cb.C (TimerCB): fix crash when fd_form_title doesn't exist.

2000-10-10  Allan Rae <rae@lyx.org>

	* src/lyxrc.[Ch]:
	* src/lyxfunc.C (Dispatch):
	* src/lyx_gui.C:
	* src/BufferView_pimpl.C (scrollCB): cursor_follows_scrollbar made a
	member of LyXRC

	* src/lyxrc.C (output): Only write the differences between system lyxrc
	and the users settings.

	* src/lyx_main.C:
	* src/lyxrc.[Ch]: commented out noncopyable so I can keep a
	system_lyxrc.
	I'll rewrite this later, after 1.1.6 probably, to keep a single
	LyXRC but two instances of a LyXRCStruct.

2000-10-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/Makefile.am (pkgdata_DATA): add encoding and languages

	* src/tabular.h: add a few std:: qualifiers.

	* src/encoding.C: add using directive.
	* src/language.C: ditto.

	* src/insets/insetquotes.C (Validate): use languages->lang()
	instead of only language.

2000-10-07  Dekel Tsur  <dekelts@tau.ac.il>

	* lib/languages: New file.

	* lib/encodings: New file.

	* src/language.C (Languages): New class.
	(read): New method. Reads the languages from the 'languages' file.

	* src/encoding.C (Encodings): New class.
	(read): New method. Reads the encodings from the 'encodings' file.

	* src/lyx_main.C (init): Call to LyXSetStyle() after languages
	initialization.

	* src/bufferparams.h and a lot of files: Deleted the member language,
	and renamed language_info to language

	* src/buffer.C (makeLaTeXFile): Use babel() instead of lang()
	* src/lyxfont.C (latexWriteStartChanges): ditto.
	* src/paragraph.C (validate,TeXOnePar): ditto.

	* src/lyxfont.C (update): Restored deleted code.

	* src/frontends/xforms/FormDocument.C (build): Made the combox taller

2000-10-10  Angus Leeming <a.leeming@ic.ac.uk>

	* src/BufferView_pimpl.C (buffer): cleaned up a little.

	* src/insets/figinset.[Ch]:
	* src/insets/insetinclude.[Ch]:
	* src/insets/insetinclude.[Ch]:
	* src/insets/insetparent.[Ch]:
	* src/insets/insetref.[Ch]:
	* src/insets/insettabular.[Ch] (c-tor): Buffer passed as const &.

	* src/insets/*.[Ch]:
	* src/mathed/formula.[Ch]:
	* src/mathed/formulamacro.C (Clone): passed Buffer const &.

	* src/buffer.C (parseSingleLyXformat2Token, readInset):
	* src/lyx_cb.C (FigureApplyCB):
	* src/lyxfunc.C (getStatus, Dispatch):
	* src/frontends/xforms/FormTabular.C:  use modified c-tors to some
	insets.

	* src/lyxfunc.C (Dispatch): string "ref" not used. Removed.

	* src/converter.[Ch] (Formats::View):
	* src/lyx_cb.[Ch] (ShowMessage): constify Buffer * parameter.

	* src/paragraph.C (CopyIntoMinibuffer, Clone): Insets::Clone() passed
	*current_view->buffer(). This will change later, but this patch is way
	big enough already!

2000-10-09  Juergen Vigna  <jug@sad.it>

	* src/text.C (GetRow): small fix.

	* src/BufferView_pimpl.C (cursorPrevious):
	(cursorNext): added LyXText parameter to function.

	* src/insets/insettabular.C (LocalDispatch): activate cell inset on
	keypress depending on cursor position.

2000-10-06  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (Ascii): finally call right ascii-function.
	(copySelection): redone this function and also copy ascii representa-
	tion to clipboard.

	* src/tabular.C (Ascii):
	(AsciiPrintCell):
	(AsciiBottomHLine):
	(AsciiTopHLine):
	(print_n_chars): new functions to realize the ascii export of tabulars.

2000-10-05  Juergen Vigna  <jug@sad.it>

	* src/lyx_gui_misc.C (updateAllVisibleBufferRelatedDialogs): small fix
	if we don't have a buffer.

2000-10-10  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/FormPreferences.[Ch] (hide): Fix the problem
	with closing dialog.  It seems that nested tabfolders require hiding
	of inner tabfolders before hiding the dialog itself.  Actually all I
	did was hide the active outer folder.

	* src/BufferView_pimpl.C (buffer): don't call updateBufferDependent
	unless there really is a buffer.  hideBufferDependent is called
	instead.

	* po/Makefile.in.in (POTFILES.in): one little tweak to ensure
	POTFILES.in stays in $(srcdir).

2000-10-09  Dekel Tsur  <dekelts@tau.ac.il>

	* lib/lyxrc.example: Few changes.

2000-10-05  Angus Leeming <a.leeming@ic.ac.uk>

	* src/BufferView_pimpl.C (buffer): only need one the
	updateBufferDependent signal to be emitted once! Moved to the end of
	the method to allow bv_->text to be updated first.

	* src/frontends/xforms/FormBase.[Ch]: replaced the two signals uSignal_
	and hSignal_ with Dialogs * and BufferDependency variables.
	New Buffer * parent_, initialised when the dialog is launched. Used to
	check whether to update() or hide() dialog in the new, private
	updateOrHide() method that is connected to the updateBufferDependent
	signal. Daughter classes dictate what to do using the
	ChangedBufferAction enum, passed to the c-tor.

	* src/frontends/xforms/FormCitation.C:
	* src/frontends/xforms/FormCommand.C:
	* src/frontends/xforms/FormCopyright.C:
	* src/frontends/xforms/FormDocument.C:
	* src/frontends/xforms/FormError.C:
	* src/frontends/xforms/FormIndex.C:
	* src/frontends/xforms/FormPreferences.C:
	* src/frontends/xforms/FormPrint.C:
	* src/frontends/xforms/FormRef.C:
	* src/frontends/xforms/FormToc.C:
	* src/frontends/xforms/FormUrl.C (c-tor): modified call to FormBase
	c-tor.

	* src/frontends/xforms/FormCommand.[Ch] (c-tor) passed a
	ChangedBufferAction enum.

	* src/frontends/xforms/FormParagraph.[Ch]
	* src/frontends/xforms/forms/form_paragraph.fd: now derived from
	FormBase.

2000-10-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/bind/cua.bind: fix a bit.
	* lib/bind/emacs.bind: ditto.

	* lib/bind/menus.bind: remove real menu entries from there.

	* src/spellchecker.C: make sure we only include strings.h when
	_AIX is defined.

2000-10-05  Dekel Tsur  <dekelts@tau.ac.il>

	* src/frontends/xforms/Menubar_pimpl.C (get_new_submenu): New
	function. It enlarges the maximum number of pup when needed.
	(add_toc2): Open a new menu if maximum number of items per menu has
	reached.

2000-10-05  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/kde/FormPrint.C: fix error reporting

	* src/frontends/xforms/FormDocument.C: fix compiler
	warnings

	* lib/.cvsignore: add Literate.nw

2000-10-05  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C
	* bufferview_funcs.[Ch]
	* lyxfont.[Ch]
	* text.C
	* text2.C: Add support for numbers in RTL text.

2000-10-06  Allan Rae  <rae@lyx.org>

	* po/Makefile.in.in (POTFILES.in, POTFILES): Fixed
	to be gettext.m4 friendly again.  ext_l10n.h is now
	generated into $top_srcdir instead of $top_builddir
	so that lyx.pot will be built correctly -- without
	duplicate parsing of ext_l10n.h.

2000-10-04  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/kde/FormCitation.C: make the dialog
	behave more sensibly

2000-10-03  John Levon  <moz@compsoc.man.ac.uk>

	* config/kde.m4: fix consecutive ./configure runs,
	look for qtarch, fix library order

	* src/frontends/kde/Makefile.am: tidy up,
	add Print dialog, add .dlg dependencies

	* src/frontends/kde/FormPrint.C:
	* src/frontends/kde/FormPrint.h:
	* src/frontends/kde/formprintdialog.C:
	* src/frontends/kde/formprintdialog.h:
	* src/frontends/kde/formprintdialogdata.C:
	* src/frontends/kde/formprintdialogdata.h:
	* src/frontends/kde/dlg/formprintdialog.dlg: add
	print dialog

	* src/frontends/kde/dlg/README: Added explanatory readme

	* src/frontends/kde/dlg/checkinitorder.pl: small perl
	script to double-check qtarch's output

	* src/frontends/kde/formindexdialog.C:
	* src/frontends/kde/formindexdialogdata.C:
	* src/frontends/kde/formindexdialogdata.h:
	* src/frontends/kde/dlg/formindexdialog.dlg: update
	for qtarch, minor fixes

2000-10-05  Allan Rae  <rae@lyx.org>

	* src/BufferView_pimpl.C (buffer): don't hide all buffer dependent
	dialogs when switching buffers update them instead.  It's up to each
	dialog to decide if it should still be visible or not.
	update() should return a bool to control visiblity within show().
	Or perhaps better to set a member variable and use that to control
	visibility.

	* lib/build-listerrors: create an empty "listerrors" file just to stop
	make trying to regenerate it all the time if you don't have noweb
	installed.

	* .cvsignore: ignore distdir and dist.tar.gz using rule lyx-*

	* po/Makefile.in.in (ext_l10n.h): added a rule to build
	$(top_builddir)/src/ext_l10n.h.  The rule has to go here because po/
	is built before src/ and ext_l10n.h isn't actually needed to build lyx.
	(POTFILES.in): added a rule to build POTFILES.in.  It is also now safe
	to rebuild POTFILES.in with scrap *.[hC] files in xforms/forms/.

	* autogen.sh: po/POTFILES.in and src/ext_l10n.h now generated by make.

2000-10-04  Angus Leeming <a.leeming@ic.ac.uk>

	* src/BufferView_pimpl.C (buffer): emit hideBufferDependent when
	deleting buffer. Closes all buffer-dependent dialogs.

	* src/frontends/xforms/FormBase.[Ch] (input): modified to pass
	FL_OBJECT * also.
	* src/frontends/xforms/FormCitation.[Ch]:
	* src/frontends/xforms/FormPreferences.[Ch]:
	* src/frontends/xforms/FormPrint.[Ch]:
	* src/frontends/xforms/FormRef.[Ch]:
	* src/frontends/xforms/FormUrl.[Ch]: ditto

	* src/frontends/xforms/FormDocument.[Ch]:
	* src/frontends/xforms/forms/form_document.C.patch:
	* src/frontends/xforms/forms/form_document.fd: all input callbacks now
	pass through a single input() function.

2000-10-04  John Levon  <moz@compsoc.man.ac.uk>

	* lib/build-listerrors: return status as OK

2000-10-04  Dekel Tsur  <dekelts@tau.ac.il>

	* lib/lyxrc.example: Updated to new export code

2000-10-04  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/mathed/math_parser.C (LexInitCodes): set lexcode of "@" to
	LexAlpha.

	* src/mathed/formula.C (LocalDispatch): add '@' as an LM_TC_VAR
	character.

	* lib/layouts/amsart.layout: include lyxmacros.inc, so that
	LyX-Code is defined.
	* lib/layouts/amsbook.layout: ditto.

	* boost/Makefile.am: fix typo.

	* src/frontends/xforms/Menubar_pimpl.C (create_submenu): use
	Menu::expand.
	(add_lastfiles): removed.
	(add_documents): removed.
	(add_formats): removed.

	* src/frontends/Menubar.C: remove useless "using" directive.

	* src/MenuBackend.h: add a new MenuItem constructor.

	* src/MenuBackend.[Ch] (Menu::expand): new method. Used in the
	xforms frontend.

2000-10-04  Allan Rae  <rae@lyx.org>

	* lib/Makefile.am (listerrors):
	* lib/build-listerrors: make $builddir != $srcdir compiles work again.
	I haven't got notangle installed so Kayvan please test. The output
	should end up in $builddir.  This also allows people who don't have
	noweb installed to complete the make process without error.

	* src/frontends/xforms/FormCommand.[Ch] (showInset):
	* src/frontends/xforms/FormError.[Ch] (showInset): fix warnings found
	by JMarc's picky compiler.

2000-10-03  Lars Gullik Bjønnes  <larsbj@lyx.org>


	* src/insets/insettabular.C (setPos): change for loop to not use
	sequencing operator. Please check this Jürgen.

	* src/frontends/xforms/Menubar_pimpl.C (makeMenubar): use "c"
	instead of 'c'
	* src/insets/insetcite.C (getScreenLabel): ditto
	* src/support/filetools.C (QuoteName): ditto
	(ChangeExtension): ditto

	* src/BufferView_pimpl.C (scrollCB): make heigt int

	* src/BufferView2.C (insertInset): comment out unused arg

	* boost/Makefile.am (EXTRADIST): new variable

2000-10-03  Dekel Tsur  <dekelts@tau.ac.il>

	* src/exporter.C (IsExportable): Fixed

	* lib/configure.m4: Small fix

2000-10-03  Dekel Tsur  <dekelts@tau.ac.il>

	* src/insets/insetbutton.C (width): Changed to work with no GUI.
	* src/insets/insetbib.C (bibitemWidest): ditto.
	* src/lyx_gui_misc.C (AskQuestion,AskConfirmation,askForText): ditto.

2000-10-03  Juergen Vigna  <jug@sad.it>

	* src/BufferView2.C (theLockingInset): removed const because of
	Agnus's compile problems.

	* src/insets/insettext.C (LocalDispatch): set the language of the
	surronding paragraph on inserting the first character.

	* various files: changed use of BufferView::the_locking_inset.

	* src/BufferView2.C (theLockingInset):
	(theLockingInset): new functions.

	* src/BufferView.h: removed the_locking_inset.

	* src/lyxtext.h: added the_locking_inset

	* src/BufferView_pimpl.C (checkInsetHit): y_tmp form uint to int.

	* src/insets/lyxinset.h: added bool to ShowInsetCursor definition.

2000-10-02  Angus Leeming <a.leeming@ic.ac.uk>

	* src/mathed/formula.C (IsMacro): declared but not referenced; removed.
	* src/mathed/math_cursor.C (IsAlpha): ditto.
	* src/mathed/math_inset.C (strnew): ditto.
	* src/mathed/math_iter.C: SizeFont declared but not referenced;removed.
	(IMetrics): cxp set but never used; removed.
	* src/insets/figinset.C (InitFigures): removed redundant for loop, now
	that the variable in question has been removed also!


	* src/insets/insetbib.[Ch]: remove need to store Buffer * owner by
	using the Buffer * passed to Latex(), using the BufferView * passed to
	bibitemMaxWidth() bibitemWidest() and by passing a Buffer* to getKeys()

	* src/insets/insetinclude.C: use the Buffer * passed to Latex(),
	Linuxdoc() and DocBook() rather than the stored Buffer * master.

	* src/lyxfunc.C (Dispatch): used new InsetBibtex c-tor
	* src/buffer.C (readInset): used new InsetBibtex c-tor
	* (getBibkeyList): used new InsetBibtex::getKeys

2000-10-01  Dekel Tsur  <dekelts@tau.ac.il>

	* lib/configure.m4
	* lib/build-listerrors
	* src/converter.C
	* src/exporter.C: Add literate programming support to the export code

	* src/buffer.C
	* src/lyx_cb.C: Remove old literate code.

	* src/lyxrc.[Ch]: Remove many obsolete (due to new export code)
	variables.

	* src/lyxfunc.C (getStatus): Use Exporter::IsExportable
	* src/converter.C (View, Convert): Use QuoteName.

	* src/insets/figinset.C (Preview): Use Formats::View.

	* lib/configure.m4: Add sgml->dvi converter to lyxrc.default

2000-10-02  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxfunc.C (Dispatch): move declaration of text variable at
	the top of the function, because compaq cxx complains that the
	"goto exit_with_message" when the function is disabled bypasses
	its initialization.
	(MenuNew): try a better fix for the generation of new file names.
	This time, I used AddName() instead of AddPath(), hoping Juergen
	will be happier :)

2000-10-03  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/forms/form_preferences.fd:
	* src/frontends/xforms/FormPreferences.[Ch]: redesign of dialog using
	nested tabfolders has begun.  The old "Miscellaneous" was renamed as
	"Look and Feel"->"General" but will need to be split up further into
	general output and general input tabs.  Current plan is for four outer
	tabfolders: "Look and Feel" for colours, bindings, fonts and other HCI
	stuff; "Inputs" for input and import configuration; "Outputs" for
	output and export configuration; and one more whatever is left over
	called "General".  The leftovers at present look like being which
	viewers to use, spellchecker, language support and might be better
	named "Support".  I've put "Paths" in "Inputs" for the moment as this
	seems reasonable for now at least.
	One problem remains: X error kills LyX when you close Preferences.

2000-10-02  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormBase.[Ch]: removed "meaningless" const.
	qualifier from form()
	* src/frontends/xforms/FormCitation.[Ch]:
	* src/frontends/xforms/FormCopyright.[Ch]:
	* src/frontends/xforms/FormDocument.[Ch]:
	* src/frontends/xforms/FormError.[Ch]:
	* src/frontends/xforms/FormIndex.[Ch]:
	* src/frontends/xforms/FormPreferences.[Ch]:
	* src/frontends/xforms/FormPrint.[Ch]:
	* src/frontends/xforms/FormRef.[Ch]:
	* src/frontends/xforms/FormToc.[Ch]:
	* src/frontends/xforms/FormUrl.[Ch]: ditto.

	* src/frontends/xforms/FormCitation.[Ch]:
	* src/frontends/xforms/FormIndex.[Ch]:
	* src/frontends/xforms/FormRef.[Ch]:
	* src/frontends/xforms/FormUrl.[Ch]: Renamed a few buttons, consistent
	with Allan's naming policy

	* src/frontends/xforms/FormCitation.C: some static casts to remove
	compiler warnings.

2000-10-02  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (LocalDispatch): fixed selection code,
	now you can type or do stuff inside the table-cell also when in dummy
	position, fixed visible cursor.

	* src/insets/insettext.C (Edit): fixing cursor-view position.

	* src/lyxfunc.C (Dispatch): use * text variable so that it can
	be used for equal functions in lyxfunc and insettext.

	* src/text.C (GetVisibleRow): fixed a small clear_area bug.

2000-10-02  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/gnome/FormCitation.h:
	* src/frontends/gnome/FormCopyright.h:
	* src/frontends/gnome/FormIndex.h:
	* src/frontends/gnome/FormPrint.h:
	* src/frontends/gnome/FormToc.h:
	* src/frontends/gnome/FormUrl.h:
	* src/frontends/kde/FormCitation.h:
	* src/frontends/kde/FormCopyright.h:
	* src/frontends/kde/FormIndex.h:
	* src/frontends/kde/FormRef.h:
	* src/frontends/kde/FormToc.h:
	* src/frontends/kde/FormUrl.h: fix remaining users of
	support/utility.hpp

2000-10-02  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/buffer.C (linuxDocHandleFootnote): remove const modifier
	from depth argument.
	(DocBookHandleCaption): ditto.
	(DocBookHandleFootnote): ditto.
	(SimpleDocBookOnePar): ditto.

	* src/frontends/xforms/FormDocument.h (form): remove extra
	FormDocument:: qualifier.

	* sigc++/macros/basic_signal.h.m4: remove erroneous virtual
	destructor.
	* sigc++/handle.h: ditto.

	* src/lyx_gui_misc.C: add "using" directive.

	* src/cheaders/cstddef: new file, needed by the boost library (for
	compaq cxx).

2000-10-02  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (SetFont): better support.

	* src/insets/insettabular.C (draw): fixed drawing of single cell.

	* src/screen.C (DrawOneRow): some uint refixes!

2000-10-02  Allan Rae  <rae@lyx.org>

	* boost/.cvsignore: ignore Makefile as well

	* src/lyxfunc.C (Dispatch): missing break; and moved the '}' for
	LFUN_UNKNOWN_ACTION: so it doesn't wrap around default:.

	* src/frontends/xforms/FormPreferences.[Ch] (restore): D'oh.
	Left this one out by accident.

	* src/frontends/xforms/FormBase.h (restore): default to calling
	update() since that will restore the original/currently-applied values.
	Any input() triggered error messages will require the derived classes
	to redefine restore().

	* src/frontends/xforms/FormDocument.C: initialize a few variables to
	avoid a segfault.  combo_doc_class is the main concern.

2000-10-01  Kayvan A. Sylvan  <kayvan@camel.internal.sylvan.com>

	* Simplify build-listerrors in view of GUI-less export ability!

2000-10-01  Dekel Tsur  <dekelts@tau.ac.il>

	* src/lyx_main.C (easyParse): Disable gui when exporting

	* src/insets/figinset.C:
	* src/LaTeX.C
	* src/converter.C
	* src/lyx_gui_misc.C
	* src/tabular.C: Changes to allow no-gui.

2000-10-02  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/utility.hpp: removed file
	* src/support/block.h: removed file

	* src/support/Makefile.am (libsupport_la_SOURCES): remove block.h
	and utility.hpp

	* src/mathed/formula.C: add support/lyxlib.h
	* src/mathed/formulamacro.C: ditto

	* src/bufferparams.h: use boost/array.hpp instead of support/block.h
	* src/lyxparagraph.h: ditto

	* src/Makefile.am (BOOST_INCLUDES): the boost include dir
	* src/frontends/Makefile.am (INCLUDES): ditto
	* src/frontends/gnome/Makefile.am (BOOST_INCLUDES): ditto
	* src/frontends/kde/Makefile.am (BOOST_INCLUDES): ditto
	* src/frontends/xforms/Makefile.am (BOOST_INCLUDES): ditto
	* src/graphics/Makefile.am (BOOST_INCLUDES): ditto
	* src/insets/Makefile.am (BOOST_INCLUDES): ditto
	* src/mathed/Makefile.am (BOOST_INCLUDES): ditto

	* src/BufferView.h: use boost/utility.hpp
	* src/LColor.h: ditto
	* src/LaTeX.h: ditto
	* src/LyXAction.h: ditto
	* src/LyXView.h: ditto
	* src/bufferlist.h: ditto
	* src/lastfiles.h: ditto
	* src/layout.h: ditto
	* src/lyx_gui.h: ditto
	* src/lyx_main.h: ditto
	* src/lyxlex.h: ditto
	* src/lyxrc.h: ditto
	* src/frontends/ButtonPolicies.h: ditto
	* src/frontends/Dialogs.h: ditto
	* src/frontends/xforms/FormBase.h: ditto
	* src/frontends/xforms/FormGraphics.h: ditto
	* src/frontends/xforms/FormParagraph.h: ditto
	* src/frontends/xforms/FormTabular.h: ditto
	* src/graphics/GraphicsCache.h: ditto
	* src/graphics/Renderer.h: ditto
	* src/insets/ExternalTemplate.h: ditto
	* src/insets/insetcommand.h: ditto
	* src/support/path.h: ditto

	* config/lyxinclude.m4 (LYX_PROG_CXX): change clause for 2.96
	and introduce clause for 2.97.

	* boost/libs/README: new file

	* boost/boost/utility.hpp: new file

	* boost/boost/config.hpp: new file

	* boost/boost/array.hpp: new file

	* boost/Makefile.am: new file

	* boost/.cvsignore: new file

	* configure.in (AC_OUTPUT): add boost/Makefile

	* Makefile.am (SUBDIRS): add boost

2000-10-01  Dekel Tsur  <dekelts@tau.ac.il>

	* src/support/lstrings.C (suffixIs): Fixed.

2000-10-01  Allan Rae  <rae@lyx.org>

	* src/PrinterParams.h: moved things around to avoid the "can't
	inline call" warning.

	* src/frontends/xforms/RadioButtonGroup.h: turned a comment
	into doc++ documentation.

	* src/frontends/xforms/FormCommand.[Ch]: support button policy

	* src/frontends/xforms/FormRef.C: make use of button controller
	* src/frontends/xforms/FormDocument.[Ch]: convert to use FormBase
	cleaned up button controller usage.
	* src/frontends/xforms/FormPreferences.[Ch]: convert to use FormBase
	* src/frontends/xforms/FormPrint.[Ch]: convert to use FormBase and
	use the button controller

	* src/frontends/xforms/forms/*.fd: and associated generated files
	updated to reflect changes to FormBase.  Some other FormXxxx files
	also got minor updates to reflect changes to FormBase.

	* src/frontends/xforms/FormBase.[Ch]: (ok, cancel): new
	(hide): made virtual.
	(input): return a bool. true == valid input
	(RestoreCB, restore): new
	(CancelCB, OKCB): renamed from HideCB and ApplyHideCB.
	Changes to allow derived dialogs to use a ButtonController and
	make sense when doing so: OK button calls ok() and so on.

	* src/frontends/xforms/ButtonController.h (class ButtonController):
	Switch from template implementation to taking Policy parameter.
	Allows FormBase to provide a ButtonController for any dialog.

	* src/frontends/xforms/FormPrint.C (connect): setup sizing at show-time
	Probably should rename connect and disconnect.
	(apply): use the radio button groups
	(form): needed by FormBase
	(build): setup the radio button groups

2000-09-29  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* several files: type changes to reduce the number of warnings and
	to unify type hangling a bit. Still much to do.

2000-09-29  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/images/*: rename a bunch of icons to match Dekel converter
	changes.

	* src/buffer.h (SimpleLinuxDocOnePar): remove const qualifier to
	last parameter.

	* src/frontends/xforms/FormBase.C (disconnect): remove bogus test.

	* sigc++/macros/basic_signal.h.m4: fix class Signal_ to have a
	virtual destructor
	* sigc++/handle.h: ditto for class Handle.

2000-09-27  John Levon  <moz@compsoc.man.ac.uk>

	* config/kde.m4: make Qt fail immediately if Qt2 is picked up

2000-09-28  Dekel Tsur  <dekelts@tau.ac.il>

	* src/intl.C (InitKeyMapper): Correct the value of n due to the
	removal of the "default" language.

	* src/combox.h (getline): Check that sel > 0

2000-09-29  José Abílio Matos <jamatos@fep.up.pt>

	* lib/examples/docbook_example.lyx
	* lib/examples/docbook_article.lyx: file renamed to avoid confusion.

	* lib/layouts/docbook-book.layout: new docbook book layout.

	* lib/layouts/linuxdoc.layout: LatexName of Style SGML is now dummy.

	* lib/layouts/manpage.layout: Same as above. Style SubSection removed.

	* src/insets/figinset.C (DocBook):fixed small typo.

	* src/insets/insetinclude.C (DocBook): new export for verbatim type.

	* src/insets/insetinclude.h: string include_label doesn't need to be
	mutable.

2000-09-29  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/FormBase.[Ch] (connect, disconnect): new.
	Allow derived type to control connection and disconnection from signals
	of its choice if desired.

2000-09-28  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (update): fixed cursor setting when
	the_locking_inset changed.
	(draw): made this a bit cleaner.
	(InsetButtonPress): fixed!

	* various files: added LyXText Parameter to fitCursor call.

	* src/BufferView.C (fitCursor): added LyXText parameter.

	* src/insets/insettabular.C (draw): small draw fix.

	* src/tabular.C: right setting of left/right celllines.

	* src/tabular.[Ch]: fixed various types in funcions and structures.
	* src/insets/insettabular.C: ditto
	* src/frontends/xforms/FormTabular.C: ditto

2000-09-28  Allan Rae  <rae@lyx.org>

	* src/paragraph.C (TeXOnePar): fixed output of '\n'.  The problem was
	that the #ifdef's had been applied to part of what should have been
	a complete condition.  It's possible there are other tests that
	were specific to tables that are also wrong now that InsetTabular is
	being used. Now we need to fix the output of '\n' after a table in a
	float for the same reason as the original condition:
	"don't insert this if we would be adding it before or after a table
	in a float.  This little trick is needed in order to allow use of
	tables in \subfigures or \subtables."
	Juergen can you check this?

2000-09-27  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/insets/insettext.C (Ascii): return numer of '\n' in the text
	output to the ostream.

	* several files: fixed types based on warnings from cxx

2000-09-26  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/kde/Makefile.am: fix rule for
	formindexdialogdata_moc.C

	* src/.cvsignore: add ext_l10n.h to ignore

	* acconfig.h: stop messing with __STRICT_ANSI__
	* config/gnome.m4: remove option to set -ansi
	* config/kde.m4: remove option to set -ansi
	* config/lyxinclude.m4: don't set -ansi

2000-09-27  Juergen Vigna  <jug@sad.it>

	* various files: remove "default" language check.

	* src/insets/insetquotes.C: removed use of current_view.

	* src/lyxfunc.C (MenuNew): I don't know how put the AddPath here but
	the one should have red ears by now!

	* src/insets/insettext.C (LocalDispatch): fixed setting of same layouts
	in more then one paragraph. Fixed cursor-movement/selection.

	* src/frontends/xforms/FormParagraph.C: disable pagebreaks for
	paragraphs inside a text inset.

	* src/text.C (GetVisibleRow): paint top/bottom line only as wide as the
	text-inset if this owner is an inset.

2000-09-27  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/Bullet.h: changed type of font, character and size to int

	* src/buffer.C (asciiParagraph): remove actcell and fname1.

	* src/insets/inseturl.[Ch]:
	* src/insets/insetref.[Ch]:
	* src/insets/insetlabel.[Ch]: add linelen to Ascii

2000-09-26  Angus Leeming <a.leeming@ic.ac.uk>

	* src/buffer.C (readFile): block-if statement rearranged to minimise
	bloat. Patch does not reverse Jean-Marc's change ;-)

	* src/frontends/xforms/FormBase.[Ch]: Renamed some of the callbacks.
	Class rewritten to store pointers to hide/update signals directly,
	rather than Dialogs *. Also defined an enum to ease use. All xforms
	forms can now be derived from this class.

	* src/frontends/xforms/FormCommand.[Ch]
	* src/frontends/xforms/FormCopyright.[Ch]: now derived from FormBase.

	* src/frontends/xforms/FormError.[Ch]: moved inclusion of inseterror.h
	out of header file.

	* src/frontends/xforms/forms/form_citation.fd
	* src/frontends/xforms/forms/form_copyright.fd
	* src/frontends/xforms/forms/form_error.fd
	* src/frontends/xforms/forms/form_index.fd
	* src/frontends/xforms/forms/form_ref.fd
	* src/frontends/xforms/forms/form_toc.fd
	* src/frontends/xforms/forms/form_url.fd: remamed callbacks

	* src/frontends/xforms/forms/makefile: small change to work with DEC sh.

	* src/insets/insetfoot.C: removed redundent using directive.

2000-09-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/layouts/siamltex.layout: new textclass for SIAM journals,
	from Kornelia Pietsch <pietsch@mathematik.tu-chemnitz.de>

	* src/frontends/xforms/Menubar_pimpl.C: menu buttons are now
	created in the constructors in different groups. Then set() just
	have to show the groups as needed. This fixes the redraw problems
	(and is how the old menu code worked).

	* src/support/lyxlib.h: declare the methods as static when we do
	not have namespaces.

2000-09-26  Juergen Vigna  <jug@sad.it>

	* src/buffer.C (asciiParagraph): new function.
	(writeFileAscii): new function with parameter ostream.
	(writeFileAscii): use now asciiParagraph.

	* various inset files: added the linelen parameter to the Ascii-func.

	* src/tabular.C (Write): fixed error in writing file introduced by
	the last changes from Lars.

	* lib/bind/menus.bind: removed not supported functions.

	* src/insets/insettext.C (Ascii): implemented this function.

	* src/insets/lyxinset.h (Ascii): added linelen parameter.

	* src/tabular.C (write_attribute[int,string,bool]): new functions.
	(Write): use of the write_attribute functions.

	* src/bufferlist.C (close): fixed reasking question!

2000-09-26  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/unlink.C src/support/remove.C src/support/mkdir.C:
	new files use the everwhere possible.

	* several files:
	* src/form1.C src/form1.h src/layout_forms.C src/layout_forms.h
	src/log_form.C src/lyx.C:
	regenerated

	* src/buffer.C (runLaTeX): remove func

	* src/PaperLayout.C: removed file
	* src/ParagraphExtra.C: likewise
	* src/bullet_forms.C: likewise
	* src/bullet_forms.h: likewise
	* src/bullet_forms_cb.C: likewise

	* src/Makefile.am (lyx_SOURCES): remove PaperLayout.C,
	ParagraphExtra.C, bullet_forms.C, bullet_forms.h and
	bullet_forms_cb.C

	* several files: remove all traces of the old fd_form_paragraph,
	and functions belonging to that.

	* several files: remove all traces of the old fd_form_document,
	and functions belonging to that.

	* several files: constify local variables were possible.

	* several files: remove all code that was dead when NEW_EXPORT was
	defined

	* several files: removed string::c_str in as many places as
	possible.

	* forms/makefile (SRCS,OBJS,COBJS): removed bullet_forms.[fd,c,C]
	(e): be a bit more outspoken when patching
	(updatesrc): only move files if changed.

	* forms/layout_forms.h.patch: regenerated

	* forms/layout_forms.fd: remove form_document and form_paragraph
	and form_quotes and form_paper and form_table_options and
	form_paragraph_extra

	* forms/form1.fd: remove form_table

	* forms/fdfix.sh: remove sed rules for fl_set_object_lcolor and
	the fdui->... rewrite. Update some comments to xforms 0.88

	* forms/bullet_forms.C.patch: removed file
	* forms/bullet_forms.fd: likewise
	* forms/bullet_forms.h.patch: likewise

	* development/Code_rules/Rules: added a section on switch
	statements. Updated some comment to xforms 0.88.

2000-09-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/buffer.C (readFile): make sure that the whole version number
	is read after \lyxformat (even when it contains a comma)

	* lib/ui/default.ui: change shortcut of math menu to M-a.

2000-09-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/vspace.C (nextToken): use isStrDbl() to check for proper
	double values.

	* src/LyXView.C (updateWindowTitle): show the full files name in
	window title, limited to 30 characters.

	* src/support/lyxstring.C (lyxstring): fix it correctly this time.
	When a number of characters has been given, we should not assume
	that the string is 0-terminated.

	* src/intl.C (InitKeyMapper): remove a bunch of string::c_str()
	calls (fixes some memory leaks)

	* src/intl.[Ch]: add a destructor for Intl, in order to delete the
	trans member on exit.

2000-09-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/converter.C (GetReachable): fix typo.

	* src/lyxlex.C (GetFloat): rewrite to use strToDbl() and
	understand ',' instead of '.'.
	(GetInteger): rewrite to use strToInt().

2000-09-26  Juergen Vigna  <jug@sad.it>

	* src/frontends/xforms/FormParagraph.C: fixed de/activation of fields,
	better visibility and error-message on wrong VSpace input.

	* src/language.C (initL): added english again.

2000-09-25  Juergen Vigna  <jug@sad.it>

	* src/frontends/kde/Dialogs.C (Dialogs):
	* src/frontends/gnome/Dialogs.C (Dialogs):
	* src/frontends/kde/Makefile.am:
	* src/frontends/gnome/Makefile.am: added FormParagraph from xforms.

	* src/frontends/xforms/forms/makefile: added form_paragraph.fd.

	* src/frontends/xforms/Dialogs.C (Dialogs): added FormParagraph.

	* src/frontends/xforms/Makefile.am: added files for FormParagraph.

	* src/frontends/xforms/FormParagraph.C:
	* src/frontends/xforms/FormParagraph.h:
	* src/frontends/xforms/form_paragraph.C:
	* src/frontends/xforms/form_paragraph.h:
	* src/frontends/xforms/forms/form_paragraph.fd: new files for the new
	paragraph layout.

	* src/lyxfunc.C (Dispatch): call the new layout paragraph.

	* src/tabular.C (OldFormatRead): forgot to delete the temporary
	Paragraph-Data after use.

	* src/insets/insettext.C (LocalDispatch): don't set the layout on
	non breakable paragraphs.

2000-09-25  Garst R. Reese <reese@isn.net>

	* src/language.C (initL): added missing language_country codes.

2000-09-25  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (InsetText):
	(deleteLyXText): remove the not released LyXText structure!

2000-09-24  Marko Vendelin <markov@ioc.ee>

	* src/frontends/gnome/mainapp.C
	* src/frontends/gnome/mainapp.h: added support for keyboard
	accelerators

	* src/frontends/gnome/FormCitation.C
	* src/frontends/gnome/FormCitation.h
	* src/frontends/gnome/Makefile.am
	* src/frontends/gnome/pixbutton.h: completed the rewrite of
	FormCitation to use "action area" in mainapp window

	* src/frontends/gnome/Menubar_pimpl.C
	* src/frontends/gnome/Menubar_pimpl.h: Gnome menu can handle
	large TOC.

2000-09-23  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/mathed/formula.C (MathFuncInset::Metrics): Use default
	width/descent/ascent values if name is empty.
	(mathed_string_height): Use std::max.

2000-09-25  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/forms/form_preferences.fd: resize to stop
	segfault.  This will be completely redesigned soon.

	* sigc++: updated libsigc++.  Fixes struct timespec bug.

	* development/tools/makeLyXsigc.sh:  .cvsignore addition

2000-09-23  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* several files: removed almost all traces of the old table
	(tabular) code.

	* src/TableLayout.C: removed file

2000-09-22  Juergen Vigna  <jug@sad.it>

	* src/frontends/kde/Dialogs.C: added credits forms.

	* src/frontends/gnome/Makefile.am (libgnome_la_OBJADD): added forms.

	* src/frontends/gnome/Dialogs.C: added some forms.

	* src/spellchecker.C (init_spell_checker): set language in pspell code
	(RunSpellChecker): some modifications for setting language string.

	* src/language.[Ch]: added language_country code.

2000-09-21  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/Dialogs.h: added new signal showError.
	Rearranged existing signals in some sort of alphabetical order.

	* src/frontends/xforms/Makefile.am: added new files, FormBase.[Ch],
	FormError.[Ch], form_error.[Ch]
	* src/frontends/xforms/forms/makefile: added new file form_error.fd
	* src/frontends/xforms/Dialogs.C: added new xforms dialog FormError.

	* src/frontends/xforms/FormBase.[Ch]: new base class for xforms
	dialogs. I think that this can be used as the base to all these
	dialogs.

	* src/frontends/xforms/FormError.[Ch]
	* src/frontends/xforms/forms/form_error.fd: new files. Xforms
	implementation of InsetError dialog.

	* src/insets/inseterror.[Ch]: rendered GUI-independent.

	* src/frontends/kde/Dialogs.C: added new xforms dialog FormError.
	* src/frontends/kde/Makefile.am: ditto

2000-09-21  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/mathed/math_cursor.[Ch]: Removed class members macroln and
	macrobf. This fixes a bug of invisible text.

2000-09-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/doc/LaTeXConfig.lyx.in: updated.

	* src/language.C (initL): remove language "francais" and change a
	bit the names of the two other french variations.

	* src/support/lyxstring.C (lyxstring): do not apply strlen() on a
	string that may not be 0-terminated.

2000-09-20  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/Makefile.am (lyx_SOURCES): remove table.C and Table.h

2000-09-20  Marko Vendelin <markov@ioc.ee>

	* src/frontends/gnome/FormCitation.C
	* src/frontends/gnome/FormIndex.C
	* src/frontends/gnome/FormToc.C
	* src/frontends/gnome/FormUrl.C: cleanup the loops, reordering
	the variable initialization to shut up the warnings

2000-09-20  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/table.[Ch]: deleted files

	* src/lyxfunc.C (Dispatch): Don't pass 0 as argument to Dispatch
	second arg.

2000-09-18  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (LocalDispatch): fixed Backspace/Delete
	problems with selection. Inserted new LFUN_PASTESELECTION.
	(InsetButtonPress): inserted handling of middle mouse-button paste.

	* src/spellchecker.C: changed word to word.c_str().

2000-09-16  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* src/Makefile.am: Add sources to lyx_SOURCES so they will be
	  included in the ``make dist'' tarball.

2000-09-15  Juergen Vigna  <jug@sad.it>

	* src/CutAndPaste.C (cutSelection): small fix return the right
	end position after cut inside one paragraph only.

	* src/insets/insettext.C (resizeLyXText): only reset the cursor if
	we are locked as otherwise we don't have a valid cursor position!

	* src/insets/figinset.C (draw): small bugfix but why is this needed???

2000-09-19  Angus Leeming <a.leeming@ic.ac.uk>

	* src/frontends/kde/FormRef.C: added using directive.
	* src/frontends/kde/FormToc.C: ditto

	* src/frontends/kde/formtocdialog.h: changed endl to std::endl.

	* src/frontends/kde/FormRef.h: removed trailing comma from enums.

2000-09-19  Marko Vendelin <markov@ioc.ee>

	* src/frontends/gnome/Menubar_pimpl.C
	* src/frontends/gnome/Menubar_pimpl.h: Gnome menus show now
	Toc, ViewFormats, UpdateFormats, and ExportFormats.

	* src/frontends/gnome/mainapp.C
	* src/frontends/gnome/mainapp.h: support for menu update used
	by Toc menu.

	* src/frontends/gnome/mainapp.C
	* src/frontends/gnome/mainapp.h: support for "action" area in the
	main window. This area is used by small simple dialogs, such as
	FormUrl.

	* src/frontends/gnome/FormIndex.C
	* src/frontends/gnome/FormIndex.h
	* src/frontends/gnome/FormUrl.C
	* src/frontends/gnome/FormUrl.h: rewrite to use main window action
	area

	* src/frontends/gnome/FormCitation.C
	* src/frontends/gnome/FormCitation.h: rewrite to use main window
	action area. Only "Insert new citation" is implemented.

2000-09-19  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/buffer.C (Dispatch): fix call to Dispatch
	* src/insets/insetref.C (Edit): likewise
	* src/insets/insetparent.C (Edit): likewise
	* src/insets/insetinclude.C (include_cb): likewise
	* src/frontends/xforms/FormUrl.C (apply): likewise
	* src/frontends/xforms/FormToc.C (apply): likewise
	* src/frontends/xforms/FormRef.C (apply): likewise
	* src/frontends/xforms/FormIndex.C (apply): likewise
	* src/frontends/xforms/FormCitation.C (apply): likewise
	* src/lyxserver.C (callback): likewise
	* src/lyxfunc.C (processKeySym): likewise
	(Dispatch): likewise
	(Dispatch): likewise
	* src/lyx_cb.C (LayoutsCB): likewise

	* Makefile.am (sourcedoc): small change

2000-09-18  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/main.C (main): Don't make an empty GUIRunTime object. all
	methods are static. constify a bit remove unneded using + headers.

	* src/tabular.C: some more const to local vars move some loop vars

	* src/spellchecker.C: added some c_str after some word for pspell

	* src/frontends/GUIRunTime.h: add new static method setDefaults
	* src/frontends/xforms/GUIRunTime.C (setDefaults):
	* src/frontends/kde/GUIRunTime.C (setDefaults):
	* src/frontends/gnome/GUIRunTime.C (setDefaults): new method

	* src/mathed/math_cursor.C (MacroModeClose): don't call SetName
	with strnew in arg, use correct emptystring when calling SetName.

	* several files: remove all commented code with relation to
	HAVE_SSTREAM beeing false. We now only support stringstream and
	not strstream.

2000-09-15  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxfunc.C: construct correctly the automatic new file
	names.

	* src/text2.C (IsStringInText): change type of variable i to shut
	off a warning.

	* src/support/sstream.h: do not use namespaces if the compiler
	does not support them.

2000-09-15  Marko Vendelin <markov@ioc.ee>
	* src/frontends/gnome/FormCitation.C
	* src/frontends/gnome/FormCitation.h
	* src/frontends/gnome/diainsertcitation_interface.c
	* src/frontends/gnome/dialogs/diainsertcitation.glade: adds
	regexp support to FormCitation [Gnome].

2000-09-15  John Levon  <moz@compsoc.man.ac.uk>

	* acconfig.h
	* configure.in: remove unused KDE/GTKGUI define

	* src/frontends/kde/FormRef.C
	* src/frontends/kde/FormRef.h
	* src/frontends/kde/formrefdialog.C
	* src/frontends/kde/formrefdialog.h: double click will
	go to reference, now it is possible to change a cross-ref
	after the fact

	* src/frontends/kde/FormToc.C
	* src/frontends/kde/FormToc.h
	* src/frontends/kde/formtocdialog.C
	* src/frontends/kde/formtocdialog.h: add a depth
	slider

	* src/frontends/kde/Makefile.am: add QtLyXView.h
	to the sources list

2000-09-15  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/frontends/kde/FormCitation.h: added some using directives.

	* src/frontends/kde/FormToc.h: corrected definition of doTree.

	* src/frontends/kde/GUIRunTime.C (initApplication): use lyxerr not
	cerr.

	* src/mathed/math_defs.h: redefine SetAlign to use string rather
	than char *.

2000-09-15  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/buffer.C (pop_tag): revert for the second time a change by
	Lars, who seems to really hate having non-local loop variables :)

	* src/Lsstream.h: add "using" statements.

	* src/support/copy.C (copy): add a bunch of std:: qualifiers
	* src/buffer.C (writeFile): ditto

2000-09-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/buffer.C (writeFile): try to fix the locale modified format
	number to always be as we want it.

	* src/WorkArea.C (work_area_handler): try to workaround the bugs
	in XForms 0.89. C-space is now working again.

	* src/Lsstream.h src/support/sstream.h: new files.

	* also commented out all cases where strstream were used.

	* src/Bullet.h (c_str): remove method.

	* remove all stuff that is irrelevant when NEW_MENUBAR is defined

	* a lot of files: get rid of "char const *" and "char *" is as
	many places as possible. We only want to use them in interaction
	with system of other libraries, not inside lyx.

	* a lot of files: return const object is not of pod type. This
	helps ensure that temporary objects is not modified. And fits well
	with "programming by contract".

	* configure.in: check for the locale header too

	* Makefile.am (sourcedoc): new tag for generation of doc++
	documentation

2000-09-14  Juergen Vigna  <jug@sad.it>

	* src/frontends/xforms/FormDocument.C (ComboInputCB): fixed the
	callback to check which combo called it and do the right action.

	* src/combox.C (combo_cb): added combo * to the callbacks.
	(Hide): moved call of callback after Ungrab of the pointer.

	* src/intl.h: removed LCombo2 function.

	* src/intl.C (LCombo): added Combox * to call and removed LCombo2
	function as this can now be handled in one function.

	* src/combox.h: added Combox * to callback prototype.

	* src/frontends/xforms/Toolbar_pimpl.C:
	* src/lyx_cb.C (LayoutsCB): added Combox * to function call.

2000-09-14  Garst Reese  <reese@isn.net>

	* lib/tex/hollywood.cls changed length of parenthicals to 1.5in
	moved usepackage{xxx}'s to beginning of file. Changed left margin
	to 1.5in, right margin to 1in. Forced headrulewidth to 0, removed
	underlining from title. Thanks to John Culleton for useful suggestions.

2000-09-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxlex_pimpl.C (setFile): change error message to debug
	message.

2000-09-13  Juergen Vigna  <jug@sad.it>

	* src/frontends/xforms/FormDocument.C: implemented choice_class
	as combox and give callback to combo_language so OK/Apply is activated
	on change.

	* src/bufferlist.C (newFile): small fix so already named files
	(via an open call) are not requested to be named again on the
	first save!

2000-09-13  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/kde/Makefile.am
	* src/frontends/kde/FormRef.C
	* src/frontends/kde/FormRef.h
	* src/frontends/kde/formrefdialog.C
	* src/frontends/kde/formrefdialog.h: implement
	cross-ref dialog

2000-09-13  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/kde/formtocdialog.C
	* src/frontends/kde/formtocdialog.h
	* src/frontends/kde/FormToc.C
	* src/frontends/kde/FormToc.h: change to make TOC hierarchical properly

2000-09-11  John Levon  <moz@compsoc.man.ac.uk>

	* src/frontends/kde/FormCitation.C: fix thinko
	where we didn't always display the reference text
	properly

	* src/frontends/kde/formurldialog.C
	* src/frontends/kde/formurldialog.h
	* src/frontends/kde/FormUrl.C
	* src/frontends/kde/FormUrl.h: minor cleanups

	* src/frontends/kde/QtLyXView: wrapper to avoid Qt namespace mangling

	* src/frontends/kde/Makefile.am
	* src/frontends/kde/FormToc.C
	* src/frontends/kde/FormToc.h
	* src/frontends/kde/FormCitation.C
	* src/frontends/kde/FormCitation.h
	* src/frontends/kde/FormIndex.C
	* src/frontends/kde/FormIndex.h
	* src/frontends/kde/formtocdialog.C
	* src/frontends/kde/formtocdialog.h
	* src/frontends/kde/formcitationdialog.C
	* src/frontends/kde/formcitationdialog.h
	* src/frontends/kde/formindexdialog.C
	* src/frontends/kde/formindexdialog.h: new Toc,Citation,Index dialogs

2000-09-12  Juergen Vigna  <jug@sad.it>

	* src/frontends/gnome/GUIRunTime.C (initApplication): make id + version
	static strings.

2000-09-11  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/GUIRunTime.C (initApplication): use lyxerr,
	not cerr.

2000-09-09  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/converter.C (Add, Convert): Added support for converter flags:
	needaux, resultdir, resultfile.
	(Convert): Added new parameter view_file.
	(dvips_options): Fixed letter paper option.

	* src/exporter.C (Export, BufferExtension): Added support for Docbook.
	(Export, GetExportableFormats, GetViewableFormats): Added support
	for Ascii.

	* src/lyx_main.C (LyX): Call to QuitLyX() to remove temporary
	directory!
	(easyParse): Fixed to work with new export code.

	* src/support/filetools.C (DeleteAllFilesInDir) Fixed to delete
	directories.

	* lyx-devel-export/lib/configure.m4: Changed flags of tth.

	* lib/bind/*.bind: Replaced
	buffer-view,buffer-view-ps,buffer-typeset,buffer-typeset-ps by
	buffer-view dvi,buffer-view ps,buffer-update dvi,buffer-update ps

2000-09-11  Juergen Vigna  <jug@sad.it>

	* src/lyx_gui.C (runTime): uses global guiruntime variable.

	* src/main.C (main): now GUII defines global guiruntime!

	* src/frontends/gnome/GUIRunTime.C (initApplication):
	* src/frontends/kde/GUIRunTime.C (initApplication):
	* src/frontends/xforms/GUIRunTime.C (initApplication):
	* src/frontends/GUIRunTime.h: added new function initApplication.

	* src/spellchecker.C (sc_accept_word): change to add_to_session.

	* src/vspace.C (nextToken): fixed error with number 0cm as unvalid.

2000-09-08  Juergen Vigna  <jug@sad.it>

	* src/lyx_gui.C (create_forms): don't display the "default" entry as
	we have already "Reset".

	* src/language.C (initL): inserted "default" language and made this
	THE default language (and not american!)

	* src/paragraph.C: inserted handling of "default" language!

	* src/lyxfont.C: ditto

	* src/text.C: ditto

	* src/paragraph.C: output the \\par only if we have a following
	paragraph otherwise it's not needed.

2000-09-05  Juergen Vigna  <jug@sad.it>

	* config/pspell.m4: added entry to lyx-flags

	* src/spellchecker.C: modified version from Kevin for using pspell

2000-09-01  Marko Vendelin <markov@ioc.ee>
	* src/frontends/gnome/Makefile.am
	* src/frontends/gnome/FormCitation.C
	* src/frontends/gnome/FormCitation.h
	* src/frontends/gnome/diainsertcitation_callbacks.c
	* src/frontends/gnome/diainsertcitation_callbacks.h
	* src/frontends/gnome/diainsertcitation_interface.c
	* src/frontends/gnome/diainsertcitation_interface.h
	* src/frontends/gnome/dialogs/diainsertcitation.glade: Insert Citation
	dialog for Gnome frontend

	* src/main.C: Gnome libraries require keeping application name
	and its version as strings

	* src/frontends/gnome/mainapp.C: Change the name of the main window
	from GnomeLyX to PACKAGE

2000-09-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/Liason.C: add "using: declaration.

2000-08-31  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/mathed/math_macro.C (Metrics): Set the size of the template

	* src/mathed/formulamacro.C (Latex): Fixed the returned value

2000-09-04  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/converter.C (add_options): New function.
	(SetViewer): Change $$FName into '$$FName'.
	(View): Add options when running xdvi
	(Add): Change $$FName into '$$FName'. Same for $$BaseName/$$OutName.
	(Convert): The 3rd parameter is now the desired filename. Converts
	calls to lyx::rename if necessary.
	Add options when running dvips.
	(dvi_papersize,dvips_options): New methods.

	* src/exporter.C (Export): Use getLatexName() instead of fileName().

	* src/frontends/Liason.C (printBuffer): Removed duplicate code by
	using a call to Converter::dvips_options.
	Fixed to work with nex export code.

	* src/support/copy.C
	* src/support/rename.C: New files

	* src/support/syscall.h
	* src/support/syscall.C: Added Starttype SystemDontWait.

	* lib/ui/default.ui: Changed to work with new export code

	* lib/configure.m4: Changed to work with new export code

	* src/encoding.C: Changed latex name for iso8859_7 encoding.

2000-09-04  Angus Leeming  <a.leeming@ic.ac.uk> +

	* src/frontends/xforms/Menubar_pimpl.C: added two using directives
	so that code compiles with DEC cxx.

	* src/frontends/xforms/FormCitation.C (setSize): code re-writtenn
	to work correctly! Also now supports the additional elements
	neeeded by natbib.

2000-09-01  Allan Rae  <rae@lyx.org>

	* src/frontends/ButtonPolicies.C: renamed all the references to
	PreferencesPolicy::{AllButtons,BOGUS} to be ButtonPolicy.

	* src/frontends/ButtonPolicies.h: rename AllButtons to ALL_BUTTONS
	since it's a const not a type.

	* src/frontends/xforms/ButtonController.h: cleanup before Lars does.

2000-08-31  Juergen Vigna  <jug@sad.it>

	* src/insets/figinset.C: Various changes to look if the filename has
	an extension and if not add it for inline previewing.

2000-08-31  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/frontends/ButtonPolicies.h: add a Button AllButtons.
	make buttonStatus and isReadOnly be const methods. (also reflect
	this in derived classes.)

	* src/frontends/ButtonPolicies.C: remove sum_ and bogus_
	(nextState): change to be static inline, pass the StateMachine as
	a const reference
	(PreferencesPolicy): remove casts
	(OkCancelPolicy): remvoe casts
	(OkCancelReadOnlyPolicy): remove casts
	(NoRepeatedApplyReadOnlyPolicy): remove casts
	(OkApplyCancelReadOnlyPolicy): remove casts
	(OkApplyCancelPolicy): remove casts
	(NoRepeatedApplyPolicy): remove casts

2000-08-31  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/converter.C: added some using directives

	* src/frontends/ButtonPolicies.C: changes to overcome
	"need lvalue" error with DEC c++

	* src/frontends/xforms/FormDocument.C (c-tor): use C callback
	to WMHideCB for DEC c++

	* src/frontends/xforms/Menubar_pimpl.C: added using directive

	* src/frontends/xforms/forms/form_document.C.patch: use C callback
	to BulletBMTableCB for DEC c++

2000-08-31  Allan Rae  <rae@lyx.org>

	* src/lyx_gui.C (create_forms): build combo_language2 which is part of
	character dialog separately from old document dialogs combo_language.
	Stops a segfault.

2000-08-30  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/commandtags.h: Added LFUN_GOTO_PARAGRAPH.
	Removed LFUN_REF_CREATE.

	* src/MenuBackend.C: Added new tags: toc and references

	* src/frontends/xforms/Menubar_pimpl.C: Removed the use of StrPool
	(add_lastfiles, add_documents, add_formats): Removed the unused smn
	parameter.
	(add_toc, add_references): New methods.
	(create_submenu): Handle correctly the case when there is a
	seperator after optional menu items.

	* src/lyxfunc.C (getStatus): Handle LFUN_REF_BACK.
	(dispatch): Combined the code for LFUN_REF_CREATE and LFUN_REF_INSERT.
	(dispatch): New code for LFUN_GOTO_PARAGRAPH.

	* src/frontends/xforms/FormToc.C (apply): Use Dispatch.

2000-08-30  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/converter.[Ch]: New file for converting between different
	formats.

	* src/export.[Ch]: New file for exporting a LyX file to different
	formats.

	* src/lyx_cb.C:	Remove many functions when NEW_EXPORT is defined:
	MenuRunLaTeX, MakeLaTeXOutput, RunScript, CreatePostscript,
	PreviewPostscript, PreviewDVI, AskOverwrite, MenuMakeLaTeX,
	MenuMakeLinuxDoc, MenuMakeDocBook, MenuMakeHTML,
	MenuMakeHTML_LinuxDoc, MenuMakeHTML_DocBook, RunLinuxDoc,
	RunDocBook, MenuExport.

	* src/lyxfunc.C (Dispatch): Use the Exporter::Export and
	Exporter::Preview methods if NEW_EXPORT is defined.

	* src/buffer.C (Dispatch): Use Exporter::Export.

	* src/lyxrc.C: Added new tags: \converter and \viewer.

	* src/commandtags.h
	* src/LyXAction.C: Define new lyx-function: buffer-update.
	Remove obsolete buffer-typeset,buffer-typeset-ps & buffer-view-ps
	when NEW_EXPORT is defined.

	* src/MenuBackend.C: Added new tags: updateformats and viewformats.

	* src/frontends/xforms/Menubar_pimpl.C (add_formats) New method.

	* lib/ui/default.ui: Added submenus "view" and "update" to the
	"file" menu.

	* src/filetools.C (GetExtension): New function.

	* src/LaTeX.C (LaTeX): Add "-pdf" to depfile if pdflatex is used.

2000-08-29  Allan Rae  <rae@lyx.org>

	* lib/bind/xemacs.bind: update a binding due to Juergen's recent work

	* src/frontends/xforms/FormDocument.C (checkReadOnly): new function
	(EnableDocumentLayout): removed
	(DisableDocumentLayout): removed
	(build): make use of ButtonController's read-only handling to
	de/activate various objects. Replaces both of the above functions.

	* src/frontends/xforms/ButtonController.h (readWrite): was read_write
	(readOnly): was read_only
	(refresh): fixed dumb mistakes with read_only_ handling

	* src/frontends/xforms/forms/form_document.fd:
	* src/frontends/xforms/forms/form_tabular.fd: Use FL_FLAT_BOX for the
	tabbed dialogs so the tabs look more like tabs and so its easier to
	work out which is the current tab.

	* src/lyx_gui_misc.C (updateAllVisibleBufferRelatedDialogs): fix
	segfault with form_table

	* src/frontends/ButtonPolicies.C: All policies now support UNDO_ALL.

2000-08-28  Juergen Vigna  <jug@sad.it>

	* acconfig.h: added USE_PSPELL.

	* src/config.h.in: added USE_PSPELL.

	* autogen.sh: added pspell.m4

	* config/pspell.m4: new file.

	* src/spellchecker.C: implemented support for pspell libary.

2000-08-25  Juergen Vigna  <jug@sad.it>

	* src/LyXAction.C (init): renamed LFUN_TABLE to
	LFUN_DIALOG_TABULAR_INSERT and fixed all it's occurences.

	* src/lyxfunc.C (getStatus): fix for disabled Edit->Table entries.

	* src/lyxscreen.h: add force_clear variable and fuction to force
	a clear area when redrawing in LyXText.

	* src/text.C (GetVisibleRow): look if the screen forces a redraw.

2000-08-25  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* some whitespace and comment changes.

	* src/lyx_gui.C (LyXGUI): use C++ style casts instead of C ones.

	* src/buffer.C: up te LYX_FORMAT to 2.17

2000-08-23  Juergen Vigna  <jug@sad.it>

	* src/BufferView_pimpl.C (tripleClick): disable this when in a
	locking_inset.

	* src/insets/insettabular.C (pasteSelection): delete the insets
	LyXText as it is not valid anymore.
	(copySelection): new function.
	(pasteSelection): new function.
	(cutSelection): new function.
	(LocalDispatch): implemented cut/copy/paste of cell selections.

	* src/insets/insettext.C (resizeLyXText): don't need resize if I still
	don't have a LyXText.

	* src/LyXAction.C (init): a NEW_TABULAR define too much.

	* src/lyx_gui_misc.C (CloseAllBufferRelatedDialogs): another missing
	NEW_TABULAR define.

2000-08-22  Juergen Vigna  <jug@sad.it>

	* src/lyx_gui_misc.C (updateAllVisibleBufferRelatedDialogs):
	ifdef form_table out if NEW_TABULAR.

2000-08-21  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (TabularFeatures): BoxType is enum now.
	(draw): fixed draw position so that the cursor is positioned in the
	right place.
	(InsetMotionNotify): hide/show cursor so the position is updated.
	(GENERAL): fixed cursor_pos to show only 0/1 (begin/end of cell),
	using cellstart() function where it should be used.

	* src/insets/insettext.C (draw): ditto.

	* src/tabular.C: fixed initialization of some missing variables and
	made BoxType into an enum.

2000-08-22  Marko Vendelin <markov@ioc.ee>
	* src/frontends/gnome/Menubar_pimpl.C: Mathces LyX action with Gnome
	stock menu item using action numerical value, not its string
	representation.


2000-08-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/frontends/xforms/Makefile.am (libxforms_la_SOURCES): add
	GUIRunTime.C remove GUIRunTime_pimpl.[Ch]

	* src/frontends/xforms/GUIRunTime_pimpl.[Ch]: removed file

	* src/frontends/xforms/GUIRunTime.C: new file

	* src/frontends/kde/Makefile.am (libkde_la_SOURCES): add
	GUIRunTime.C and remove GUIRunTime_pimpl.[Ch]

	* src/frontends/kde/GUIRunTime_pimpl.[Ch]: removed file

	* src/frontends/kde/GUIRunTime.C: new file

	* src/frontends/gnome/Makefile.am (libgnome_la_SOURCES): add
	GUIRunTime.C and remove GUIRunTime_pimpl.[Ch]

	* src/frontends/gnome/GUIRunTime_pimpl.[Ch]: removed file

	* src/frontends/gnome/GUIRunTime.C: new file

	* src/frontends/Makefile.am (libfrontends_la_SOURCES): removed
	GUIRunTime.C

	* src/frontends/GUIRunTime.h: removed constructor and destructor,
	small change to documetentation.

	* src/frontends/GUIRunTime.C: removed file

	* src/text2.C (MeltFootnoteEnvironment): add some NEW_TABULAR

	* src/lyxparagraph.h: enable NEW_TABULAR as default

	* src/lyxfunc.C (processKeySym): remove some commented code

	* src/lyx_gui_misc.C (updateAllVisibleBufferRelatedDialogs): add
	NEW_TABULAR around the fd_form_table_options.

	* src/lyx_gui.C (runTime): call the static member function as
	GUIRunTime::runTime().

2000-08-21  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/FormDocument.h: D'oh.  Forgot to change the
	policy here also.

2000-08-21  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/Spacing.C (writeEnvirBegin): Small fix when sstream not present

2000-08-21  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/ButtonController.h (setOK): renamed from setOk to
	keep Garst happy ;-)
	* src/frontends/xforms/FormPreferences.C (build): use setOK
	* src/frontends/xforms/FormDocument.C (build): use setOK
	(FormDocument): use the appropriate policy.

2000-08-21  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/ButtonController.h (class ButtonController): Allow
	automatic [de]activation of arbitrary objects when in a read-only state.

	* src/frontends/ButtonPolicies.h: More documentation
	(isReadOnly): added to support the above.

	* src/frontends/xforms/forms/form_preferences.fd: Changed Ok -> Save

2000-08-18  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (getStatus): changed to return func_status.

	* src/lyxfunc.C (getStatus): fixed TabularFeatures menu to always
	display toggle menu entries if they are.

	* src/lyx_cb.C: #ifdef'ed out layout stuff which is in the
	new document layout now.

	* src/lyxfunc.C: ditto

	* src/lyx_gui_misc.C: ditto

	* src/lyx_gui.C: ditto

	* lib/ui/default.ui: removed paper and quotes layout as they are now
	all in the document layout tabbed folder.

	* src/frontends/xforms/forms/form_document.fd: added Restore
	button and callbacks for all inputs for Allan's ButtonPolicy.

	* src/frontends/xforms/FormDocument.C (ChoiceClassCB): added.
	(CheckChoiceClass): added missing params setting on class change.
	(UpdateLayoutDocument): added for updating the layout on params.
	(build): forgot to RETURN_ALWAYS input_doc_spacing.
	(FormDocument): Implemented Allan's ButtonPolicy with the
	PreferencesPolicy.

2000-08-17  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/Dialogs.C (Dialogs): Make a temporary connection
	so we can at least see the credits again.

	* src/frontends/xforms/FormPreferences.C: Used the appropriate button
	controller calls for the appropriate callbacks.  Note that since Ok
	calls apply followed by cancel, and apply isn't a valid input for the
	APPLIED state, the bc_ calls have to be made in the static callback not
	within each of the real callbacks.

	* src/frontends/xforms/ButtonController.h (Ok): renamed from Okay()
	(setOk): renamed from setOkay()

2000-08-17  Juergen Vigna  <jug@sad.it>

	* src/frontends/gnome/Menubar_pimpl.C (openByName): put this function
	in the implementation part.
	(composeUIInfo): don't show optional menu-items.

	* src/lyxfunc.C (getStatus): use insets LyXText if the_locking_inset.

	* src/insets/insettext.C (UpdateLocal): call to LyXView::showState()

	* src/bufferview_funcs.C (CurrentState): fixed to show also the
	text-state when in a text-inset.

	* src/frontends/kde/GUIRunTime_pimpl.C: include xforms for now.

2000-08-17  Marko Vendelin <markov@ioc.ee>
	* src/frontends/gnome/FormIndex.C
	* src/frontends/gnome/FormIndex.h
	* src/frontends/gnome/FormToc.C
	* src/frontends/gnome/FormToc.h
	* src/frontends/gnome/dialogs
	* src/frontends/gnome/diatoc_callbacks.c
	* src/frontends/gnome/diatoc_callbacks.h
	* src/frontends/gnome/diainsertindex_callbacks.h
	* src/frontends/gnome/diainsertindex_callbacks.c
	* src/frontends/gnome/diainsertindex_interface.c
	* src/frontends/gnome/diainsertindex_interface.h
	* src/frontends/gnome/diatoc_interface.h
	* src/frontends/gnome/diatoc_interface.c
	* src/frontends/gnome/Makefile.am: Table of Contents and
	Insert Index dialogs implementation for Gnome frontend

	* src/frontends/gnome/GUIRunTime_pimpl.C: fix some small bugs

	* src/frontends/gnome/Menubar_pimpl.C: remove historical comments

	* src/frontends/gnome/diainserturl_interface.c: make the dialog
	resizable

2000-08-17  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/frontends/xforms/GUIRunTime_pimpl.C: constructor and
	destructor. Don't definde if you don't need it
	(processEvents): made static, non-blocking events processing for
	xforms.
	(runTime): static method. event loop for xforms
	* similar as above for kde and gnome.

	* src/frontends/GUIRunTime.C (GUIRunTime): new Pimpl() is wrong
	new Pimpl is correct
	(runTime): new method calss the real frontends runtime func.

	* src/lyx_gui.C (runTime): change to use the GUIRunTime::runTime

2000-08-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyx_gui.C (create_forms): fix the "No change" gettext missing

2000-08-16  Juergen Vigna  <jug@sad.it>

	* src/lyx_gui.C (runTime): added GUII RunTime support.

	* src/frontends/Makefile.am:
	* src/frontends/GUIRunTime.[Ch]:
	* src/frontends/xforms/GUIRunTime_pimpl.[Ch]:
	* src/frontends/kde/GUIRunTime_pimpl.[Ch]:
	* src/frontends/gnome/GUIRunTime_pimpl.[Ch]: added GUII runtime support

	* src/LyXAction.C (init): added dummy LFUN_INSERT_URL.

	* src/frontends/Makefile.am (INCLUDES): don't set the FRONTENDS include
	as this is already set in ${FRONTEND_INCLUDE} if needed.

	* configure.in (CPPFLAGS): setting the include dir for the frontend
	directory and don't set FRONTEND=xforms for now as this is executed
	always.

2000-08-16 John Levon (moz@compsoc.man.ac.uk)

	* src/frontends/kde/Makefile.am:
	* src/frontends/kde/FormUrl.C:
	* src/frontends/kde/FormUrl.h:
	* src/frontends/kde/formurldialog.h:
	* src/frontends/kde/formurldialog.C: Add KDE URL dialog

2000-08-15  Kayvan A. Sylvan <kayvan@sylvan.com>

	* src/frontend/Makefile.am: Add gnome and kde to dist tar file.

2000-08-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/BufferView_pimpl.C (workAreaKeyPress): enable the
	processKeySym

2000-08-15  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/WorkArea.C (work_area_handler): more work to get te
	FL_KEYBOARD to work with xforms 0.88 too, please test.

	* src/BufferView_pimpl.C (workAreaKeyPress): add XForms 0.88 guard.

2000-08-15  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/frontends/ButtonPolicies.C: make gcc happy when compiling with
	-pedantic

2000-08-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/Timeout.h: remove Qt::emit hack.

	* several files: changes to allo doc++ compilation

	* src/lyxfunc.C (processKeySym): new method
	(processKeyEvent): comment out if FL_REVISION < 89

	* src/WorkArea.C: change some debugging levels.
	(WorkArea): set wantkey to FL_KEY_ALL
	(work_area_handler): enable the FL_KEYBOARD clause, this enables
	clearer code and the use of compose with XForms 0.89. Change to
	use signals instead of calling methods in bufferview directly.

	* src/Painter.C: change some debugging levels.

	* src/LyXView.C: don't setup of use the KeyPressMask_raw_callback
	if FL_REVISION < 89

	* src/BufferView_pimpl.C (Pimpl): Connect to the WorkArea signals.
	(workAreaKeyPress): new method

2000-08-14  Juergen Vigna  <jug@sad.it>

	* src/frontends/kde/Dialogs.C (Dialogs): added missing dialogs.

	* config/kde.m4: addes some features

	* src/frontends/kde/Makefile.am (libkde_la_OBJADD): modified to
	include missing xforms dialogs.

	* src/Timeout.h: a hack to be able to compile with qt/kde.

	* sigc++/.cvsignore: added acinclude.m4

	* lib/.cvsignore: added listerros

	* src/frontends/Makefile.am: modified for now to ALWAYS compile the
	xforms tree as objects are needed for other frontends.

	* src/frontends/gnome/Makefile.am (libgnome_la_OBJADD): added for
	linking with not yet implemented xforms objects.

	* src/frontends/gnome/Dialogs.C (Dialogs): added FormDocument.

2000-08-14  Baruch Even  <baruch.even@writeme.com>

	* src/frontends/xforms/FormGraphics.h:
	* src/frontends/xforms/FormGraphics.C:
	* src/frontends/xforms/RadioButtonGroup.h:
	* src/frontends/xforms/RadioButtonGroup.C:
	* src/insets/insetgraphics.h:
	* src/insets/insetgraphics.C:
	* src/insets/insetgraphicsParams.h:
	* src/insets/insetgraphicsParams.C: Changed indentation to use tabs
	instead of spaces, and various other indentation issues to make the
	sources more consistent.

2000-08-14  Marko Vendelin <markov@ioc.ee>

	* src/frontends/gnome/dialogs/diaprint.glade
	* src/frontends/gnome/FormPrint.C
	* src/frontends/gnome/FormPrint.h
	* src/frontends/gnome/diaprint_callbacks.c
	* src/frontends/gnome/diaprint_callbacks.h
	* src/frontends/gnome/diaprint_interface.c
	* src/frontends/gnome/diaprint_interface.h: Print dialog Gnome
	implementation

	* src/frontends/gnome/dialogs/diainserturl.glade
	* src/frontends/gnome/FormUrl.C
	* src/frontends/gnome/FormUrl.h
	* src/frontends/gnome/diainserturl_callbacks.c
	* src/frontends/gnome/diainserturl_callbacks.h
	* src/frontends/gnome/diainserturl_interface.c
	* src/frontends/gnome/diainserturl_interface.h: Insert Url dialog
	Gnome implementation

	* src/frontends/gnome/Dialogs.C
	* src/frontends/gnome/Makefile.am: added Print, Insert Url  and
	all other dialogs. Copy all unimplemented dialogs from Xforms
	frontend

	* src/frontends/gnome/support.c
	* src/frontends/gnome/support.h: support files generated by Glade

	* autogen.sh
	* configure.in
	* config/gnome.m4: Gnome configuration scripts

	* config/lyxinclude.m4: cleanup: frontend renamed from gtk to gnome in
	configure --help message

	* src/lyx_gui.C: Gnome/Gtk releases control in LyXGUI::runTime()
	only if there are no events pendling in Gnome/Gtk. This enhances
	the performance of menus.


2000-08-14  Allan Rae  <rae@lyx.org>

	* lib/Makefile.am: listerrors cleaning

	* lib/listerrors: removed -- generated file
	* acinclude.m4: ditto
	* sigc++/acinclude.m4: ditto

	* src/frontends/xforms/forms/form_citation.fd:
	* src/frontends/xforms/FormCitation.C (setSize): Made the form a more
	manageable size.

	* src/frontends/xforms/forms/makefile: I renamed the `install` target
	`updatesrc` and now we have a `test` target that does what `updatesrc`
	used to do. I didn't like having an install target that wasn't related
	to the dist.

	* src/frontends/xforms/Form*.[hC]: Removed the free() member functions
	on all except FormGraphics.  This may yet happen. Followed by a major
	cleanup including using FL_TRANSIENT for most of the dialogs.  More
	changes to come when the ButtonController below is introduced.

	* src/frontends/xforms/ButtonController.h: New file for managing up to
	four buttons on a dialog according to an externally defined policy.
	* src/frontends/xforms/Makefile.am: added above

	* src/frontends/ButtonPolicies.[hC]: New files full of policies for Ok,
	Apply and Cancel/Close buttons and everything in between and beyond.
	* src/frontends/Makefile.am: added above.

	* src/frontends/xforms/forms/form_preferences.fd:
	* src/frontends/xforms/FormPreferences.[hC]: Uses the ButtonController
	and removed variable 'status' as a result. Fixed the set_minsize thing.
	Use the new screen-font-update after checking screen fonts were changed
	Added a "Restore" button to restore the original lyxrc values while
	editing.  This restores everything not just the last input changed.
	That's still a tricky one.  As is the "LyX: this shouldn't happen..."

	* src/LyXAction.C: screen-font-update added for updating buffers after
	screen font settings have been changed.
	* src/commandtags.h: ditto
	* src/lyxfunc.C: ditto

	* forms/lyx.fd: removed screen fonts dialog.
	* src/lyx_gui.C: ditto
	* src/menus.[Ch]: ditto
	* src/lyx.[Ch]: ditto
	* src/lyx_cb.C: ditto + code from here moved to make
	screen-font-update. And people wonder why progress on GUII is
	slow.  Look at how scattered this stuff was!  It takes forever
	just find it all.

	* forms/fdfix.sh: Fixup the spacing after commas.
	* forms/makefile: Remove date from generated files. Fewer clashes now.
	* forms/bullet_forms.C.patch: included someones handwritten changes

	* src/lyxrc.[Ch]: Added a commented out system_lyxrc.  Will use it RSN
	once I've discovered why LyXRC was made noncopyable.
	* src/lyx_main.C: ditto

2000-08-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/frontends/xforms/forms/fdfix.sh:
	* src/frontends/xforms/forms/fdfixh.sed:
	* src/frontends/xforms/forms/fdfixc.sed: New file from Angus
	* src/frontends/xforms/Form*.[hC]:
	* src/frontends/xforms/form_*.[hC]: Massive rewrite of the generation
	scripts to rename all the "FL_OBJECT * form_xxxx" to "form" and to
	provide a destructor for the struct FD_form_xxxx. Another version of
	the set_[max|min]size workaround and a few other cleanups. Actually,
	Angus' patch from 20000809.

2000-08-13  Baruch Even  <baruch.even@writeme.com>

	* src/insets/insetgraphics.C (Clone): Added several fields that needed
	copying.

2000-08-11  Juergen Vigna  <jug@sad.it>

	* src/insets/insetgraphics.C (InsetGraphics): changing init
	order because of warnings.

	* src/frontends/xforms/forms/makefile: adding patching .C with
	.C.patch files.

	* src/frontends/xforms/forms/fdfix.sh: changing patching file .c
	from .C.patch to .c.patch

	* src/frontends/xforms/FormCommand.C (FormCommand): changing init
	order because of warning.

	* src/frontends/xforms/Dialogs.C (Dialogs): added FormDialog

	* src/frontends/Liason.C (setMinibuffer): new helper function

	* src/frontends/Dialogs.h (class Dialogs): inserting showLayoutDocument

	* src/lyxfunc.C (Dispatch): calling new Document-Layout

	* lib/ui/default.ui: commented out PaperLayout entry

	* src/frontends/xforms/form_document.[Ch]: new added files

	* src/frontends/xforms/FormDocument.[Ch]: ditto

	* src/frontends/xforms/forms/form_document.fd: ditto

	* src/frontends/xforms/forms/form_document.C.patch: ditto

2000-08-10  Juergen Vigna  <jug@sad.it>

	* src/insets/insetgraphics.C (draw): fixed access to 0 cacheHandle.
	(InsetGraphics): initialized cacheHandle to 0.
	(draw): changed call to updateInset to status=CHANGE_IN_DRAW.

2000-08-10  Baruch Even  <baruch.even@writeme.com>

	* src/graphics/GraphicsCache.h:
	* src/graphics/GraphicsCache.C (addFile, removeFile): Changed to work
	correctly as a cache.

	* src/graphics/GraphicsCacheItem.h:
	* src/graphics/GraphicsCacheItem.C: Changed to the pimpl idiom to allow
	reference counting.

	* src/graphics/GraphicsCacheItem_pimpl.h:
	* src/graphics/GraphicsCacheItem_pimpl.C: The implementation of the
	GraphicsCacheItem.

	* src/insets/insetgraphics.h:
	* src/insets/insetgraphics.C: Changed from using a signal notification
	to polling when image is not loaded.

2000-08-10  Allan Rae  <rae@lyx.org>

	* development/tools/makeLyXsigc.sh: Updated to allow Signal3.  Note
	that there are two functions that have to been taken out of line by
	hand and aren't taken care of in the script.  (Just a reminder note)

	* sigc++/macros/*.h.m4: Updated as above.

2000-08-09  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (draw): small fix for clearing rectangle.

	* src/insets/insettabular.C: make drawing of single cell smarter.

2000-08-09  Marko Vendelin <markov@ioc.ee>
	* src/frontends/gnome/Menubar_pimpl.C
	* src/frontends/gnome/Menubar_pimpl.h: Gnome frontend Menubar
	implementation: new files

	* src/frontends/gnome/mainapp.C
	* src/frontends/gnome/mainapp.h: Gnome main window (temporary
	implementation)

	* src/main.C: create Gnome main window

	* src/frontends/xforms/Menubar_pimpl.h
	* src/frontends/Menubar.C
	* src/frontends/Menubar.h: added method Menubar::update that calls
	Menubar_pimpl::update and xforms/Menubar_pimpl::update (empty one)

	* src/LyXView.C: calls Menubar::update to update the state
	of menu items

	* src/frontends/gnome/Makefile.am: added new files

	* src/frontends/Makefile.am: added frontend compiler options

2000-08-08  Juergen Vigna  <jug@sad.it>

	* src/lyx_cb.C (AutoSave): autosave for unnamed files enabled!

	* src/bufferlist.C (close):
	* src/bufferlist.C (QwriteAll): remove Autosave-files for Unnamed()
	documents if exiting without saving.

	* src/buffer.C (save): use removeAutosaveFile()

	* src/support/filetools.C (removeAutosaveFile): new function.

	* src/lyx_cb.C (MenuWrite): returns a bool now.
	(MenuWriteAs): check if file could really be saved and revert to the
	old name if not.
	(MenuWriteAs): removing old autosavefile if existant.

	* src/frontends/xforms/FormRef.h: puting FD_form_ref declaration
	before Goto toggle declaration, because of compiler warning.

	* src/frontends/xforms/FormRef.C: forgot include of <algorithm>

	* src/lyxfunc.C (MenuNew): small fix.

	* src/lyxrc.C (output): added RC_NEW_ASK_FILENAME tag.

	* src/bufferlist.C (newFile):
	* src/lyxfunc.C (MenuNew): use the new_ask_filename tag from lyxrc.

	* src/lyxrc.C: added new_ask_filename tag

2000-08-07  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/lyx.fd: removed code pertaining to form_ref
	* src/lyx.[Ch]: ditto
	* src/lyx_cb.C: ditto
	* src/lyx_gui.C: ditto
	* src/lyx_gui_misc.C: ditto

	* src/BufferView_pimpl.C (restorePosition): update buffer only
	if file has changed

	* src/commandtags.h (LFUN_REFTOGGLE): removed
	(LFUN_INSERT_REF): renamed LFUN_REF_INSERT
	(LFUN_REFGOTO): renamed LFUN_REF_GOTO
	(LFUN_REFBACK): renamed LFUN_REF_BACK

	* src/LyXAction.C: removed code pertaining to LFUN_REFTOGGLE
	* src/menus.C: ditto
	* src/lyxfunc.C (Dispatch): ditto.
	InsertRef dialog is now GUI-independent.

	* src/texrow.C: added using std::endl;

	* src/insets/insetref.[Ch]: strip out large amounts of code.
	The inset is now a container and this functionality is now
	managed by a new FormRef dialog

	* src/frontends/Dialogs.h (showRef, createRef): new signals

	* src/frontends/xforms/FormIndex.[Ch],
	src/frontends/xforms/FormUrl.[Ch]: workaround an xforms bug
	when setting dialog's min/max size
	* src/frontends/xforms/FormIndex.[Ch]: ditto

	* src/frontends/xforms/FormRef.[Ch],
	src/frontends/xforms/forms/form_ref.fd: new xforms
	implementation of an InsetRef dialog

	* src/graphics/GraphicsCache.[Ch]: small changes to compile with
	DEC cxx

	* src/graphics/XPM_Renderer.C (isImageFormatOK):
	ios::nocreate is not part of the standard. Removed.

2000-08-07  Baruch Even  <baruch.even@writeme.com>

	* src/graphics/Renderer.h:
	* src/graphics/Renderer.C: Added base class for rendering of different
	image formats into Pixmaps.

	* src/graphics/XPM_Renderer.h:
	* src/graphics/XPM_Renderer.C: Taken from GraphicsCacheItem and placed
	in a different class.

	* src/graphics/GraphicsCacheItem.C: factored out the rendering in order to
	easily add support for other formats.

	* src/insets/figinset.C: plugged a leak of an X resource.

2000-08-07  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/CutAndPaste.[Ch]: make all metods static.

	* development/Code_rules/Rules: more work, added section on
	Exceptions, and a References section.

	* a lot of header files: work to make doc++ able to generate the
	source documentation, some workarounds of doc++ problems. Doc++ is
	now able to generate the documentation.

2000-08-07  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (recomputeTextInsets): removed function

	* src/tabular.C (SetWidthOfMulticolCell):
	(SetWidthOfCell):
	(calculate_width_of_column_NMC): fixed return value so that it really
	only returns true if the column-width has changed (there where
	problems with muliticolumn-cells in this column).

2000-08-04  Juergen Vigna  <jug@sad.it>

	* src/BufferView_pimpl.C (checkInsetHit): changed so that it looks
	also on the scrollstatus of the inset.
	(workAreaMotionNotify): ditto.

	* src/texrow.C (getIdFromRow): fixed compile problem on egcs-1.1.2.

2000-08-01  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (resetPos): scroll tabular automatically.

	* src/commandtags.h:
	* src/LyXAction.C (init):
	* src/insets/inset.C (LocalDispatch): added support for
	LFUN_SCROLL_INSET.

	* src/insets/inset.C (scroll): new functions.

	* src/insets/insettext.C (removeNewlines): new function.
	(SetAutoBreakRows): removes forced newlines in the text of the
	paragraph if autoBreakRows is set to false.

	* src/tabular.C (Latex): generates a parbox around the cell contents
	if needed.

	* src/frontends/xforms/FormTabular.C (local_update): removed
	the radio_useparbox button.

	* src/tabular.C (UseParbox): new function

2000-08-06  Baruch Even  <baruch.even@writeme.com>

	* src/graphics/GraphicsCache.h:
	* src/graphics/GraphicsCache.C:
	* src/graphics/GraphicsCacheItem.h:
	* src/graphics/GraphicsCacheItem.C: Made them to actually do something
	usefull.

	* src/insets/insetgraphics.h:
	* src/insets/insetgraphics.C: Added the use of the GraphicsCache
	and the drawing of the inline image.

	* src/buffer.C: Fixed a bug where a loaded InsetGraphics would be
	loaded into the wrong position.

	* src/lyxfunc.C: When adding an InsetGraphics the edit dialog is now
	launched.

2000-08-05  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/translator.h: move all typedefs to public section

	* src/support/filetools.C (MakeLatexName): return string const
	(QuoteName): ditto
	(TmpFileName): ditto
	(FileOpenSearch): ditto
	(FileSearch): ditto
	(LibFileSearch): ditto
	(i18nLibFileSearch): ditto
	(GetEnv): ditto
	(GetEnvPath): ditto
	(CreateTmpDir): ditto
	(CreateBufferTmpDir): ditto
	(CreateLyXTmpDir): ditto
	(GetCWD): ditto
	(OnlyPath): ditto
	(MakeAbsPath): ditto
	(AddName): ditto
	(OnlyFilename): ditto
	(ExpandPath): ditto
	(NormalizePath): ditto
	(CleanupPath): ditto
	(GetFileContents): ditto
	(ReplaceEnvironmentPath): ditto
	(MakeRelPath): ditto
	(AddPath): ditto
	(ChangeExtension): ditto
	(MakeDisplayPath): ditto
	(do_popen): return cmdret const
	(findtexfile): return string const

	* src/support/DebugStream.h: add some /// to please doc++

	* src/frontends/DialogBase.h (endif): add some /// to please doc++

	* src/texrow.C (same_rownumber): functor to use with find_if
	(getIdFromRow): rewritten to use find_if and to not update the
	positions. return true if row is found
	(increasePos): new method, use to update positions

	* src/lyxlex_pimpl.h: make LyXLex::Pimpl noncopyable

	* src/lyxlex_pimpl.C (verifyTable): new method
	(pushTable): use it
	(Pimpl): use it
	(GetString): return string const
	(pushTable): rewrite to use std::stack
	(popTable): ditto
	(setFile): better check
	(setStream): ditto

	* src/lyxlex.h: make LyXLex noncopyable

	* src/lyxlex.C (text): return char const * const
	(GetString): return string const
	(getLongString): return string const

	* src/lyx_gui_misc.C (askForText): return pair<...> const

	* src/lastfiles.[Ch] (operator): return string const

	* src/buffer.C (parseSingleLyXformat2Token): pass string to
	istringstream not char const *.
	move token.end() out of loop.
	(readFile): move initializaton of token

	* src/BufferView2.C (insertErrors): run texrow.increasePos if
	getIdFromRow is successful.

	* lib/bind/emacs.bind: don't include menus bind

	* development/Code_rules/Rules: the beginnings of making this
	better and covering more of the unwritten rules that we have.

	* development/Code_rules/Recommendations: a couple of wording
	changes.

2000-08-04  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/strerror.c: remove C++ comment.

2000-08-04  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/commandtags.h: LFUN_INDEX_CREATE_LAST reverts to
	LFUN_INDEX_INSERT_LAST

	* src/texrow.C (getIdFromRow): changed from const_iterator to
	iterator, allowing code to compile with DEC cxx

	* src/frontends/xforms/FormCitation.[Ch]: made vector<string>
	stores part of the class, as suggested by Allan. Will allow
	multiple LyXViews.
	(apply): test to apply uses InsetCommandParams operator!=

	* src/frontends/xforms/FormIndex.C: moved set_minsize into build
	(apply): test to apply uses InsetCommandParams operator!=

	* src/frontends/xforms/FormToc.[Ch]: made vector<string>
	stores part of the class.
	(update): removed limits on min/max size.

	* src/frontends/xforms/FormUrl.C: moved set_minsize into build
	(apply): test to apply uses InsetCommandParams operator!=

	* src/insets/insetcommand.[Ch] InsetCommand made noncopyable
	(Read, Write, scanCommand, getCommand): moved functionality
	into InsetCommandParams.
	(Clone): removed
	(getScreenLabel): made pure virtual
	new InsetCommandParams operators== and !=

	* src/insets/insetbib.[Ch] (InsetBibKey, InsetBibtex): new
	c-tors based on InsetCommandParams. Removed others.
	* src/insets/insetinclude.[Ch]: ditto
	* src/insets/insetlabel.[Ch]: ditto
	* src/insets/insetparent.[Ch]: ditto
	* src/insets/insetref.[Ch]: ditto. Also moved gotoLabel into .C

	* src/buffer.C (parseSingleLyXformat2Token, readInset): all
	insets derived from InsetCommand created using similar c-tors
	based on InsetCommandParams
	* src/lyx_cb.C (MenuInsertLabel, RefSelectCB): ditto
	* src/menus.C (ShowRefsMenu): ditto
	* src/paragraph.C (Clone): ditto
	* src/text2.C (SetCounter): ditto
	* src/lyxfunc.C (Dispatch) ditto
	Also recreated old InsetIndex behaviour exactly. Can now
	index-insert at the start of a paragraph and index-insert-last
	without launching the pop-up.

2000-08-03  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* lib/lyxrc.example: mark te pdf options as non functional.

	* src/support/lstrings.C (strToInt): move initalization of tmpstr
	(isStrDbl): move tmpstr.end() out of loop.
	(strToDbl): move intialization of tmpstr
	(lowercase): return string const and move tmp.end() out of loop.
	(uppercase): return string const and move tmp.edn() out of loop.
	(prefixIs): add assertion
	(suffixIs): ditto
	(contains): ditto
	(contains): ditto
	(contains): ditto
	(containsOnly): ditto
	(containsOnly): ditto
	(containsOnly): ditto
	(countChar): make last arg char not char const
	(token): return string const
	(subst): return string const, move tmp.end() out of loop.
	(subst): return string const, add assertion
	(strip): return string const
	(frontStrip): return string const, add assertion
	(frontStrip): return string const
	(split): ditto
	(split): ditto
	(rsplit): ditto

	* src/support/lstrings.C: add inclde "LAssert.h"
	(isStrInt): move tmpstr.end() out of loop.

	* src/frontends/xforms/Toolbar_pimpl.C (activate): move
	toollist.end() out of loop.
	(deactivate): move toollist.end() out of loop.
	(update): move toollist.end() out of loop.
	(updateLayoutList): move tc.end() out of loop.
	(add): move toollist.end() out of loop.

	* src/frontends/xforms/Menubar_pimpl.C (create_submenu): move
	md.end() out of loop.

	* src/texrow.h: make getIdFromRow const, make rowlist mutable.

	* src/texrow.C (getIdFromRow): make const, more rowlist.end() out
	of loop.

	* src/paragraph.C (Erase): move fontlist.end() out of loop.
	(Erase): move insetlist.end() out of loop.

	* src/lyx_sendfax_main.C: make show_logfile static and to take a
	ref to const string as first arg. Move initialization of some
	variables, whitespace changes.

	* src/kbmap.C (defkey): move table.end() out of loop.
	(kb_keymap): move table.end() out of loop.
	(findbinding): move table.end() out of loop.

	* src/MenuBackend.C (hasMenu): move end() out of loop.
	(getMenu): move end() out of loop.
	(getMenu): move menulist_.end() out of loop.

	* src/Makefile.am (#lyx_LDFLAGS): interesting option commented out.

	* src/LaTeXFeatures.C (getIncludedFiles): move IncludedFiles.end()
	out of loop.

	* src/LColor.C (getFromGUIName): move infotab.end() out of loop.
	(getFromLyXName): move infotab.end() out of loop.

	* config/lyxinclude.m4 (CXXFLAGS): change for 2.96 add
	-fvtable-thunks -ffunction-sections -fdata-sections

2000-08-03  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/frontends/xforms/RadioButtonGroup.h: Changed <forms.h> to
	FORMS_H_LOCATION.

2000-08-03  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormCommand.[Ch] (d-tor): removed

	* src/frontends/xforms/FormCitation.[Ch],
	src/frontends/xforms/FormIndex.[Ch],
	src/frontends/xforms/FormToc.[Ch],
	src/frontends/xforms/FormUrl.[Ch] (d-tors): call free()

2000-08-03  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/commandtags.h: renamed, created some flags for citation
	and index

	* src/lyx_gui_misc.C: stripped out old FD_index_form code

	* src/lyxfunc.C (dispatch): use signals to insert index entry

	* src/frontends/Dialogs.h: new signal createIndex

	* src/frontends/xforms/FormCommand.[Ch],
	src/frontends/xforms/FormCitation.[Ch],
	src/frontends/xforms/FormToc.[Ch],
	src/frontends/xforms/FormUrl.[Ch]: clean up and comment better

	* src/insets/insetindex.[Ch]: GUI-independent

	* src/frontends/xforms/FormIndex.[Ch],
	* src/frontends/xforms/forms/form_index.fd: xforms implementation
	of the Index dialog

2000-08-01  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/mathed/math_write.C (MathDecorationInset::Write) Put \protect
	before \overbrace, \underbrace, \overleftarrow, or \overrightarrow.

2000-08-02  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/insets/insetref.C (Latex): rewrite so that there is now
	question that a initialization is requested.

	* src/insets/insetcommand.h: reenable the hide signal

2000-08-01  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/Menubar_pimpl.C (create_submenu): try to
	fix handling of shortcuts (many bugs :)
	(add_lastfiles): ditto.

	* lib/ui/default.ui: fix a few shortcuts.

2000-07-27  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* Makefile.am: Fix ``rpmdist'' target to return the exit
	status of the ``rpm'' command, instead of the last command in
	the chain (the ``rm lyx.xpm'' command, which always returns
	success).

2000-08-02  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/FormUrl.C (FormUrl): Initialise ALL variables.
	* src/frontends/xforms/FormCitation.C (FormCitation): ditto
	* src/frontends/xforms/FormToc.C (FormToc): ditto

	* src/frontends/xforms/Makefile.am: A few forgotten files

	* src/frontends/xforms/FormCommand.C (showInset): The rest of the
	Signals-not-copyable-problem Lars' started commenting out.

	* src/frontends/xforms/form_toc.[hC]: new files.  TOC crashes lyx.

2000-08-01  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/insets/insetcommand.h: Signals is not copyable so anoter
	scheme for automatic hiding of forms must be used.

	* src/frontends/xforms/FormCitation.h: don't inerit from
	noncopyable, FormCommand already does that.
	* src/frontends/xforms/FormToc.h: ditto
	* src/frontends/xforms/FormUrl.h: ditto

	* src/frontends/xforms/FormCitation.C: add include <algorithm>

2000-08-01  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/insets/insetcommand.h (hide): new SigC::Signal0
	(d-tor) new virtual destructor emits hide signal

	* src/insets/insetcite.[Ch] (hide, d-tor, EditMessage): removed
	* src/insets/inseturl.[Ch]  (hide, d-tor): ditto

	* src/insets/insettoc.[Ch]: one inset now deals with TOC, LOA,
	LOF and LOT. Inset is now GUI-independent

	* src/insets/insetloa.[Ch]: redundant
	* src/insets/insetlof.[Ch]: ditto
	* src/insets/insetlot.[Ch]: ditto

	* src/frontends/xforms/forms/form_url.fd: tweaked!
	* src/frontends/xforms/forms/form_citation.fd: ditto

	* src/frontends/xforms/FormCommand.[Ch]: new base class to those
	dialogs dealing with InsetCommand insets

	* src/frontends/xforms/FormCitation.[Ch]: now makes use of
	FormCommand base class
	* src/frontends/xforms/FormUrl.[Ch]: ditto

	* src/frontends/xforms/forms/form_toc.fd: Xforms implementation
	of the TOC dialog
	* src/frontends/xforms/FormToc.[Ch]: ditto

	* src/frontends/Dialogs.h (showCitation, showTOC, showUrl): all
	passed a generic InsetCommand pointer
	* src/frontends/xforms/Dialogs.C (c-tor): create instance of FormToc

	* src/lyxfunc.C (Dispatch) : modified to accomodate new FormToc class
	and modified InsetTOC class
	* src/buffer.C: ditto

	* forms/lyx.fd: strip out old FD_form_toc code
	* src/lyx_gui_misc.C: ditto
	* src/lyx_gui.C: ditto
	* src/lyx_cb.C: ditto
	* src/lyx.[Ch]: ditto

2000-08-01  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/utility.hpp: tr -d '\r'

2000-08-01  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.h: removed initFeatures() as it's not needed.

	* src/commandtags.h:
	* src/LyXAction.C (init): added LFUN_LAYOUT_TABULAR and
	LFUN_TABULAR_FEATURES.

	* src/lyxfunc.C (getStatus): implemented LFUN_TABULAR_FEATURES and
	LFUN_LAYOUT_TABULAR.

	* src/insets/insettabular.C (getStatus): implemented helper function.

	* lib/ui/default.ui: implemented edit-table-menu and layout-tabular.

2000-07-31  Juergen Vigna  <jug@sad.it>

	* src/text.C (draw): fixed screen update problem for text-insets.

	* src/text2.C (SetParagrpah): call an update of the inset-owner when
	something changed probably this has to be added in various other
	functions too.

	* src/insets/insettext.C (cy): fixed to give back the right cursor.y().

2000-07-31  Baruch Even <baruch.even@writeme.com>

	* src/frontends/xforms/RadioButtonGroup.C: Changed to use home-brew
	templates to satisfy compaq cxx.


2000-07-31  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/translator.h (equal_1st_in_pair::operator()): take
	const ref pair_type as arg.
	(equal_2nd_in_pair::operator()): ditto
	(Translator::~Translator): remove empty d-tor.

	* src/graphics/GraphicsCache.C: move include config.h to top, also
	put initialization of GraphicsCache::singleton here.
	(~GraphicsCache): move here
	(addFile): take const ref as arg
	(removeFile): ditto

	* src/lyxlex_pimpl.C (setFile): comment in old behaviour

	* src/BufferView2.C (insertLyXFile): change te with/without header
	check slightly.

2000-07-31  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/FormGraphics.C (apply): add some
	static_cast. Not very nice, but required by compaq cxx.

	* src/frontends/xforms/RadioButtonGroup.h: include header
	<utility> instead of <pair.h>

	* src/insets/insetgraphicsParams.C: add using directive.
	(readResize): change return type to void.
	(readOrigin): ditto.

	* src/lyxfunc.C (getStatus): add missing break for build-program
	function; add test for Literate for export functions.

	* lib/ui/default.ui: fix Insert->TOC->TOC; comment out invalid
	entries in Options menu.

2000-07-31  Baruch Even <baruch.even@writeme.com>

	* src/frontends/xforms/Toolbar_pimpl.C (toolbarItem::operator=):
	protect against auto-allocation; release icon when needed.

2000-07-31  Matej Cepl <CeplM@seznam.cz>

	* lib/kbd/czech.kmap: new file. standard Czech keyboard as found
	on usual typewriter.

	* lib/kbd/czech-prg.kmap: simpler czech kmap (which was the
	earlier czech.kmap), useful only for programming.

2000-07-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/FormCitation.h: fix conditioning around
	#pragma.

2000-07-31  Juergen Vigna  <jug@sad.it>

	* src/frontends/xforms/FormTabular.C (local_update): changed
	radio_linebreaks to radio_useparbox and added radio_useminipage.

	* src/tabular.C: made support for using minipages/parboxes.

	* src/bufferlist.C (QwriteAll): small fix for asking for save.

	* src/insets/insetgraphics.C (draw): just draw the inset so that the
	cursor is visible.
	(descent): so the cursor is in the middle.
	(width): bit smaller box.

	* src/insets/insetgraphics.h: added display() function.

2000-07-31  Baruch Even <baruch.even@writeme.com>

	* src/frontends/Dialogs.h: Added showGraphics signals.

	* src/frontends/xforms/forms/form_graphics.fd: Added file, the
	xforms form definition of the graphics dialog.

	* src/frontends/xforms/FormGraphics.h:
	* src/frontends/xforms/FormGraphics.C: Added files, the
	GUIndependent code of InsetGraphics

	* src/insets/insetgraphics.h:
	* src/insets/insetgraphics.C: Major writing to make it work.

	* src/insets/insetgraphicsParams.h:
	* src/insets/insetgraphicsParams.C: Added files, parameter passing
	struct between InsetGraphics and GUI.

	* src/LaTeXFeatures.h:
	* src/LaTeXFeatures.C (c-tor, require, getPackages): Enabled
	support for graphicx package.

	* src/buffer.C (parseSingleLyXformat2Token): Fixed read support
	for the graphics inset.

	* src/support/translator.h: Added file, used in
	InsetGraphicsParams. this is a template to translate between two
	types.

	* src/frontends/xforms/RadioButtonGroup.h:
	* src/frontends/xforms/RadioButtonGroup.C: Added files, Comprise a
	way to easily control a radio button group.

2000-07-28  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (LocalDispatch):
	(TabularFeatures): added support for lyx-functions of tabular features.
	(cellstart): refixed this function after someone wrongly changed it.

	* src/commandtags.h:
	* src/LyXAction.C (init): added support for tabular-features

2000-07-28  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/FormPreferences.C (build): Setup input return
	checking.  NOTE: It seems that pressing ESC to cancel the dialog also
	triggers the callback for input checking. As a result we sometimes get
	"LyX: This shouldn't happen..." printed to cerr.
	(input): Started using status variable since I only free() on
	destruction.  Some input checking for paths and font sizes.

	* src/frontends/xforms/FormPreferences.h: Use status to control
	activation of Ok and Apply

	* src/frontends/xforms/forms/form_preferences.fd: Setup input return
	callback.  Also resized to stop segfaults with 0.88.  The problem is
	that xforms-0.88 requires the folder to be wide enough to fit all the
	tabs.  If it isn't it causes all sorts of problems.

	* src/frontends/xforms/FormCopyright.[hC]: forward declare FD_form...

	* src/frontends/xforms/forms/README: Reflect reality.

	* src/frontends/xforms/forms/fdfix.sh: Clean up comments
	* src/frontends/xforms/forms/makefile: ditto.

	* src/commandtags.h: Get access to new Preferences dialog
	* src/LyXAction.C: ditto
	* src/lyxfunc.C: ditto
	* lib/ui/default.ui: ditto

2000-07-27  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/forms/makefile (.c.C): change call to fdfix.sh.

	* src/frontends/xforms/Makefile.am (libxforms_la_SOURCES): add a
	few files.

	* src/frontends/xforms/form_url.[Ch]: added.

2000-07-27  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/insets/insetbib.h: fixed bug in previous commit

	* src/frontends/xforms/FormUrl.h: ditto

	* src/frontends/xforms/FormPrint.h: ditto

	* src/frontends/xforms/FormPreferences.h: ditto

	* src/frontends/xforms/FormCopyright.h: ditto

	* src/frontends/xforms/FormCitation.C: ditto

	* src/frontends/Dialogs.h (class Dialogs): use noncopyable, remove
	private copyconstructor and private default contructor

	* src/support/Makefile.am: add utility.hpp

	* src/support/utility.hpp: new file from boost

	* src/insets/insetbib.h: set owner in clone

	* src/frontends/xforms/FormCitation.C: added missing include
	algorithm

	* src/insets/form_url.[Ch]: removed

2000-07-26  Kayvan A. Sylvan <kayvan@sylvan.com>

	* development/lyx.spec.in
	* Makefile.am: Fix buglet for LyX RPM generation resulting from
	file/directory re-organization.

2000-07-26  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/insets/insetcommand.[Ch]: moved the string data and
	associated manipulation methods into a new stand-alone class
	InsetCommandParams. This class has two additional methods
	getAsString() and setFromString() allowing the contents to be
	moved around as a single string.
	(addContents) method removed.
	(setContents) method no longer virtual.

	* src/buffer.C (readInset): made use of new InsetCitation,
	InsetUrl constructors based on InsetCommandParams.

	* src/commandtags.h: add LFUN_INSERT_URL

	* src/lyxfunc.C (Dispatch): changed to accomadate GUI-
	independent InsetUrl and use InsetCommandParams to extract
	string info and create new Insets.

	* src/frontends/Dialogs.h: add signals showUrl, createUrl.

	* src/frontends/xforms/FormCitation.C (apply): uses
	InsetCommandParams.

	* src/frontends/xforms/form_url.C
	* src/frontends/xforms/form_url.h
	* src/frontends/xforms/FormUrl.h
	* src/frontends/xforms/FormUrl.C
	* src/frontends/xforms/forms/form_url.fd: new files

	* src/insets/insetcite.[Ch]: removed unused constructors.

	* src/insets/insetinclude.[Ch]: no longer store filename

	* src/insets/inseturl.[Ch]: GUI-independent.

2000-07-26  Juergen Vigna  <jug@sad.it>
	* renamed frontend from gtk to gnome as it is that what is realized
	and did the necessary changes in the files.

2000-07-26  Marko Vendelin <markov@ioc.ee>
	* autogen.sh
	* configure.in: cleaning up gnome configuration scripts

2000-07-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/frontends/xforms/Menubar_pimpl.C (set): fix the disappearing
	shortcuts syndrom by redrawing them explicitely (a better solution
	would be appreciated).

	* src/lyxfunc.C (getStatus): fix crash when functions are disabled.

	* src/frontends/xforms/Menubar_pimpl.C (set): fix the shortcut of
	the button.

	* src/lyx_cb.C (MenuExport): change html export to do the right
	thing depending of the document type (instead of having
	html-linuxdoc and html-docbook).
	* src/lyxfunc.C (getStatus): update for html
	* lib/ui/default.ui: simplify due to the above change.
	* src/menus.C (ShowFileMenu): update too (in case we need it).

	* src/MenuBackend.C (read): if a menu is defined twice, add the
	new entries to the exiting one.

2000-07-26  Juergen Vigna  <jug@sad.it>

	* src/buffer.h: added functions setUnnamed(bool) and isUnnamed().

	* src/lyx_cb.C (MenuWriteAs): Changed to react right for unnamed docs
	and return a bool if it did actual save the file.
	(AutoSave): don't autosave a unnamed doc.

	* src/bufferlist.C (close) (QwriteAll) (emergencyWriteAll):
	check if this is an UNNAMED new file and react to it.
	(newFile): set buffer to unnamed and change to not mark a new
	buffer dirty if I didn't do anything with it.

	* src/lyxfunc.C (MenuNew): Changed to not ask for filename on new.

2000-07-26  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/frontends/Menubar.h: make "struct Pimpl;" public + the
	friend as per Angus's patch posted to lyx-devel.

	* src/ext_l10n.h: updated

	* src/frontends/xforms/Toolbar_pimpl.C (updateLayoutList): run
	gettext on the style string right before inserting them into the
	combox.

	* autogen.sh: add code to extract style strings form layout files,
	not good enough yet.

	* src/frontends/gtk/.cvsignore: add MAKEFILE

	* src/MenuBackend.C (read): run the label strings through gettext
	before storing them in the containers.

	* src/ext_l10n.h: new file

	* autogen.sh : generate the ext_l10n.h file here

2000-07-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxrc.C (read): do not use LyXLex::lex() to parse set_color
	arguments.

	* lib/ui/default.ui: fix a couple of typos.

	* config/gnome/gtk.m4: added (and added to the list of files in
	autogen.sh).

	* src/insets/insetinclude.C (unique_id): fix when we are using
	lyxstring instead of basic_string<>.
	* src/insets/insettext.C (LocalDispatch): ditto.
	* src/support/filetools.C: ditto.

	* lib/configure.m4: create the ui/ directory if necessary.

	* src/LyXView.[Ch] (updateToolbar): new method.

	* src/BufferView_pimpl.C (buffer): update the toolbar when
	opening/closing buffer.

2000-07-24  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/LyXAction.C (getActionName): enhance to return also the name
	and options of pseudo-actions.
	(init): New lyxfunc LFUN_MATH_PANEL=="math-panel".

	* lib/ui/default.ui: use OptItem in the vc submenu (intented just
	as an example of what is possible). Used in File->Build too (more
	useful) and in the import/export menus (to mimick the complicated
	handling of linuxdoc and friends). Try to update all the entries.

	* src/frontends/xforms/Menubar_pimpl.C (create_submenu): handle
	optional entries.

	* src/MenuBackend.C (read): Parse the new OptItem tag.

	* src/MenuBackend.h: Add a new optional_ data member (used if the
	entry should be omitted when the lyxfunc is disabled).

	* src/frontends/xforms/Menubar_pimpl.C (string_width): new
	function, used as a shortcut.
	(create_submenu): align correctly the shortcuts on the widest
	entry.

	* src/MenuBackend.h: MenuItem.label() only returns the label of
	the menu without shortcut; new method shortcut().

2000-07-14  Marko Vendelin <markov@ioc.ee>

	* src/frontends/gtk/Dialogs.C:
	* src/frontends/gtk/FormCopyright.C:
	* src/frontends/gtk/FormCopyright.h:
	* src/frontends/gtk/Makefile.am: added these source-files for the
	Gtk/Gnome support of the Copyright-Dialog.

	* src/main.C: added Gnome::Main initialization if using
	Gtk/Gnome frontend-GUI.

	* src/lyx_gui.C: added Gnome event loop if using Gtk/Gnome
	frontend-GUI.
	* config/gnome/aclocal-include.m4
	* config/gnome/compiler-flags.m4
	* config/gnome/curses.m4
	* config/gnome/gnome--.m4
	* config/gnome/gnome-bonobo-check.m4
	* config/gnome/gnome-common.m4
	* config/gnome/gnome-fileutils.m4
	* config/gnome/gnome-ghttp-check.m4
	* config/gnome/gnome-gnorba-check.m4
	* config/gnome/gnome-guile-checks.m4
	* config/gnome/gnome-libgtop-check.m4
	* config/gnome/gnome-objc-checks.m4
	* config/gnome/gnome-orbit-check.m4
	* config/gnome/gnome-print-check.m4
	* config/gnome/gnome-pthread-check.m4
	* config/gnome/gnome-support.m4
	* config/gnome/gnome-undelfs.m4
	* config/gnome/gnome-vfs.m4
	* config/gnome/gnome-x-checks.m4
	* config/gnome/gnome-xml-check.m4
	* config/gnome/gnome.m4
	* config/gnome/gperf-check.m4
	* config/gnome/gtk--.m4
	* config/gnome/linger.m4
	* config/gnome/need-declaration.m4: added configuration scripts
	for Gtk/Gnome frontend-GUI

	* configure.in: added support for the --with-frontend=gtk option

	* autogen.sh: added config/gnome/* to list of config-files

	* acconfig.h: added define for GTKGUI-support

	* config/lyxinclude.m4: added --with-frontend[=value] option value
	for Gtk/Gnome frontend-GUI support.

2000-07-25  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lstrings.C (prefixIs): rewrite so that gcc bastring
	can be used.
	(suffixIs): ditto

	* src/paragraph.C (GetChar): remove non-const version

	* src/lyxlex_pimpl.C (compare_tags): rewritten to suit cvs gcc 2.96
	(search_kw): use it.

	* src/lyx_main.C (init): if "preferences" exist, read that instead
	of "lyxrc".
	(ReadRcFile): return bool if the file could be read ok.
	(ReadUIFile): add a check to see if lex file is set ok.

	* src/lyx_cb.C (InsertAsciiFile): rewrite a bit so that gcc
	bastring can be used instead of lyxstring (still uses the old code
	if std::string is good enough or if lyxstring is used.)

	* src/encoding.C: make the arrays static, move ininle functions
	here
	* src/encoding.h: from here.

	* src/buffer.C: have last_isnet_read as a file scope variable for now.
	(parseSingleLyXformat2Token): move inset parsing to separate method
	(readInset): new private method

	* src/Variables.h: remove virtual from get().

	* src/ToolbarDefaults.C: include lyxparagraph.h temporary to get
	access to NEW_INSETS and NEW_TABULAR

	* src/MenuBackend.h: remove superfluous forward declaration of
	MenuItem. Add documentations tags "///", remove empty MenuItem
	destructor, remove private default contructor.

	* src/MenuBackend.C (MenuItem): remove unneeded copy contructor
	(add): return *this
	(read): more string mlabel and mname to where they are used
	(read): remove unused variables mlabel and mname
	(defaults): unconditional clear, make menusetup take advantage of
	add returning Menu &.

	* src/LyXView.h: define NEW_MENUBAR as default

	* src/LyXAction.C: include lyxparagraph.h temporary to get access
	to NEW_INSETS and NEW_TABULAR.
	(init): commetn out some funcs that is obsolete when NEW_INSETS is
	defined. Change some of the "xxxx-inset-insert" functions names to
	"xxxx-insert".

	* several files: more enahncements to NEW_INSETS and the resulting
	LyXParagraph code.

	* lib/lyxrc.example (\date_insert_format): move to misc section

	* config/lyxinclude.m4 (LYX_CXX_STL_STRING): allow to use the gcc
	bastring and use AC_CACHE_CHECK.
	(LYX_CXX_GOOD_STD_STRING): new check. Checks if the std::string of
	the system have the newest methods. uses AC_CACHE_CHECK
	(LYX_CXX_MUTABLE): use AC_CACHE_CHECK
	(LYX_CXX_PARTIAL): use AC_CACHE_CHECK
	(LYX_CXX_NAMESPACES): use AC_CACHE_CHECK

	* configure.in: add LYX_CXX_GOOD_STD_STRING

	* acinclude.m4: recreated

2000-07-24  Amir Karger <karger@lyx.org>

	* README: add Hebrew, Arabic kmaps
	* ANNOUNCE: typo

2000-07-24  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/buffer.C (writeFileAscii): Define actcell as an int instead
	of int*.

2000-07-23  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* Lot of files: add pragma interface/implementation.

	* src/lyx_main.C (ReadUFile): new method. Read the UI file.

	* lib/ui/default.ui: new file (ans new directory). Contains the
	default menu and toolbar.

	* src/lyxrc.[Ch]: new variable ui_file. Move toolbardefaults to
	global space. Toolbars are now read (as menus) in ui files.

	* src/debug.C: change Debug::TOOLBAR to Debug::GUI.

	* src/lyxfunc.C (getStatus): do not exit immediately if a command
	is disabled because the document is read-only. We want to have the
	toggle state of the function anyway.
	(getStatus): add code for LFUN_VC* functions (mimicking what is
	done in old-style menus)

	* src/lyxfunc.C (Dispatch): news functions LFUN_SWITCHBUFFER,
	LFUN_HELP_CREDITS, LFUN_HELP_VERSION, LFUN_HELP_OPEN.

	* src/LyXView.[Ch]: add code for the NEW_MENUBAR define.
	* src/BufferView_pimpl.C: ditto.
	* src/lyxfunc.C: ditto.

	* src/LyXView.h: add a define NEW_MENUBAR (commented out by
	default). This replaces old-style menus by new ones.

	* src/MenuBackend.[Ch]: new classes MenuBackend, Menu and
	MenuItem. Contain the data structure of a menu.

	* src/insets/insettext.C: use LyXView::setLayout instead of
	accessing directly the toolbar combox.
	* src/lyxfunc.C (Dispatch): ditto.

	* src/LyXView.C (setLayout): new method, which just calls
	Toolbar::setLayout().
	(updateLayoutChoice): move part of this method in Toolbar.

	* src/toolbar.[Ch]: removed.

	* src/frontend/xforms/Toolbar_pimpl.[Ch]: new files. The xforms
	implementation the toolbar.

	* src/frontend/Toolbar.[Ch]: new files. The abstract interface of
	the toolbar. It might make sense to merge it with ToolbarDefaults
	later.
	(setLayout): new function.
	(updateLayoutList): ditto.
	(openLayoutList): ditto.

	* src/frontend/xforms/Toolbar_pimpl.[Ch]: new files. Contain the
	xforms implementation of the toolbar.
	(get_toolbar_func): comment out, since I do not
	know what it is good for.

	* src/ToolbarDefaults.h: Add the ItemType enum.

	* src/support/StrPool.[Ch]: new class. Acts as a reference holder
	for a list of allocated C strings. Used in Menubar xforms
	implementation to avoid memory leaks.

	* src/support/lstrings.[Ch] (uppercase): new version taking and
	returning a char.
	(lowercase): ditto.

	* lib/bind/xemacs.bind: remove bogus binding for lyx-quit.
	* lib/bind/emacs.bind: ditto.

2000-07-21  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/toolbar.h: include commandtags.h instead of lyxfunc.h,
	forward decl of LyXView.

	* src/toolbar.C (toolbarItem): moved from toolbar.h
	(toolbarItem::clean): ditto
	(toolbarItem::~toolbarItem): ditto
	(toolbarItem::operator): ditto

	* src/text2.C (SetLayout): commetn out USE_OLD_SETUP_LAYOUT stuff

	* src/paragraph.h: control the NEW_TABULAR define from here

	* src/buffer.C: remove define USE_PARSE_FUNCTION, change
	USE_TABULAR_INSETS to NEW_TABULAR

	* src/ToolbarDefaults.C: add include "lyxlex.h"

	* files using the old table/tabular: use NEW_TABULAR to control
	compilation of old tabular stuff.

	* src/paragraph.C (SimpleTeXOnePar): NEW_INSETS: move some #ifdef
	to correct place.

	* src/buffer.C (parseSingleLyXformat2Token): NEW_INSETS: fix the
	planemet in reading of old style floats, fix the \end_deeper
	problem when reading old style floats.

2000-07-20  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/paragraph.C (writeFile): NEW_INSETS: move a misplaced #endif

2000-07-20  Serge Winitzki <winitzki@erebus.phys.cwru.edu>

	* lib/bind/sciword.bind: updated.

2000-07-20  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/paragraph.C (writeFile): NEW_INSETS: possible fix to the
	layout write problem

2000-07-20  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/Makefile.am (INCLUDES): remove image directory from include
	path.

	* src/bullet_forms.C (create_form_form_bullet): small cleanup.
	* src/bullet_forms_cb.C (BulletPanelCB): ditto.

	* src/LyXView.C (create_form_form_main): read the application icon
	from the disk.

	* lib/images/*.xpm: change the icons to use transparent color for
	background.

	* src/toolbar.C (update): change the color of the button when it
	is toggled on.

2000-07-20  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxfunc.C (Dispatch): use LyXView::ShowState instead of
	setting explicitely the minibuffer.
	* src/BufferView_pimpl.C (workAreaButtonRelease): ditto.

	* src/LyXView.C (showState): new function. Shows font information
	in minibuffer and update toolbar state.
	(LyXView): call Toolbar::update after creating the
	view.

	* src/toolbar.C: change toollist to be a vector instead of a
	linked list.
	(BubbleTimerCB): get help string directly from the callback
	argument of the corresponding icon (which is the action)
	(set): remove unnecessary ugliness.
	(update): new function. update the icons (depressed, disabled)
	depending of the status of the corresponding action.

	* src/toolbar.h: remove help in toolbarItem

2000-07-19  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/Painter.C (text): Added code for using symbol glyphs from
	iso10646 fonts. Currently diabled.

	* src/encoding.C: Added new encodings: iso8859_3,iso8859_9 and
	symbol_encoding.

	* src/language.C (initL): Fixed encodings for esperanto,lsorbian,
	magyar,turkish and usorbian.

	* src/paragraph.C (isMultiLingual): Made more efficient.

	* src/mathed/formula.C (LocalDispatch): Fixed behavior of greek
	keyboard.

	* src/mathed/math_symbols.C (math_insert_greek): Changed to use
	LocalDispatch(..,LFUN_SELFINSERT,..) instead of math_insert_symbol().
	Also changed the prototype to "bool math_insert_greek(char)".

2000-07-19  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* lots of files: apply the NEW_INSETS on all code that will not be
	needed when we move to use the new insets. Enable the define in
	lyxparagrah.h to try it.

	* src/insets/insettabular.C (cellstart): change to be a static
	inline function
	(InsetTabular): initialize buffer in the initializer list.

2000-07-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/frontends/xforms/FormPrint.[Ch] : moved #include
	form_print.h out of the header file. Replaced with forward
	declarations of the relevant struct.

	* src/frontends/xforms/FormPreferences.[Ch] : ditto for
	form_preferences.h.

	* src/commandtags.h: do not include "debug.h" which does not
	belong there. #include it in some other places because of this
	change.

2000-07-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/insetcaption.C: add a couple "using" directives.

	* src/toolbar.C (add): get the help text directly from lyxaction.
	(getPixmap): nuked.
	(setPixmap): new function. Loads from disk and sets a pixmap on a
	botton; the name of the pixmap file is derived from the command
	name.

	* src/toolbar.h: remove members isBitmap and pixmap from
	toobarItem struct.

	* lib/images/*.xbm *_bw.xpm: remove (not used any more).
	* lib/images/: move many files from images/banner.xpm.

	* src/lyx_gui.C (create_forms): read banner pixmap from file.

	* src/lyx_gui.C (create_forms): remove TWO_COLORS_ICONS support.
	* src/toolbar.C: ditto.
	* configure.in: ditto.
	* INSTALL: document.

	* src/spellchecker.C (ShowSpellChecker): use CancelCloseCB when
	the spellchecker popup is closed from the WM.

2000-07-19  Juergen Vigna  <jug@sad.it>

	* src/insets/insetfloat.C (Write): small fix because we use the
	insetname for the type now!

2000-07-18  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/frontends/xforms/forms/form_citation.fd: object sizes are
	now set here

	* src/frontends/Dialogs.h: removed hideCitation signal

	* src/insets/insetcite.h: added hide signal

	* src/insets/insetcite.C (~InsetCitation): emits new signal
	(getScreenLabel): "intelligent" label should now fit on the screen!

	* src/frontends/xforms/FormCitation.[Ch] (hideInset): removed

	* src/frontends/xforms/FormCitation.C (showInset): connects
	hide() to the inset's hide signal
	(show): modified to use fl_set_object_position rather than
	fl_set_object_geometry wherever possible

2000-07-18  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/insets/lyxinset.h: add caption code

	* src/insets/insetfloat.C (type): new method

	* src/insets/insetcaption.C (Write): new method
	(Read): new method
	(LyxCode): new method

	* src/text2.C (SetCounter): revert Jürgens code, but use his idea
	to get it right together with using the FloatList.

	* src/commandtags.h: add LFUN_INSET_CAPTION
	* src/lyxfunc.C (Dispatch): handle it

	* src/buffer.C (parseSingleLyXformat2Token): add code to read a
	caption inset.

	* src/Variables.[Ch]: make expand take a const reference, remove
	the destructor, some whitespace changes.

	* src/LyXAction.C (init): add caption-inset-insert

	* src/FloatList.C (FloatList): update the default floats a bit.

2000-07-17  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/Variables.[Ch]: new files. Intended to be used for language
	specific strings (like \chaptername) and filename substitution in
	commands.

	* src/trans.C (AddDeadkey): replace keyword "all" with "native" in
	kmap files.
	* lib/kbd/american.kmap: update

	* src/trans_mgr.C (normalkey): do not test allowAccent anymore.

	* src/bufferparams.[Ch]: remove member allowAccents.

	* src/menus.C (ShowOptionsMenu): remove the LaTeX entry.

	* src/LaTeXLog.C: use the log_form.h header.
	* src/lyx_gui.C: ditto.
	* src/lyx_gui_misc.C: ditto.
	* src/lyxvc.h: ditto.

	* forms/log_form.fd: new file, created from latexoptions.fd. I
	kept the log popup and nuked the options form.

	* src/{la,}texoptions.[Ch]: removed.
	* src/lyx_cb.C (LaTeXOptions): ditto

	* src/lyx_gui.C (create_forms): do not handle the
	fd_latex_options form.

2000-07-18  Juergen Vigna  <jug@sad.it>

	* src/insets/insetfloat.C (InsetFloat): use setInsetName to set the
	name of the inset so that it can be requested outside (text2.C).

	* src/text2.C (SetCounter): modified so it sees insetfloat for caption
	labels.

2000-07-17  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/mathed/formula.h (ConvertFont): constify

	* src/mathed/formula.C (Read): add warning if \end_inset is not
	found on expected place.

	* src/insets/lyxinset.h (ConvertFont): consify

	* src/insets/insetquotes.C (ConvertFont): constify
	* src/insets/insetquotes.h: ditto

	* src/insets/insetinfo.h: add labelfont

	* src/insets/insetinfo.C (InsetInfo): set the labelfont
	(ascent): use labelfont
	(descent): likewise
	(width): likewise
	(draw): likewise
	(Write): make .lyx file a bit nicer

	* src/insets/insetfloat.C (Write): simplify somewhat...
	(Read): add warning if arg is not found

	* src/insets/insetcollapsable.C: add using std::max
	(Read): move string token and add warning in arg is not found
	(draw): use std::max to get the right ty
	(getMaxWidth): simplify by using std::max

	* src/insets/insetsection.h: new file
	* src/insets/insetsection.C: new file
	* src/insets/insetcaption.h: new file
	* src/insets/insetcaption.C: new file

	* src/insets/inset.C (ConvertFont): constify signature

	* src/insets/Makefile.am (libinsets_la_SOURCES): add
	insetcaption.[Ch] and insetsection.[Ch]

	* src/layout.h: remove LABEL_FIRST_COUNTER from enum, change all
	uses to use LABEL_COUNTER_CHAPTER instead.
	* src/text2.C (SetCounter): here

	* src/counters.h: new file
	* src/counters.C: new file
	* src/Sectioning.h: new file
	* src/Sectioning.C: new file

	* src/Makefile.am (lyx_SOURCES): add Sectioning.[hC] and counters.[Ch]

2000-07-17  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/Makefile.am (listerrors): build-listerrors is in ${srcdir},
	not always in "."!

	* src/paragraph.[Ch] (SimpleTeXSpecialChars): fix the definition of
	the last argument.

2000-07-17  Juergen Vigna  <jug@sad.it>

	* src/tabular.C (Validate): check if array-package is needed.
	(SetVAlignment): added support for vertical alignment.
	(SetLTFoot): better support for longtable header/footers
	(Latex): modified to support added features.

	* src/LaTeXFeatures.[Ch]: added array-package.

2000-07-17  R. Lahaye  <lahaye@postech.ac.kr>

	* src/lyx_gui.C (LyXGUI): make sure that the height is large
	enough.

2000-07-17  Kayvan Sylvan <ksylvan@synopsys.com>

	* configure.in: do not forget to put a space after -isystem.

2000-07-10  Dekel Tsur  <dekel@math.tau.ac.il>

	* lib/kbd/arabic.kmap: a few fixes.

2000-07-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* some whitespace chagnes to a number of files.

	* src/support/DebugStream.h: change to make it easier for
	doc++ to parse correctly.
	* src/support/lyxstring.h: ditto

	* src/mathed/math_utils.C (compara): change to have only one
	operator()
	(MathedLookupBOP): change because of the above.

	* src/mathed/math_delim.C (math_deco_compare): change to have only
	one operator()
	(search_deco): change becasue of the above.

	* src/insets/insettabular.C (DrawCellSelection): use std::swap
	instead of manually coded one.

	* src/insets/insetquotes.C (Read): read the \end_inset too

	* src/insets/insetlatex.h: remove file
	* src/insets/insetlatex.C: remove file

	* src/insets/insetindex.[Ch] (InsetPrintIndex): remove default
	constructor
	(InsetPrintIndex): remove destructor

	* src/insets/insetinclude.h: remove default constructor

	* src/insets/insetfloat.C: work to make it work better

	* src/insets/inseterror.[Ch] (InsetError): remove default constructor

	* src/insets/insetcite.h (InsetCitation): remove default constructor

	* src/insets/insetbutton.[Ch] (InsetButton): remove default constructor

	* src/text.C (GetColumnNearX): comment out some currently unused code.

	* src/paragraph.C (writeFile): move some initializations closer to
	first use.
	(CutIntoMinibuffer): small change to use new matchIT operator
	(Erase): ditto
	(Erase): ditto
	(InsertChar): ditto
	(InsertInset): ditto
	(GetInset): ditto
	(GetInset): ditto
	(InsetIterator): ditto
	(Erase): small change to use new matchFT operator
	(InsertChar): ditto
	(GetFontSettings): ditto
	(HighestFontInRange): ditto
	(SetFont): ditto

	* src/lyxparagraph.h: some chars changed to value_type
	(matchIT): because of some stronger checking (perhaps too strong)
	in SGI STL, the two operator() unified to one.
	(matchFT): ditto

	* src/lyxfunc.C (Dispatch): code to insert InsetFloat improved

	* src/buffer.C (parseSingleLyXformat2Token): static string to hold
	the last inset read added
	(parseSingleLyXformat2Token): some more (future) compability code added
	(parseSingleLyXformat2Token): warning about solitary \end_inset added
	(parseSingleLyXformat2Token): set last_inset_read
	(parseSingleLyXformat2Token): more code to read new "Float" correctly
	(parseSingleLyXformat2Token): don't double intializw string next_token

	* src/TextCache.C (text_fits::operator()): add const's to the signature
	(has_buffer::operator()): ditto

	* src/Floating.h: add some comments on the class

	* src/FloatList.[Ch] (typeExist): new method
	(getType): ditto

	* src/BackStack.h: added default constructor, wanted by Gcc.

2000-07-14  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (clear): fixed for multiple paragraps/layouts.

	* src/frontends/xforms/forms/form_tabular.fd: updated a bit.

	* src/insets/insettabular.C (resizeLyXText): need this to be able to
	do a redraw when the window is resized!
	(LocalDispatch): small fix so LFUN_TAB works only with locked_inset.

	* src/insets/insettext.C (resizeLyXText): added function to correctly
	being able to resize the LyXWindow.

	* src/table.C (Read): fixed read on DOS-lyx-file (lf-lr)

2000-07-13  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/frontends/Dialogs.h (hideCitation) : new signal to prevent
	crashes when closing dialog to a deleted inset.

	* src/insets/insetcite.[Ch] (Edit) : the return of this former
	method! Now similar to other insets.

2000-07-13  Juergen Vigna  <jug@sad.it>

	* src/text.C (GetVisibleRow): fixed clearing of rows with insets!

	* lib/examples/Literate.lyx: small patch!

	* src/insets/insetbib.C (Read): added this function because of wrong
	Write (without [begin|end]_inset).

2000-07-11  Juergen Vigna  <jug@sad.it>

	* src/BufferView2.C (open_new_inset): changed to a bool returnvalue
	as the insertInset could not be good!

	* src/screen.C (ToggleSelection): fixed toggle selection bug as
	the bool param should not be last.

2000-07-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* sigc++/configure.in: fix bug in threading-related code (Yes, I
	did submit that to Karl).

	* configure.in: use -isystem instead of -I for X headers. This
	fixes a problem on solaris with a recent gcc;
	put the front-end code after the X detection code;
	configure in sigc++ before lib/

	* src/lyx_main.C (commandLineHelp): remove -display from command
	line help.

2000-07-09  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* lib/Makefile.am: added lib/build-listerrors to DIST tarfile.
	Also put in Makefile rules for building the ``listerrors''
	program for parsing errors from literate programs written in LyX.

	* lib/build-listerrors: Added small shell script as part of compile
	process. This builds a working ``listerrors'' binary if noweb is
	installed and either 1) the VNC X server is installed on the machine,
	or 2) the user is compiling from within a GUI. The existence of a GUI
	is necessary to use the ``lyx --export'' feature for now. This
	hack can be removed once ``lyx --export'' no longer requires a GUI to
	function.

2000-07-09  Bernard Michael Hurley <bernardh@westherts.ac.uk>

	* lib/examples/Literate.lyx, src/Literate.[Ch]: Error messages are
	now passed back correctly from gcc and placed "under" error
	buttons in a Literate LyX source.

2000-07-08  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/text.C (GetColumnNearX): Better behavior when a RTL
	paragraph is ended by LTR text.

	* src/text2.C (SetCurrentFont,CursorLeftIntern,CursorRightIntern):
	Ditto

2000-07-08  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/WorkArea.C  (request_clipboard_cb): Set clipboard_read to
	true when clipboard is empty.

2000-07-08  Dekel Tsur  <dekel@math.tau.ac.il>

	* text.C (Backspace): Prevent rebreaking of a row if it is the last
	row of the paragraph.
	(SetHeightOfRow): Call to PrepareToPrint with 7th argument = false
	to prevent calculation of bidi tables

2000-07-07  Juergen Vigna  <jug@sad.it>

	* src/screen.C (ToggleSelection): added y_offset and x_offset
	parameters.

	* src/insets/insettext.C (InsetMotionNotify): fixed selection with
	mouse.

	* src/text.C (GetVisibleRow): fixed selection drawing in insets.

	* src/insets/insettext.C: fixed Layout-Display!

2000-07-07  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* configure.in: add check for strings.h header.

	* src/spellchecker.C: include <strings.h> in order to have a
	definition for bzero().

2000-07-07  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (draw): set the status of the bv->text to
	CHANGED_IN_DRAW if top_x changed and so a reinit is necessary.

	* src/screen.C (DrawOneRow):
	(DrawFromTo): redraw the actual row if something has changed in it
	while drawing.

	* src/text.C (draw): call an update of the toplevel-inset if something
	has changed inside while drawing.

	* src/lyxtext.h: added CHANGED_IN_DRAW status.

2000-07-06  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/insets/insetbib.[Ch] (callback) new method, moving callback
	processing inside class.

	* src/insets/insetindex.[Ch] (callback) new method, moving callback
	processing inside class.

	* src/insets/insetindex.h new struct Holder, consistent with other
	insets.

	* src/insets/insetcite.[Ch] and elsewhere: stripped out xforms
	citation dialog from main code and placed it in src/frontends/xforms.
	Dialog launched through signals instead of callbacks

2000-07-06  R. Lahaye  <lahaye@postech.ac.kr>

	* lyx.man: update the options description.

2000-07-05  R. Lahaye  <lahaye@postech.ac.kr>

	* src/lyx_gui.C src/lyx_main.C: improve the -geometry support,
	handle neg values, set min width to 590, add doc about -display

2000-07-05  Juergen Vigna  <jug@sad.it>

	* src/insets/lyxinset.h: changed Painter & in ascent(), descent()
	calls to BufferView *.

	* src/insets/insettext.C (checkAndActivateInset): small fix non
	HIGHLY_EDITABLE insets should not be entered by cursor-move-over!

	* src/insets/insetcommand.C (Read): Fixed as insets should read till
	their \end_inset token!

2000-07-04  edscott  <edscott@imp.mx>

	* src/lyxrc.C, src/lyxrc.h, src/BufferView_pimpl.C,
	lib/lyxrc.example: added option \wheel_jump

2000-07-04  R. Lahaye  <lahaye@postech.ac.kr>

	* src/lyx_gui.C src/lyx_main.C: add support for -geometry, and
	remove support for -width,-height,-xpos and -ypos.

2000-07-01  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/encoding.[Ch]: New files.

	* src/painter.C (text(int,int,XChar2b const *,...)): New method.
	(text): Call to the underline() method only when needed.

	* src/font.C (XTextWidth16,width(XChar2b const *,...)): New methods.

	* src/buffer.C (makeLaTeXFile): Compute automatically the input
	  encoding(s) for the document.

	* src/bufferparams.C (BufferParams): Changed default value of
	inputenc to "auto".

	* src/language.C (newLang): Removed.
	(items[]): Added encoding information for all defined languages.

	* src/lyx_gui.C (create_forms): Added "auto" option to the input
	encoding choice button.

	* src/lyxrc.h (font_norm_type): New member variable.
	(set_font_norm_type): New method.

	* src/paragraph.C (TeXOnePar): Put "\inputencoding{}" between
	paragraphs with different encodings.

	* src/text.C (is_arabic, is_nikud, TransformChar): Moved to encoding.C
	(TransformChar): Changed to work correctly with Arabic points.
	(draw): Added support for drawing Arabic points.
	(draw): Removed code for drawing underbars (this is done by
	the Painter!)

	* src/support/textutils.h (IsPrintableNonspace): New function.

	* src/BufferView_pimpl.h: Added "using SigC::Object".
	* src/LyXView.h: ditto.

	* src/insets/insetinclude.h (include_label): Changed to mutable.

2000-07-04  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/mathed/math_iter.h: remove empty destructor

	* src/mathed/math_cursor.h: remove empty destructor

	* src/insets/lyxinset.h: add THEOREM_CODE

	* src/insets/insettheorem.[Ch]: new files

	* src/insets/insetminipage.C: (InsertInset): remove

	* src/insets/insetmarginal.C: inherit from InsetFootLike instead
	of InsetCollapsable
	(InsertInset): remove

	* src/insets/insetlist.C: (InsertList): remove

	* src/insets/insetfootlike.[Ch]: new files

	* src/insets/insetfoot.C: inherit from InsetFootLike instead of
	InsetCollapsable.
	(Write): remove
	(InsertInset): ditto

	* src/insets/insetert.C: remove include Painter.h, reindent
	(InsertInset): move to header

	* src/insets/insetcollapsable.h: remove explicit from default
	contructor, remove empty destructor, add InsertInset

	* src/insets/insetcollapsable.C (InsertInset): new func

	* src/insets/Makefile.am (libinsets_la_SOURCES): add new files

	* src/vspace.h: add explicit to constructor

	* src/paragraph.C (SimpleTeXSpecialChars): use \, instead of
	\textcompwordmark, please test this.

	* src/lyxrc.C: set ascii_linelen to 65 by default

	* src/lyxfunc.C (Dispatch): handle LFUN_INSET_THEOREM

	* src/commandtags.h: add LFUN_INSET_THEOREM

	* src/buffer.C (parseSingleLyXformat2Token): handle insettheorem
	(makeLinuxDocFile): remove _some_ of the nice logic
	(makeDocBookFile): ditto

	* src/Painter.[Ch]: (~Painter): removed

	* src/LyXAction.C (init): entry for insettheorem added

	* src/LaTeX.C: get rid of the all_files array, and the TEX_FILES
	enum
	(deplog): code to detect files generated by LaTeX, needs testing
	(deptex): removed

2000-07-03  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/FloatList.[Ch]: moved inlines out of line to FloatList.C

2000-07-02  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/LaTeX.C (deplog): Add a check for files that are going to be
	created by the first latex run, part of the project to remove the
	all_files array.

	* src/LaTeX.[Ch]: Patch from Baruch to add hebrew table of
	contents to the extension list.

2000-07-04  Juergen Vigna  <jug@sad.it>

	* src/text.C (NextBreakPoint): added support for needFullRow()

	* src/insets/lyxinset.h: added needFullRow()

	* src/insets/insetcollapsable.C: redone now this uses a text-inset
	and isn't one.

	* src/insets/insettext.C: lots of changes for update!

2000-07-03 Angus Leeming <a.leeming@ic.ac.uk>

	* src/LaTeXFeatures.h: add a missing std:: qualifier.

2000-07-02 José Abílio Matos <jamatos@fep.up.pt>

	*  src/insets/insetinclude.C (InsetInclude): fixed
	initialization of include_label.
	(unique_id): now returns a string.

2000-07-01 José Abílio Matos <jamatos@fep.up.pt>

	* src/LaTeXFeatures.h: new member IncludedFiles, for
	a map of key, included file name.

	* src/LaTeXFeatures.C (getIncludedFiles): returns a string
	with the included files for inclusion in SGML preamble,
	i. e., linuxdoc and docbook.

	* src/buffer.h:
	* src/buffer.C (makeLinuxDocFile): takes two new arguments,
	nice (is the generated linuxdoc code to be exported?), that
	allows to remove column, and only_body that will be true for
	slave documents. Insets are allowed inside SGML font type.
	New handling of the SGML preamble for included files.
	(makeDocBookFile): the same for docbook.

	* src/insets/insetinclude.h:
	* src/insets/insetinclude.C (Validate): keeps a list of included files.
	(Linuxdoc):
	(DocBook): new export methods.

	* src/lyx_cb.C: adjust to the new calling sequence for makeLinuxDocFile
	and makeDocBookFile.

	* src/lyx_main.C (easyParse): accept linuxdoc and docbook as
	formats to export with command line argument -x.

2000-06-29  Juergen Vigna  <jug@sad.it>

	* src/mathed/formula.C (LocalDispatch): changed only-cursor-movements
	to return DISPATCHED_NOUPDATE so that a it does not redraw the inset!

	* src/text.C (GetVisibleRow): added 'bool cleared' parameter as the
	region could already been cleared by an inset!

2000-06-28  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/BufferView_pimpl.h: remove member variables lyx_focus and
	work_area_focus

	* src/BufferView_pimpl.C (Pimpl): delete init of work_area_focus
	and lyx_focus
	(cursorToggle): remove special handling of lyx focus.

2000-06-28  Juergen Vigna  <jug@sad.it>

	* src/text.C (GetVisibleRow): fixed clearing of text if rowHeight >
	insetHeight.

2000-06-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/insetindex.C (Edit): add a callback when popup is
	closed by the WM.

	* src/insets/insettext.C (LocalDispatch):
	* src/insets/insetmarginal.h:
	* src/insets/insetlist.h:
	* src/insets/insetfoot.h:
	* src/insets/insetfloat.h:
	* src/insets/insetert.h: add a missing std:: qualifier.

2000-06-28  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxsum.C (sum): '\0' teminate file read when using
	strstream.

	* src/insets/lyxinset.h: add FLOAT_CODE and MINIPAGE_CODE

	* src/insets/insettext.C (Read): remove tmptok unused variable
	(LocalDispatch): add not working LFUN_PARAGRAPH_SPACING
	(InsertInset): change for new InsetInset code

	* src/insets/insettext.h: add TEXT inline method

	* src/insets/insettext.C: remove TEXT macro

	* src/insets/insetmarginal.C (Write): new method
	(Latex): change output slightly

	* src/insets/insetfoot.C (Write): new method
	(Latex): change output slightly (don't use endl when no need)

	* src/insets/insetert.C (Write): new method

	* src/insets/insetcollapsable.h: make button_length, button_top_y
	and button_bottm_y protected.

	* src/insets/insetcollapsable.C (Write): simplify code by using
	tostr. Also do not output the float name, the children class
	should to that to get control over own arguments

	* src/insets/insetfloat.[Ch] src/insets/insetlist.[Ch]
	src/insets/insetminipage.[Ch]:
	new files

	* src/insets/Makefile.am (libinsets_la_SOURCES): add new files

	* src/lyxfunc.C (Dispatch): cases for new insets/commands

	* src/Makefile.am (lyx_SOURCES): add the new files

	* src/LyXAction.C (init): add LFUN_INSET_MARGINAL,
	LFUN_INSET_MINIPAGE, LFUN_INSET_FLOAT, LFUN_INSET_LIST
	* src/commandtags.h: ditto

	* src/LaTeXFeatures.h: add a std::set of used floattypes

	* src/LaTeXFeatures.C (getPackages): add basic support for float.sty

	* src/FloatList.[Ch] src/Floating.h: new files

	* src/CutAndPaste.C (SwitchLayoutsBetweenClasses): change call to
	InsertInset.
	* src/lyx_cb.C (TableApplyCB): ditto
	* src/text.C: ditto
	* src/text2.C: ditto
	* src/buffer.C (SimpleLinuxDocOnePar): ditto
	(parseSingleLyXformat2Token): ditto + add code for
	backwards compability for old float styles + add code for new insets

	* src/lyxparagraph.[Ch] (InsertChar(size_type, char, LyXFont)): new
	method
	(InsertInset(size_type, Inset *, LyXFont)): new method
	(InsetChar(size_type, char)): changed to use the other InsetChar
	with a LyXFont(ALL_INHERIT).
	(InsetInset(size_type, Inset*)): changed to use InsetChar to
	insert the META_INSET.

	* sigc++/thread.cc (Privete<int>::operator int&): move definition
	out of line.
	* sigc++/thread.h (Threads): from here

	* sigc++/scope.cc (ScopeIterator_::ScopeIterator_): move
	definition out of line
	* sigc++/scope.h: from here

2000-06-27  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxrc.C (read): make sure the .kmap files exist when a keymap
	is specified (adapted from a patch from edscott <edscott@imp.mx>).

	* Makefile.am (bindist): new target.

	* INSTALL: add instructions for doing a binary distribution.

	* development/tools/README.bin.example: update a bit.

2000-06-26  Lior Silberman <slior@math.huji.ac.il>

	* src/lyxrc.C:
	* lib/lyxrc.example: new lyxrc tag \set_color.

	* src/lyxfunc.C (Dispatch):
	* src/commandtags.h:
	* src/LyXAction.C: new lyxfunc "set-color".

	* src/LColor.[Ch] (setColor): new method to set colors from a lyxname
	and an x11name given as strings.

	* src/ColorHandler.[Ch] (updateColor): new method. Updates the GC
	cache when a color is changed.

2000-06-26  Juergen Vigna  <jug@sad.it>

	* src/lyxrow.C (width): added this functions and variable.

	* src/insets/insetcite.C (create_form_citation_form): some Gravity
	changes.

	* src/text.C (SetHeightOfRow): fixed calcualting of width.

2000-06-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* images/undo_bw.xpm: new icon.
	* images/redo_bw.xpm: ditto.

	* configure.in (INSTALL_SCRIPT): change value to
	${INSTALL} to avoid failures of install-script target.
	* lib/reLyX/configure.in (INSTALL_SCRIPT): ditto

	* src/BufferView.h: add a magic "friend" declaration to please
	compaq cxx.

2000-06-23  Angus Leeming <a.leeming@ic.ac.uk>

	* forms/cite.fd: modified to allow resizing without messing
	up the dialog.

	* src/insetcite.C: Uses code from cite.fd almost without
	tweaking. ;-)
	User can now resize dialog in the x-direction.
	Resizing the dialog in the y-direction is prevented, as the
	code does this intelligently already.

2000-06-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* INSTALL: remove obsolete entry in "problems" section.

	* lib/examples/sl_*.lyx: update of the slovenian examples.

	* src/support/FileInfo.[Ch] (getBlockSize): remove.

2000-06-23  Juergen Vigna  <jug@sad.it>

	* src/lyxtext.h: added a 'cleared' flag to draw() function.

	* src/buffer.C (resize): delete the LyXText of textinsets.

	* src/paragraph.C (SetInsetOwner): set the owner in the insets too.

	* src/insets/lyxinset.h: added another parameter 'cleared' to
	the draw() function.

	* src/lyxfunc.C (processKeyEvent): move cursor to the right of the
	unlocking inset in inset.

2000-06-22  Juergen Vigna  <jug@sad.it>

	* src/lyxscreen.h: added some y_offset/x_offset parameters for drawings
	of insets and moved first to LyXText.

	* src/mathed/formulamacro.[Ch]:
	* src/mathed/formula.[Ch]: changed prototype of draw() and GetCursorPos

2000-06-21  Juergen Vigna  <jug@sad.it>

	* src/text.C (GetVisibleRow): look if I should clear the area or not
	using Inset::doClearArea() function.

	* src/insets/lyxinset.h: added doClearArea() function and
	modified draw(Painter &, ...) to draw(BufferView *, ...)

	* src/text2.C (UpdateInset): return bool insted of int

2000-06-20  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/lyx_gui.C (create_forms): Add "Reset" option to the language
	combox in the character popup

	* src/lyx_cb.C (UserFreeFont): Add argument to the method:
	BufferParams const & params

2000-06-20  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (SetParagraphData): set insetowner on
	2- paragraphs.

2000-06-21  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/Timeout.[Ch]: Change to use signals instead of callbacks.
	* src/LyXView.h (struct FD_form_main): remove, LyXView inherits
	from SigC::Object
	(form_main_): remove

	* src/LyXView.C (LyXView_AutosaveTimerCB): remove
	(create_form_form_main): remove FD_form_main stuff, connect to
	autosave_timeout signal

	* src/LyXView.[Ch] (getMainForm): remove
	(UpdateTimerCB): remove
	* src/BufferView_pimpl.h: inherit from SigC::Object

	* src/BufferView_pimpl.C (Pimpl): connect to cursor_timeout with
	signal instead of callback

	* src/BufferView.[Ch] (cursorToggleCB): remove

2000-06-20  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/BufferView_pimpl.C: changes because of the one below

	* src/screen.[Ch]: Made the lyxscreen take LyXText as argument
	instead of storing a pointer to a LyXText.

	* src/buffer.[Ch]: apply Baruch's remove isdviclean patch.

2000-06-10  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/lyxparagraph.h

	* src/paragraph.C: Changed fontlist to a sorted vector.

2000-06-19  Juergen Vigna  <jug@sad.it>

	* src/BufferView.h: added screen() function.

	* src/insets/insettext.C (LocalDispatch): some selection code
	fixed.

	* src/vspace.C (nextToken): use stringfunctions instead of sscanf.

	* src/insets/insettext.C (SetParagraphData):
	(Read):
	(InsetText):  fixes for multiple paragraphs.

2000-06-17  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* development/lyx.spec.in: Call configure with ``--without-warnings''
	to work around a bug with the Makefiles when doing ``make lyxrpm''.
	This should be fine, however, since we generally don't want to be
	verbose when making an RPM.

2000-06-16  Dekel Tsur  <dekel@math.tau.ac.il>

	* lib/scripts/fig2pstex.py: New file

2000-06-16  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (UpdateLocal):
	* src/insets/insettext.C (UpdateLocal): fixed mark_dirty problem.
	(LocalDispatch): Changed all functions to use LyXText.

2000-06-15  Juergen Vigna  <jug@sad.it>

	* src/text.C (SetHeightOfRow): call inset::update before requesting
	any width/height.

	* src/insets/insettext.C (update):
	* src/insets/insettabular.C (update): added implementation

	* src/insets/lyxinset.h: added update function

2000-06-15  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/text.C (SelectNextWord): protect against null pointers with
	old-style string streams. (fix from Paul Theo Gonciari
	<gptheo@yahoo.com>)

	* src/cite.[Ch]: remove erroneous files.

	* lib/configure.m4: update the list of created directories.

	* src/lyxrow.C: include <config.h>
	* src/lyxcursor.C: ditto.

2000-06-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/examples/decimal.lyx: new example file from Mike.

	* src/insets/ExternalTemplate.C (readTemplates): Use LibFileSearch()
	to find template definitions (from Dekel)

	* src/frontends/.cvsignore: add a few things.

	* src/frontends/xforms/input_validators.[ch]: remove C++ comments.

	* src/Timeout.C (TimeOut): remove default argument.

	* src/LyXView.C (LyXView_AutosaveTimerCB): this should not have
	"C" linkage.

	* src/insets/ExternalTemplate.C: add a "using" directive.

	* src/lyx_main.h: remove the act_ struct, which seems unused
	anyway.

2000-06-12  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* LyX Developers Meeting: All files changed, due to random C++ (by
	coincidence) code generator script.

	- external inset (cool!)
	- initial online editing of preferences
	- insettabular breaks insettext(s contents)
	- cleanup
	- some DocBook fixes
	- example files update
	- other cool stuff, create a diff and look for yourself.

2000-06-09  The Great LyX Application  <lyx@localhost.localdomain>

	* src/insets/insettext.C (computeTextRows): if the maxWidth is
	-1 this is a non-line-breaking textinset.

	* src/insets/insettabular.C (GetMaxWidthOfCell): returns now -1
	if there is no width set.

2000-06-10  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* Lots of files: Merged the dialogbase branch.

2000-06-09  Allan Rae  <rae@lyx.org>

	* src/xtl/, src/lyxfunc.[Ch], src/buffer.[Ch]:  Removed XTL and
	and the Dispatch methods that used it.

	* src/frontends/Liason.[Ch]: replaced with a Liason namespace for
	access to functions formerly kept in Dispatch.

2000-05-19  Allan Rae  <rae@lyx.org>

	* src/PrinterParams.h, src/buffer.C, src/frontends/xforms/FormPrint.C:
	made to_page and count_copies integers again.  from_page remains a
	string however because I want to allow entry of a print range like
	"1,4,22-25" using this field.

	* src/LyXAction.C: added action info and commands for buffer-print-xtl
	and printer-params-get.  These aren't useful from the minibuffer but
	could be used by a script/LyXServer app provided it passes a suitable
	auto_mem_buffer.  I guess I should take a look at how the LyXServer
	works and make it support xtl buffers.

	* sigc++/: updated to libsigc++-1.0.1

	* src/xtl/: updated to xtl-1.3.pl.11

	* forms/makefile, forms/fdfix.sh, forms/layout_forms.fd: Made sure
	those changes done to the files in src/ are actually recreated when
	they  get regenerated. Please don't ever accept a patch that changes a
	dialog unless that patch includes the changes to the corresponding *.fd
	file.

	* src/lyx_cb.C, src/support/lstrings.[hC]: Moved Stephen Witt's
	stringOnlyContains, renamed it and generalised it.

	* lots-of-files: Rolled the "rae" branch over into the "dialogbase"
	branch.  Removed the remaining old form_print code.

2000-04-26  Allan Rae  <rae@lyx.org>

	* ChangeLog, development/tools/lxtl.sh: D'oh! Got caught in the same
	trap I was trying to fix with the ID: fields in src/xtl/  :-)

2000-04-25  Allan Rae  <rae@lyx.org>

	* src/xtl/: Updated to incorporate Angus's two patches as well as mine
	against a base of xtl-1.3.pl.4

	* development/tools/lxtl.sh: fixed a couple of silly typos and now
	filter the Id: entries so they still show the xtl version number
	they are based on.

	* src/support/lxtl.h: removed auto_mem_buffer which is now incorporated
	into the src/xtl code.  Patch still pending with José (XTL)

2000-04-24  Allan Rae  <rae@lyx.org>

	* src/lyxfunc.[Ch] (Dispatch): Use a mem buffer as a parameter. This is
	both more generic and much safer. Use the new template functions.
	* src/buffer.[Ch] (Dispatch): ditto.

	* src/frontends/xforms/FormPrint.C (update): Use new template functions
	and mem buffer more intelligently. Also a little general cleanup.
	(apply): ditto.

	* configure.in (AC_OUTPUT): Extra stuff for xtl that I forgot.
	* development/tools/lxtl.sh: Ditto.  Makefile.am + .cvsignore
	* src/xtl/Makefile.am: ditto.
	* src/xtl/.cvsignore: ditto.
	* src/Makefile.am: ditto.

	* src/PrinterParams.h: Removed the macros member functions. Added a
	testInvariant member function.  A bit of tidying up and commenting.
	Included Angus's idea for fixing operation with egcs-1.1.2.

	* src/support/lxtl.h: Many changes.  Added auto_mem_buffer -- a really
	cool expansion of XTL's mem_buffer to support automatic memory
	management within the buffer itself.  Removed the various macros and
	replaced them with template functions that use either auto_mem_buffer
	or mem_buffer depending on a #define.  The mem_buffer support will
	disappear as soon as the auto_mem_buffer is confirmed to be good on
	other platforms/compilers.  That is, it's there so you've got something
	to compare against.

	* src/xtl/objio.h: Changes to support auto_mem_buffer.  This has
	effectively forked XTL.  However I expect José will include my code
	into the next major release.  Also fixed a memory leak.
	* src/xtl/text.h: ditto.
	* src/xtl/xdr.h: ditto.
	* src/xtl/giop.h: ditto.

2000-04-16  Allan Rae  <rae@lyx.org>

	* acinclude.m4, sigc++/acinclude.m4:  Removed -- they're generated
	by autogen.sh and removed by maintainer-clean anyway.
	* .cvsignore, sigc++/.cvsignore:  Support the above.

	* sigc++/.cvsignore: Forgot that retbind.h was generated.

	* src/buffer.C (Dispatch): Couldn't print a single page. Fixed.

	* src/frontends/xforms/FormPrint.[Ch]: Switched to C callbacks using
	macros, renamed static callback-target member functions to suit new
	scheme and made them public.
	* src/frontends/xforms/forms/form_print.fd: ditto.
	* src/frontends/xforms/forms/form_copyright.fd: ditto.

	* src/support/lxtl.h: small cleanup to use typedef instead of #define
	for gui_format.

	* src/xtl/: New directory containing a minimal distribution of XTL.
	This is XTL-1.3.pl.4.

	* development/tools/lxtl.sh: A script to generate the above mini-dist.

2000-04-15  Allan Rae  <rae@lyx.org>

	* development/tools/makeLyXsigc.sh: Remove the library version numbers

	* sigc++/:  Updated to libsigc++-1.0.0

2000-04-14  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/xform_macros.h: Remove specific macros and just
	use the generic ones in future.  I'll modify my conversion script.

	* src/frontends/xforms/FormCopyright.C: Reverse the earlier change.

	* src/lyx_gui_misc.[Ch]: Removed references to form_print.
	(CloseAllBufferRelatedDialogs): Renamed.
	(updateAllVisibleBufferRelatedDialogs): ditto. Added LaTeXLog

	* src/frontends/xforms/FormCopyright.C: Use the specific macros instead
	of the generic ones.  These are the same ones my conversion script
	generates.

	* src/PrinterParams.h: Allow you to print a range of odd or even pages.
	* src/frontends/xforms/FormPrint.C (apply, update): ditto+small cleanup
	* src/buffer.C (Dispatch): ditto

	* src/LyXView.C (LyXView): Use new signals instead of old hard coded
	functions for updating and hiding buffer dependent dialogs.
	* src/BufferView.C (buffer): ditto
	* src/buffer.C (setReadonly): ditto
	* src/lyxfunc.C (CloseBuffer): ditto

	* src/buffer.h: Take setReadonly() out of line so I don't have to include
	Dialogs.h, and hence all the SigC stuff, into every file that includes
	buffer.h.  We also don't need to include lyx_gui_misc.h in everything.

	* src/BufferView2.C: reduce the number of headers included by buffer.h

2000-04-11  Allan Rae  <rae@lyx.org>

	* src/frontends/xforms/xform_macros.h:  A small collection of macros
	for building C callbacks.

	* src/frontends/xforms/Makefile.am: Added above file.

	* src/frontends/xforms/FormCopyright.[Ch]: Revised the C callback
	scheme again.  This time it should work for JMarc.  If this is
	successful I'll revise my conversion script to automate some of this.
	The static member functions in the class also have to be public for
	this scheme will work.  If the scheme works (it's almost identical to
	the way BufferView::cursorToggleCB is handled so it should work) then
	FormCopyright and FormPrint will be ready for inclusion into the main
	trunk immediately after 1.1.5 is released -- provided we're prepared
	for complaints about lame compilers not handling XTL.

	* src/support/lxtl.h: Switched to XDR_format instead of raw_format.

2000-04-07  Allan Rae  <rae@lyx.org>

	* config/lyxinclude.m4:  A bit more tidying up (Angus)

	* src/LString.h: JMarc's <string> header fix

	* src/PrinterParams.h: Used string for most data to remove some
	ugly code in the Print dialog and avoid even uglier code when
	appending the ints to a string for output.

	* src/buffer.C (Dispatch): Added a couple of braces to fix an error
	and moved "default:" back to the end of switch statement.  Cleaned
	up the printing so it uses the right function calls and so the
	"print to file" option actually puts the file in the right directory.

	* src/frontends/xforms/Dialogs.C: Added FormPrint (Angus).

	* src/frontends/xforms/FormPrint.C (PrintInputCB): moved input checking
	and Ok+Apply button control into a separate method: input (Angus).
	(input) Cleaned it up and improved it to be very thorough now.
	(All CB) static_cast used instead of C style cast (Angus).  This will
	probably change again once we've worked out how to keep gcc-2.8.1 happy
	with real C callbacks.
	(update) add a few "default:" labels to switches. Egcs-1.1.2 seems to
	ignore some of the bool settings and has random numbers instead. Needs
	some more investigation.  Added other input length checks and checking
	of file and printer names.

	* src/frontends/xforms/FormPrint.h: Removed pragma statement so it
	would link (Angus).  Seems the old code doesn't compile with the pragma
	statement either.  Separated callback entries from internal methods.

	* src/lyxfunc.C (Dispatch): LFUN_MENUPRINT calls new dialog (Angus).

2000-03-17  Allan Rae  <rae@lyx.org>

	* src/lyxfunc.[Ch] (isAvailable): This is only temporary.  Do we really
	need it?  Maybe it could go in Dialogs instead?  I could make it a
	LFUN but you'd have to call Dispatch(int, int, char*) with dummy
	values to get the bool return value.
	(Dispatch): New overloaded method for xtl support.

	* src/frontends/xforms/FormCopyright.[Ch]: Modified to use a friendly
	extern "C" callback instead of static member functions.  Hopefully,
	JMarc will be able to compile this.  I haven't changed
	forms/form_copyright.fd yet. Breaking one of my own rules already.

	* src/commandtags.h: New xtl-based LFUN's no description in LyXAction
	because they aren't useful from the minibuffer.  Maybe a LyXServer
	might want a help message though?

	* src/buffer.[Ch] (Dispatch): New overloaded method for xtl support.

	* config/lyxinclude.m4: Changes to g++ flags to suit compiling with
	xtl which needs both rtti and exceptions.

	* src/support/Makefile.am:
	* src/support/lxtl.h: New file.  Some helper macros for using XTL.

	* src/frontends/xforms/input_validators.[ch]: input filters and
	validators.  These conrol what keys are valid in input boxes.
	Use them and write some more.  Much better idea than waiting till
	after the user has pressed Ok to say that the input fields don't make
	sense.

	* src/frontends/xforms/Makefile.am:
	* src/frontends/xforms/forms/form_print.fd:
	* src/frontends/xforms/forms/makefile:
	* src/frontends/xforms/FormPrint.[Ch]: Ported previous print form to
	new scheme.  Still have to make sure I haven't missed anything from
	the current implementation.

	* src/Makefile.am, src/PrinterParams.h: New data store.

	* other files: Added a couple of copyright notices.

2000-03-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/insetbib.h: move Holder struct in public space.

	* src/frontends/include/DialogBase.h: use SigC:: only when
	SIGC_CXX_NAMESPACES is defined.
	* src/frontends/include/Dialogs.h: ditto.

	* sigc++/Makefile.am (%.h): use the autodected GNU m4.

	* src/frontends/xforms/FormCopyright.[Ch]: do not
	mention SigC:: explicitely.

2000-03-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* config/lyxinclude.m4 (LYX_USE_FRONTEND): move the code which
	deals with testing KDE in main configure.in
	* configure.in: ditto.

2000-02-22  Allan Rae  <rae@lyx.org>

	* Lots of files: Merged from HEAD

	* All Makefile.am (ETAGS_ARGS): use parameter that is also compatible
	with the etags shipped with SuSE-6.3 (fancier than gnu-etags).

	* autogen.sh: Fix JMarcs complaints by building a sigc++/acinclude.m4

	* sigc++/: new minidist.

2000-02-14  Allan Rae  <rae@lyx.org>

	* development/tools/makeLyXsigc.sh:  Small fix for Makefile.am

2000-02-08  Juergen Vigna  <jug@sad.it>

	* src/frontends/kde/dlg/formcopyrightdialog.kdevdlg: the dialog data
	file for the buildin GUI builder of KDevelop of the copyright-dialog.

	* src/frontends/kde/lyxgui.kdevprj: I added this as I use KDevelop
	for this port and so it is much easier for other people to port
	dialogs in a common development environment.

	* src/frontends/kde/formcopyrightdialog_moc.C: needed MOC file for
	the QT/KDE implementation.

	* src/frontends/kde/Dialogs.C:
	* src/frontends/kde/FormCopyright.C:
	* src/frontends/kde/FormCopyright.h:
	* src/frontends/kde/Makefile.am:
	* src/frontends/kde/formcopyrightdialog.C:
	* src/frontends/kde/formcopyrightdialog.h:
	* src/frontends/kde/formcopyrightdialogdata.C: added this source-files
	for the kde support of the Copyright-Dialog.

	* src/frontends/Makefile.am (AUTOMAKE_OPTIONS): now uses @FRONTEND@
	subdir-substitution instead of hardcoded 'xforms' as we now have also
	the kde subdir.

	* src/frontends/include/DialogBase.h (Object): just commented the
	label after #endif (nasty warning and I don't like warnings ;)

	* src/main.C (main): added KApplication initialization if using
	KDE frontend-GUI.

	* src/lyx_gui.C (runTime): added support for multiple toolkit support.
	For now only the KDE event-loop is added if frontend==kde.

	* src/Makefile.am (lyx_DEPENDENCIES): added @FRONTEND_xxx@ support

	* configure.in: added support for the --with-frontend[=value] option

	* autogen.sh: added kde.m4 file to list of config-files

	* acconfig.h: added define for KDEGUI-support

	* config/kde.m4: added configuration functions for KDE-port

	* config/lyxinclude.m4: added --with-frontend[=value] option with
	support for xforms and KDE.

2000-02-08  Allan Rae <rae@lyx.org>

	* all Makefile.am:  Fixed up so the make targets dist, distclean,
	install and uninstall all work even if builddir != srcdir.  Still
	have a new sigc++ minidist update to come.

	* config/lyxinclude.m4: Some more builddir!=srcdir fixes.

2000-02-01  Allan Rae <rae@lyx.org>

	* config/lyxinclude.m4, development/tools/makeLyXsigc.sh:
	Many mods to get builddir != srcdir working.

	* sigc++/: Upgraded to 0.8.7.  This includes many needed fixes both
	for building on NT and so we can do the builddir != srcdir stuff.

2000-01-30  Allan Rae <rae@lyx.org>

	* sigc++/doc/*: Selected documentation for the libsigc++ mini dist.
	This will stay in "rae" branch.  We probably don't really need it in
	the main trunk as anyone who wants to help programming it should get
	a full library installed also.  So they can check both included and
	system supplied library compilation.

	* sigc++/*, sigc++/macros/*, config/sigc++.m4, config/lyxinclude.m4:
	Added a 'mini' distribution of libsigc++.  If you feel the urge to
	change something in these directories - Resist it.  If you can't
	resist the urge then you should modify the following script and rebuild
	the dist.  LYX_WITH_SIGC in lyxinclude.m4 is the wrapper to make it
	all happen.  Still uses a hacked version of libsigc++'s configure.in.
	I'm quite happy with the results.  I'm not sure the extra work to turn
	the sigc++/configure.in into a few extra AC_DEFUNs in sigc++.m4 is
	worth the trouble and would probably lead to extra maintenance
	headaches.
	I haven't tested the following important make targets: install, dist.
	Not ready for prime time but very close.  Maybe 1.1.5.

	* development/tools/makeLyXsigc.sh:  A shell script to automatically
	generate our mini-dist of libsigc++.  It can only be used with a CVS
	checkout of libsigc++ not a tarball distribution.  It's well commented.
	This will end up as part of the libsigc++ distribution so other apps
	can easily have an included mini-dist.  If someone makes mods to the
	sigc++ subpackage without modifying this script to generate those
	changes I'll be very upset!

	* src/frontends/:  Started the gui/system indep structure.

	* src/frontends/include/Dialogs.h: Dialog container. All the Signal<>s
	to access the gui-indep dialogs are in this class.  Much improved
	design compared to previous revision.  Lars,  please refrain from
	moving this header into src/ like you did with Popups.h last time.

	* src/frontends/include/DialogBase.h: Abstract base class for dialogs.

	* src/frontends/xforms/:  Started the gui-indep system with a single
	dialog: FormCopyright.  Initial testing of use of libsigc++ was very
	successful.

	* src/frontends/xforms/forms: Repository for the xforms .fd files.
	Here you'll find a very useful makefile and automated fdfix.sh that
	makes updating dailogs a no-brainer -- provided you follow the rules
	set out in the README.  I'm thinking about adding another script to
	automatically generate skeleton code for a new dialog given just the
	name of the dialog.

	* src/commandtags.h, src/lyxfunc.C, src/menus.C:
	* src/credits.{Ch}, src/credits_form.{Ch}, forms/credits_form.fd:
	Made FormCopyright gui-indep and added a lyxfunc to get to it.

2000-06-09  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/LSubstring.C (operator): simplify

	* src/lyxtext.h: removed bparams, use buffer_->params instead

	* src/lyxrow.h: make Row a real class, move all variables to
	private and use accessors.

	* src/lyxparagraph.h (getParLanguage): add BufferParamas as
	arguament.
	(isRightToLeftPar): ditto
	(ChangeLanguage): ditto
	(isMultiLingual): ditto
	(String): ditto
	(TeXOnePar): ditto
	(SimpleTeXOnePar): ditto
	(TeXEnvironment): ditto
	(GetEndLabel): ditto
	(SetLayout): ditto
	(SetOnlyLayout): ditto
	(BreakParagraph): ditto
	(BreakParagraphConservative): ditto
	(GetFontSettings): ditto
	(getFont): ditto
	(CopyIntoMinibuffer): ditto
	(CutIntoMinibuffer): ditto
	(PasteParagraph): ditto
	(SetPExtraType): ditto
	(UnsetPExtraType): ditto
	(DocBookContTableRows): ditto
	(SimpleDocBookOneTablePar): ditto
	(TeXDeeper): ditto
	(TeXFootnote): ditto
	(SimpleTeXOneTablePar): ditto
	(TeXContTableRows): ditto
	(SimpleTeXSpecialChars): ditto


	* src/lyxcursor.h: make LyXCursor a real class, move all variables
	to private and use accessors.

	* src/lyx_cb.C: remove char updatetimer, and all code that uses
	this, we did not use it anymore and has not been for ages. Just a
	waste of cpu cycles.

	* src/language.h: make Language a real class, move all variables
	to private and use accessors.

	* src/BufferView_pimpl.C (Pimpl): use new timer code.
	(create_view): remove
	(update): some changes for new timer
	(cursorToggle): use new timer
	(beforeChange): change for new timer

	* src/BufferView.h (cursorToggleCB): removed last paramter because
	of new timer code.

	* src/BufferView.C (C_BufferView_CursorToggleCB): removed
	(cursorToggleCB): change because of new timer code

	* lib/CREDITS: updated own mailaddress

2000-06-08  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/filetools.C (PutEnv): fix the code in case neither
	putenv() nor setenv() have been found.

	* INSTALL: mention the install-strip Makefile target.

	* src/LyXAction.C (init): make LFUN_BUILDPROG available in
	read-only documents.

2000-06-07  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/reLyX/configure.in (VERSION): avoid using a previously
	generated reLyX wrapper to find out $prefix.

	* lib/examples/eu_adibide_lyx-atua.lyx:
	* lib/examples/eu_adibide_gordina.lyx: new examples for the Basque
	translation of the Tutorial (Dooteo)

2000-06-06  Angus Leeming <a.leeming@ic.ac.uk>

	* forms/cite.fd: new citation dialog

	* src/insetcite.[Ch]: the new citation dialog is moved into
	its own files.

	* src/insetbib.C: InsetBibtex::getKeys() uses STL containers
	(Dekel).

	* src/insets/insetcommand.h: data members made private.

2000-06-06  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* LyX 1.1.5 released

2000-06-06  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/version.h (LYX_RELEASE): to 1.1.5

	* src/spellchecker.C (RunSpellChecker): return false if the
	spellchecker dies upon creation.

2000-06-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/reLyX/reLyXmain.pl, lib/reLyX/LastLyX.pm: fix suffix of file
	in \include{} (from Tomasz Motylewski <motyl@stan.chemie.unibas.ch>)

	* NEWS: update.

	* lib/CREDITS: update entry for Martin Vermeer.

2000-06-06  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/text.C (draw): Draw foreign language bars at the bottom of
	the row instead of at the baseline.

	* lib/examples/Minipage.lyx: Use the new multi-lingual support.

2000-06-06  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* lib/bind/de_menus.bind: updated

2000-06-05  Dekel Tsur  <dekel@math.tau.ac.il>

	* forms/lyx.fd: Correct gravity for objects in form_toc and form_ref

2000-06-05  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/menus.C (Limit_string_length): New function
	(ShowTocMenu): Limit the number of items/length of items in the
	LOT/LOF/LOA menus.

	* src/paragraph.C (String): Correct result for a paragraph inside
	a footnote.

2000-06-05  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/bufferlist.C (close): test of buf->getuser() == NULL

2000-06-02  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/BufferView2.C (removeAutoInsets): Fix a bug:
	Do not call to SetCursor when the paragraph is a closed footnote!

2000-06-01  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/insets/insetlabel.C (Edit): Mark buffer as dirty when a
	label is changed.

	* src/text.C (SetCursor): Made the computation of cursor_vpos safer.

2000-05-31 Dekel Tsur  <dekel@math.tau.ac.il>

	* forms/lyx.fd
	* src/lyx_cb.C (RefSelectCB): Added "Go Back" button in the insert
	reference popup, that activates the reference-back action

	* src/menus.C (ShowRefsMenu): Added "Go Back" menu item.

	* src/menus.C (Add_to_refs_menu): Limit the size of each item in
	the menus. Also fixed a bug.

	* src/lyx_cb.C (updateAllVisibleBufferRelatedPopups): Do not close
	the math panels when switching buffers (unless new buffer is readonly).

	* src/BufferView.C (NoSavedPositions)
	* src/BufferView_pimpl.C (NoSavedPositions): New methods

2000-06-01  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyx_cb.C (MakeLaTeXOutput): we run MakeLaTeXOutput regard
	less of dvi dirty or not.

	* src/trans_mgr.[Ch] (insert): change first parameter to string
	const &.

	* src/chset.[Ch] (encodeString): add const to first parameter

2000-05-31  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxstring.C (begin): fix a "shared" string bug. use
	rep->get_own_copy()
	(end): ditto

	* src/LaTeX.C (deplog): better searching for dependency files in
	the latex log. Uses now regexps.

	* lib/layouts/stdlists.inc (lyxlist): fix the label to use \hfil
	instead of the box hack or \hfill.

2000-05-31  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxfunc.C (doImportHelper): do not create the file before
	doing the actual import.
	(doImportASCIIasLines): create a new file before doing the insert.
	(doImportASCIIasParagraphs): ditto.

	* lib/lyxrc.example: remove mention of non-existing commands

	* lyx.man: remove mention of color-related switches.

	* src/lyxrc.C: remove RC_SELECTIONCOLOR and RC_BACKGROUNDCOLOR.

	* src/lyx_gui.C: remove all the color-related ressources, which
	are not used anymore.

	* src/lyx_gui_misc.C (WarnReadonly): use MakeDisplayPath on file
	name.

2000-05-31 Dekel Tsur  <dekel@math.tau.ac.il>

	* src/lyxrc.C (read): Add a missing break in the switch

2000-05-30 Dekel Tsur  <dekel@math.tau.ac.il>

	* src/text2.C (InsertStringA): Fix a bug with insertion into table

	* src/trans_mgr.C (insertVerbatim): Do not use insetquote when the
	text is Hebrew.

2000-05-27  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/text.C (draw): draw bars under foreign language words.

	* src/LColor.[Ch]: add LColor::language

2000-05-27 Dekel Tsur  <dekel@math.tau.ac.il>

	* src/lyxcursor.h (boundary): New member variable

	* src/text.C (IsBoundary): New methods

	* src/text.C: Use the above for currect cursor movement when there
	is both RTL & LTR text.

	* src/text2.C: ditto

	* src/bufferview_funcs.C (ToggleAndShow): ditto

2000-05-30  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/text.C (DeleteLineForward): set selection to true to avoid
	that DeleteEmptyParagraphMechanism does some magic. This is how it
	is done in all other functions, and seems reasonable.
	(DeleteWordForward): do not jump over non-word stuff, since
	CursorRightOneWord() already does it.

	Remove the CHECK tag from DeleteLineForward, DeleteWordForward and
	DeleteWordBackward, since they seem safe to me (since selection is
	set to "true") DeleteEmptyParagraphMechanism does nothing.

2000-05-29  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyx_main.C (easyParse): simplify the code by factoring the
	part that removes parameters from the command line.
	(LyX): check wether wrong command line options have been given.

2000-05-29  Lior Silberman <slior@math.huji.ac.il>

	* src/lyx_main.C : add support for specifying user LyX
	directory via command line option -userdir.

2000-05-26 Dekel Tsur  <dekel@math.tau.ac.il>

	* src/menus.C (Add_to_toc_menu): Limit the number of popups, and
	the number of items per popup.
	(Add_to_refs_menu): Ditto.

2000-05-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxparagraph.h: renamed ClearParagraph() to
	StripLeadingSpaces() and moved it to paragraph.C. We pass the
	textclass as parameter, and do nothing if free_spacing is
	true. This fixes part of the line-delete-forward problems.

	* src/CutAndPaste.C (cutSelection): use StripLeadingSpaces.
	(pasteSelection): ditto.
	(SwitchLayoutsBetweenClasses): more translatable strings.

	* src/text2.C (CutSelection): use StripLeadingSpaces.
	(PasteSelection): ditto.
	(DeleteEmptyParagraphMechanism): ditto.

2000-05-26  Juergen Vigna  <jug@sad.it>

	* src/TabularLayout.C (TabularOptionsCB): removed delete-table as this
	is not needed in tabular insets.

	* src/insets/insettabular.C (TabularFeatures): added missing features.

	* src/tabular.C (DeleteColumn):
	(AppendColumn):
	(AppendRow): implemented this functions
	(cellsturct::operator=): clone the inset too;

2000-05-23  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (LocalDispatch): better selection support
	when having multicolumn-cells.

2000-05-26  Jose Abilio Oliveira Matos <jamatos@novalis.fc.up.pt>

	* lib/layouts/linuxdoc.layout: fix indentation of paragraphs.

2000-05-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/ColorHandler.C (getGCForeground): put more test into _()

	* lib/examples/eu_splash.lyx: new file (Basque translation) from
	Dooteo.

	* config/lyxinclude.m4 (LYX_PROG_CXX): use ${CXX} and not g++ to
	get the version.

2000-05-25 Dekel Tsur  <dekel@math.tau.ac.il>

	* src/lyx_cb.C (RefUpdateCB): disable appropriate buttons when
	there are no labels, or when buffer is readonly.

	* src/menus.C (ShowRefsMenu) disable appropriate menu items when
	there are no labels, buffer is SGML, or when buffer is readonly.

2000-05-25  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/LColor.C (LColor): change a couple of grey40 to grey60
	(LColor): rewore initalization to make compiles go some magnitude
	faster.
	(getGUIName): don't use gettext until we need the string.

2000-05-09  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/Bullet.[Ch]: Fixed a small bug.

2000-05-21  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/paragraph.C (String): Several fixes/improvements

	* src/insets/insetbib.[Ch] (InsetCitation::Ascii) New method

2000-05-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/paragraph.C (String): give more correct output.

2000-05-20  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/lyxfont.C (stateText) Do not output the language if it is
	eqaul to the language of the document.

	* src/paragraph.C (TeXOnePar): Do not put language switch commands
	between two paragraphs with the same language.

	* src/paragraph.C (getParLanguage) Return a correct answer for an
	empty dummy paragraph.

	* src/menus.C (ShowTocMenu): Do not draw lines between LOF/LOT/LOA
	menus.

	* src/menus.C (ShowLayoutMenu) Add "Start of Appendix" item to the
	layout menu.

	* src/lyx_gui.C (init): Try to use helvetica (or fixed) fonts for
	the menus/popup, if requested fonts are unavailable.

2000-05-22  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (LocalDispatch): added some more cursor
	movement support (Up/Down/Tab/Shift-Tab).
	(LocalDispatch): added also preliminari cursor-selection.

	* src/LyXAction.C (init): added SHIFT-Tab as tab-backward.

	* src/paragraph.C (PasteParagraph): Hopefully now right!

2000-05-22  Garst R. Reese  <reese@isn.net>

	* layouts/hollywood.layout, broadway.layout : move Dialogue to top
	 of list, change all references to Environment to Command
	* tex/hollywood.cls : rewrite environments as commands, add
	\uppercase to interiorshot and exteriorshot to force uppecase.
	* tex/broadway.cls : rewrite environments as commands. Tweak
	whitespace.

2000-05-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/menus.C (Add_to_toc_menu): fix the code which limits the
	size of items: use a constant intead of the hardcoded 40, and more
	importantly do not remove the %m and %x tags added at the end.
	(Add_to_refs_menu): use vector::size_type instead of
	unsigned int as basic types for the variables. _Please_ do not
	assume that size_t is equal to unsigned int. On an alpha, this is
	unsigned long, which is _not_ the same.

	* src/language.C (initL): remove language "hungarian", since it
	seems that "magyar" is better.

2000-05-22  Juergen Vigna  <jug@sad.it>

	* src/CutAndPaste.C: hopefully fixed memory the problem defenitively!

	* src/tabular.C (OldFormatRead): added \end_deeper to the end LyXTable
	end markers!

	* src/paragraph.C (PasteParagraph): Possibly a memory leak as
	next was deleted but not set to 0.

2000-05-21  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/language.C (initL): change the initialization of languages
	so that compiles goes _fast_.

	* src/menus.C (Add_to_toc_menu): limit the line length in TOC to
	40 chars.

	* src/lyxfunc.C (processKeyEvent): initalize keysym_return to 0.

2000-05-21  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* release 1.1.5pre3

2000-05-20  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/WorkArea.C (request_clipboard_cb): give "C" linkage.

2000-05-19  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/commandtags.h
	* src/LyXAction.C
	* src/lyxfunc.C (Dispatch): Added LFUN_LOFVIEW, LFUN_LOTVIEW
	and LFUN_LOAVIEW

	* src/insets/insetlo*.[Ch]: Made editable

2000-05-20  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/text2.C (SetSelection): call BufferView::stuffClipboard with
	the current selection.

	* src/BufferView_pimpl.C (stuffClipboard): new method

	* src/BufferView.C (stuffClipboard): new method

	* src/paragraph.C (String): new method

	* src/LColor.C (getFromLyXName): return LColor::inherit instead of
	LColor::ignore when lyxname is not found.

	* src/BufferView.C (pasteSelection): new method

	* src/BufferView_pimpl.C (pasteSelection): new method

	* src/lyxfunc.C (Dispatch): use the new clipboard functions.

	* src/WorkArea.C (request_clipboard_cb): new static function
	(getClipboard): new method
	(putClipboard): new method

2000-05-19  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* LyX 1.1.5pre2 released

2000-05-19  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/vspace.C (operator=): removed
	(operator=): removed

	* src/lyx_gui_misc.C (askForText): manually set the type in make_pair

	* src/layout.C (NumberOfClass): manually set the type in make_pair
	(NumberOfLayout): ditto

	* src/language.C: use the Language constructor for ignore_lang

	* src/language.h: add constructors to struct Language

	* src/BufferView_pimpl.C (scrollDown): change to pair<float, float>

	* src/text2.C (SetCursorIntern): comment out #warning

	* src/mathed/math_symbols.C (pixmapFromBitmapData): add const_cast

	* src/mathed/math_iter.h: initialize sx and sw to 0

2000-05-10  Dekel Tsur  <dekel@math.tau.ac.il>

	* forms/lyx.fd: Redesign of form_ref

	* src/LaTeXFeatures.[Ch]
	* src/buffer.C
	* src/lyx_cb.C
	* src/menus.C
	* src/insets/insetref.[Ch]: Added support for varioref and prettyref.

	* src/buffer.h
	* src/lyxparagraph.h: Added new classes: LyXParagraph::inset_iterator
	and Buffer::inset_iterator.

	* src/menus.C: Added new menus: TOC and Refs.

	* src/insets/insetlabel.C (Edit) Made InsetLabel editable.

	* src/buffer.C (getTocList): New method.

	* src/BufferView2.C (ChangeRefs): New method.

	* src/buffer.C (getLabelList): New method. It replaces the old
	getReferenceList. The return type is vector<string> instead of
	string.

	* src/insets/insetinclude.C (getLabelList): New method. Replaces
	the old getLabel() and GetNumberOfLabels() methods.
	* src/insets/insetlabel.C (getLabelList): ditto
	* src/mathed/formula.C (getLabelList): ditto

	* src/paragraph.C (String): New method.

	* src/lyx_cb.C (TocSelectCB,TocUpdateCB): Rewritten.
	Uses the new getTocList() method.
	TocSelectCB() now calls to TocUpdateCB() before moving the cursor,
	which automatically updates the contents of the browser.
	(RefUpdateCB): Use the new getLabelList method.

	* src/lyxfunc.C (Dispatch): Give an error if the label is not found.

	* src/BufferView2.C (gotoLabel) Use the new getLabelList method.

	* src/spellchecker.C: Added using std::reverse;

2000-05-19  Juergen Vigna  <jug@sad.it>

	* src/tabular.C (Validate): fixed/added validating of LaTeXFeatures.

	* src/insets/insettext.C (computeTextRows): small fix for display of
	1 character after a newline.

	* src/tabular.C (OldFormatRead): fixed the OldFormatRead with regard
	to cont-rows!

2000-05-18  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (TabularFeatures): fixed update of display
	when changing width of column.

	* src/tabular.C (set_row_column_number_info): setting of
	autobreak rows if necessary.

2000-05-17  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxvc.C (toggleReadOnly): use VCS::status() instead of stat()

	* src/vc-backend.*: renamed stat() to status() and vcstat to
	vcstatus. It happens that Tru64 Unix 5.0 has stat() as a macro and
	compilation broke. The new name seems more relevant, anyway.

2000-05-17  Juergen Vigna  <jug@sad.it>

	* src/BufferView2.C (removeAutoInsets): fixed use of AutoDeleteInsets
	which was wrong if the removing caused removing of rows!

	* src/lyxlex_pimpl.C (next, nextToken): insert support for pushToken.
	(pushToken): new function.

	* src/text2.C (CutSelection): fix problem discovered with purify

2000-05-17  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/debug.C (showTags): enlarge the first column, now that we
	have 6-digits debug codes.

	* lib/layouts/hollywood.layout:
	* lib/tex/hollywood.cls:
	* lib/tex/brodway.cls:
	* lib/layouts/brodway.layout: more commands and fewer
	environments. Preambles moved in the .cls files. Broadway now has
	more options on scene numbering and less whitespace (from Garst)

	* src/insets/insetbib.C (getKeys): make sure that we are in the
	document directory, in case the bib file is there.

	* src/insets/insetbib.C (Latex): revert bogus change.

2000-05-16  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (UnlockInsetInInset): Changes to update
	the TabularLayout on cursor move.

	* src/TabularLayout.C (TabularOptionsCB): Wrong call to MenuLayoutTable

	* src/insets/insettabular.C (Clone): Clone the LyXTabular for
	undo-handling.
	(getCellXPos):
	(draw): fixed cursor position and drawing so that the cursor is
	visible when before the tabular-inset.

	* src/insets/insettext.C (init): drawLockedFrame was not initialized
	when creating from old insettext.

	* src/tabular.C (Clone): added Clone of text-inset for undo-handling.

2000-05-15  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/tex/hollywood.cls: better algorithm for page breaks (Garst)
	* lib/tex/brodway.cls: ditto

	* lib/layouts/brodway.layout: change alignment of parenthical
	layout (Garst)

2000-05-12  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* config/lyxinclude.m4 (LYX_PATH_XFORMS): make it clear that only
	versions 0.88 and 0.89 are supported.

2000-05-15  Juergen Vigna  <jug@sad.it>

	* src/insets/insetcollapsable.C (draw): enhancements in drawing and
	width calculating.

	* src/insets/insettext.C (computeTextRows): redone completely this
	function in a much cleaner way, because of problems when having a
	fixed maxWidth.
	(draw): added a frame border when the inset is locked.
	(SetDrawLockedFrame): this sets if we draw the border or not.
	(SetFrameColor): this sets the frame color (default=insetframe).

	* src/insets/lyxinset.h: added x() and y() functions which return
	the top_x and top_baseline values. Added a GetFirstLockingInsetOfType
	function which is needed to see if we have a locking inset of some
	type in this inset (needed for now in insettabular).

	* src/vspace.C (inPixels): the same function also without a BufferView
	parameter as so it is easier to use it in some ocasions.

	* src/lyxfunc.C: changed all places where insertInset was used so
	that now if it couldn't be inserted it is deleted!

	* src/TabularLayout.C:
	* src/TableLayout.C: added support for new tabular-inset!

	* src/BufferView2.C (insertInset): this now returns a bool if the
	inset was really inserted!!!

	* src/tabular.C (GetLastCellInRow):
	(GetFirstCellInRow): new helper functions.
	(Latex): implemented for new tabular class.
	(TeXCellPostamble):
	(TeXCellPreamble):
	(TeXBottomHLine):
	(TeXTopHLine): new Latex() helper functions.

2000-05-12  Juergen Vigna  <jug@sad.it>

	* src/mathed/formulamacro.C (Read):
	* src/mathed/formula.C (Read): read also the \end_inset here!

2000-05-10  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/mathed/math_write.C (MathParInset::Write): Fixed a bug:
	crush when saving formulae with unbalanced parenthesis.

20000-05-11  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/layout.C: Add new keyword "endlabelstring" to layout file

	* src/text.C (GetVisibleRow): Draw endlabel string.

	* lib/layouts/broadway.layout
	* lib/layouts/hollywood.layout: Added endlabel for the
	Parenthetical layout.

	* lib/layouts/heb-article.layout: Do not use slanted font shape
	for Theorem like environments.

	* src/buffer.C (makeLaTeXFile): Always add "american" to
	the UsedLanguages list if document language is RTL.

2000-05-11  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* add addendum to README.OS2 and small patch (from SMiyata)

2000-05-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* many files: correct the calls to ChangeExtension().

	* src/support/filetools.C (ChangeExtension): remove the no_path
	argument, which does not belong there. Use OnlyFileName() instead.

	* src/insets/insetbib.C (Latex): use absolute paths for bibtex
	files when LaTeXing a non-nice latex file.

	* src/lyxlookup.C (isDeadEvent): use a switch statement instead of
	a chain of "if". Return false when deadkeys are not handled.

	* src/lyx_main.C (LyX): adapted the code for default bindings.

	* src/kbmap.C (defaultKeyBindings): new method. Performs the default
	bindings for basic functionality (except deadkeys).
	(deadKeyBindings): new method. Performs the bindings of deadkeys.

	* src/lyxrc.C (defaultKeyBindings): moved to lyx_main.C
	several methods: handle override_x_deadkeys.

	* src/lyxrc.h: remove the "bindings" map, which did not make much
	sense anyway. New variable override_x_deadkeys, defaulting to "true".

2000-05-09  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxfont.C (stateText): use a saner method to determine
	whether the font is "default". Seems to fix the crash with DEC
	cxx.

	* src/Bullet.[Ch] (Bullet): remove const on parameters.

2000-05-08  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (InsetButtonRelease): Now opens the
	TabularLayoutMenu with mouse-button-3
	(LocalDispatch): added LFUN_MENU_LAYOUT to open the Tabular-Layout.

	* src/TabularLayout.C: added this file for having a Layout for
	tabular-insets.

2000-05-05  Juergen Vigna  <jug@sad.it>

	* src/insets/insettabular.C (UpdateLocal): resetCursorPos when
	recalculating inset-widths.
	(TabularFeatures): activated this function so that I can change
	tabular-features via menu.

	* src/menus.C (ShowEditMenu): inserted support for insettabular so
	that I can test some functions with the Table menu.

2000-05-05  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyxfont.C (stateText): guard against stupid c++libs.

	* src/tabular.C: add using std::vector
	some whitespace changes, + removed som autogenerated code.

	* src/buffer.C (parseSingleLyXformat2Token): stupid bug.

2000-05-05  Juergen Vigna  <jug@sad.it>

	* src/tabular.[Ch]: now using std:vector instead of arrays for all the
	row, columns and cellstructures.

2000-05-05  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* lib/lyxrc.example: remove obsolete entries.

	* src/buffer.C (parseSingleLyXformat2Token): patch from dekel, fix
	reading of protected_separator for free_spacing.

2000-05-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/text.C (draw): do not display an exclamation mark in the
	margin for margin notes. This is confusing, ugly and
	uninformative.

	* src/LaTeXFeatures.C (getPackages): load amssymb also when 'Use
	AMS math' is checked.

	* src/buffer.C (makeLaTeXFile): do not depend on the textclass
	name to see whether including the amsmath package is needed.

2000-05-05  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/paragraph.C (validate): Compute UsedLanguages correctly
	(don't insert the american language if it doesn't appear in the
	document)

	* src/paragraph.C (TeXOnePar,SimpleTeXOnePar,SimpleTeXSpecialChars)
	The argument of \thanks{} command is considered moving argument

	* src/paragraph.C (SimpleTeXOnePar): Put \protect before \\ if in
	moving argument.

2000-05-04  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/text.C (GetVisibleRow): Improved drawing of vertical lines
	for appendix/minipage/depth. The lines can be now both in the footnote
	frame, and outside the frame.

	* src/text.C (SingleWidth,draw): Correct rendering of Hebrew vowels
	points ("nikud")

2000-05-05  Juergen Vigna  <jug@sad.it>

	* src/table.[Ch]: removed the inset and buffer stuff as this is now
	neede only in tabular.[Ch].

2000-05-05  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/insets/insetspecialchar.C (Read): allow command == '~' for
	PROTECTED_SEPARATOR
	(Write): write '~' for PROTECTED_SEPARATOR

2000-05-04  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyxparagraph.h: add a friend struct matchIT after the struct
	InsetTable.

	* src/mathed/formula.C (drawStr): rename size to siz.

	* src/insets/figinset.C (RestoreForm): rename pflags to piflags,
	possibly fix a bug by not changing the pflags = flags to piflags =
	flags.

2000-05-05  Juergen Vigna  <jug@sad.it>

	* src/insets/insetbib.C: moved using directive

	* src/ImportNoweb.C: small fix for being able to compile (missing
	include cstdlib)

2000-05-04  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* config/lyxinclude.m4 (LYX_CXX_STL_STRING): change the test not
	to use clear, since we don't depend on this in the code. Add test
	for string::compare

2000-05-04  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* (various *.C files): add using std::foo directives to please dec
	cxx.

	* replace calls to string::clear() to string::erase() (Angus)

	* src/cheaders/cmath: modified to provide std::abs.

2000-05-04  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C: Prepared all for inserting of multiple
	paragraphs. Still display stuff to do (alignment and other things),
	but I would like to use LyXText to do this when we cleaned out the
	table-support stuff.

	* src/insets/insettabular.C: Changed lot of stuff and added lots
	of functionality still a lot to do.

	* src/tabular.C: Various functions changed name and moved to be
	const functions. Added new Read and Write functions and changed
	lots of things so it works good with tabular-insets (also removed
	some stuff which is not needed anymore * hacks *).

	* src/lyxcursor.h: added operators == and != which just look if
	par and pos are (not) equal.

	* src/buffer.C (latexParagraphs): inserted this function to latex
	all paragraphs form par to endpar as then I can use this too for
	text-insets.

	* src/text2.C (SetLayout): Changed this to use a cursor this is needed
	so that I can call this to from text insets with their own cursor.

	* src/buffer.C (makeLaTeXFile): added the output of one \n after the
	output off all paragraphs (because of the fix below)!

	* src/paragraph.C (TeXOnePar): removed output of \n when we are in
	the very last paragraph (this could be also the last paragraph of an
	inset!)

	* src/texrow.h: added rows() call which returns the count-variable.

2000-05-03  Jose Abilio Oliveira Matos <jamatos@novalis.fc.up.pt>

	* lib/lyxrc.example: fix examples for exporting SGML to HTML.

	* lib/configure.m4: better autodetection of DocBook tools.

2000-04-28  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyx_main.C (easyParse): use lyxerr instead of cerr.

	* src/lyx_cb.C: add using std::reverse;

	* src/LaTeX.C (run): on error always run deleteFilesOnError before
	returning.

	* src/LaTeX.[Ch] (deleteFilesOnError): new method. unlinks some
	selected files. Should fix repeated errors from generated files.

2000-04-27  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/lyx_cb.C (TocUpdateCB): Reverse strings for Hebrew paragraphs

	* src/spellchecker.C (RunSpellChecker): Reverse Hebrew strings in
	the spellchecker popup.

	* lib/lyxrc.example:  Removed the \number_inset section

2000-04-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/figinset.C (various): Use IsFileReadable() to make
	sure that the file actually exist. Relying on ghostscripts errors
	is a bad idea since they can lead to X server crashes.

2000-04-27  Claus Hentschel <claus.hentschel@mbau.fh-hannover.de>

	* intl/loadmsgcat.c (_nl_load_domain): pass O_BINARY as flag to
	open under CYGWIN

	* lib/lyxrc.example: smallish typo in description of
	\view_dvi_paper_option

2000-04-26  André Pönitz <poenitz@mathematik.tu-chemnitz.de>

	* src/lyxfunc.h:
	* src/lyxfunc.C: doImportHelper to factor out common code of the
	various import methods. New functions doImportASCIIasLines,
	doImportASCIIasParagraphs, doImportLaTeX, doImportNoWeb,
	doImportLinuxDoc  for the  format specific parts.

	* buffer.h:
	* buffer.C: Dispatch  returns now a bool to indicate success

	* lyx_gui.h:
	* lyx_gui.C: Add getLyXView() for member access

	* lyx_main.C: Change logic for batch commands: First try
	Buffer::Dispatch (possibly without GUI), if that fails, use
	LyXFunc::Dispatch

	* lyx_main.C: Add support for --import command line switch.
	Now 'lyx --import ascii file.txt' opens the GUI with file.txt loaded.
	Available Formats: Everything  accepted by 'buffer-import <format>'

2000-04-27  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyx_gui.C (create_forms): small oneliner from Garst to have
	unnumbered parts.

	* src/lyx_cb.C (ScreenApplyCB): clear the textcache so that the
	documents will be reformatted upon reentry.

2000-04-27  Juergen Vigna  <jug@sad.it>

	* src/CutAndPaste.C (pasteSelection): last paragraph was not returned
	correctly only last pos this was a bug.

2000-04-26  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* release of lyx-1.1.5pre1

2000-04-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/insettabular.[Ch]: fix the Clone() declaration.

	* src/menus.C: revert the change of naming (Figure->Graphic...)
	from 2000-04-11. It was incomplete and bad.

	* src/LColor.[Ch]: add LColor::depthbar.
	* src/text.C (GetVisibleRow): use it.

	* README: update the languages list.

2000-04-25  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/text.C (GetVisibleRow): show the depth of paragraphs using
	vertical bars.

2000-04-26  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* README: remove sections that were just wrong.

	* src/text2.C (GetRowNearY): remove currentrow code

	* src/text.C (GetRow): remove currentrow code

	* src/screen.C (Update): rewritten a bit.
	(SmallUpdate): removed func

	* src/lyxtext.h (text_status): removed NEED_LITTLE_REFRESH, never
	used.
	(FullRebreak): return bool
	(currentrow): remove var
	(currentrow_y): ditto

	* src/lyxscreen.h (Draw): change arg to unsigned long
	(FitCursor): return bool
	(FitManualCursor): ditto
	(Smallpdate): remove func
	(first): change to unsigned long
	(DrawOneRow): change second arg to long (from long &)
	(screen_refresh_y): remove var
	(scree_refresh_row): ditto

	* src/lyxrow.h: change baseline to usigned int from unsigned
	short, this brings some implicit/unsigned issues out in the open.

	* src/lyxfunc.C (moveCursorUpdate): update(0) == update(-2) change
	accordingly.
	(Dispatch): don't call updateScrollbar after fitCursor. Use update
	instead of smallUpdate.

	* src/lyxcursor.h: change y to unsigned long

	* src/buffer.h: don't call updateScrollbar after fitcursor

	* src/buffer.C (parseSingleLyXformat2Token): move variables to
	where they are used. Removed "\\direction", this was not present
	in 1.1.4 and is already obsolete. Commented out some code that I
	believe to never be called.
	(runLiterate): don't call updateScrollbar after fitCursor
	(runLaTeX): ditto
	(buildProgram): ditto
	(runChktex): ditto

	* src/WorkArea.h (workWidth): change return val to unsigned
	(width): ditto
	(height): ditto
	(redraw): remove the button redraws
	(setScrollbarValue): change for scrollbar
	(getScrollbarValue): change for scrollbar
	(getScrollbarBounds): change for scrollbar

	* src/WorkArea.C (C_WorkArea_up_cb): removed func
	(C_WorkArea_down_cb): removed func
	(WorkArea): use fl_add_scrollbar instead of two buttons and a slider.
	(resize): change for scrollbar
	(setScrollbar): ditto
	(setScrollbarBounds): ditto
	(setScrollbarIncrements): ditto
	(up_cb): removed func
	(down_cb): removed func
	(scroll_cb): change for scrollbar
	(work_area_handler): ditto

	* src/BufferView_pimpl.C (fitCursor): only call updateScrollbar
	when FitCursor did something.
	(updateScrollbar): some unsigned changes
	(downCB): removed func
	(scrollUpOnePage): removed func
	(scrollDownOnePage): remvoed func
	(workAreaMotionNotify): don't call screen->FitCursor but use
	fitCursor instead. and bool return val
	(workAreaButtonPress): ditto
	(workAreaButtonRelease): some unsigned changes
	(checkInsetHit): ditto
	(workAreaExpose): ditto
	(update): parts rewritten, comments about the signed char arg added
	(smallUpdate): removed func
	(cursorPrevious): call needed updateScrollbar
	(cursorNext): ditto

	* src/BufferView2.C (allFloats): don't call updateScrollbar after
	fitCursor.

	* src/BufferView.[Ch] (upCB): removed func
	(downCB): removed func
	(smallUpdate): removed func

2000-04-25  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyxtext.h src/text.C src/text2.C: removed support for the
	currentrow, currentrow_y optimization. This did not help a lot and
	if we want to do this kind of optimization we should rather use
	cursor.row instead of the currentrow.

	* src/buffer.C (parseSingleLyXformat2Token): fixed mistake in
	buffer spacing and klyx spacing support.

2000-04-25  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/spellchecker.C (RunSpellChecker): Speedup spellchecking by
	a factor of 50!

2000-04-26  Juergen Vigna  <jug@sad.it>

	* src/insets/figinset.C: fixes to Lars sstream changes!

2000-04-23  Dekel Tsur  <dekel@math.tau.ac.il>

	* A lot of files: Added Ascii(ostream &) methods to all inset
	classes. Used when exporting to ASCII.

	* src/buffer.C (writeFileAscii,RoffAsciiTable)
	* src/paragraph.C (RoffContTableRows): Use the Ascii() methods
	instead of Latex()

	* src/text2.C (ToggleFree): Disabled implicit word selection when
	there is a change in the language

	* src/insets/insetspecialchar.C (Linuxdoc,DocBook): Fixed a bug:
	no output was generated for end-of-sentence inset.

	* src/insets/lyxinset.h
	* src/buffer.C
	* src/lyxfunc.C
	* src/paragraph.C: Removed the insetnumber code

	* src/text.C (SelectWordWhenUnderCursor): Cleaned the code.

2000-04-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/buffer.C (parseSingleLyXformat2Token): remove no_isolatin1,
	no_babel and no_epsfig completely from the file.
	(parseSingleLyXformat2Token): add handling for per-paragraph
	spacing as written by klyx.

	* src/insets/figinset.C: applied patch by Andre. Made it work with
	ostringstream too.

2000-04-20  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (cutSelection):
	(copySelection): Fixed with selection from right to left.
	(draw): now the rows are not recalculated at every draw.
	(computeTextRows): for now reset the inset-owner here (this is
	important for an undo or copy where the inset-owner is not set
	automatically!)

	* src/BufferView_pimpl.C (workAreaMotionNotify): when passing the
	motion to the_locking_inset screen->first was forgotten, this was
	not important till we got multiline insets.

2000-04-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/mathed/formulamacro.C (Latex): remove CHECK comment, since
	code seems to be alright (it is code changed by Dekel, and the
	intent is indeed that all macros should be defined \protect'ed)

	* NEWS: a bit of reorganisation of the new user-visible features.

2000-04-19  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (init): using a LyXCursor now for cursor
	position. Set the inset_owner of the used paragraph so that it knows
	that it is inside an inset. Fixed cursor handling with mouse and
	cursor keys. Fixed wrong timed inset redraws and lots of other changes
	and cleanups to make TextInsets work better.

	* src/insets/insettext.h: Using a LyXCursor now. Added a clear() call.
	Changed parameters of various functions and added LockInsetInInset().

	* src/insets/insettext.C:

	* src/insets/insetcollapsable.h:
	* src/insets/insetcollapsable.C:
	* src/insets/insetfoot.h:
	* src/insets/insetfoot.C:
	* src/insets/insetert.h:
	* src/insets/insetert.C: cleaned up the code so that it works now
	correctly with insettext.

	* src/insets/inset.C:
	* src/insets/lyxinset.h: inserted inset_owner and some more changes so
	that insets in insets are supported right.

	* src/table.h:
	* src/table.C: lots of changes for use with inset tabular (and cleanup)

	* src/paragraph.C: some small fixes

	* src/debug.h: inserted INSETS debug info

	* src/lyxfunc.C (Dispatch): added code for InsetTabular and some inset
	fixes (f.ex. calling LFUN_DOWN if exiting inset with LFUN_DOWN).

	* src/commandtags.h:
	* src/LyXAction.C: insert code for InsetTabular.

	* src/BufferView_pimpl.C (workAreaMotionNotify): do return always if
	not Button1MotionMask.
	(workAreaButtonRelease): send always a InsetButtonRelease event to
	the_locking_inset.
	(checkInsetHit): some setCursor fixes (always with insets).

	* src/BufferView2.C (lockInset): returns a bool now and extended for
	locking insets inside insets.
	(showLockedInsetCursor): it is important to have the cursor always
	before the locked inset.
	(fitLockedInsetCursor): forgot adding of InsetInInsetY()-offset.

	* src/BufferView.h: made lockInset return a bool.

	* src/lyxtext.h: inserted function SetCursor(LyXCursor, ...).

	* src/text2.C (SetCursor): This now has a version with a LyXCursor
	that is used also internally but can be called as public to have back
	a cursor pos which is not set internally.
	(SetCursorIntern): Changed to use above function.

	* src/CutAndPaste.C (DeleteBuffer): forgot to inizialize textclass

2000-04-19  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* ANNOUNCE:
	* INSTALL:
	* UPGRADING:
	* NEWS: updated for prerelease of 1.1.5. Please comment and send
	patches for things that should be in or should be changed.

	* src/* [insetfiles]: change "usigned char fragile" to bool
	fragile. There was only one point that could that be questioned
	and that is commented in formulamacro.C. Grep for "CHECK".

	* src/CutAndPaste.C (getBufferTextClass): unused func, removed.
	(DeleteBuffer): take it out of CutAndPaste and make it static.

2000-04-17  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/paragraph.C (TeXOnePar): use the new method in Spacing to
	output the spacing envir commands. Also the new commands used in
	the LaTeX output makes the result better.

	* src/Spacing.C (writeEnvirBegin): new method
	(writeEnvirEnd): new method

2000-04-18  Juergen Vigna  <jug@sad.it>

	* src/CutAndPaste.C: made textclass a static member of the class
	as otherwise it is not accesed right!!!

2000-04-17  Dekel Tsur  <dekel@math.tau.ac.il>

	* forms/layout_forms.fd
	* src/layout_forms.h
	* src/layout_forms.C (create_form_form_character)
	* src/lyx_cb.C (UserFreeFont)
	* src/lyx_gui.C (create_forms): Added GUI support for multi-lingual
	documents (in the layout->character popup).

2000-04-17  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/spellchecker.C (create_ispell_pipe): fix a bug where
	\spell_command was in fact not honored (from Kevin Atkinson).

	* src/lyx_gui.C (~LyXGUI): make sure lyxViews is deleted when
	quitting (Angus)

	* src/lyx_gui.h: make lyxViews private (Angus)

2000-04-15  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/mathed/math_write.C
	(MathMatrixInset::Write) Put \protect before \begin{array} and
	\end{array} if fragile
	(MathParInset::Write): Put \protect before \\ if fragile

2000-04-15  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyx_gui.C (LyXGUI): initialize the LyXColorHandler. The
	initialization if the LyXColorHandler must be done after the
	connections to the XServer has been established.

	* src/insets/figinset.C (runqueue): change the grabing a bit. Also
	get the background pixel from the lyxColorhandler so that the
	figures are rendered with the correct background color.
	(NextToken): removed functions.
	(GetPSSizes): use ifs >> string instead of NextToken.

	* src/Painter.[Ch]: the color cache moved out of this file.

	* src/ColorHandler.[Ch]: new files. Holds the gc cache for color
	and lines.

2000-04-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/WorkArea.C (work_area_handler): call BufferView::enterView
	and Buffer::leaveView when FL_ENTER and FL_LEAVE.

	* src/BufferView.C (enterView): new func
	(leaveView): new func

	* src/BufferView_pimpl.C (enterView): new func, sets xterm cursor
	when approp.
	(leaveView): new func, undefines xterm cursor when approp.

	* src/bufferview_funcs.C: moved SetXCursor to BufferView_pimp.C
	(AllowInput): delete the Workarea cursor handling from this func.

	* src/Painter.C (underline): draw a slimer underline in most cases.

	* src/lyx_main.C (error_handler): use extern "C"

2000-04-12  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/insets/figinset.C (DocBook): small patch from Jose (jamatos)
	sent directly to me.

	* src/text2.C (DeleteEmptyParagraphMechanism): small patch posted
	to the list by Dekel.

	* src/lyxfunc.C (Dispatch): make PARAGRAPH_SPACING compile with
	strstream too.

	* src/bufferview_funcs.[Ch]: two new files, moved several of the
	methods from lyx_cb.here.

	* src/lyx_cb.C: in addition to the above; removed input_prohibited
	it was not used.

2000-04-11  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyx_cb.[Ch]: made several functions take a BufferView* arg
	instead of using current_view directly.

	* src/lyxfunc.C (Dispatch): the paragraph-spacing implementation

	* src/LyXAction.C (init): add the paragraph-spacing command.

	* src/commandtags.h: add enum for LFUN_PARAGRAPH_SPACING

	* src/buffer.C (parseSingleLyXformat2Token): read the paragraph spacing

	* src/lyx_cb.C (CurrentState): output a string when the spacing is
	different from the documents.

	* src/text.C (SetHeightOfRow): take paragraph spacing into
	account, paragraph spacing takes precedence over buffer spacing
	(GetVisibleRow): ditto

	* src/paragraph.C (writeFile): output the spacing parameter too.
	(validate): set the correct features if spacing is used in the
	paragraph.
	(Clear): set spacing to default
	(MakeSameLayout): spacing too
	(HasSameLayout): spacing too
	(SetLayout): spacing too
	(TeXOnePar): output the spacing commands

	* src/lyxparagraph.h: added a spacing variable for use with
	per-paragraph spacing.

	* src/Spacing.h: add a Default spacing and a method to check if
	the current spacing is default. also added an operator==

	* src/text2.C (DeleteEmptyParagraphMechanism): added a
	RedoParagraphs.

2000-04-11  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxserver.C (callback): fix dispatch of functions

	* src/insets/insetlatexaccent.C (checkContents): turn bogus
	printf() into lyxerr call.

	* src/tex-strings.C (tex_fonts): add "pslatex" to the choice of
	fonts.

	* src/menus.C (ShowInsertMenu): rename "Figure" to "Graphic",
	"Table" to "Table Box", "Float" to "Floating Material"; deletes
	the "Float" from each of the subitems.
	(ShowHelpMenu): add entry for "FAQ" and "TOC".

	* src/support/DebugStream.h: add an #ifdef to work around a gcc
	2.8.x compiler error. Yes, I know, gcc 2.8.1 is bad, but I
	documented the change so that the workaround can be nuked later.

	* src/lyx_gui_misc.C (getScreenDPI): new function. Code moved from
	LyX::init().

	* src/lyxlex_pimpl.C (next): do not re-declare the default value
	of arguments.
	* src/buffer.C (getLatexName): ditto
	(setReadonly): ditto

2000-04-11  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/LaTeXFeatures.h: add a const reference to BufferParams, to
	avoid some uses of current_view. Added also a bufferParams()
	method to get at this.

	* src/lyxtext.h: changed params->buffer and paramters->bparams.

2000-04-10  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyxparagraph.[Ch]: removed
	operator<(LyXParagraph::InsetTable..., added a struct matchIT
	with operators used by lower_bound and
	upper_bound in InsetTable's
	Make struct InsetTable private again. Used matchpos.

2000-04-08  Dekel Tsur  <dekel@math.tau.ac.il>

	* src/lyx_cb.C (DocumentApplyCB): When changing the language of the
	document, the language of existing text is changed (unless the
	document is multi-lingual)

	* src/buffer.C (ChangeLanguage,isMultiLingual) New methods.

	* src/paragraph.C (ChangeLanguage,isMultiLingual) New methods.

	* A lot of files: A rewrite of the Right-to-Left support.

2000-04-10  Juergen Vigna  <jug@sad.it>

	* src/BufferView2.C (showLockedInsetCursor): small bugfix for
	misplaced cursor when inset in inset is locked.

	* src/insets/insettext.C (LocalDispatch): small fix so that a
	BREAKLINE is not inserted if we don't permit it with autBreakRows.

	* src/insets/insetfoot.C (GetDrawFont): implemented this as the
	footnote font should be decreased in size twice when displaying.

	* src/insets/insettext.C (GetDrawFont): inserted this function as
	the drawing-font may differ from the real paragraph font.

	* src/lyxfunc.C (processKeyEvent): fixed Esc-handling when unlocking
	insets (inset in inset!).

	* src/insets/insetfoot.C (InsertInsetAllowed): implemented the below
	function here because we don't want footnotes inside footnotes.

	* src/insets/insettext.C (InsetText): forgot to set autoBreakRows for
	Cloned insets.
	(init): now set the inset_owner in paragraph.C
	(LocalDispatch): added some resetPos() in the right position
	(cutSelection):
	(copySelection):
	(pasteSelection): changed to use the new CutAndPaste-Class.

	* src/insets/lyxinset.h: inserted new function InsertInsetAllowed
	which tells if it is allowed to insert another inset inside this one.

	* src/lyx_cb.C (DocumentApplyCB): Using CutAndPaste-Class for
	SwitchLayoutsBetweenClasses.

	* src/text2.C (InsertInset): checking of the new paragraph-function
	InsertInsetAllowed.
	(DeleteSimpleCutBuffer): removed (for now only with #ifdef) as this
	is not needed anymore here!
	(CutSelection):
	(CopySelection):
	(PasteSelection): redone (also with #ifdef) so that now this uses
	the CutAndPaste-Class.
	(SwitchLayoutsBetweenClasses): removed here and implemented in the
	CutAndPaste-Class.

	* src/CutAndPaste.[Ch]: added this for clean handling of CutAndPaste
	from/to text/insets.

	* src/paragraph.C (LyXParagraph): inserted new inset_owner pointer
	so that the paragraph knows if it is inside an (text)-inset.
	(InsertFromMinibuffer): changed return-value to bool as now it
	may happen that an inset is not inserted in the paragraph.
	(InsertInsetAllowed): this checks if it is allowed to insert an
	inset in this paragraph.
	(PasteParagraph):
	(BreakParagraphConservative):
	(BreakParagraph) : small change for the above change of the return
	value of InsertFromMinibuffer.

	* src/lyxparagraph.h: added inset_owner and the functions to handle
	this (SetInsetOwner(), InInset() and InsertInsetAllowed()).

2000-04-10  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/BufferView.[Ch], src/BufferView_pimpl.[Ch]: move more
	functions from BufferView to BufferView::Pimpl to ease maintence.

	* src/text2.C (DeleteEmptyParagraphMechanism): update the cursor
	correctly. Also use SetCursorIntern instead of SetCursor.

	* src/insets/insetinfo.C (draw): draw InsetInfo notes with the
	correct color.

2000-04-08  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/WorkArea.C (belowMouse): manually implement below mouse.

	* src/*: Add "explicit" on several constructors, I added probably
	some unneeded ones. A couple of changes to code because of this.

	* src/BufferView.[Ch]: Used the "pimpl" idiom to hide more of the
	implementation and private parts from the users of BufferView. Not
	quite finished.

	* src/lyxlex.[Ch]: Used the "pimpl" idiom to hide more of the
	implementation and private parts from the users of LyXLex. Not
	quite finished.

	* src/BufferView_pimpl.[Ch]: new files

	* src/lyxlex_pimpl.[Ch]: new files

	* src/LyXView.[Ch]: some inline functions move out-of-line

2000-04-04  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxparagraph.h: make struct InsetTable public.

	* src/support/lyxstring.h: change lyxstring::difference_type to be
	ptrdiff_t. Add std:: modifiers to streams.

	* src/font.C: include the <cctype> header, for islower() and
	isupper().

2000-04-03  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/font.[Ch]: new files. Contains the metric functions for
	fonts, takes a LyXFont as parameter. Better separation of concepts.

	* src/lyxfont.[Ch]: move the metric functions to font.[Ch] several
	changes because of this.

	* src/PainterBase.[Ch] (width): remove, use the ones in font.C instead

	* src/*: compile with -Winline and move functions that don't
	inline out of line.

	* src/lyx_cb.C (stringOnlyContains): use string::find_first_not_of
	instead of strspn.

2000-04-02  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/paragraph.C (GetLabelstring): renamed from GetLabestring.
	(various files changed because of this)

	* src/Painter.C (text): fixed the drawing of smallcaps.

	* src/lyxfont.[Ch] (drawText): removed unused member func.
	(drawString): ditto

	* src/*.C: added needed "using" statements and "std::" qualifiers.

2000-03-31  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/*.h: removed all use of "using" from header files use
	qualifier std:: instead.

2000-04-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/text.C (Backspace): some additional cleanups (we already
	know whether cursor.pos is 0 or not).

	* lib/reLyX/Makefile.am (DESTDIR): add an empty value (since
	automake does not provide one).

	* src/bmtable.h: replace C++ comments with C comments.

2000-04-02  Dekel Tsur <dekel@math.tau.ac.il>

	* src/screen.C (ShowCursor): Change the shape of the cursor if
	the current language is not equal to the language of the document.
	(If the cursor change its shape unexpectedly, then you've found a bug)

	* src/insets/insettext.C (LocalDispatch, UpdateLocal) Fixed some
	bugs [I hope...]

	* src/insets/insetnumber.[Ch]: New files.

	* src/LyXAction.C (init)
	* src/lyxfunc.C (dispatch): Add command number-inset-insert

	* lyxrc.example
	* src/lyxrc.C: Renamed command \auto_mathmode to \number_inset

	* src/lyxparagraph.h
	* src/paragraph.C: Changed insetlist to Vector<InsetTable>.
	(the vector is kept sorted).

	* src/text.C (GetVisibleRow): Draw selection correctly when there
	is both LTR and RTL text.

	* src/paragraph.C (Clone): Use the assignment operator for cloning,
	which is much faster.

	* src/text.C (GetVisibleRow and other): Do not draw the last space
	in a row if the direction of the last letter is not equal to the
	direction of the paragraph.

	* src/lyxfont.C (latexWriteStartChanges):
	Check that font language is not equal to basefont language.
	(latexWriteEndChanges): ditto

	* src/lyx_cb.C (StyleReset): Don't change the language while using
	the font-default command.

	* src/paragraph.C (GetFirstFontSettings): Handle correctly an
	empty paragraph before a footnote.

	* src/insets/insetcommand.C (draw): Increase x correctly.

	* src/screen.C (ShowCursor): Change cursor shape if
	current language != document language.

	* src/lyxfunc.C (dispatch): Added calls to owner->view()->setState()

2000-03-31  Juergen Vigna  <jug@sad.it>

	* src/paragraph.C (GetInset): commented out text[pos] = ' '
	(Clone): changed mode how the paragraph-data is copied to the
	new clone-paragraph.

	* src/lyxfunc.C (Dispatch): fixed small problem when calling
	GetInset(pos) with no inset anymore there (in inset UNDO)

	* src/insets/insetcommand.C (draw): small fix as here x is
	incremented not as much as width() returns (2 before, 2 behind = 4)

2000-03-30  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (InsetText): small fix in initialize
	widthOffset (should not be done in the init() function)

2000-03-29  Amir Karger <karger@lyx.org>

	* lib/examples/it_ItemizeBullets.lyx: translation by
	Stefano Mastella

	* Implemented \textasciitilde and fixed a tiny bug in reLyX

2000-03-29  Juergen Vigna  <jug@sad.it>

	* src/insets/insetcollapsable.C (Clone): same as in InsetFoot

	* src/insets/insetfoot.C (Clone): small change as for the below
	new init function in the text-inset

	* src/insets/insettext.C (init): new function as I've seen that
	clone did not copy the Paragraph-Data!
	(LocalDispatch): Added code so that now we have some sort of Undo
	functionality (well actually we HAVE Undo ;)

	* src/text.C (Backspace): Small fix for the a | a Backspace problem

2000-03-24  Dekel Tsur <dekel@math.tau.ac.il>

	* src/paragraph.C (AutoDeleteInsets) Fixed a bug (wrong positions
	were erased)

2000-03-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/main.C: added a runtime check that verifies that the xforms
	header used when building LyX and the library used when running
	LyX match. Exit with a message if they don't match. This is a
	version number check only.

	* src/buffer.C (save): Don't allocate memory on the heap for
	struct utimbuf times.

	* *: some using changes, use iosfwd instead of the real headers.

	* src/lyxfont.C use char const * instead of string for the static
	strings. Rewrite some functions to use sstream.

2000-03-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/text.C (Backspace): hopefully fix the dreaded backaspace
	bug.

2000-03-27  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/layouts/svjog.layout: new file, for Springer-Verlag Journal
	of Geodesy (from Martin Vermeer)

	* lib/layouts/svjour.inc: include file for the Springer svjour
	class. It can be used to support journals other than JoG.

	* lib/Makefile.am: use $(DESTDIR) make variable (from Arkadiusz
	Miskiewicz <misiek@pld.org.pl>)
	* lib/reLyX/Makefile.am: ditto.

2000-03-27  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C: added Cut/Copy/Paste inside insets,
	also some modifications with operations on selected text.

	* src/BufferView.C (checkInsetHit): Now hopefully fixed all the
	problems with clicking on insets (last famous words ;)

	* src/insets/insetcommand.C (draw):
	(width): Changed to have a bit of space before and after the inset so
	that the blinking cursor can be seen (otherwise it was hidden)

2000-03-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* config/gettext.m4 (AM_WITH_NLS): fix a gettext bug where -lintl
	would not be added to the link list when an installed gettext (not
	part of libc) is found.

2000-03-24  Juergen Vigna  <jug@sad.it>

	* src/insets/insetcollapsable.C (Edit):
	* src/mathed/formula.C (InsetButtonRelease):
	(InsetButtonPress): fixed for new handling of ButtonPress/Release
	handling.

	* src/BufferView.C (workAreaButtonPress):
	(workAreaButtonRelease):
	(checkInsetHit): Finally fixed the clicking on insets be handled
	correctly!

	* src/insets/insetert.C (Edit): inserted this call so that ERT
	insets work always with LaTeX-font

2000-03-21  Kayvan A. Sylvan  <kayvan@camel.internal.sylvan.com>

	* src/lyx_main.C (easyParse): Removed misplaced gui=false which
	caused lyx to startup with no GUI in place, causing in a crash
	upon startup when called with arguments.

2000-03-21  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/FontLoader.C: better initialization of dummyXFontStruct.

2000-03-20 José Abílio Matos <jamatos@lyx.org>

	* src/lyxrc.[Ch] Removed \sgml_extra_options, added 6 other flags
	for linuxdoc and docbook import and export format options.

	* lib/lyxrc.example Example of default values for the previous flags.

	* src/lyx_cb.C Use those flags instead of the hardwired values for
	linuxdoc and docbook export.

	* src/lyxfunc.[Ch] Added HTML export for linuxdoc and docbook, added
	linuxdoc import.

	* src/menus.C Added menus entries for the new import/exports formats.

2000-03-09 André Pönitz <poenitz@mathematik.tu-chemnitz.de>

	* src/lyxrc.*: Added support for running without Gui
	(\use_gui false)

	* src/FontLoader.C: sensible defaults if no fonts are needed

	* src/lyx_cb.C: New function ShowMessage (writes either to the
	minibuffer or cout in case of no gui
	New function AskOverwrite for common stuff
	Consequently various changes to call these functions

	* src/lyx_main.C:  allow gui = false and handle lyxrc \use_gui false
	wild guess at sensible screen resolution when having no gui

	* src/lyxfont.C: no gui, no fonts... set some defaults

2000-03-20  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/LColor.C: made the command inset background a bit lighter.

2000-03-20  Hartmut Goebel <goebel@noris.net>

	* lib/layouts/stdstruct.inc: split into stdtitle.inc and
	stdstruct.inc. Koma-Script added some title elements which
	otherwise have been listed below "bibliography". This split allows
	adding title elements to where they belong.

	* lib/layouts/scrclass.inc: changed to include stdtitle.inc, then
	define the additional title elements and then include
	stdstruct.inc.

	* many other layout files: changed to include stdtitle.inc just
	before stdstruct.inc.

2000-03-18 Dekel Tsur <dekel@math.tau.ac.il>

	* src/buffer.C: (save) Added the option to store all backup files
	in a single directory

	* src/lyxrc.[Ch]: Added variable \backupdir_path

	* lib/lyxrc.example: Added descriptions of recently added variables

	* src/insets/insetbib.[Ch]: Fixed few bugs (crash when editing a
	bibtex inset, not closing the bibtex popup when deleting the inset)

2000-03-17  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyx_cb.C: add a couple using directives.

2000-03-17 José Abílio Matos <jamatos@lyx.org>
	* src/lyx_cb.C (RunLinuxDoc) Removed the flag==-1 option for linuxdoc
	import based on the filename.

	* src/bufferlist.C () Removed the call to RunLinuxDoc where a linuxdoc
	file would be imported at start, if the filename where of a sgml file.

	* src/support/filetools.C (IsSGMLfilename) Removed, no longer needed.

	* src/support/filetools.h (IsSGMLfilename) Removed, no longer needed.

2000-03-16 Dekel Tsur <dekel@math.tau.ac.il>
	* src/lyxfont.h Replaced the member variable bits.direction by the
	member variable lang. Made many changes in other files.
	This allows having a multi-lingual document

	* src/lyxfunc.C, src/lyx_cb.C Added a new command "language <l>"
	that change the current language to <l>.
	Removed the command "font-rtl"

	* src/buffer.C Changed LYX_FORMAT to 2.16 (as I changed the file
	format for Hebrew documents)

	* src/lyxrc.C, src/lyxfunc.C Added a new lyxrc command "auto_mathmode"
	When auto_mathmode is "true", pressing a digit key in normal mode
	will cause entering into mathmode.
	If auto_mathmode is "rtl" then this behavior will be active only
	when writing right-to-left text.

	* src/text2.C (InsertStringA) The string is inserted using the
	current font.

	* src/paragraph.C (GetEndLabel) Gives a correct result for
	footnote paragraphs.

	* src/paragraph.C (PreviousBeforeFootnote) Fixed a small bug

2000-03-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/text.C (Backspace): move RemoveParagraph and RemoveRow in
	front of PasteParagraph. Never insert a ' '. This should at least
	fix some cause for the segfaults that we have been experiencing,
	it also fixes backspace behaviour slightly. (Phu!)

	* src/support/lstrings.C (compare_no_case): some change to make it
	compile with gcc 2.95.2 and stdlibc++-v3

	* src/text2.C (MeltFootnoteEnvironment): change type o
	first_footnote_par_is_not_empty to bool.

	* src/lyxparagraph.h: make text private. Changes in other files
	because of this.
	(fitToSize): new function
	(setContentsFromPar): new function
	(clearContents): new function
	(SetChar): new function

	* src/paragraph.C (readSimpleWholeFile): deleted.

	* src/lyx_cb.C (InsertAsciiFile): don't use a LyXParagraph to hold
	the file, just use a simple string instead. Also read the file in
	a more maintainable manner.

	* src/text2.C (InsertStringA): deleted.
	(InsertStringB): deleted.

2000-03-15  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/text2.C (DeleteEmptyParagraphMechanism): don't run,
	RedoParagraphs from the doublespace handling part, just set status
	to NEED_MORE_REFRESH. Also don't update cursor position (should be
	done, but perhaps not like this.)

2000-03-14  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/text2.C (InsertStringA): don't forget to insert a META_INSET
	character when inserting an inset.

2000-03-12  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/bufferparams.C (readLanguage): now takes "default" into
	consideration.

	* src/lyx_main.C (LyX): remove the setup of lyxrc. (new)
	also initialize the toplevel_keymap with the default bindings from
	lyxrc.

	* src/buffer.C (Buffer): remove lyxrc from the parameters.

	* all files using lyxrc: have lyxrc as a real variable and not a
	pointer. remove all extern LyXRC * lyxrc. The equiv to this is
	done in lyxrc.h.

	* src/lyxrc.C: remove double call to defaultKeyBindings

	* src/toolbar.[Ch]: Let the ToolbarDefaults handle the reading of
	toolbar defauls using lyxlex. Remove enums, structs, functions
	related to this.

	* src/lyxrc.h: use ToolbarDefaults instead of Toolbar for storing
	toolbar defaults. Also store default keybindings in a map.

	* src/ToolbarDefaults.[Ch]: New file. This class is used for
	storing the toolbar defaults without any xforms dependencies.

	* src/insets/figinset.C: patch posted to list by Andre Poenitz
	applied. Changed to use iterators.

2000-03-11  Kayvan A. Sylvan  <kayvan@satyr.sylvan.com>

	* development/lyx.spec.in: Fix to ``unset LINGUAS'' line for
	systems that don't have LINGUAS set to begin with.

2000-03-10  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/text2.C (DeleteEmptyParagraphMechanism): small fix posted to
	the list by Dekel Tsur.

2000-03-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/insetgraphics.C (GraphicxCB): declare with "C" linkage.
	* src/insets/form_graphics.C: ditto.

	* src/insets/inseturl.C (Latex): the free_spc argument is not used.

2000-03-10  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/bufferparams.C (readLanguage): use the new language map

	* src/intl.C (InitKeyMapper): use the new language map

	* src/lyx_gui.C (create_forms): use the new language map

	* src/language.[Ch]: New files. Used for holding the information
	about each language. Now! Use this new language map enhance it and
	make it really usable for our needs.

2000-03-09 Dekel Tsur <dekel@math.tau.ac.il>

	* screen.C (ShowCursor): Removed duplicate code.
	(ShowManualCursor): Support for 3 cursor shapes: Bar (default),
	L (LTR text in RTL document), and reversed-L (RTL text in LTR document)

	* src/text.C (NextBreakPoint,Fill): Moved declaration of left_margin

	* src/lyxtext.h
	* src/text.C  Added TransformChar method. Used for rendering Arabic
	text correctly (change the glyphs of the letter according to the
	position in the word)

	* src/buffer.C
	* src/paragraph.C
	* src/lyxrc.h
	* src/lyxrc.C  Added lyxrc command {language_command_begin,
	language_command_end,language_command_ltr,language_command_rtl,
	language_package} which allows the use of either arabtex or Omega
	for Arabic

	* src/lyx_gui.C (init)
	* src/lyxrc.h
	* src/lyxrc.C Added lyxrc command screen_font_encoding_menu. Allows
	to use encoding for menu fonts which is different than the encoding
	for screen fonts

	* src/buffer.C (makeLaTeXFile): If params.language = "default",
	do not load the babel package.
	To write an English document with Hebrew/Arabic, change the document
	language to "english".

	* src/text2.C (SetCounter): Fixed appendix labels for Hebrew document
	(alphaCounter): changed to return char
	(loweralphaCounter, hebrewCounter, romanCounter): New functions

	* lib/lyxrc.example  Added examples for Hebrew/Arabic

	* src/layout.h
	* src/layout.C  Added layout command endlabeltype

	* src/paragraph.C Added GetEndLabel(),LastPhysicalPar() const

	* src/text.C (GetVisibleRow): Draw a box at the end of proof layout

2000-03-10  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/mathed/math_delim.C (search_deco): return a
	math_deco_struct* instead of index.

2000-03-09  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* All files with a USE_OSTREAM_ONLY within: removed all code that
	was unused when USE_OSTREAM_ONLY is defined.

	* src/support/lyxalgo.h (sorted): rewrote to use plain '<' instead
	of any less. Removed header and using.

	* src/text.C (GetVisibleRow): draw the string "Page Break
	(top/bottom)" on screen when drawing a pagebreak line.

2000-03-09  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/doc/LaTeXConfig.lyx.in: add description of textclass llncs.

	* src/mathed/math_macro.C (draw): do some cast magic.
	(Metrics): ditto.

	* src/mathed/math_defs.h: change byte* argument to byte const*.

	* src/mathed/formulamacro.[Ch]: add free_spc to Latex() method.

	* src/insets/insetfoot.[Ch]: Clone() always returns an Inset* (well I
	know it is right to return InsetFoot* too, but cxx does not like
	it...).

	* src/insets/insetcollapsable.[Ch] (Clone): make const.

	* development/lyx.spec.in: unset LINGUAS to avoid i18n problems.

	* src/mathed/math_delim.C: change == to proper assignment.

2000-03-09  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (setPos): fixed various cursor positioning
	problems (via mouse and cursor-keys)
	(LocalDispatch): added posibility to add a Ctrl-Enter inside a text
	inset (still a small display problem but it works ;)

	* src/insets/insetcollapsable.C (draw): added button_top_y and
	button_bottom_y to have correct values for clicking on the inset.

	* src/support/lyxalgo.h: commented out 'using std::less'

2000-03-08  Juergen Vigna  <jug@sad.it>

	* src/insets/insetcollapsable.C (InsetButtonRelease): Now a
	Button-Release event closes as it is alos the Release-Event
	which opens it.

	* src/lyxfunc.C (Dispatch): forgot a break in the LFUN_INSET_ERT

2000-03-07  Kayvan A. Sylvan  <kayvan@camel.internal.sylvan.com>

	* lib/layouts/literate-scrap.inc: Fixed initial comment. Now we
	can add multiple spaces in Scrap (literate programming) styles...
	which, by the way, is how I got hooked on LyX to begin with.

	* src/mathed/formula.C (Write): Added dummy variable to an
	inset::Latex() call.
	(Latex): Add free_spacing boolean to inset::Latex()

	* src/mathed/formula.h (Latex):	Added free_spacing boolean arg.

	* src/insets/lyxinset.h: Changed definition of the inset::Latex()
	virtual function to include the free_spacing boolean from
	the containing paragraph's style.

	* src/insets/inseturl.C, src/insets/inseturl.h (Latex):
	Added free_spacing boolean arg to match inset.h

	* src/insets/insettext.C, src/insets/insettext.h (Latex):
	Added free_spacing boolean arg to match inset.h

	* src/insets/insetspecialchar.C, src/insets/insetspecialchar.h (Latex):
	Added free_spacing boolean and made sure that if in a free_spacing
	paragraph, that we output normal space if there is a protected space.

	* src/insets/insetref.C, src/insets/insetref.h (Latex):
	Added free_spacing boolean arg to match inset.h

	* src/insets/insetquotes.C, src/insets/insetquotes.h (Latex):
	Added free_spacing boolean arg to match inset.h

	* src/insets/insetparent.C, src/insets/insetparent.h (Latex):
	Added free_spacing boolean arg to match inset.h

	* src/insets/insetlatexaccent.C, src/insets/insetlatexaccent.h (Latex):
	Added free_spacing boolean arg to match inset.h

	* src/insets/insetlatex.C, src/insets/insetlatex.h (Latex):
	Added free_spacing boolean arg to match inset.h

	* src/insets/insetlabel.C, src/insets/insetlabel.h (Latex): Added
	free_spacing boolean arg to match inset.h

	* src/insets/insetinfo.C, src/insets/insetinfo.h (Latex):
	Added free_spacing boolean arg to match inset.h

	* src/insets/insetinclude.C, src/insets/insetinclude.h (Latex):
	Added free_spacing boolean arg to match inset.h

	* src/insets/insetgraphics.C, src/insets/insetgraphics.h (Latex):
	Added free_spacing boolean arg to match inset.h

	* src/insets/inseterror.C, src/insets/inseterror.h (Latex):
	Added free_spacing boolean arg to match inset.h

	* src/insets/insetcommand.C, src/insets/insetcommand.h (Latex):
	Added free_spacing boolean arg to match inset.h

	* src/insets/insetbib.C, src/insets/insetbib.h (Latex): Added
	free_spacing boolean arg to match inset.h

	* src/insets/figinset.C, src/insets/figinset.h (Latex): Added
	free_spacing boolean arg to match inset.h

	* src/text2.C (DeleteEmptyParagraphMechanism): Fix this to
	ignore free_spacing paragraphs. The user's spaces are left
	alone.

	* src/text.C (InsertChar): Fixed the free_spacing layout
	attribute behavior. Now, if free_spacing is set, you can
	add multiple spaces in a paragraph with impunity (and they
	get output verbatim).
	(SelectSelectedWord): Added dummy argument to inset::Latex()
	call.

	* src/paragraph.C (TeXOnePar): Added dummy args to inset::Latex(...)
	calls.

	* src/lyxfunc.C (Dispatch): Hard-spaces input in free_spacing
	paragraph layouts now only input a simple space instead.
	Special character insets don't make any sense in free-spacing
	paragraphs.

	* src/buffer.C (parseSingleLyXformat2Token): Code to convert
	hard-spaces in the *input* file to simple spaces if the layout
	is free-spacing. This converts old files which had to have
	hard-spaces in free-spacing layouts where a simple space was
	preferrable.
	(writeFileAscii): Added free_spacing check to pass to the newly
	reworked inset::Latex(...) methods. The inset::Latex() code
	ensures that hard-spaces in free-spacing paragraphs get output
	as spaces (rather than "~").

2000-03-09  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/mathed/math_delim.C (draw): draw the empty placeholder
	delims with a onoffdash line.
	(struct math_deco_compare): struct that holds the "functors" used
	for the sort and the binary search in math_deco_table.
	(class init_deco_table): class used for initial sort of the
	math_deco_table.
	(search_deco): use lower_bound to do a binary search in the
	math_deco_table.

2000-03-08  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyxrc.C: a small secret thingie...

	* src/lyxlex.C (printTable): changed to take a ostream as paramter
	and to not flush the stream as often as it used to.

	* src/support/lyxalgo.h: new file
	(sorted): template function used for checking if a sequence is
	sorted or not. Two versions with and without user supplied
	compare. Uses same compare as std::sort.

	* src/lyxlex.C (LyXLex): check if the table is sorted, if not sort
	it and give warning on lyxerr.
	(pushTable): ditto
	(struct compare_tags): struct with function operators used for
	checking if sorted, sorting and lower_bound.
	(search_kw): use lower_bound instead of manually implemented
	binary search.

2000-03-08  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/insetcollapsable.h: fix Clone() declaration.
	* src/insets/insetfoot.h: ditto.

	* src/insets/lyxinset.h: remove an extra comma at the end of enum.

2000-03-08  Juergen Vigna  <jug@sad.it>

	* src/insets/lyxinset.h: added owner call which tells us if
	this inset is inside another inset. Changed also the return-type
	of Editable to an enum so it tells clearer what the return-value is.

	* src/insets/insettext.C (computeTextRows): fixed computing of
	textinsets which split automatically on more rows.

	* src/insets/insetert.[Ch]: changed this to be of BaseType
	InsetCollapsable.

	* src/insets/insetfoot.[Ch]: added footnote inset

	* src/insets/insetcollapsable.[Ch]: added this BaseClass for
	collapsable insets (like footnote, ert, ...)

2000-03-08  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyxdraw.h: remvoe file

	* src/lyxdraw.C: remove file

	* src/insets/insettext.C: added <algorithm>.

2000-03-07  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/mathed/math_panel.C (delim_cb): case MM_OK use string stream
	(matrix_cb): case MM_OK use string stream

	* src/mathed/formula.C (LocalDispatch): case LFUN_SETXY use string
	stream.

	* src/mathed/math_macro.C (draw): use string stream
	(Metrics): use string stream

	* src/paragraph.C (TeXFootnote): for case LyXParagraph::FIG, write
	directly to the ostream.

	* src/vspace.C (asString): use string stream.
	(asString): use string stream
	(asLatexString): use string stream

	* src/lyx_cb.C (UpdateLayoutDocument): use string stream for
	setting Spacing::Other.

	* src/LaTeXFeatures.C (getPackages): use string stream instead of
	sprintf when creating the stretch vale.

	* src/text2.C (alphaCounter): changed to return a string and to
	not use a static variable internally. Also fixed a one-off bug.
	(SetCounter): changed the drawing of the labels to use string
	streams instead of sprintf.

	* src/support/lyxmanip.h: rewrite the newlineanDepth ostream
	manipulator to use a scheme that does not require library support.
	This is also the way it is done in the new GNU libstdc++. Should
	work with DEC cxx now.

2000-03-06  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/mathed/math_inset.h (Write(ostream & os): add a space at the
	end. This fixes a bug.

	* src/mathed (all files concerned with file writing): apply the
	USE_OSTREAM_ONLY changes to mathed too.

	* src/support/DebugStream.h: make the constructor explicit.

	* src/lyxfont.C (latexWriteStartChanges): small bug related to
	count and ostream squashed.

2000-03-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/Makefile.am (libsupport_la_SOURCES): add lyxmanip.h.

	* src/buffer.C (makeLaTeXFile): add a .c_str(), since
	ostringstream uses STL strings, and we might not.

	* src/insets/insetspecialchar.C: add using directive.
	* src/insets/insettext.C: ditto.

2000-03-06  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* lib/layouts/seminar.layout: feeble attempt at a layout for
	seminar.cls, far from completet and could really use some looking
	at from people used to write layout files.

	* src/support/lyxmanip.h (newlineAndDepth): ostream manipulator to
	use instead of the AddNewlineAndDepth funtion in lyx_cb.C. This is
	a lot nicer and works nicely with ostreams.

	* src/mathed/formula.C (draw): a slightly different solution that
	the one posted to the list, but I think this one works too. (font
	size wrong in headers.)

	* src/insets/insettext.C (computeTextRows): some fiddling on
	Jürgens turf, added some comments that he should read.

	* src/lyxrc.C: remove all traces of RC_NOMENUACCELERATORS, never
	used and it gave compiler warnings.
	RC_SHOW_BANNER + "\\show_banner" added, also to reading and
	writing of lyxrc.

	* src/lyx_gui.C (create_forms): do the right thing when
	show_banner is true/false.

	* src/lyx_cb.C (TimerCB): no need to close or do anything if
	show_banner is false.

	* most file writing files: Now use iostreams to do almost all of
	the writing. Also instead of passing string &, we now use
	stringstreams. mathed output is still not adapted to iostreams.
	This change can be turned off by commenting out all the occurences
	of the "#define USE_OSTREAM_ONLY 1" lines.

	* src/WorkArea.C (createPixmap): don't output debug messages.
	(WorkArea): don't output debug messages.

	* lib/lyxrc.example: added a comment about the new variable
	\show_banner

	* development/Code_rules/Rules: Added some more commente about how
	to build class interfaces and on how better encapsulation can be
	achieved.

2000-03-03  Juergen Vigna  <jug@sad.it>

	* src/insets/insetert.C (InsetERT): Now ERT-insets break row
	automatically with the width of the LyX-Window

	* src/insets/insettext.C (computeTextRows): fixed update bug in
	displaying text-insets (scrollvalues where not initialized!)

2000-03-02  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/mathed/math_utils.C (MathedLookupBOP): using only res->id ==
	id in the check of the result from lower_bound is not enough since
	lower_bound can return last too, and then res->id will not be a
	valid construct.

	*  all insets and some code that use them: I have conditionalized
	removed the Latex(string & out, ...) this means that only the
	Latex(ostream &, ...) will be used. This is a work in progress to
	move towards using streams for all output of files.

	* src/text.C (GetColumnNearX): initialize LyXParagraph::size_type
	c to 0.

2000-03-02  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/mathed/math_utils.C (MathedLookupBOP): fix the search
	routine (this fixes bug where greek letters were surrounded by too
	much white space).

	* src/support/filetools.C (findtexfile): change a bit the search
	algorithm, to fix bug introduced in 1.1.4. Note that --format is
	no longer passed to kpsewhich, we may have to change that later.

	* config/lyxinclude.m4 (LYX_PROG_CXX): better version-dependent
	warning options to avoid problems with X header files (from Angus
	Leeming).
	* acinclude.m4: regenerated.

2000-03-02  Juergen Vigna  <jug@sad.it>

	* src/insets/insettext.C (WriteParagraphData): Using the
	par->writeFile() function for writing paragraph-data.
	(Read): Using buffer->parseSingleLyXformat2Token()-function
	for parsing paragraph data!

	* src/buffer.C (readLyXformat2): removed all parse data and using
	the new parseSingleLyXformat2Token()-function.
	(parseSingleLyXformat2Token): added this function to parse (read)
	lyx-file-format (this is called also from text-insets now!)

2000-03-01  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/paragraph.C (BeginningOfMainBody): initialize previous_char
	and temp.

	* src/lyxfunc.C (Dispatch(LFUN_MENUSEARCH)): Do the Search dialog
	directly instead of going through a func. One very bad thing: a
	static LyXFindReplace, but I don't know where to place it.

	* src/lyxfr1.C (GetCurrentSelectionAsString): rewritten to use a
	string instead of char[]. Also changed to static.
	(GetSelectionOrWordAtCursor): changed to static inline
	(SetSelectionOverLenChars): ditto.

	* src/lyxfr0.[Ch] src/lyxfr1.[Ch]: rewrite to get rid of
	current_view and global variables. both classes has changed names
	and LyXFindReplace is not inherited from SearchForm.

	* src/lyx_gui_misc.C (CloseAllBufferRelatedPopups): remove the
	fl_form_search form.

	* src/lyx_gui.C (create_forms): removed the fl_form_search form.

2000-03-01  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/bind/*.bind: make sure 'buffer-previous' function is not
	bound (from Kayvan).

	* src/insets/Makefile.am (libinsets_la_SOURCES): add BoundingBox.h.

	* lib/layouts/stdletter.inc: fix line spacing in Send_To_Address.

2000-03-01  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* some things that I should comment but the local pub says head to
	swirly...

	* comment out all code that belongs to the Roff code for Ascii
	export of tables. (this is unused)

	* src/LyXView.C: use correct type for global variable
	current_layout. (LyXTextClass::size_type)

	* some code to get the new insetgraphics closer to working I'd be
	grateful for any help.

	* src/BufferView2.C (insertInset): use the return type of
	NumberOfLayout properly. (also changes in other files)

	* src/insets/insetspecialchar.[Ch]: add the PROTECTED SEPARATOR to
	this as a test. I want to know what breaks because of this.

	* src/BufferView.[Ch] (tripleClick): name change from trippleClick.

2000-02-29  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* lib/layouts/stdlists.inc: changed the lyxlist latex definition
	to use a \makebox in the label, this allows proper justification
	with out using protected spaces or multiple hfills. Now it is
	"label" for left justified, "\hfill label\hfill" for center, and
	"\hfill label" for right justified. UserGuide.lyx sec. 3.3.6.5
	should be changed accordingly.

2000-02-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxtext.h: change SetLayout() to take a
	LyXTextClass::size_type instead of a char (when there is more than
	127 layouts in a class); also change type of copylayouttype.
	* src/text2.C (SetLayout): ditto.
	* src/LyXView.C (updateLayoutChoice): ditto.

	* src/LaTeX.C (scanLogFile): errors where the line number was not
	given just after the '!'-line were ignored (from Dekel Tsur).

	* lib/lyxrc.example: fix description of \date_insert_format

	* lib/layouts/llncs.layout: new layout, contributed by Martin
	Vermeer.

2000-02-25  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* config/lyxinclude.m4 (LYX_PROG_CXX): remove case support for gcc
	2.7.* and add case support for gcc 2.96*. Gcc 2.96 only exists in
	cvs at gcc.gnu.org (currently it fails with ICE on insetbib.C,
	insetindex.C, insetloa.C, insettext.C, filetools.C, BufferView.C,
	BufferView2.C, LyXView.C, buffer.C, lyx_cb.C, lyxfunc.C,
	paragraph.C, text.C, text2.C)

2000-02-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/insettext.C (LocalDispatch): remove extra break
	statement.

	* src/insets/insetert.[Ch] (Clone): change return value to Inset*
	* src/insets/insettext.[Ch] (Clone): change return value to Inset*

	* src/mathed/formulamacro.[Ch] (draw): add missing const qualifier
	* src/insets/insettext.[Ch] (GetCursorPos): ditto

	* src/insets/insetbib.h: move InsetBibkey::Holder and
	InsetCitation::Holder in public space.

2000-02-25  Lars Gullik Bjønnes <larsbj@lyx.org>

	* src/insets/insettext.h: small change to get the new files from
	Juergen to compile (use "string", not "class string").

	* src/insets/insettext.[Ch], src/insets/insertert.[Ch]: use string
	const & as parameter to LocalDispatch, use LyXFont const & as
	paramter to some other func. This also had impacto on lyxinsets.h
	and the two mathed insets.

2000-02-24  Juergen Vigna  <jug@sad.it>

	* src/buffer.C:
	* src/commandtags.h:
	* src/LyXAction.C:
	* src/lyxfunc.C: added code for LFUN_INSET_ERT and LFUN_INSET_TEXT

	* src/BufferView.h
	* src/BufferView.C
	* src/BufferView2.C: added/updated code for various inset-functions

	* src/insets/insetert.[Ch]: added implementation of InsetERT

	* src/insets/insettext.[Ch]: added implementation of InsetText

	* src/insets/inset.C (Edit): added "unsigned int button" parameter
	(draw): added preliminary code for inset scrolling not finshed yet

	* src/insets/inset.C (LocalDispatch): changed arg parameter to string
	as it is in lyxfunc.C now

	* src/insets/lyxinset.h: Added functions for text-insets

2000-02-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyx_cb.C src/UpdateInset.[Ch]: move the updateinsetlist into
	BufferView and reimplement the list as a queue put inside its own
	class.

	* src/bufferlist.[Ch] (updateInset): remove func, not needed.

	* several files: use the new interface to the "updateinsetlist"

	* src/WorkArea.C (work_area_handler): call BufferView::doubleClick
	on doubleclick.
	(work_area_handler): call BufferView::trippleClick on trippleclick.

	* src/BufferView.C (doubleClick): new function, selects word on
	doubleclick.
	(trippleClick): new function, selects line on trippleclick.

2000-02-22  Allan Rae  <rae@lyx.org>

	* lib/bind/xemacs.bind: buffer-previous not supported

2000-02-21  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/insettoc.[Ch] (LinuxDoc, DocBook): mark the methods
	as const.

2000-02-20  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/bufferlist.C: get rid of current_view from this file

	* src/spellchecker.C: get rid of current_view from this file

	* src/vspace.C: get rid of current_view from this file
	(inPixels): added BufferView parameter for this func
	(asLatexCommand): added a BufferParams for this func

	* src/text.C src/text2.C: get rid of current_view from these
	files.

	* src/lyxfont.C (getFontDirection): move this function here from
	text.C

	* src/bufferparams.C (getDocumentDirection): move this function
	here from text.C

	* src/paragraph.C (getParDirection): move this function here from
	text.C
	(getLetterDirection): ditto

2000-02-18  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* WorkArea, Painter, LyXScreen: Fixed the crash that occurred on
	resize due to wrong pixmap beeing used. Also took the opurtunity
	to make the LyXScreen stateless on regard to WorkArea and some
	general cleanup in the same files.

2000-02-17  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/Makefile.am: add missing direction.h

	* src/PainterBase.h: made the width functions const.

	* lib/kbd/iso8859-1.cdef: fix a couple of entries and define some
	missing ones.

	* src/insets/insetcommand.C (draw): draw Editable as buttons.

	* src/insets/insetlatexaccent.C (draw): make the accents draw
	better, at present this will only work well with iso8859-1.

	* several files: remove the old drawing code, now we use the new
	painter only.

	* several files: remove support for mono_video, reverse_video and
	fast selection.

2000-02-17  Juergen Vigna  <jug@sad.it>

	* src/mathed/math_cursor.[Ch] (SelGetArea): Changed form int * to
	int ** as we have to return the pointer, otherwise we have only
	NULL pointers in the returning function.

2000-02-16  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/LaTeX.C (operator()): quote file name when running latex.

2000-02-15  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/toolbar.C (set): use fl_set_object_helper for the tooltop
	(bubble tip), this removes our special handling of this.

	* Remove all code that is unused now that we have the new
	workarea. (Code that are not active when NEW_WA is defined.)

	* Make the uses of XSync not conditionalized on define USE_XSYNC.

2000-02-15  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxfunc.C (Dispatch): fix LFUN_LAYOUT when giving a
	nonexisting layout; correctly redirect obsoleted layouts.

	* lib/lyxrc.example: document \view_dvi_paper_option

	* src/lyxrc.[Ch]: add support for the \view_dvi_paper_option
	variable.

	* src/lyx_cb.C (RunScript): handle $$FName for command names.
	(PreviewDVI): handle the view_dvi_paper_option variable.
	[Both from Roland Krause]

2000-02-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/Painter.C (text(int,int,char,LyXFont)): call text(int, int,
	char const *, int, LyXFont)
	(text(int, int, string, LyXFont)): ditto

	* src/text.C (InsertCharInTable): attempt to fix the double-space
	feature in tables too.
	(BackspaceInTable): ditto.
	(GetVisibleRow): make bottom pagebreak line be a onoff line.

2000-02-11  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/text2.C (owner): only complain if owner_ is set and bv != 0

	* src/BufferView.C (resizeCurrentBuffer): set the owner of the
	newly found text in textcache to this.
	(buffer): set the owner of the text put into the textcache to 0

	* src/insets/figinset.C (draw): fixed the drawing of figures with
	the new Painter.

	* src/text.C src/mathed/math_cursor.C: nailed and fixed the
	drawing of mathframe, hfills, protected space, table lines. I have
	now no outstanding drawing problems with the new Painter code.

2000-02-11  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/PainterBase.C (ellipse, circle): do not specify the default
	arguments.

	* src/LColor.h: add using directive.

	* src/Painter.[Ch]: change return type of methods from Painter& to
	PainterBase&. Add a using directive.

	* src/WorkArea.C: wrap xforms callbacks in C functions
	C_WorkArea_xxx.

	* lib/layouts/foils.layout: font fix and simplifications from Carl
	Ollivier-Gooch.

2000-02-10  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* a lot of files: The Painter, LColor and WorkArea from the old
	devel branch has been ported to lyx-devel. Some new files and a
	lot of #ifdeffed code. The new workarea is enabled by default, but
	if you want to test the new Painter and LColor you have to compile
	with USE_PAINTER defined (do this in config.h f.ex.) There are
	still some rought edges, and I'd like some help to clear those
	out. It looks stable (loads and displays the Userguide very well).


2000-02-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/buffer.C (pop_tag): revert to the previous implementation
	(use a global variable for both loops).

	* lib/kbd/iso8859-1.cdef: fix definition for \"{e}.

	* src/lyxrc.C (LyXRC): change slightly default date format.

	* src/paragraph.C (TeXOnePar): Generate a correct latex file when
	there is an English text with a footnote that starts with a Hebrew
	paragraph, or vice versa.
	(TeXFootnote): ditto.

	* src/text.C (LeftMargin): allow for negative values for
	parindent. Thanks to Philip Lehman <lehman@gmx.net> for testing
	this out.

	* src/lyx_gui.C (create_forms): add iso88595 as a possible choice
	for input encoding (cyrillic)

2000-02-08  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyx_gui.C (create_forms): make combo box taller (from Dekel
	Tsur).

	* src/toolbar.C (set): ditto
	* src/insets/insetbib.C (create_form_citation_form): ditto

	* lib/CREDITS: added Dekel Tsur.

	* lib/kbd/hebrew.kmap, lib/kbd/null.kmap,
	lib/layouts/heb-article.layout, lib/layouts/heb-letter.layout: new
	hebrew supports files from Dekel Tsur.

	* lib/kbd/iso8859-8.cdef: new file, from Tzafrir Cohen
	<tzafrir@technion.ac.il>

	* src/lyxrc.C: put \date_insert_format at the right place.

	* src/buffer.C (makeLaTeXFile): fix the handling of
	BufferParams::sides when writing out latex files.

	* src/BufferView2.C: add a "using" directive.

	* src/support/lyxsum.C (sum): when we use lyxstring,
	ostringstream::str needs an additional .c_str().

2000-02-07  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/filetools.C (ChangeExtension): patch from Etienne
	applied.

	* src/TextCache.C (show): remove const_cast and make second
	parameter non-const LyXText *.

	* src/TextCache.h: use non const LyXText in show.

	* src/paragraph.C (SimpleTeXSpecialChars): patch to make urls work
	with hebrew.

2000-02-04  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxsum.C: rework to be more flexible.

	* several places: don't check if a pointer is 0 if you are going
	to delete it.

	* src/text.C: remove some dead code.

	* src/insets/figinset.C: remove some dead code

	* src/buffer.C: move the BufferView funcs to BufferView2.C
	remove all support for insetlatexdel
	remove support for oldpapersize stuff
	made some member funcs const

	* src/kbmap.C: use a std::list to store the bindings in.

	* src/BufferView2.C: new file

	* src/kbsequence.[Ch]: new files

	* src/LyXAction.C + others: remove all trace of buffer-previous

	* src/Bullet.[Ch]: moved ITEMIZE_DEFAULTS inside Bullet.C so that we
	only have one copy in the binary of this table.

	* hebrew patch: moved some functions from LyXText to more
	appropriate places. (LyXParagraph, BufferParams, LyXFont)

	* several files: remove support for XForms older than 0.88
	whitespace changes.
	remove some #if 0 #endif code

	* src/TextCache.[Ch]: new file. Holds the textcache.

	* src/BufferView.C: changes to use the new TextCache interface.
	(waitForX): remove the now unused code.

	* src/BackStack.h: remove some commented code

	* lib/bind/emacs.bind: remove binding for buffer-previous

2000-02-03  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* applied the hebrew patch.

	* src/lyxrow.h: make sure that all Row variables are initialized.

	* src/text2.C (TextHandleUndo): comment out a delete, this might
	introduce a memory leak, but should also help us to not try to
	read freed memory. We need to look at this one.

	* src/paragraph.C (SimpleDocBookOneTablePar): initialize column to 0
	(LyXParagraph): initalize footnotekind.

	* src/lyxrc.C (output): added case RC_DATE_INSERT_FORMAT. Jug
	forgot this when applying the patch. Please heed the warnings.

	* src/BufferView.C (buffer): a fix for the buffer-reload problem
	(aka. reformat problem)

	* src/bufferlist.C (exists): made const, and use const_iterator
	(isLoaded): new func.
	(release): use std::find to find the correct buffer.

	* src/bufferlist.h: made getState a const func.
	made empty a const func.
	made exists a const func.
	new func: isLoaded

2000-02-01  Juergen Vigna  <jug@sad.it>

	* src/lyxfunc.C lyxrc.C: changed from insert-date to date-insert

	* po/it.po: updated a bit the italian po file and also changed the
	'file nuovo' for newfile to 'filenuovo' without a space, this did
	annoy me a lot :)

	* src/lyxrc.C (LyXRC): added support for a default insert_date_format
	for the new insert_date command.

	* src/lyxfunc.C (Dispatch): added support for a insert_date function
	from jdblair, to insert a date into the current text conforming to
	a strftime format (for now only considering the locale-set and not
	the document-language).

2000-01-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxfont.C (textWidth): hopefully better fix for the Array
	Bounds Read error seen by purify. The problem was that islower is
	a macros which takes an unsigned char and uses it as an index for
	in array of characters properties (and is thus subject to the
	above error).
	(drawText): ditto.

	* src/lyx_cb.C (UpdateLayoutDocument): use a switch to set
	correctly the paper sides radio buttons.
	(UpdateDocumentButtons): ditto.

2000-01-27  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/kbmap.C (getsym + others): change to return unsigned int,
	returning a long can give problems on 64 bit systems. (I assume
	that int is 32bit on 64bit systems)

2000-01-27  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxfunc.C (processKeyEvent): fix a the buffer returned by
	LyXLookupString to be zero-terminated. Really fixes problems seen
	by purify, I think.

2000-01-27  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyxfunc.C (processKeyEvent): "fix" so that we never try to
	write a (char*)0 to the lyxerr stream.

	* src/lastfiles.C: move algorithm before the using statemets.

2000-01-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lastfiles.C: move using directives in global scope (egcs 1.x
	complains otherwise).
	* src/table.C: ditto

	* lib/reLyX/reLyX.in: use variable @LYX_DIR@ as built-in data
	directory.

	* lib/reLyX/configure.in (LYX_DIR): re-introduce this variable
	that I removed earlier... It is really needed.

	* lib/examples/multicol.lyx: new file, split from Extended.lyx.

2000-01-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* INSTALL: update xforms home page URL.

	* lib/configure.m4: fix a bug with unreadable layout files.

	* src/table.C (calculate_width_of_column): add "using std::max"
	directive.

2000-01-25  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* several files: marked several lines with "DEL LINE", this is
	lines that can be deleted without changing anything.
	if (<ptr>) // DEL LINE  /* this line is _never_ needed. Delete
	                           checks this anyway */
	        delete <ptr>

	* src/insets/insetlatexaccent.C: Changed some debugs to Debug::KEY

	* src/DepTable.C (update): add a "+" at the end when the checksum
	is different. (debugging string only)

	* src/paragraph.C (ReturnNextInsetPointer): fix bug that caused
	the next inset to not be displayed. This should also fix the list
	of labels in the "Insert Crossreference" dialog.

2000-01-24  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/LSubstring.C (LSubstring): set pos to string::npos
	when regex was not found.

	* src/support/lstrings.C (lowercase): use handcoded transform always.
	(uppercase): ditto

	* src/text.C (Delete): fixed the crash. cursor.par->prev and
	old_cursor.par->prev could be 0.

	* several files: changed post inc/dec to pre inc/dec

	* src/lastfiles.C (writeFile): use ostream_iterator and copy to
	write the lastfiles to file.

	* src/BufferView.C (buffer): only show TextCache info when debugging
	(buffer): ditto
	(resizeCurrentBuffer): ditto
	(workAreaExpose): ditto

	* lib/kbd/iso8859-7.cdef: changed to new quoting scheme

	* lib/kbd/iso8859-2.cdef: changed to new quoting scheme

	* src/insets/insetlatexaccent.C (Draw): make the display of UMLAUT
	a bit better by removing the special case for \i and \j.

2000-01-24  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyx_main.C (easyParse): remove test for bad comand line
	options, since this broke all xforms-related parsing.

	* src/kbmap.C (getsym): set return type to unsigned long, as
	declared in header. On an alpha, long is _not_ the same as int.

	* src/support/LOstream.h: add a "using std::flush;"

	* src/insets/figinset.C: ditto.

2000-01-21  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/bufferlist.C (write): use blinding fast file copy instead of
	"a char at a time", now we are doing it the C++ way.

	* src/insets/figinset.C: get rid of struct pidwaitpit, use a
	std::list<int> instead.
	(addpidwait): reflect move to std::list<int>
	(sigchldchecker): ditto

	* src/bmtable.c (fl_set_bmtable_file): have arguments in the X r5
	version also.

	* src/paragraph.C (FirstPhysicalPar): remove assert and comment
	that obviously was wrong...

	* src/lyxfont.C (textWidth): have c as char c[2] instead of char
	c, this avoids warnings with purify and islower.

	* src/insets/figinset.C: rename struct queue to struct
	queue_element and rewrite to use a std::queue. gsqueue is now a
	std::queue<queue_element>
	(runqueue): reflect move to std::queue
	(addwait): ditto

	* src/support/lstrings.h (tostr): specialize for bool, otherwise
	we would get "1" "0" instead of "true" "false. Also make the tostr
	functions inline.

2000-01-21  Juergen Vigna  <jug@sad.it>

	* src/buffer.C (writeFileAscii): Disabled code for special groff
	handling of tabulars till I fix this in table.C

2000-01-21  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/mkdir.C (mkdir): change second argument of mkdir to
	unsigned long int.
	* src/support/lyxlib.h: ditto.

2000-01-20  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/insets/insetlatexaccent.C (Draw): make accents on top of 'i'
	and 'j' look better. This might fix the "macron" bug that has been
	observed.

	* src/support/lstrings.[Ch] (tostr): reimplement all the tostr
	functions as one template function. Delete the old versions.

	* src/support/lyxsum.C: move using std::ifstream inside
	MODERN_STL_STREAMS

	* src/support/Makefile.am (libsupport_la_SOURCES): added mkdir.C
	and putenv.C

	* src/mathed/formulamacro.C: delete #include "bufferlist.h" never used

	* src/mathed/formula.C: delete #include "bufferlist.h" never used

	* src/insets/figinset.C (InitFigures): use new instead of malloc
	to allocate memory for figures and bitmaps.
	(DoneFigures): use delete[] instead of free to deallocate memory
	for figures and bitmaps.
	(runqueue): use new to allocate
	(getfigdata): use new/delete[] instead of malloc/free
	(RegisterFigure): ditto

	* some files: moved some declarations closer to first use, small
	whitespace changes use preincrement instead of postincrement where
	it does not make a difference.

	* src/kbmap.[Ch]: delete code according to define NO_HASH, it is a
	step on the way to use stl::containers for key maps.

	* src/bufferlist.h: add a typedef for const_iterator and const
	versions of begin and end.

	* src/bufferlist.[Ch]: change name of member variable _state to
	state_. (avoid reserved names)
	(makePup): removed
	(getFileNames): returns the filenames of the buffers in a vector.

	* configure.in (ALL_LINGUAS): added ro

	* src/support/putenv.C: new file

	* src/support/mkdir.C: new file

2000-01-20  Allan Rae <rae@lyx.org>

	* lib/layouts/IEEEtran.layout: Added several theorem environments

	* lib/templates/IEEEtran.lyx: Example theorem environments and a
	couple of minor additions.

	* lib/doc/LaTeXConfig.lyx.in:  Use URL insets for ftp sites
	(except for those in footnotes of course)

2000-01-19  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyxlookup.C (CloseLyXLookup): set xic=0; after destruction.

	* src/mathed/math_utils.C (MathedLookupBOP): rewrite to use
	std::sort and std::lower_bound instead of qsort and handwritten
	binarysearch.
	(struct compara): struct that holds the functors used by std::sort
	and std::lower_bound in MathedLookupBOP.

2000-01-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/LAssert.h: do not do partial specialization. We do
	not really need it.

	* src/support/lyxlib.h: note that lyx::getUserName() and
	lyx::date() are not in use right now. Should these be suppressed?

	* src/buffer.C (makeLaTeXFile): we do not need the user name here.
	(makeLinuxDocFile): do not put date and user name in linuxdoc
	headers.

	* src/support/lyxlib.h (kill): change first argument to long int,
	since that's what solaris uses.

	* src/support/kill.C (kill): fix declaration to match prototype.

	* config/lyxinclude.m4 (LYX_CXX_NAMESPACES): fix the macro to
	actually check whether namespaces are supported. This is not what
	it used to do.

	* src/support/lyxsum.C: add a using directive.

2000-01-17  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/kill.C: if we have namespace support we don't have
	to include lyxlib.h.

	* src/support/lyxlib.h: use namespace lyx if supported.

2000-01-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/date.C: new file

	* src/support/chdir.C: new file

	* src/support/getUserName.C: new file

	* src/support/getcwd.C: new file

	* src/support/abort.C: new file

	* src/support/kill.C: new file

	* src/support/lyxlib.h: moved all the functions in this file
	insede struct lyx. Added also kill and abort to this struct. This
	is a way to avoid the "kill is not defined in <csignal>", we make
	C++ wrappers for functions that are not ANSI C or ANSI C++.

	* src/support/lyxsum.C (sum): use #ifdef MODERN_STL_STREAMS
	instead of #if __GLIBCPP__. Since lyxsum is now put inside struct
	lyx it has been renamed to sum.

2000-01-14  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/text.C: add using directives for std::min and std::max.

2000-01-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/texrow.C (getIdFromRow): actually return something useful in
	id and pos. Hopefully fixes the bug with positionning of errorbox
	insets.

	* src/lyx_main.C (easyParse): output an error and exit if an
	incorrect command line option has been given.

	* src/spellchecker.C (ispell_check_word): document a memory leak.

	* src/bufferlist.C (write): fix mismatched allocation/deletion,
	where a "struct utimbuf" is allocated with "new" and deleted with
	"delete[]".

2000-01-13  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/text2.C (CutSelection): don't delete double spaces.
	(PasteSelection): ditto
	(CopySelection): ditto

	* src/text.C (Backspace): don't delete double spaces.

	* src/lyxlex.C (next): fix a bug that were only present with
	conformant std::istream::get to read comment lines, use
	std::istream::getline instead. This seems to fix the problem.

2000-01-12  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/text2.C (DeleteEmptyParagraphMechanism): fix for the "not
	allowed to insert space before space" editing problem. Please read
	commends at the beginning of the function. Comments about usage
	are very welcome.

	* src/text.C (InsertChar): fix for the "not allowed to insert
	space before space" editing problem.

	* src/text2.C (DeleteEmptyParagraphMechanism): when
	IsEmptyTableRow can only return false this last "else if" will
	always be a no-op. Commented out.

	* src/text.C (RedoParagraph): As far as I can understand tmp
	cursor is not really needed.

	* src/lyxtext.[Ch] (IsEmptyTableCell): commented out. As used at
	present it could only return false anyway.
	(several functions): Did something not so smart...added a const
	specifier on a lot of methods.

	* src/paragraph.C (BreakParagraph): removed the tmp->text.reserve
	and add a tmp->text.resize. The LyXParagraph constructor does the
	resize for us.
	(BreakParagraphConservative): ditto

	* src/support/path.h (Path): add a define so that the wrong usage
	"Path("/tmp") will be flagged as a compilation error:
	"`unnamed_Path' undeclared (first use this function)"

2000-01-12  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* config/lyxinclude.m4 (LYX_FUNC_PUTENV_ARGTYPE): fix the macro,
	which was bogus for several reasons.

	* src/LaTeX.C (scanAux): fix the regular expression used to scan
	.aux files.
	(runBibTeX): ditto.

	* autogen.sh: do not use "type -path" (what's that anyway?).

	* src/support/filetools.C (findtexfile): remove extraneous space
	which caused a kpsewhich warning (at least with kpathsea version
	3.0).

2000-01-11  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/mathed/Makefile.am (noinst_LTLIBRARIES): use .la

	* src/insets/Makefile.am (noinst_LTLIBRARIES): use .la

	* src/Makefile.am (lyx_DEPENDENCIES): switch back to .la libs

2000-01-11  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/paragraph.C (BreakParagraph): do not reserve space on text
	if we don't need to (otherwise, if pos_end < pos, we end up
	reserving huge amounts of memory due to bad unsigned karma).
	(BreakParagraphConservative): ditto, although I have not seen
	evidence the bug can happen here.

	* src/lyxparagraph.h: add a using std::list.

2000-01-11  Juergen Vigna  <jug@sad.it>

	* src/menus.C (MenuDocu): output an Alert if the documentation-file
	could not be found.

2000-01-11  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/vc-backend.C (doVCCommand): change to be static and take one
	more parameter: the path to chdir too be fore executing the command.
	(retrive): new function equiv to "co -r"

	* src/bufferlist.C (loadLyXFile): implement the missing parts if
	file_not_found_hook is true.

	* src/lyxvc.C (file_not_found_hook): implement file_not_found_hook.

	* src/support/filetools.C (IsFileWriteable): use FileInfo to check
	if a file is readwrite,readonly...anything else.

2000-01-10  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyx_cb.C (MakeLaTeXOutput): name change from MakeDVIOutput
	(CreatePostscript): name change from MenuRunDVIPS (or something)
	(PreviewPostscript): name change from MenuPreviewPS
	(PreviewDVI): name change from MenuPreviewDVI

	* lib/lyxrc.example: added \pdflatex_command, \pdf_mode,
	\view_pdf_command., \pdf_to_ps_command

	* lib/configure.m4: added search for PDF viewer, and search for
	PDF to PS converter.
	(lyxrc.defaults output): add \pdflatex_command,
	\view_pdf_command and \pdf_to_ps_command.

	* src/lyx_cb.C (MenuPreviewDVI): renamed from MenuPreview.

	* src/bufferlist.C (write): we don't use blocksize for anything so
	I removed it.

2000-01-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/block.h: disable operator T* (), since it causes
	problems with both compilers I tried. See comments in the file.

	* lib/reLyX/configure.in: do not define LYX_DIR. support flag
	--with-lyxname.

	* lib/reLyX/reLyX.in: change LYX_DIR to pkgdatadir; change env.
	variable LYX_DIR_10x to LYX_DIR_11x.

	* src/Makefile.am: replace variable LYX_DIR with pkgdatadir.

	* INSTALL: document --with-lyxname.
	* NEWS: ditto.

	* configure.in: new configure flag --with-lyxname which allows to
	choose the name under which lyx is installed. Default is "lyx", of
	course. It used to be possible to do this with --program-suffix,
	but the later has in fact a different meaning for autoconf.

	* src/support/lstrings.h (lstrchr): reformat a bit.

	* src/lyxlex.h: include LIstream.h, for Sun CC this time.
	* src/mathed/math_defs.h: ditto.

2000-01-09  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyxrc.[Ch]: New tag and variable "\make_backup". Defaults to
	true, decides if we create a backup file or not when saving. New
	tag and variable \pdf_mode, defaults to false. New tag and
	variable \pdflatex_command, defaults to pdflatex. New tag and
	variable \view_pdf_command, defaults to xpdf. New tag and variable
	\pdf_to_ps_command, defaults to pdf2ps.

2000-01-08  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/bufferlist.C (close): don't call insetUnlock if the buffer
	does not have a BufferView.
	(unlockInset): ditto + don't access the_locking_inset if the
	buffer does not have a BufferView.

	* src/LyXView.C (KeyPressMask_raw_callback): add a XSync in
	certain circumstances so that we don't continue a keyboard
	operation long after the key was released. Try f.ex. to load a
	large document, press PageDown for some seconds and then release
	it. Before this change the document would contine to scroll for
	some time, with this change it stops imidiatly.

	* src/support/block.h: don't allocate more space than needed. As
	long as we don't try to write to the arr[x] in a array_type arr[x]
	it is perfectly ok. (if you write to it you might segfault).
	added operator value_type*() so that is possible to pass the array
	to functions expecting a C-pointer.

	* lib/Makefile.am (dist-hook): don't fail completely if unable to
	cvs.

	* intl/*: updated to gettext 0.10.35, tried to add our own
	required modifications. Please verify.

	* po/*: updated to gettext 0.10.35, tried to add our own required
	modifications. Please verify.

	* src/support/lstrings.C (tostr): go at fixing the problem with
	cxx and stringstream. When stringstream is used return
	oss.str().c_str() so that problems with lyxstring and basic_string
	are avoided. Note that the best solution would be for cxx to use
	basic_string all the way, but it is not conformant yet. (it seems)

	* src/lyx_cb.C + other files: moved several global functions to
	class BufferView, some have been moved to BufferView.[Ch] others
	are still located in lyx_cb.C. Code changes because of this. (part
	of "get rid of current_view project".)

	* src/buffer.C + other files: moved several Buffer functions to
	class BufferView, the functions are still present in buffer.C.
	Code changes because of this.

	* config/lcmessage.m4: updated to most recent. used when creating
	acinclude.m4.

	* config/progtest.m4: updated to most recent. used when creating
	acinclude.m4.

	* config/gettext.m4: updated to most recent. applied patch for
	tmplinguas.

	* config/gettext.m4.patch: new file that shows what changes we
	have done to the local copy of gettext.m4.

	* config/libtool.m4: new file, used in creation of acinclude.m4

	* config/lyxinclude.m4: new file, this is the lyx created m4
	macros, used in making acinclude.m4.

	* autogen.sh: GNU m4 discovered as a separate task not as part of
	the lib/configure creation.
	Generate acinlucde from files in config. Actually cat
	lyxinclude.m4, libtool.m4 and gettext.m4 together. This makes it
	easier to upgrade .m4 files that really are external.

	* src/Spacing.h: moved using std::istringstream to right after
	<sstream>. This should fix the problem seen with some compilers.

2000-01-06  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyx_cb.C: began some work to remove the dependency a lot of
	functions have on BufferView::text, even if not really needed.
	(GetCurrentTextClass): removed this func, it only hid the
	current_view.

	* src/Makefile.am (lyx_DEPENDENCIES): use support/libsupport.la I
	forgot this in last commit.

	* src/Bullet.C (bulletEntry): use static char const *[] for the
	tables, becuase of this the return arg had to change to string.
	(bulletSize): ditto
	(~Bullet): removed unneeded destructor

	* src/BufferView.C (beforeChange): moved from lyx_cb.C
	(insetSleep): moved from Buffer
	(insetWakeup): moved from Buffer
	(insetUnlock): moved from Buffer

	* buffer.[Ch], BufferView.[Ch] + others: moved the_locking_inset
	from Buffer to BufferView.

	* acinclude.m4: include libtool.m4 from libtool 1.3.4.

	* config/ltmain.sh: updated to version 1.3.4 of libtool

	* config/ltconfig: updated to version 1.3.4 of libtool

2000-01-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>


	* src/buffer.C (pop_tag): fix a dubious for() loop initialization.
	Did I get that right?

	* src/lyxlex.h: add a "using" directive or two.
	* src/Spacing.h: ditto.
	* src/insets/figinset.C: ditto.
	* src/support/filetools.C: ditto.
	* src/support/lstrings.C: ditto.
	* src/BufferView.C: ditto.
	* src/bufferlist.C: ditto.
	* src/lyx_cb.C: ditto.
	* src/lyxlex.C: ditto.

	* NEWS: add some changes for 1.1.4.

2000-01-06  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/BufferView.C: first go at a TextCache to speed up switching
	between documents.

2000-01-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/examples/ItemizeBullets.lyx: update from Tino Meinen.
	* lib/examples/nl_voorbeeld_ruw.lyx: ditto.
	* lib/examples/nl_voorbeeld_verlyxt.lyx: ditto.
	* lib/examples/nl_opsommingstekens.lyx: new translation from Tino
	Meinen.

	* src/mathed/math_defs.h (MathedRowSt): make sure that all
	members of the struct are correctly initialized to 0 (detected by
	purify)
	* src/lyxrc.C (LyXRC): ditto for print_adapt_output.
	* src/insets/figinset.C (InsetFig): ditto for pswid and pshgh.

	* src/insets/figinset.C (sigchldchecker): use "delete" to free a
	pidwait, since it was allocated with "new". This was potentially
	very bad. Thanks to Michael Schmitt for running purify for us.


2000-01-04  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyx_gui_misc.C: add a 'using std::make_pair;' statement.

	* src/lyx_gui_misc.h: add a 'using std::pair;' statement.

1999-12-30  Allan Rae  <rae@lyx.org>

	* lib/templates/IEEEtran.lyx: minor change

	* src/lyxvc.C (registrer, checkIn), src/lyx_cb.C (MenuInsertLabel),
	src/mathed/formula.C (LocalDispatch): askForText changes

	* src/lyx_gui_misc.[Ch] (askForText): now returns a bool also so we
	know when a user has cancelled input. Fixes annoying problems with
	inserting labels and version control.

1999-12-29  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lstrings.C (tostr): rewritten to use strstream and
	stringstream

1999-12-28  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/filetools.C (IsFileWriteable): use fstream to check
	(IsDirWriteable): use fileinfo to check

	* src/support/filetools.h (FilePtr): whole class deleted

	* src/insets/figinset.C (GetPSSizes): rewritten to use ifstream.

	* src/lyxparagraph.h (readSimpleWholeFile): make arg istream

	* src/lyx_cb.C (InsertAsciiFile): use ifstream instead of FilePtr

	* src/bufferlist.C (write): use ifstream and ofstream instead of
	FILE*

	* src/Spacing.h: use istrstream instead of sscanf

	* src/mathed/math_defs.h: change first arg to istream from FILE*

	* src/buffer.C (insertLyXFile): use ifstream instead of FilePtr

	* src/mathed/math_parser.C: have yyis to be an istream
	(LexGetArg): use istream (yyis)
	(yylex): ditto
	(mathed_parse): ditto
	(mathed_parser_file): first arg istream instead of FILE*, set yyis

	* src/mathed/formula.C (Read): rewritten to use istream

	* src/mathed/formulamacro.C (Read): rewritten to use istream

	* src/lyxlex.h (~LyXLex): deleted desturctor
	(getStream): new function, returns an istream
	(getFile): deleted funtion
	(IsOK): return is.good();

	* src/lyxlex.C (LyXLex): delete file and owns_file
	(setFile): open an filebuf and assign that to a istream instead of
	using FILE*
	(setStream): new function, takes an istream as arg.
	(setFile): deleted function
	(EatLine): rewritten us use istream instead of FILE*
	(next): ditto
	(nextToken): ditto

	* src/table.C (LyXTable): use istream instead of FILE*
	(Read): rewritten to take an istream instead of FILE*

1999-12-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/buffer.C (Dispatch): remove an extraneous break statement.

	* src/support/filetools.C (QuoteName): change to do simple
	'quoting'. More work is necessary. Also changed to do nothing
	under emx (needs fix too).
	(Putenv): Cast the argument of putenv() with PUTENV_TYPE_ARG.

	* acinclude.m4 (STL_STRING_FWD_H_LOCATION): add the comment for
	config.h.in to the AC_DEFINE_UNQUOTED() call.
	(LYX_FUNC_PUTENV_ARGTYPE): new macro. Checks whether putenv()
	needs char * as argument (because Solaris 7 declares it like
	that).

	* acconfig.h: remove placeholder for STL_STRING_FWD_H_LOCATION;
	remove definition of BZERO.

1999-12-24  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/LRegex.C: include <regex.h> if HAVE_REGEX_H is
	defined, "lyxregex.h" if not.

	* src/support/Makefile.am (noinst_LTLIBRARIES): changed from
	pkglib_ to noinst_
	(REGEX): new variable that is set to regex.c lyxregex.h when
	AM_CONDITIONAL USE_REGEX is set.
	(libsupport_la_SOURCES): add $(REGEX)

	* src/mathed/Makefile.am (noinst_LTLIBRARIES): changed from
	pkglib_ to noinst_

	* src/insets/Makefile.am (noinst_LTLIBRARIES): changed from
	pkglib_ to noinst_

	* configure.in: add call to LYX_REGEX

	* acinclude.m4 (LYX_REGEX): checks if we need to use the included
	regex or not. Uses a a AM_CONDITIONAL to decide what to compile.

1999-12-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/bind/fi_menus.bind: new file, from
	pauli.virtanen@saunalahti.fi.

	* src/buffer.C (getBibkeyList): pass the parameter delim to
	InsetInclude::getKeys and InsetBibtex::getKeys.

	* src/insets/insetinclude.[Ch] (getKeys): add parameter delim, which
	is passed to Buffer::getBibkeyList

	* src/insets/insetbib.[Ch] (getKeys): add parameter delim, and use it
	instead of the hardcoded comma.

	* src/insets/insetbib.C (getKeys): make sure that there are not
	leading blanks in bibtex keys. Normal latex does not care, but
	harvard.sty seems to dislike blanks at the beginning of citation
	keys. In particular, the retturn value of the function is

	* INSTALL: make it clear that libstdc++ is needed and that gcc
	2.7.x probably does not work.

	* src/support/filetools.C (findtexfile): make debug message go to
	the LATEX channel
	* src/insets/insetbib.C (getKeys): ditto

	* src/debug.C (showTags): make sure that the output is correctly
	aligned.

	* configure.in: add a comment for TWO_COLOR_ICON define.

	* acconfig.h: remove all the entries that already defined in
	configure.in or acinclude.m4.

	* src/buffer.C (makeLaTeXFile): headers of latex file also changed
	to avoid user name, date and copyright.

1999-12-21  Juergen Vigna  <jug@sad.it>

	* src/table.C (Read): Now read bogus row format informations
		if the format is < 5 so that afterwards the table can
		be read by lyx but without any format-info. Fixed the
		crash we experienced when not doing this.

1999-12-21  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/text2.C (RedoHeightOfParagraph): rename arg cursor -> cur
	(RedoDrawingOfParagraph): ditto
	(RedoParagraphs): ditto
	(RemoveTableRow): ditto

	* src/text.C (Fill): rename arg paperwidth -> paper_width

	* src/buffer.C (insertLyXFile): rename var filename -> fname
	(writeFile): rename arg filename -> fname
	(writeFileAscii): ditto
	(makeLaTeXFile): ditto
	(makeLinuxDocFile): ditto
	(makeDocBookFile): ditto

	* src/LaTeX.C (runMakeIndex): change arg name from file -> f
	(runBibTeX): ditto

	* src/Makefile.am (lyx_SOURCES): add bmtable.c and remove bmtable.C

	* src/bmtable.h: add extern "C" on this file when __cplusplus is
	defined.

	* src/bmtable.c: new file, a C'ified copy of bmtable.C, this is
	compiled by a C compiler not C++.

	* src/layout.h (LyXTextClass): added typedef for const_iterator
	(LyXTextClassList): added typedef for const_iterator + member
	functions begin and end.

	* src/LyXView.C (UpdateDocumentClassChoice): rewritten to use
	iterators to fill the choice_class.
	(updateLayoutChoice): rewritten to use iterators to fill the
	layoutlist in the toolbar.

	* src/BufferView.h (BufferView::work_area_width): removed unused
	variable.

	* src/lyx_gui_misc.C (WarnReadonly): added string parameter 'file'

	* src/buffer.C (sgmlOpenTag): drop the use of the static space array
	(sgmlCloseTag): ditto

	* src/support/lstrings.h: return type of countChar changed to
	unsigned char.

	* src/support/lstrings.C (countChar): use HAVE_STD_COUNT to choose
	what version of this func to use. Also made to return unsigned int.

	* configure.in: call LYX_STD_COUNT

	* acinclude.m4 (LYX_STD_COUNT): new function checks for a standard
	conforming std::count.

1999-12-20  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/mathed/math_draw.C (Draw, Metrics): fix a bug where a prime
	and a subscript would give bad display (patch from Dekel Tsur
	<dekel@math.tau.ac.il>).

	* src/insets/insetlatexaccent.h: make sure ACCENT_TYPES is public.

	* src/spellchecker.C (create_ispell_pipe): use a const_cast to
	please sun CC.

	* src/chset.h: add a few 'using' directives

	* src/lyxfunc.C (Dispatch): check that LFUN_UNKNOWN_ACTION is not
	triggered when no buffer is active

	* src/layout.C: removed `break' after `return' in switch(), since
	it is unreachable.

	* src/lyx_main.C (init): make sure LyX can be ran in place even
	when libtool has done its magic with shared libraries. Fix the
	test for the case when the system directory has not been found.

	* src/lyx_cb.C (MenuMakeLaTeX): make sure to keep the full path
	name for the latex file.
	(MenuMakeHTML): ditto

	* src/buffer.h: add an optional boolean argument, which is passed
	to ChangeExtension.

1999-12-20  Allan Rae  <rae@lyx.org>

	* lib/templates/IEEEtran.lyx: small correction and update.

	* configure.in: Attempted to use LYX_PATH_HEADER

	* src/stl_string_fwd.h: Don't need HAVE_STL_STRING_FWD_H anymore

	* acconfig.h, acinclude.m4 (LYX_STL_STRING_FWD): totally revised after
	input from JMarc.  Now use preprocessor to find the header.
	Also stopped making HAVE_STL_STRING_FWD_H and extended the comments.
	(LYX_PATH_HEADER): My, so far, failed attempt to generalize
	LYX_STL_STRING_FWD.  See comments in file.

1999-12-19  Asger Alstrup Nielsen  <alstrup@diku.dk>

	* The global MiniBuffer * minibuffer variable is dead.

	* The global FD_form_main * fd_form_main variable is dead.

1999-12-17  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/toolbar.C (set): condition #warning on WITH_WARNINGS

	* src/table.h: add the LOstream.h header
	* src/debug.h: ditto

	* src/LyXAction.h: change the explaination of the ReadOnly
	attribute: is indicates that the function _can_ be used.

	* src/LyXAction.C (init): find-replace _can_ be used in read-only
	mode.

1999-12-16  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxfont.C (ascent): Make sure that char is _always_ used as
	unsigned.
	(descent): ditto
	(lbearing): ditto
	(rbearing): ditto

	* src/paragraph.C (GetWord): assert on pos>=0
	(GetChar): ditto

	* src/support/lyxstring.C: condition the use of an invariant on
	ENABLE_ASSERTIONS
	* src/support/lyxstring.h: ditto

	* src/Bullet.[Ch]: replace DEBUG_AS_DEFAULT by ENABLE_ASSERTIONS.
	Use LAssert.h instead of plain assert().

	* src/support/lstrings.h: add LAssert.h, in case it is needed.

	* src/lyxfunc.C: do not include LAssert.h, it is not used.
	* src/support/filetools.C: ditto

	* src/support/LAssert.h: make Assert a no-op if ENABLE_ASSERTIONS
	is not defined.

	* INSTALL: document the new configure flags

	* configure.in: suppress --with-debug; add --enable-assertions

	* acinclude.m4: various changes in alignment of help strings.

1999-12-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/kbmap.C: commented out the use of the hash map in kb_map,
	beginning of movement to a stl::container.

	* several files: removed code that was not in effect when
	MOVE_TEXT was defined.

	* lib/kbd/iso8859-1.cdef: removed bogus backslashes. Backslashes
	for escaping should not be used. We can discuss if the string
	should be enclosed in f.ex. [] instead of "".

	* src/trans_mgr.C (insert): use the new returned value from
	encodeString to get deadkeys and keymaps done correctly.

	* src/chset.C (encodeString): changed to return a pair, to tell
	what to use if we know the string.

	* src/lyxscreen.h (fillArc): new function.

	* src/FontInfo.C (resize): rewritten to use more std::string like
	structore, especially string::replace.

	* src/insets/insetlatexaccent.C (Draw): use fillArc for the
	approp. accents.

	* configure.in (chmod +x some scripts): remove config/gcc-hack

1999-12-15  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/buffer.C (writeFile): change once again the top comment in a
	.lyx file to point to www.lyx.org and to use LYX_DOCVERSION
	instead of an hardcoded version number.
	(makeDocBookFile): ditto

	* src/version.h: add new define LYX_DOCVERSION

	* po/de.po: update from Pit Sütterlin
	* lib/bind/de_menus.bind: ditto.

	* src/lyxfunc.C (Dispatch): call MenuExport()
	* src/buffer.C (Dispatch): ditto

	* src/lyx_cb.C (MenuMakeHTML): new function, moved from
	LyXFunc::Dispatch().
	(MenuExport): new function, moved from
	LyXFunc::Dispatch().

	* src/trans_mgr.C (insert): small cleanup
	* src/chset.C (loadFile): ditto

	* lib/kbd/iso8859-1.cdef: add missing backslashes

1999-12-15  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/insets/insetlatexaccent.C (Lbearing): new function, used to
	help with placing the manually drawn accents better.
	(Rbearing): ditto
	(Draw): x2 and hg changed to float to minimize rounding errors and
	help place the accents better.

	* src/lyxfont.C (ascent): fixed faulty static_cast, casting from
	unsigned short to char is just wrong...cast the char to unsigned
	char instead so that the two values can compare sanely. This
	should also make the display of insetlatexaccents better and
	perhaps also some other insets.
	(descent): ditto
	(lbearing): new function
	(rbearing): ditto

1999-12-15  Allan Rae  <rae@lyx.org>

	* src/stl_string_fwd.h, src/Makefile.am (lyx_SOURCES):  added new
	header that provides a wrapper around the very annoying SGI STL header
	of the same name.

	* src/support/lyxstring.C, src/LString.h:
	removed old SGI-STL-compatability attempts.

	* configure.in: Use LYX_STL_STRING_FWD.

	* acinclude.m4 (LYX_STL_STRING_FWD), acconfig.h: Test if
	stl_string_fwd.h is around and try to determine it's location.
 	Major improvement over previous SGI STL 3.2 compatability.
	Three small problems remain with this function due to my zero
	knowledge of autoconf.  JMarc and lgb see the comments in the code.

1999-12-14  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/broken_const.h, config/hack-gcc, config/README: removed

	* configure.in: remove --with-gcc-hack option; do not call
	LYX_CXX_STL_STACK

	* INSTALL: remove documentation of --with-broken-const and
	--with-gcc-hack

	* acconfig.h: remove all trace of BROKEN_CONST define

	* src/buffer.C (makeDocBookFile): update version number in output
	file.
	(SimpleDocBookOnePar): fix an assert when trying to a character
	access beyond string length
	[Patch from Jose']

1999-12-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* po/de.po: fix the Export menu

	* lyx.man: update the description of -dbg

	* src/lyx_main.C (setDebuggingLevel): call Debug::showLevel()
	(commandLineHelp): updated
	(easyParse): show list of available debug levels if -dbg is passed
	without argument.

	* src/Makefile.am: add debug.C

	* src/debug.h: moved some code to debug.C

	* src/debug.C: new file. Contains code to set and show debug
	level.

	* src/layout.C: remove 'break' after 'continue' in switch
	statements, since these cannot be reached.

1999-12-13  Allan Rae  <rae@lyx.org>

	* src/mathed/math_hash.C (math_hash): renamed from hash(), name clash.
	(in_word_set): hash() -> math_hash()

	* src/LString.h: Used USING_EXCEPTIONS in SGI STL-3.2 support

	* acconfig.h: Added a test for whether we are using exceptions in the
	current compilation run. If so USING_EXCEPTIONS is defined.

	* config.in: Check for existance of stl_string_fwd.h
	* src/LString.h: If compiling --with-included-string and SGI's
	STL version 3.2 is present (see above test) we need to block their
	forward declaration of string and supply a __get_c_string().
	However, it turns out this is only necessary if compiling with
	exceptions enabled so I've a bit more to add yet.

	* src/insets/figinset.[Ch], src/insets/insetinclude.C,
	src/insets/insetloa.C, src/layout.h, src/lyxparagraph.h,
	src/support/LRegex.h, src/undo.h:
	Shuffle the order of the included files a little to ensure that
	LString.h gets included before anything that includes stl_string_fwd.h

	*  src/support/lyxstring.C: We need to #include LString.h instead of
	lyxstring.h to get the necessary definition of __get_c_string.
	(__get_c_string): New function.  This is defined static just like SGI's
	although why they need to do this I'm not sure.  Perhaps it should be
	in lstrings.C instead.

	* lib/templates/IEEEtran.lyx:  New template file.

1999-12-12  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* Makefile.in.in (MKINSTALLDIRS): use $(srcdir)/@MKINSTALLDIRS@
	* intl/Makefile.in (MKINSTALLDIRS):  ditto

	* src/LyXAction.C (init): changed to hold the LFUN data in a
	automatic array in stead of in callso to newFunc, this speeds up
	compilation a lot. Also all the memory used by the array is
	returned when the init is completed.

	* a lot of files: compiled with -Wold-style-cast, changed most of
	the reported offenders to C++ style casts. Did not change the
	offenders in C files.

	* src/trans.h (Match): change argument type to unsigned int.

	* src/support/DebugStream.C: fix some types on the streambufs so
	that it works on a conforming implementation.

1999-12-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/examples/example_{raw,lyxified}.lyx: fix embarassing sentence.

	* src/support/lyxstring.C: remove the inline added earlier since
	they cause a bunch of unsatisfied symbols when linking with dec
	cxx. Cxx likes to have the body of inlines at the place where they
	are declared.

	* src/trans.C (AddDeadkey): add an 'unsigned char' cast to avoid
	accessing negative bounds in array. This fixes the crash when
	inserting accented characters.
	* src/trans.h (Match): ditto

	* src/buffer.C (Dispatch): since this is a void, it should not try
	to return anything...

1999-12-10  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/buffer.h: removed the two friends from Buffer. Some changes
	because of this. Buffer::getFileName and Buffer::setFileName
	renamed to Buffer::fileName() and Buffer::fileName(...).

1999-12-09  Lars Gullik Bjønnes <larsbj@lyx.org>

	* buffer.[Ch], BufferView.[Ch] + other files: Moved Buffer::text
	and Buffer::update(short) to BufferView. This move is currently
	controlled by a define MOVE_TEXT, this will be removed when all
	shows to be ok. This move paves the way for better separation
	between buffer contents and buffer view. One side effect is that
	the BufferView needs a rebreak when swiching buffers, if we want
	to avoid this we can add a cache that holds pointers to LyXText's
	that is not currently in use.

	* buffer.[Ch], lyx_main.C: small changes to the "-export" patch by
	André Pönitz.

1999-11-18  André Pönitz <poenitz@mathematik.tu-chemnitz.de>

	* buffer.[Ch]: Dispatch() - new dispatcher on the buffer level

	* lyx_main.C: new command line option -x (or --execute) and
	  -e (or --export). Now direct conversion from .lyx to .tex
	  (.dvi, .ps, ...) is possible  ('lyx file.lyx --export latex')
	  Unfortunately, X is still needed and the GUI pops up during the
	  process...

1999-12-07  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/Spacing.C: add a using directive to bring stream stuff into
	normal namespace.
	* src/paragraph.C: ditto
	* src/buffer.C: ditto

	* NEWS: updated a bit the new features of 1.1.3 (took a few things
	from Lars' announcement).

	* lib/examples/nl_voorbeeld_{ruw,verlyxt}.lyx: new tutorial
	example files from Tino Meinen.

1999-12-06  Allan Rae  <rae@lyx.org>

	* src/LaTeX.C (runBibTeX): fix typo in accessing submatch pair.

1999-12-07  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxstring.C: added a lot of inline for no good
	reason

	* src/lyxfont.[Ch]: removed latexWriteStartChanges, and
	latexWriteEndChanges, they were not used.

	* src/layout.h (operator<<): output operator for PageSides

	* src/mathed/math_iter.C (my_memcpy): slightly changed.

	* some example files: loaded in LyX 1.0.4 and saved again to update
	certain constructs (table format)

	* a lot of files: did the change to use fstream/iostream for all
	writing of files. Done with a close look at Andre Poenitz's patch.

	* some files: whitespace changes.

1999-12-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/mathed/math_iter.C (my_memcpy): new function. Since the
	built-in memcpy() is broken on egcs and gcc 2.95 for alpha
	architecture, we provide our own. It is used unconditionnally, but
	I do not think this is a performance problem. Thanks to Angus
	Leeming <a.leeming@ic.ac.uk> for the code (and again to Michal
	Jaegermann <michal@ellpspace.math.ualberta.ca> for finding it the
	first time).
	(GetInset): use my_memcpy.
	(Insert): ditto
	(Copy): ditto

	* lib/chkconfig.ltx: some cleanup of the latex code. I am not sure
	it is easier to understand, but it uses less TeX-only constructs now.

	* acinclude.m4 (LYX_SEARCH_PROG): make it work when the PATH
	elements contain spaces

	* lib/configure: regenerated

	* lib/configure.m4 (SEARCH_PROG): make it work when the PATH
	elements contain spaces; display the list of programs that are
	tried.

	* autogen.sh: make sure lib/configure is executable

	* lib/examples/*: rename the tutorial examples to begin with the
	two-letters language code.

	* src/lyxfunc.C (getStatus): do not query current font if no
	buffer exists.

	* src/lyx_cb.C (RunScript): use QuoteName
	(MenuRunDvips): ditto
	(PrintApplyCB): ditto

	* src/support/filetools.[Ch] (QuoteName): new function. Add quotes
	around argument, so that it works well with the current shell.
	Does not work properly with OS/2 shells currently.

	* src/LaTeXLog.C (ShowLatexLog): use Buffer::getLatexName
	* src/LyXSendto.C (SendtoApplyCB): ditto
	* src/lyxfunc.C (Dispatch): ditto
	* src/buffer.C (runLaTeX): ditto
	(runLiterate): ditto
	(buildProgram): ditto
	(runChktex): ditto
	* src/lyx_cb.C (RunScript): ditto
	(MenuMakeLaTeX): ditto

	* src/buffer.h (getLatexName): new method

	* src/support/filetools.C (MakeLatexName): renamed from SpaceLess

1999-12-02  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* images/sqrt.xpm: change name of the sqrt icon to sqrt_xpm.
	* src/mathed/math_panel.C (mathed_get_pixmap_from_icon): ditto
	(create_math_panel): ditto

	* src/lyxfunc.C (getStatus): re-activate the code which gets
	current font and cursor; add test for export to html.

	* src/lyxrc.C (read): remove unreachable break statements; add a
	few "using".

	* src/bmtable.C (fl_set_bmtable_data): add a const_cast.

1999-12-01  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/mathed/formula.C (LocalDispatch): fix small whitspace bug
	introduced by faulty regex.
	* src/buffer.C: ditto
	* src/lastfiles.C: ditto
	* src/paragraph.C: ditto
	* src/table.C: ditto
	* src/vspace.C: ditto
	* src/insets/figinset.C: ditto
	Note: most of these is absolutely harmless, except the one in
	src/mathed formula.C.

1999-11-30  Kayvan A. Sylvan  <kayvan@satyr.sylvan.com>

	* src/ImportNoweb.C (documentclass): fixed bounds for substr
	  operation, yielding correct results for the reLyX command.

1999-12-01  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/filetools.C (ExpandPath): removed an over eager
	Assert.
	(ReplaceEnvironmentPath): ditto

	* src/toolbar.C (BubbleTimerCB): use C++ style casts. This clearly
	shows that we are doing something fishy in our code...
	(BubblePost): ditto
	(ToolbarCB): ditto

	* src/lyxrc.C (read): use a double switch trick to get more help
	from the compiler. (the same trick is used in layout.C)
	(write): new function. opens a ofstream and pass that to output
	(output): new function, takes a ostream and writes the lyxrc
	elemts to it. uses a dummy switch to make sure no elements are
	forgotten.

	* src/lyxlex.h: added a struct pushpophelper for use in functions
	with more than one exit point.

	* src/lyxlex.[Ch] (GetInteger): made it const
	(GetFloat): ditto
	(GetBool): ditto

	* src/lyxfunc.C (Dispatch): added case for LFUN_SAVEPREFERENCES

	* src/layout.[hC] : LayoutTags split into several enums, new
	methods created, better error handling cleaner use of lyxlex. Read
	the diff.

	* src/bmtable.[Ch]: change some member prototypes because of the
	image const changes.

	* commandtags.h, src/LyXAction.C (init): new function:
	"preferences-save", saves the lyxrc entries into .lyx/preferences.
	This file is not read automatically but you can add \input
	preferences to your lyxrc if you want to. We need to discuss how
	to handle this.

	* src/LaTeX.C (runBibTeX): use regex to match for the needed lines
	in .aux, also remove .bib and .bst files from dependencies when
	running bibtex.

	* src/BufferView.C, src/LyXView.C: add const_cast several places
	because of changes to images.

	* lib/images/*: same change as for images/*

	* lib/lyxrc.example: Default for accept_compound is false not no.

	* images/*: changed to be const, however I have som misgivings
	about this change so it might be changed back.

1999-11-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/configure, po/POTFILES.in: regenerated

	* autogen.sh: autogenerate lib/configure from lib/configure.m4

	* config/lib_configure.m4: removed

	* lib/configure.m4: new file (was config/lib_configure.m4)

	* configure.in: do not test for rtti, since we do not use it.

1999-11-26  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxstring.C (lyxstring::Srep): Changed to use a
	doubling of allocated space scheme. This makes it faster for large
	strings end to use less memory for small strings. xtra rememoved.

	* src/insets/figinset.C (waitalarm): commented out.
	(GhostscriptMsg): use static_cast
	(GhostscriptMsg): use new instead of malloc to allocate memory for
	cmap. also delete the memory after use.

	* src/lyx_cb.C (SetXtermCursor): made cursor_undefined a bool

	* src/LaTeX.C (scanAux): new method. Scans the .aux file and looks
	for changes in bibtex database or style.
	(runBibTeX): remove all .bib and .bst files from dep before we
	begin.
	(run): use scanAuc in when dep file already exist.

	* src/DepTable.C (remove_files_with_extension): new method
	(exist): new method

	* src/DepTable.[Ch]: made many of the methods const.

1999-11-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/bufferparams.C: make sure that the default textclass is
	"article". It used to be the first one by description order, but
	now the first one is "docbook".

	* src/lyx_main.C (setDebuggingLevel): change type of argument to
	string; call Debug::value.
	(easyParse): pass complete argument to setDebuggingLevel().

	* src/debug.h (value): fix the code that parses debug levels.

	* src/debug.h: add new debug type ACTION, reserved for LyXAction
	class.

	* src/LyXAction.C: use Debug::ACTION as debug channel.

	* src/lyxlookup.C: make the debug statements go to Debug::KEY.

	* NEWS: updated for the future 1.1.3 release.

	* src/mathed/symbol_def.h: swap the definitions of \varepsilon and
	\epsilon. Now \epsilon shows as red text, and \varepsilon shows as
	it should. This is of course a controversial change (since many
	people will find that their lyx workscreen is suddenly full of
	red), but done for the sake of correctness.

	* src/mathed/formulamacro.h, src/mathed/math_macro.[Ch],
	  src/mathed/math_root.[Ch] (Clone): return a MathedInset*

	* src/insets/inseterror.h, src/insets/inseturl.h,
	  src/insets/insetinfo.h, src/insets/figinset.h,
	  src/mathed/formulamacro.h, src/mathed/math_macro.h
	  (EditMessage): add a missing const and add _() to make sure that
	translation happens

	* src/ImportNoweb.C, src/LyXAction.h, src/insets/figinset.C,
	  src/insets/insetbib.C, src/support/filetools.C: add `using'
	directives for cxx.

	* src/lyxfunc.C (Dispatch): make sure nothing bad happens when
	doing 'Insert index of last word' at the beginning of a paragraph.

1999-11-24  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* several files: white-space changes.

	* src/mathed/formula.C: removed IsAlpha and IsDigit

	* src/insets/insetbib.C (getKeys): use findtexfile to look for the
	.bib file. use a ifstream instead of FilePtr when parsing the .bib
	file for keys.

	* src/insets/figinset.C (GetPSSizes): don't break when
	"EndComments" is seen. But break when a boundingbox is read.

	* all classes inherited from Inset: return value of Clone
	changed back to Inset *.

	* all classes inherited form MathInset: return value of Clone
	changed back to MathedInset *.

	* src/insets/figinset.C (runqueue): use a ofstream to output the
	gs/ps file. Might need some setpresicion or setw. However I can
	see no problem with the current code.
	(runqueue): use sleep instead of the alarm/signal code. I just
	can't see the difference.

	* src/paragraph.C (LyXParagraph): reserve space in the new
	paragraph and resize the inserted paragraph to just fit.

	* src/lyxfunc.h (operator|=): added operator for func_status.

	* src/lyxfunc.C (MenuNew): use FileInfo instead of FilePtr to
	check for readable file.

	* src/lyx_cb.C (MenuMakeLaTeX): use FileInfo instead of FilePtr to
	check for readable file.
	(MenuMakeLinuxDoc): ditto
	(MenuMakeDocBook): ditto
	(MenuMakeAscii): ditto
	(InsertAsciiFile): split the test for openable and readable

	* src/bmtable.C (draw_bitmaptable): use
	fl_state[fl_get_vclass()].depth instead of DefualtScreen.

	* src/LaTeX.C, src/support/filetools.[Ch]: moved do_popen and
	findtexfile from LaTeX to filetools.

	* src/ImportNoweb.C (documentclass): rewrote to use ifstream
	instead of FilePtr. Needs to be verified by a literate user.

1999-11-23  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/mathed/formula.[Ch] (GetCursorPos): add a missing 'const'.
	(EditMessage): likewise.

	* src/paragraph.C (SimpleTeXSpecialChars): output ~ and ^
	respectively as \textasciitilde and \textasciicircum.

1999-11-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxstring.h: made the methods that take iterators
	use const_iterator.

	* src/support/lstrings.C (countChar): use std::cound(itr, itr, val)
	(regexMatch): made is use the real regex class.

	* src/support/Makefile.am: changed to use libtool

	* src/support/.cvsignore: added *.lo, .libs and libsupport.la

	* src/mathed/math_defs.h: made the mathaligns be in a enum instead
	of defines.
	(MathIsInset ++): changed several macros to be inline functions
	instead.

	* src/mathed/Makefile.am: changed to use libtool

	* src/mathed/.cvsignore: added *.lo, .libs and libmathed.la

	* src/insets/inset* : Clone changed to const and return type is
	the true insettype not just Inset*.

	* src/insets/Makefile.am: changed to use libtool

	* src/insets/.cvsignore: added *.lo, .libs and libinsets.la

	* src/undo.[Ch] : added empty() and changed some of the method
	names.

	* src/texrow.[Ch]: rewrote to store texrow's in a std::list.

	* src/lyxparagraph.h: use id() and id(...) instead of getID and
	setID use block<> for the bullets array, added const several places.

	* src/lyxfunc.C (getStatus): new function

	* src/lyxfunc.[Ch] : small changes to take advantage of the new
	LyXAction, added const to several funtions.

	* src/filedlg.[Ch]: rewrote to store userchache and groupchache in
	a std::map, and to store the dir items in a vector.

	* src/Makefile.am (lyx_DEPENDENCIES): changed to use libtool files
	as dependencies.

	* src/LyXView.[Ch] + other files : changed currentView to view.

	* src/LyXAction.[Ch] : ported from the old devel branch.

	* src/.cvsignore: added .libs and a.out

	* configure.in : changes to use libtool.

	* acinclude.m4 : inserted libtool.m4

	* .cvsignore: added libtool

1999-11-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/Makefile.am (lyx_DEPENDENCIES): give the explicit object
	file name in insets and mathed directories (otherwise the
	dependency is not taken into account under cygwin).

	* src/text2.C (InsertString[AB]): make sure that we do not try to
	read characters past the string length.

1999-11-18  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/doc/LaTeXConfig.lyx.in,
	  lib/chkconfig.ltx: remove the test for linuxdoc-sgml.sty.

	* src/buffer.C (writeFile): Do not add a comment on top of .lyx
	file saying who created them and when this heppened; this is
	useless and annoys tools like cvs.

	* lib/layouts/g-brief-{en,de}.layout,
	  lib/templates/g-brief-{en,de}.lyx: new versions of the textclass
	from Thomas Hartkens <thomas@hartkens.de>.

	* src/{insets,mathed}/Makefile.am: do not declare an empty
	LDFLAGS, so that it can be set at configure time (useful on Irix
	for -n32 flag).

	* lib/reLyX/configure.in: make sure that the prefix is set
	correctly in LYX_DIR.

1999-11-18  André Pönitz <poenitz@mathematik.tu-chemnitz.de>

	* src/commandtags.h: introduction of a new tag 'LFUN_SEQUENCE' to
	be used by 'command-sequence' this allows to bind a key to a
	sequence of LyX-commands
	(Example: 'command-sequence math-insert alpha; math-insert beta;")

	* src/LyXAction.C: add "command-sequence"

	* src/LyXFunction.C: handling of "command-sequence"

	* src/LyXFunction.[hC] changed LyXFunc::Dispatch(string const
	 &cmd, string const &arg) to LyXFunc::Dispatch(string const& s)

	* src/lyxserver.C, src/minibuffer.C: Use this new interface

1999-11-17  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/buffer.C (writeFile): Do not output a comment giving user
	and date at the beginning of a .lyx file. This is useless and
	annoys cvs anyway; update version number to 1.1.

	* src/Makefile.am (LYX_DIR): add this definition, so that a
	default path is hardcoded in LyX.

	* configure.in: Use LYX_GNU_GETTEXT.

	* acinclude.m4 (LYX_GNU_GETTEXT): new macro, essentially a copy of
	AM_GNU_GETTEXT with a bug fixed.

	* src/lyx_cb.C (RunLinuxDoc): add a cast to please dec cxx.

	* src/chset.C: add "using std::ifstream;" to please dec cxx.

	* src/lyx_main.C (init), INSTALL.OS2: the environment variable
	which is used to point to LyX data is now LYX_DIR_11x.

	* lyx.man: convert to a unix text file; small updates.

1999-11-15  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/LSubstring.[Ch]: made the second arg of most of the
	constructors be a const reference.

	* src/mathed/math_parser.C (LexInitCodes): small bug introduced by
	me fixed.

	* src/support/lyxstring.[Ch] (swap): added missing member function
	and specialization of swap(str, str);

	* src/menus.C (ShowBufferMenu): to use the new BufferStorage

	* src/bufferlist.[Ch]: use the new BufferStorage class and remove all
	trace of the old one.

	* src/undo.[Ch]: made the undostack use std::list to store undo's in
	put the member definitions in undo.C.

	* src/lyxparagraph.h, src/paragraph.C + a lot of files: removed
	NEW_TEXT and have now only code that was included when this was
	defined.

	* src/intl.C (LCombo): use static_cast
	(LCombo2): ditto
	(DispatchCallback): ditto

	* src/definitions.h: removed whole file

	* src/commandtags.h: comment out LFUN_INSERT_INSET_LATEX

	* src/chset.[Ch]: a lot rewritten, does not use lyxlex for cdef
	parsing and stores in a std:map. a regex defines the file format.
	removed unneeded members.

	* src/bufferparams.h: added several enums from definitions.h here.
	Removed unsused destructor. Changed some types to use proper enum
	types. use block to have the temp_bullets and user_defined_bullets
	and to make the whole class assignable.

	* src/bufferparams.C (Copy): removed this functions, use a default
	assignment instead.

	* src/buffer.h: made isLatex, isLinuxDoc, isDocBook, isSGML and
	isLiterate const.

	* src/buffer.C (readLyXformat2): commend out all that have with
	oldpapersize to do. also comment out all that hve to do with
	insetlatex and insetlatexdel.
	(setOldPaperStuff): commented out

	* src/Makefile.am (lyx_SOURCES): remove definitions.h, add undo.C

	* src/LyXAction.C: remove use of inset-latex-insert

	* src/mathed/math_panel.C (button_cb): use static_cast

	* src/insets/Makefile.am (insets_o_SOURCES): removed
	insetlatex.[Ch]

	* src/support/lyxstring.C (helper): use the unsigned long
	specifier, UL, instead of a static_cast.

	* src/support/Makefile.am (libsupport_a_SOURCES): added block.h

	* src/support/block.h: new file. to be used as a c-style array in
	classes, so that the class can be assignable.

1999-11-15  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyx_gui_misc.C (askForText): when fl_show_input() returns
	NULL, make sure to return an empty string (it is not possible to
	set a string to NULL).

1999-11-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/LRegex.C: use regex_t instead of re_pattern_buffer.

	* src/support/lyxstring.C (helper): fix bogus cast in assertion.

	* src/{mathed,insets}/Makefile.am (CXXLINK): add $(LDFLAGS) to the
	link line, so that Irix users (for example) can set it explicitely to
	"-n32".

	* src/Makefile.am (lyx_LDADD): use LYX_LIB as a variable, so that
	it can be overidden at make time (static or dynamic link, for
	example).

	* src/vc-backend.C, src/LaTeXFeatures.h,
	  src/support/LRegex.C, src/support/LRegex.h: add a few "using"
	statements to bring templates to global namespace.

1999-11-10  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxstring.C (operator[] const): make it standard
	conforming.

	* src/minibuffer.C (Init): changed to reflect that more
	information is given from the lyxvc and need not be provided here.

	* src/lyxvc.[Ch]: rewrote to use the vc-backend.

	* src/Makefile.am (lyx_SOURCES): add vc-backend.[Ch]

	* src/LyXView.C (UpdateTimerCB): use static_cast
	(KeyPressMask_raw_callback): ditto

	* src/BufferView.[Ch]: name change _owner -> owner_ and _buffer ->
	buffer_, a lot of changes because of this. currentBuffer() ->
	buffer(), setBuffer(...) -> buffer(...), getOwner() -> owner(),
	also changes to other files because of this.

1999-11-09  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/vc-backend.[Ch]: new files. The backends for vc handling,
	have no support for RCS and partial support for CVS, will be
	improved later.

	* src/insets/ several files: changes because of function name
	changes in Bufferview and LyXView.

	* src/mathed/math_symbols.C (math_insert_symbol): use static_cast

	* src/support/LSubstring.[Ch]: new files. These implement a
	Substring that can be very convenient to use. i.e. is this
	possible:
	string a = "Mary had a little sheep";
	Substring(a, "sheep") = "lamb";
	a is now "Mary has a little lamb".

	* src/support/LRegex.[Ch]: a regex class that can be used to pick
	out patterns and subpatterns of strings. It is used by LSubstring
	and also by vc-backend.C

	* src/support/lyxstring.C: went over all the assertions used and
	tried to correct the wrong ones and flag which of them is required
	by the standard. some bugs found because of this. Also removed a
	couple of assertions.

	* src/support/Makefile.am (libsupport_a_SOURCES): added
	LSubstring.[Ch] and LRegex.[Ch]

	* src/support/FileInfo.h: have struct stat buf as an object and
	not a pointer to one, some changes because of this.

	* src/LaTeXFeatures.C (getTClassPreamble): also use the
	information in layout when adding the layouts preamble to the
	textclass preamble.

	* src/LaTeXFeatures.h: use a vector<bool> to store the layout
	usage in.

	* configure.in (CPPFLAGS): use AC_CHECK_FUNCS to check for XOpenIM
	because of bug in OS/2.

1999-11-08  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/layouts/lyxmacros.inc (lyxcode): set the font with
	\verbatim@font instead of \ttfamily, so that it can be redefined.

	* src/BackStack.h, src/DepTable.C, src/DepTable.h, src/LaTeX.C,
	  src/LaTeX.h, src/lastfiles.C, src/lastfiles.h, src/layout.C,
	  src/layout.h, src/text2.C: add 'using' directive to bring the
	STL templates we need from the std:: namespace to the global one.
	Needed by DEC cxx in strict ansi mode.

	* src/support/LIstream.h,src/support/LOstream.h,
	  src/support/lyxstring.h,src/table.h,
	  src/lyxlookup.h: do not include <config.h> in header
	files. This should be done in the .C files only.

	* development/lyx.spec.in: WHATSNEW has been renamed to NEWS
	(from Kayvan).


1999-11-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* config/lib_configure.m4,lib/configure,lib/lyxrc.example: update
	from Kayvan to fix the tth invokation.

	* development/lyx.spec.in: updates from Kayvan to reflect the
	changes of file names.

1999-11-05  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/text2.C (InsertStringB): use std::copy
	(InsertStringA): use std::copy

	* src/bufferlist.C: use a vector to store the buffers in. This is
	an internal change and should not affect any other thing.

	* src/BufferView.C (waitForX): use XSync instead of the lengthy
	stuff in waitForX.

	* src/text.C (Fill): fix potential bug, one off bug.

1999-11-04  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/Makefile.am (lyx_main.o): add more files it depends on.

	* src/lyx_cb.C (addNewlineAndDepth): parameters in wrong order.

	* src/support/lyxstring.C: use size_t for the reference count,
	size, reserved memory and xtra.
	(internal_compare): new private member function. Now the compare
	functions should work for std::strings that have embedded '\0'
	characters.
	(compare): all compare functions rewritten to use
	internal_compare.

1999-11-03  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxstring.C (compare): pass c_str()
	(compare): pass c_str
	(compare): pass c_str

1999-11-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/DebugStream.C: <config.h> was not included correctly.

	* lib/configure: forgot to re-generate it :( I'll make this file
	auto generated soon.

1999-11-03  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* acinclude.m4 (cross_compiling): add -fpermissive when gcc 2.95.x
	is used.

	* src/support/lyxstring.C: some changes from length() to rep->sz.
	avoids a function call.

	* src/support/filetools.C (SpaceLess): yet another version of the
	algorithm...now per Jean-Marc's suggestions.

1999-11-02  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/layout.C (less_textclass_desc): functor for use in sorting
	of textclasses.
	(LyXTextClass::Read): sort the textclasses after reading.

	* src/support/filetools.C (SpaceLess): new version of the
	SpaceLess functions. What problems does this one give? Please
	report.

	* images/banner_bw.xbm: made the arrays unsigned char *

1999-11-02  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/lyxstring.C (find): remove bogus assertion in the
	two versions of find where this has not been done yet.

	* src/support/lyxlib.h: add missing int return type to
	lyx::chdir().

	* src/menus.C (ShowFileMenu): disable exporting to html if no
	html export command is present.

	* config/lib_configure.m4: add a test for an HTML converter. The
	programs checked for are, in this order: tth, latex2html and
	hevea.

	* lib/configure: generated from config/lib_configure.m4.

	* src/lyxfunc.C (Dispatch): update and improve the execution of an
	html converter. The parameters are now passed through $$FName and
	$$OutName, instead of standard input/output.

	* src/lyxrc.{C,h}: rename \tth_command to \html_command.

	* lib/lyxrc.example: update description of \html_command.
	add "quotes" around \screen_font_xxx font setting examples to help
	people who use fonts with spaces in their names.

1999-11-02  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* Distribution files: updates for v1.1.2

	* src/support/lyxstring.C (find): remove bogus assert and return
	npos for the same condition.

1999-11-01  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* added patch for OS/2 from SMiyata.

1999-10-29  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/text2.C (CutSelection): make space_wrapped a bool
	(CutSelection): dont declare int i until we have to.
	(alphaCounter): return a char const *.

1999-10-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/syscall.C (Systemcalls::kill):
	  src/support/filetools.C (PutEnv, PutEnvPath):
	  src/lyx_cb.C (addNewlineAndDepth):
	  src/FontInfo.C (FontInfo::resize): condition some #warning
	directives with WITH_WARNINGS.


1999-10-28  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/layout.[Ch] + several files: access to class variables
	limited and made accessor functions instead a lot of code changed
	becuase of this. Also instead of returning pointers often a const
	reference is returned instead.

	* src/form1.C (create_form_Figure): added a couple fo "no-c-format"

	* src/Makefile.am (dist-hook): added used to remove the CVS from
	cheaders upon creating a dist
	(EXTRA_DIST): added cheaders

	* src/support/lstrings.C (tostr(char)): fix it to handle param as
	a character not as a small integer.

	* src/support/lyxstring.C (find): removed Assert and added i >=
	rep->sz to the first if.

1999-10-27  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/layout.[Ch] src/BufferView.C src/LaTeXFeatures.C
	src/LyXView.C src/buffer.C src/bufferparams.C
	src/lyx_cb.C src/lyxfunc.C src/paragraph.C src/text.C
	src/text2.C src/insets/insetinclude.C:
	lyxlayout renamed to textclasslist.

	* src/layout.C: some lyxerr changes.

	* src/layout.[Ch] (LyXLayout::Read): changed second paramter to
	LyXTextClass. rewrote LT_COPYSTYLE, rewrote LT_OBSOLETEDBY
	(LyXLayoutList): removed all traces of this class.
	(LyXTextClass::Read): rewrote LT_STYLE
	(LyXTextClass::hasLayout): new function
	(LyXTextClass::GetLayout): rewritten to return an iterator + has
	both const and nonconst version.
	(LyXTextClass::delete_layout): new function.
	(LyXTextClassList::Style): bug fix. do the right thing if layout
	is to big.
	(LyXTextClassList::NumberOfLayout): new acces to layoutlist.
	(LyXTextClassList::NameOfLayout): ditto
	(LyXTextClassList::Load): ditto

	* src/buffer.C (makeLaTeXFile): new access to layoutlist

	* src/LaTeXFeatures.C (getTClassPreamble): new access to layoutlist

	* src/LyXAction.C (LookupFunc): added a workaround for sun
	compiler, on the other hand...we don't know if the current code
	compiles on sun at all...

	* src/support/filetools.C (CleanupPath): subst fix

	* src/insets/insetbib.C (delDatabase): subst fix, this looks
	_really_ weird.

	* src/support/filetools.C (PutEnvPath): subst fix, how come nobody
	complained about this one?

	* src/insets/insetinclude.C (Latex): subst fix

	* src/insets/insetbib.C (getKeys): subst fix

	* src/LyXSendto.C (SendtoApplyCB): subst fix

	* src/lyx_main.C (init): subst fix

	* src/layout.C (Read): subst fix

	* src/lyx_sendfax_main.C (button_send): subst fix

	* src/buffer.C (RoffAsciiTable): subst fix

	* src/lyx_cb.C (MenuFax): subst fix
	(PrintApplyCB): subst fix

1999-10-26  Juergen Vigna  <jug@sad.it>

	* src/table.C (TexEndOfCell) + (DocBookEndOfCell): removed some #if 0

	(Read): Cleaned up this code so now we read only format vestion >= 5

1999-10-26  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/filetools.C (PutEnvPath): subst fix for EMX, how
	come nobody has complained about this one?

	* src/insets/insetinclude.C (Latex): subst fix

	* src/insets/insetbib.C (getKeys): subst fix

	* src/lyx_main.C (init): subst fix

	* src/layout.C (Read): subst fix

	* src/buffer.C (RoffAsciiTable): subst fix

	* src/lyx_cb.C (MenuFax): subst fix.

	* src/layout.[hC] + some other files: rewrote to use
	std::container to store textclasses and layouts in.
	Simplified, removed a lot of code. Make all classes
	assignable. Further simplifications and review of type
	use still to be one.

	* src/menus.C (ShowFileMenu/ShowFileMenu2): Use the iterators from
	lastfiles to create the lastfiles partr of the menu.

	* src/lastfiles.[Ch]: rewritten to use deque to store the
	lastfiles in. Uses fstream for reading and writing. Simplifies
	code.

	* src/support/syscall.C: remove explicit cast.

	* src/BufferView.C (CursorToggleCB): removed code snippets that
	were commented out.
	use explicat C++ style casts instead of C style casts. also use
	u_vdata instea of passing pointers in longs.

	* src/PaperLayout.C: removed code snippets that were commented out.

	* src/lyx_gui_misc.C: removed code snippets that were commented out.

	* src/lyx_main.C: removed code snippets that wer commented out.

	* src/paragraph.C: removed code snippets that were commented out.

	* src/lyxvc.C (logClose): use static_cast
	(logUpdate): ditto
	(viewLog): remove explicit cast to void*
	(showLog): removed old commented code

	* src/menus.C: use static_cast instead of C style casts. use
	u_vdata instead of u_ldata. remove explicit cast to (long) for
	pointers. Removed old code that was commented out.

	* src/insets/inset.C: removed old commented func

	* src/insets/insetref.C (InsetRef): removed old code that had been
	commented out for a long time.
	(Edit): ditto
	(escape): removed C style cast

	* src/insets/insetlatexaccent.C (Draw): removed old commented code

	* src/insets/insetlatex.C (Draw): removed old commented code
	(Read): rewritten to use string

	* src/insets/insetlabel.C (escape): removed C style cast

	* src/insets/insetindex.h: removed vdata and ldata from FD_index_form

	* src/insets/insetindex.C: use static_cast and u_vdata, removed
	old commented code.

	* src/insets/insetinclude.h: removed a couple of stupid bools

	* src/insets/insetinclude.C (include_cb): use static_cast and u_data.
	(Clone): remove C style cast
	(getKeys): changed list to lst because of std::list

	* src/insets/inseterror.C (Draw): removed som old commented code.

	* src/insets/insetcommand.C (Draw): removed some old commented code.

	* src/insets/insetbib.C (bibitem_cb): removed code that has been
	commented out forever.
	(bibitem_cb): use static_cast instead of C style cast
	use of vdata changed to u_vdata.

	* src/insets/inseturl.C (C_InsetUrl_CloseUrlCB): forward the data
	parameter.
	(CloseUrlCB): use static_cast instead of C style cast.
	(CloseUrlCB): added a fl_free form...it seemed to be missing.

	* src/insets/insetinfo.C (Edit): pass object in u_vdata instead
	(C_InsetInfo_CloseInfoCB): forward the ob parameter
	(CloseInfoCB): static_cast from ob->u_vdata instead.
	(Edit): removed bogus arg from fl_set_object_shortcut, set to 1
	instead.

	* src/insets/inseterror.C (Edit): pass object in u_vdata instead
	(C_InsetError_CloseErrorCB): forward the ob parameter
	(CloseErrorCB): static_cast from ob->u_vdata instead.

	* src/vspace.h: include LString.h since we use string in this class.

	* src/vspace.C (lyx_advance): changed name from advance because of
	nameclash with stl. And since we cannot use namespaces yet...I
	used a lyx_ prefix instead. Expect this to change when we begin
	using namespaces.

	* src/BufferView.[Ch] (BufferView::~BufferView): removed

	* src/BackStack.h: rewrote to use std::stack. made BackStackItem
	and removed now defunct constructor and deconstructor.

	* src/BufferView.h: have backstack as a object not as a pointer.
	removed initialization from constructor. added include for BackStack

	* development/lyx.spec.in (%build): add CFLAGS also.

	* src/screen.C (drawFrame): removed another warning.

1999-10-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* renamed WHATSNEW to NEWS (usual GNU style), CHANGES to
	OLD-CHANGES (not used anymore) and modified INSTALL, INSTALL.OS2,
	README and ANNOUNCE a bit for the next release. More work is
	needed, of course.

	* src/paragraph.C (SimpleTeXBlanks): spaces are automatically made
	unbreakable if we are in freespacing mode (LyX-Code), but not in
	latex mode.

1999-10-25  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/BackStack.h: fixed initialization order in constructor

	* Makefile.am (MAINTAINERCLEANFILES): removed po/POTFILES.in

	* acinclude.m4 (VERSION): new rules for when a version is
	development, added also a variable for prerelease.
	(warnings): we set with_warnings=yes for prereleases
	(lyx_opt): prereleases compile with same optimization as development
	(CXXFLAGS): only use pedantic if we are a development version

	* src/BufferView.C (restorePosition): don't do anything if the
	backstack is empty.

	* src/BackStack.h: added member empty, use this to test if there
	is anything to pop...

1999-10-25  Juergen Vigna  <jug@sad.it>

	* forms/form1.fd +
	* forms/layout_forms.fd +
	* forms/latexoptions.fd +
	* lyx.fd: changed for various form resize issues

	* src/mathed/math_panel.C +
	* src/insets/inseterror.C +
	* src/insets/insetinfo.C +
	* src/insets/inseturl.C +
	* src/insets/inseturl.h +
	* src/LaTeXLog.C +
	* src/LyXSendto.C +
	* src/PaperLayout.C +
	* src/ParagraphExtra.C +
	* src/TableLayout.C +
	* src/form1.C +
	* src/layout_forms.C +
	* src/lyx.C +
	* src/lyx_cb.C +
	* src/lyx_gui.C +
	* src/lyxfr0.C +
	* src/lyxfunc.C +
	* src/lyxvc.C +
	* src/menus.C: fixed various resize issues. So now forms can be
	resized savely or not be resized at all.

	* forms/form_url.fd +
	* src/insets/form_url.[Ch]: added because it's cleaner and easier
	to modify IMO.

	* src/insets/Makefile.am: added files form_url.[Ch]

1999-10-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* INSTALL: it is now possible to compile LyX with digital C++ 6.1
	(and presumably 6.2).

	* src/{BufferView,LyXView,combox,filedlg,intl,lyxserver,lyxvc,
	menus,minibuffer,toolbar}.{C,h}: added C_xxx wrappers around
	remaining static member callbacks.

	* src/lyxfunc.C (Dispatch): Use _() instead of N_() fot minibuffer
	messages.

	* src/support/lyxstring.h: declare struct Srep as friend of
	lyxstring, since DEC cxx complains otherwise.

1999-10-24  Lars Gullik Bjønnes  <larsbj@lyx.org>

1999-10-24  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/LaTeX.C (run): made run_bibtex also depend on files with
	extension ".bst"
	(runBibTeX): added scans for "\\bibstyle", now also ".bst" files
	are put into the dependency file.

	* src/spellchecker.C (create_ispell_pipe): removed old #warning,
	the code has shown itself to work
	(create_ispell_pipe): removed another warning, added a comment
	instead.

	* src/minibuffer.C (ExecutingCB): removed code that has been
	commented out a long time

	* src/lyxfunc.C (processKeyEvent): removed some very old commented
	out code + a warning.

	* src/support/lyxstring.h: comment out the three private
	operators, when compiling with string ansi conforming compilers
	they make problems.

	* src/mathed/math_symbols.C (AddBitmap): change 6th arg to be
	unsigned char *.
	(pixmapFromBitmapData): change type of bdata to be unsigned char *
	(pixmapFromBitmapData): add a reinterpret_cast in the call to
	XCreateImage

	* src/mathed/math_panel.h: change 6th arg to AddBitmap to be
	unsigned char *

	* src/mathed/math_panel.C (create_math_panel): remove explicit
	casts

	* src/bmtable.h: change last paramter to fl_set_bmtable_data to be
	unsigned char *.

	* src/bmtable.C (struct BMTABLE_SPEC): make bdata unsigned char *
	(draw_bitmaptable): add a reinterpret_cast to sp->bdata in the call
	to XCreatePixmapFromBitmapData
	(fl_set_bmtable_data): change the last argument to be unsigned
	char *
	(fl_set_bmtable_file): change bdata to unsinged char *, change bw
	and bh to be unsigned int, remove explicit casts in call to
	XReadBitmapFileData.

	* images/arrows.xbm: made the arrays unsigned char *
	* images/varsz.xbm: ditto
	* images/misc.xbm: ditto
	* images/greek.xbm: ditto
	* images/dots.xbm: ditto
	* images/brel.xbm: ditto
	* images/bop.xbm: ditto

	* Makefile.am (MAINTAINERCLEANFILES): added po/POTFILES.in

	* acinclude.m4 (LYX_GXX_STRENGHT_REDUCE): removed.
	(LYX_PROG_CXX): added -pedantic to g++ compile options when
	with-warnings, removed the __STRING_ANSI__ hack, seems to not be
	needed.
	(LYX_CXX_CHEADERS): added <clocale> to the test.

1999-10-23  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyx_cb.C (addNewlineAndDepth): changed to use string::append.

	* src/support/lyxstring.C (append): fixed something that must be a
	bug, rep->assign was used instead of rep->append.

	* src/support/Makefile.am (libsupport_a_SOURCES): added LIstream.h
	and LOstream.h

	* src/lyxfunc.C (processKeyEvent): removed faulty line that made
	lyx insert double chars. Fix spotted by Kayvan.

1999-10-23  Asger Alstrup Nielsen  <alstrup@alstrup.galaxy.dk>

	* Fixed the tth support. I messed up with the Emacs patch apply feature
	and omitted the changes in lyxrc.C.

1999-10-22  Juergen Vigna  <jug@sad.it>

	* src/insets/figinset.C (CallbackFig): Just changed the defines a bit.

	* src/lyx_cb.C (MenuInsertRef) +
	* src/lyx_gui.C (create_forms): Inserted fl_set_form_minsize so that
	the form cannot be resized under it limits (fixes a segfault)

	* src/lyx.C (create_form_form_ref) +
	* forms/lyx.fd: Changed Gravity on name input field so that it is
	resized correctly.

1999-10-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* configure.in: use LYX_CXX_STL_MODERN_STREAMS; check for headers
	<ostream> and <istream>.

	* acinclude.m4 (LYX_CXX_STL_MODERN_STREAMS): new test. Checks
	whether <fstream> provides the latest standard features, or if we
	have an oldstyle library (like in egcs).
	(LYX_CXX_STL_STRING): fix the test.

	* src/support/DebugStream.{C,h}: use L{I,O}stream.h and condition the
	code on MODERN_STL_STREAM.

	* src/support/lyxstring.h: use L{I,O}stream.h.

	* src/support/L{I,O}stream.h: new files, designed to setup
	correctly streams for our use
	  - includes the right header depending on STL capabilities
	  - puts std::ostream and std::endl (for LOStream.h) or
	  std::istream (LIStream.h) in toplevel namespace.

1999-10-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/LaTeX.C (run): added a check in 0 sumchange so that if it
	was a bib file that had been changed we ensure that bibtex is run.
	(runBibTeX): enhanced to extract the names of the bib files and
	getting their absolute path and enter them into the dep file.
	(findtexfile): static func that is used to look for tex-files,
	checks for absolute patchs and tries also with kpsewhich.
	Alternative ways of finding the correct files are wanted. Will
	probably be moved.
	(do_popen): function that runs a command using popen and returns
	the whole output of that command in a string. Should be moved to
	somewhere else.

	* src/DepTable.[Ch] (extchanged): new function that returns true if a
	file with extension ext has changed.

	* src/insets/figinset.C: added ifdef guards around the fl_free
	code that jug commented out. Now it is commented out when
	compiling with XForms == 0.89.

	* src/support/lyxstring.C: moved the definition of lyxstring::Srep
	to lyxstring.C, and only keep a forward declaration in
	lyxstring.h. Simplifies the header file a bit and should help a
	bit on compile time too. Also changes to Srep will not mandate a
	recompile of code just using string.
	(~lyxstring): definition moved here since it uses srep.
	(size): definition moved here since it uses srep.

	* src/support/lyxstring.h: removed a couple of "inline" that should
	not be there.

1999-10-21  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/inseturl.C (C_InsetUrl_CloseUrlCB): forgot to pass
	the 'ob' argument.

1999-10-21  Juergen Vigna  <jug@sad.it>

	* src/table.C (SetPWidth): Just a small fix so the alignment is not
	set to left if I just remove the width entry (or it is empty).

	* src/text2.C (SetCursorIntern): Fixed a bug calculating to use wrong
	paragraph when having dummy paragraphs.

1999-10-20  Juergen Vigna  <jug@sad.it>

	* src/insets/figinset.C: just commented some fl_free_form calls
	and added warnings so that this calls should be activated later
	again. This avoids for now a segfault, but we have a memory leak!

	* src/lyxfunc.C (processKeyEvent) (Dispatch): changed
	'const char * argument' to 'string argument', this should
	fix some Asserts() in lyxstring.C.

	* src/lyxfunc.h: Removed the function argAsString(const char *)
	as it is not used anymore.

1999-10-20  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxstring.C (getline): reads now _all_ chars. uses
	get instead of >>

	* src/Literate.h: some funcs moved from public to private to make
	interface clearer. Unneeded args removed.

	* src/Literate.C (scanLiterateLogFile): rewritten to use iostream
	instead of lyxlex.
	(scanBuildLogFile): ditto

	* src/LaTeX.C (scanLogFile): merged LaTeX Error handling into
	normal TeX Error. Still room for improvement.

	* src/LaTeX.[Ch]: removed scanError. Wrong place and not needed.

	* src/buffer.C (insertErrors): changes to make the error
	desctription show properly.

	* src/LaTeX.C (deplog): removed the test for file in lyx doc dir.
	could never happen

	* src/support/lyxstring.C (helper): changed to use
	sizeof(object->rep->ref).
	(operator>>): changed to use a pointer instead.

	* src/support/lyxstring.h: changed const reference & to value_type
	const & lets see if that helps.

1999-10-19  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* Makefile.am (rpmdist): fixed to have non static package and
	verison.

	* src/support/lyxstring.C: removed the compilation guards

	* src/vspace.C (nextToken): use i + 1  instead of ++i. Maks things
	a bit clearer.

	* src/support/Makefile.am (LYXSTRING): bruker USE_LYXSTRING for
	conditional compile of lyxstring.Ch

	* acinclude.m4 (LYX_CXX_STL_STRING): new and improved, still a
	stupid check, but it is a lot better than the bastring hack.
	(LYX_CXX_STL_STRING): bruker nå AM_CONDITIONAL(USE_LYXSTRING

	* several files: changed string::erase into string::clear. Not
	really needed.

	* src/chset.C (encodeString): use a char temporary instead

	* src/table.C (TexEndOfCell): added tostr around
	column_of_cell(fcell+i)+1 and around right_column_of_cell(fcell+i)+1
	(TexEndOfCell): ditto
	(TexEndOfCell): ditto
	(TexEndOfCell): ditto
	(DocBookEndOfCell): ditto
	(DocBookEndOfCell): ditto
	(DocBookEndOfCell): ditto
	(DocBookEndOfCell): ditto

	* src/paragraph.C (TeXEnvironment): added tostr around foot_count -1

	* src/lyxfr1.C (SearchReplaceAllCB): added tostr around replace_count

	* src/lyx_cb.C (MenuRunLaTeX): added tostr around ret
	(MenuBuildProg): added tostr around ret
	(MenuRunChktex): added tostr around ret
	(DocumentApplyCB): added tostr around ret

	* src/chset.C (encodeString): added tostr around t->ic

	* src/buffer.C (makeLaTeXFile): added tostr around secnumdepth
	(makeLaTeXFile): added tostr around tocdepth
	(makeLaTeXFile): added tostr around ftcound - 1

	* src/insets/insetbib.C (setCounter): added tostr around counter.

	* src/support/lyxstring.h: added an operator+=(int) to catch more
	mistakes.

	* src/support/lyxstring.C (lyxstring): We DON'T allow NULL pointers.
	(lyxstring): We DON'T allow NULL pointers.

1999-10-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/mathed/math_macro.C (MathMacroArgument::Write,
	MathMacroTemplate::WriteDef): add tostr() around macro arg numbers
	when writing them out.

	* src/LString.C: remove, since it is not used anymore.

	* src/support/lyxstring.C: condition the content to
	USE_INCLUDED_STRING macro.

	* src/mathed/math_symbols.C, src/support/lstrings.C,
	src/support/lyxstring.C: add `using' directive to specify what
	we need in <algorithm>. I do not think that we need to
	conditionalize this, but any thought is appreciated.

	* many files: change all callback functions to "C" linkage
	functions to please strict C++ compilers like DEC cxx 6.1 in mode
	strict_ansi. Those who were static are now global.
	    The case of callbacks which are static class members is
	trickier, since we have to make C wrappers around them (see
	InsetError, InsetInfo and InsetUrl). The same holds for friends. I
	did not finish this yet, since it defeats the purpose of
	encapsulation, and I am not sure what the best route is.

1999-10-19  Juergen Vigna  <jug@sad.it>

	* src/support/lyxstring.C (lyxstring): we permit to have a null
	pointer as assignment value and just don't assign it.

	* src/vspace.C (nextToken): corrected this function substituting
	find_first(_not)_of with find_last_of.

	* src/TableLayout.C (UpdateLayoutTable) (TableOptionsCB)
	(TableOptCloseCB) (TableSpeCloseCB):
	inserted fl_set_focus call for problem with fl_hide_form() in
	xforms-0.89.

1999-10-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyx_cb.C (LayoutsCB): fix bug where int was added to a
	string.

1999-10-18  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxrc.C (Read): RC_PRINTEXSTRAOPTIONS now uses
	LyXLex::next() and not eatline() to get its argument.

1999-10-17  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/DepTable.[Ch]: rewritten to store the dependencies in a map
	instead, use fstreams for io of the depfile, removed unneeded
	functions and variables.

	* src/LaTeX.[Ch] (class TeXErrors): rewrote to store the errors in a
	vector instead, removed all functions and variables that is not in
	use.

1999-10-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/buffer.C (insertErrors): use new interface to TeXError

	* Makefile.am (rpmdist): added a rpmdist target

	* lib/reLyX/Makefile.am: added RelyxFigure.pm and Verbatim.pm as
	per Kayvan's instructions.

1999-10-15  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/Makefile.am: add a definition for localedir, so that locales
	are found after installation (Kayvan)

1999-10-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* development/.cvsignore: new file.

1999-10-14  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* acinclude.m4 (LYX_CXX_CHEADERS): New macro. Checks whether the
	C++ compiler provides wrappers for C headers and use our alternate
	version otherwise.

	* configure.in: use LYX_CXX_CHEADERS.

	* src/cheader/: new directory, populated with cname headers from
	libstdc++-2.8.1. They are a bit old, but probably good enough for
	what we want (support compilers who lack them).

	* src/insets/Makefile.am, src/mathed/Makefile.am: remove src/support
	from includes. It turns out is was stupid.

1999-10-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* lib/Makefile.am (install-data-local): forgot a ';'
	(install-data-local): forgot a '\'
	(libinstalldirs): needed after all. reintroduced.

1999-10-13  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* configure.in (AC_OUTPUT): added lyx.spec

	* development/lyx.spec: removed file

	* development/lyx.spec.in: new file

	* po/*.po: merged with lyx.pot becuase of make distcheck

	* lib/Makefile.am (dist-hook): added dist-hook so that
	documentation files will be included when doing a make
	dist/distdir/distcheck. Requires cvs export -r HEAD lyxdoc to run.
	(pkgdata_SCRIPTS): added configure.cmd for now, we can use som
	conditional later.
	more: tried to make install do the right thing, exclude CVS dirs
	etc.

	* src/LaTeXLog.C (ShowLatexLog): reordered som statements so that
	Path would fit in more nicely.

	* all files that used to use pathstack: uses now Path instead.
	This change was a lot easier than expected.

	* src/support/path.h: new file

	* src/support/Makefile.am (libsupport_a_SOURCES): added path.h

	* src/Makefile.am (lyx_SOURCES): removed pathstack.[Ch]

	* src/support/lyxstring.C (getline): Default arg was given for
	para 3. removed.

	* Configure.cmd: removed file

1999-10-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/DebugStream.[Ch]: remove the explicit std:: before
	streams classes and types, add the proper 'using' statements when
	MODERN_STL is defined.

	* src/debug.h: move the << operator definition after the inclusion
	of DebugStream.h

	* src/support/filetools.C: include "LAssert.h", which is needed
	later.

	* src/insets/Makefile.am, src/mathed/Makefile.am: add src/support
	to includes.

	* src/lyxfont.h, src/commandtags.h, src/mathed/math_defs.h:
	include "debug.h" to define a proper ostream.

1999-10-12  Asger Alstrup Nielsen  <alstrup@alstrup.galaxy.dk>

	* src/sys*: Cleaned up the Systemcall stuff a bit. Added "kill(int)"
	  method to the SystemCall class which can kill a process, but it's
	  not fully implemented yet.

	* src/*.C: Changed Systemcalls::Startscript() to startscript()

	* src/support/FileInfo.h: Better documentation

	* src/lyxfunc.C: Added support for buffer-export html

	* src/menus.C: Added Export->As HTML...

	* lib/bind/*.bind: Added short-cut for buffer-export html

	* src/lyxrc.*: Added support for new \tth_command

	* lib/lyxrc.example: Added stuff for new \tth_command

1999-10-12  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* lib/Makefile.am (IMAGES): removed images/README
	(pkgdata_SCRIPTS): use this instead of bin_SCRIPTS to that it
	installes in correct place. Check permisions is installed
	correctly.

	* src/LaTeX.C: some no-op changes moved declaration of some
	variables around.

	* src/LaTeX.h (LATEX_H): changed include guard name

1999-10-12  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/reLyX/Makefile.am: install noweb2lyx.

	* lib/Makefile.am: install configure.

	* lib/reLyX/configure.in: declare a config aux dir; set package
	name to lyx (not sure what the best solution is); generate noweb2lyx.

	* lib/layouts/egs.layout: fix the bibliography layout.

1999-10-08  Jürgen Vigna <jug@sad.it>

	* src/support/filetools.C (FileOpenSearch): Fixed a bug where
	when in the PATH was something like /usr/bin;;/bin (note: the ;;)
	it returned without continuing to search the path.

1999-10-07  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/insets/insetquotes.C (Draw): Simplified a gread deal. This
	also fixes a bug. It is not allowed to do tricks with std::strings
	like: string a("hei"); &a[e]; this will not give what you
	think... Any reason for the complexity in this func?

1999-10-06  Asger Alstrup Nielsen  <alstrup@diku.dk>

	* Updated README and INSTALL a bit, mostly to check that my
	CVS rights are correctly set up.

1999-10-06  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxstring.C (helper): removed bogus Assert. strlen
	does not allow '\0' chars but lyxstring and std::string does.

1999-10-05  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* autogen.sh (AUTOCONF): let the autogen script create the
	POTFILES.in file too. POTFILES.in should perhaps now not be
	included in the cvs module.

	* some more files changed to use C++ includes instead of C ones.

	* src/filedlg.C (Reread): fixed a bug wrt Time. It was appended
	not assigned.
	(Reread): added tostr to nlink. buggy output otherwise.
	(Reread): added a string() around szMode when assigning to Buffer,
	without this I got a log of garbled info strings.

	* acconfig.h: commented out the PTR_AS_INT macros. They should not
	be needed.

	* I have added several ostream & operator<<(ostream &, some_type)
	functions. This has been done to avoid casting and warnings when
	outputting enums to lyxerr. This as thus eliminated a lot of
	explicit casts and has made the code clearer. Among the enums
	affected: kb_action, InsetLatexAccent::ACCENT_TYPE, a couple of
	mathed enums, some font enum the Debug::type enum.

	* src/support/lyxstring.h (clear): missing method. equivalent of
	erase(0, npos).

	* all files that contained "stderr": rewrote constructs that used
	stderr to use lyxerr instead. (except bmtable)

	* src/support/DebugStream.h (level): and the passed t with
	Debug::ANY to avoid spurious bits set.

	* src/debug.h (Debug::type value): made it accept strings of the
	type INFO,INIT,KEY.

	* configure.in (Check for programs): Added a check for kpsewhich,
	the latex generation will use this later to better the dicovery of
	all used files.

	* src/BufferView.C (create_view): we don't need to cast this to
	(void*) that is done automatically.
	(WorkAreaButtonPress): removed some dead code.

1999-10-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/minibuffer.C (Init): make sure that the "Welcome to LyX!"
	is not overwritten when translated (David Sua'rez de Lis).

	* lib/CREDITS: Added David Sua'rez de Lis

	* lib/reLyX/configure.in: setup LYX_DIR correctly in reLyX.

	* src/bufferparams.C (BufferParams): default input encoding is now
	"latin1"

	* acinclude.m4 (cross_compiling): comment out macro
	LYX_GXX_STRENGTH_REDUCE.

	* acconfig.h: make sure that const is not defined (to empty) when
	we are compiling C++. Remove commented out code using SIZEOF_xx
	macros.

	* configure.in : move the test for const and inline as late as
	possible so that these C tests do not interefere with C++ ones.
	Remove the call to LYX_GXX_STRENGTH_REDUCE, since its usefulness
	has not been proven.

1999-10-04  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/table.C (getDocBookAlign): remove bad default value for
	isColumn parameter.

	* src/menus.C (ShowFileMenu): add a missing tostr() for lastfiles
	shortcut.
	(ShowFileMenu2): ditto.

	* lib/reLyX/.cvsignore: add configure and aclocal.m4 to the list
	of files to ignore.

1999-10-04  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* Most files: finished the change from the old error code to use
	DebugStream for all lyxerr debugging. Only minor changes remain
	(e.g. the setting of debug levels using strings instead of number)

1999-10-02  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/layout.C (Add): Changed to use compare_no_case instead of
	strcasecmp.

	* src/FontInfo.C: changed loop variable type too string::size_type.

1999-10-01  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/Makefile.am: added -I${srcdir}/../ to INCLUDES and
	set ETAGS_ARGS to --c++

1999-09-30  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/table.C (DocBookEndOfCell): commented out two unused variables

	* src/paragraph.C: commented out four unused variables.

	* src/lyx_cb.C (TocUpdateCB): moved variable i and added a new i
	insed a if clause with type string::size_type.

	* src/lyxfr1.C (IsSearchStringInText): changed iSrch from int to
	string::size_type.

	* src/lyxfunc.C (Dispatch): use string::size_type as loop variable.

	* src/lyx_cb.C (ReplaceWord): use string::size_type as loop
	variable, also changed loop to go from 0 to lenght + 1, instead of
	-1 to length. This should be correct.

	* src/LaTeX.C (scanError): use string::size_type as loop variable
	type.

	* src/BufferView.C (WorkAreaButtonPress): moved #if 0 up two lines
	(l.896) since y_tmp and row was not used anyway.

	* src/insets/insetref.C (escape): use string::size_type as loop
	variable type.

	* src/insets/insetquotes.C (Width): use string::size_type as loop
	variable type.
	(Draw): use string::size_type as loop variable type.

	* src/insets/insetlatexaccent.C (checkContents): use
	string::size_type as loop variable type.

	* src/insets/insetlabel.C (escape): use string::size_type as loop
	variable type.

	* src/insets/insetinfo.C: added an extern for current_view.

	* src/insets/insetcommand.C (scanCommand): use string::size_type
	as loop variable type.

	* most files: removed the RCS tags. With them we had to recompile
	a lot of files after a simple cvs commit. Also we have never used
	them for anything meaningful.

	* most files: tags-query-replace NULL 0. As adviced several plases
	we now use "0" instead of "NULL" in our code.

	* src/support/filetools.C (SpaceLess): use string::size_type as
	loop variable type.

1999-09-29  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/paragraph.C: fixed up some more string stuff.

1999-09-28  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/filetools.h: make modestr a std::string.

	* src/filetools.C (GetEnv): made ch really const.

	* src/lyxlib.h: removed the Maximum and Minimum inline functions,
	made code that used these use max/min from <algorithm> instead.

	* changed several c library include files to their equivalent c++
	library include files. All is not changed yet.

	* created a support subdir in src, put lyxstring and lstrings
	there + the extra files atexit, fileblock, strerror. Created
	Makefile.am. edited configure.in and src/Makefile.am to use this
	new subdir. More files moved to support.

	* imported som of the functions from repository lyx, filetools

	* ran tags-query-replace on LString -> string, corrected the bogus
	cases. Tried to make use of lstrings.[hC], debugged a lot. There
	is still some errors in there. This is errors where too much or
	too litle get deleted from strings (string::erase, string::substr,
	string::replace), there can also be some off by one errors, or
	just plain wrong use of functions from lstrings. Viewing of quotes
	is wrong.

	* LyX is now running fairly well with string, but there are
	certainly some bugs yet (see above) also string is quite different
	from LString among others in that it does not allow null pointers
	passed in and will abort if it gets any.

	* Added the revtex4 files I forgot when setting up the repository.

1999-09-27  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* All over: Tried to clean everything up so that only the files
	  that we really need are included in the cvs repository.
	* Switched to use automake.
	* Generaton of reLyX is not perfect, LYX_DIR does not get substituted.
	* Install has not been checked.

1999-09-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* po/pt.po: Three errors:
	       l.533 and l.538 format specification error
	       l. 402 duplicate entry, I just deleted it.

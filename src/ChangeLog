2002-07-20  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView_pimpl.C (workAreaButtonRelease): Fix opening of
	a bibitem inset in a RTL paragraph.

2002-07-20  John Levon  <moz@compsoc.man.ac.uk>

	* paragraph_pimpl.C: constify 

	* BufferView_pimpl.C:
	* LaTeX.C:
	* lyxfunc.C: fix dispatch in a nicer way
 
2002-07-20  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* version.C.in: update lyx_docversion

	* LaTeXFeatures.C (getMacros): only define \LyX when needed

	* paragraph.C (validate): remove from here...
	* paragraph_pimpl.C (validate): ... and move here
	(isTextAt): make it const

	* buffer.C (getLists): ws cleanup

2002-07-20  Dekel Tsur  <dekelts@tau.ac.il>

	* language.C (read): Use iso8859-1 encoding in latex_lang
	(this prevents LyX from crashing when using iso10646-1 encoding).

2002-07-19  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* text2.C (toggleInset): if cursor is inside an inset, close the
	inset and leave cursor _after_ it

2002-07-19  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfunc.C: move minibuffer completion handling out of here
 
2002-07-19  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C:
	* LaTeX.C: fix dispatch calls
 
2002-07-19  Dekel Tsur  <dekelts@tau.ac.il>

	* text.C (drawChars): Fix Arabic text rendering.

2002-07-18  John Levon  <moz@compsoc.man.ac.uk>

	* LyXAction.C:
	* commandtags.h:
	* lyxfunc.C: remove message-push/pop
 
	* lyxserver.C:
	* lyxfunc.h:
	* lyxfunc.C: rationalise some code by removing verboseDispatch
	  in favour of a bool argument to dispatch()
 
2002-07-17  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyx_main.C (init): make sure to read symlinks as absolute paths

2002-07-17  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfunc.h:
	* lyxfunc.C: no need for commandshortcut to be a member

2002-07-15  André Pönitz <poenitz@gmx.net>
	
	* converter.C: add support for $$s (scripts from lib/scripts dir)
	* lyx_main.C: white space


2002-07-17  John Levon  <moz@compsoc.man.ac.uk>

	* bufferlist.C:
	* lyxrc.h:
	* lyxrc.C: remove second exit confirmation
 
2002-07-17  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView.h:
	* BufferView.C: 
	* BufferView2.C: 
	* BufferView_pimpl.h:
	* BufferView_pimpl.C:
	* lyxfunc.C: s/setState/switchKeyMap/, s/showState/view_state_changed/ 
 
2002-07-16  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* MenuBackend.C (expand): add numeric shortcuts to document menu

	* lyxrc.C (getDescription): remove RC_NEW_ASK_FILENAME

2002-07-15  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxfont.C (setLyXFamily): 
	(setLyXSeries): 
	(setLyXShape): 
	(setLyXSize): 
	(setLyXMisc): 
	(lyxRead): 
	* debug.C (value): 
	* buffer.C (asciiParagraph): use ascii_lowercase

2002-07-15  Mike Fabian  <mfabian@suse.de>

	* lyxlex_pimpl.C (search_kw): 
	* lyxlex.C (getLongString): 
	* converter.h (operator<): 
	* converter.C (operator<): 
	* buffer.C (parseSingleLyXformat2Token): 
	(asciiParagraph): 
	* ToolbarDefaults.C (read): 
	* MenuBackend.C (checkShortcuts): 
	(read): 
	* LColor.C (getFromGUIName):
	(getFromLyXName): use the compare_ascii_no_case instead of
	compare_no_case, because in turkish, 'i' is not the lowercase
	version of 'I', and thus turkish locale breaks parsing of tags.

2002-07-16  Angus Leeming  <leeming@lyx.org>

	* BufferView_pimpl.C (buffer): Previews::generateBufferPreviews
	now takes a Buffer const & argument.

2002-07-15  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView.C (resize): check there's a buffer to resize
 
2002-07-14  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfunc.C: remove dead code

	* lyxserver.h:
	* lyxserver.C: use lyx_guii::set_read_callback
 
2002-07-13  Dekel Tsur  <dekelts@tau.ac.il>

	* lyxfunc.C (dispatch): Correct cursor behaviour when exiting
	an inset in a RTL paragraph.

2002-07-12  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfunc.C: repaint after a font size update

2002-07-15  André Pönitz <poenitz@gmx.net>

	* lyxlength.C: inBP should be able to return negative values

2002-07-12  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfunc.C: use lyx_gui::update_fonts()
 
2002-07-12  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfunc.C: use lyx_gui::update_color()
 
2002-07-11  John Levon  <moz@compsoc.man.ac.uk>

	* bufferlist.C:
	* lyxfunc.h: 
	* lyxfunc.C:
	* lyxrc.h:
	* lyxrc.C: remove file->new asks for name option, and let
	  buffer-new take an argument
 
2002-07-11  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: remove unneeded extra repaint()
 
2002-07-10  John Levon  <moz@compsoc.man.ac.uk>

	* LyXAction.C: allow command-sequence with NoBuffer

	* lyxfunc.C: don't insist on trailing ';' for command-sequence
 
2002-07-10  Angus Leeming  <leeming@lyx.org>

	* lyxrc.[Ch]: preview_scale_factor should be a float not an int.

2002-07-09  Angus Leeming  <leeming@lyx.org>

	* lyxrc.[Ch]: added preview_hashed_labels and preview_scale_factor.

2002-07-09  John Levon  <moz@compsoc.man.ac.uk>

	* lengthcommon.h: whitespace
 
	* lyxfunc.C: update scrollbar after goto paragraph 

	* lyxtext.h: factor out page break drawing, and fix it so
	  page break/added space paints as selected nicely
 
2002-07-09  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: add FIXMEs, clean up a little

2002-07-09  André Pönitz <poenitz@gmx.net>

	* lyxfont.[Ch]: support for wasy symbols

2002-07-08  André Pönitz <poenitz@gmx.net>

	* BufferView_pimpl.C: apply John's patch for #93. 

2002-07-05  Angus Leeming  <leeming@lyx.org>

	* BufferView_pimpl.C (buffer): generate previews if desired.

	* LColor.h: add "preview" to the color enum.

	* LColor.C (LColor): add a corresponding entry to the items array.

	* buffer.C (~Buffer): remove any previewed LaTeX snippets associated
	with this buffer.

2002-07-05  Angus Leeming  <leeming@lyx.org>

	* buffer.[Ch] (makeLaTeXFile): create two methods where there was one.
	The body of the code is now in the method that is passed an ostream &
	rather than a file name.
	Pass an additional only_preamble parameter, useful for the forthcoming
	preview stuff.

2002-07-03  André Pönitz <poenitz@gmx.net>

	* lyxfunc.C: simplify getStatus() a bit for math stuff

2002-07-02  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* BufferView_pimpl.C (workAreaResize): add an unconditional repaint.

2002-06-20  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* text.C (changeRegionCase): do not change case of all the
	document when region ends at paragraph end (bug #461)

2002-07-01  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* paragraph.C (startTeXParParams):
	(endTeXParParams): add \protect	when necessary

2002-06-19  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* BufferView_pimpl.C (workAreaExpose): remove warning

2002-06-27  Angus Leeming  <leeming@lyx.org>

	* Makefile.am: add lyxlayout_ptr_fwd.h.

2002-06-26  André Pönitz <poenitz@gmx.net>

	* lyxrc.[Ch]: introduce \preview, revive half-dead \show_banner

2002-06-25  Angus Leeming  <leeming@lyx.org>

	* lyxfunc.C (dispatch): Comment out the call to
	grfx::GCache::changeDisplay. The method no longer exists now that the
	pixmap generation part of the graphics loader has been moved into
	InsetGraphics.

2002-06-24  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text2.C: layout as layout

	* text.C: layout as layout

	* tabular.C (OldFormatRead): layout as layout

	* paragraph_pimpl.C (TeXDeeper): layout as layout
	(realizeFont): layout as layout

	* paragraph.C (writeFile): layout as layout
	(validate): layout as layout
	(getFont): layout as layout
	(getLabelFont): layout as layout
	(getLayoutFont): layout as layout
	(breakParagraph): layout as layout
	(stripLeadingSpaces): layout as layout
	(getEndLabel): layout as layout
	(getMaxDepthAfter): layout as layout
	(applyLayout): layout as layout
	(TeXOnePar): layout as layout
	(simpleTeXOnePar): layout as layout
	(TeXEnvironment): layout as layout
	(layout): layout as layout
	(layout): layout as layout

	* lyxtextclass.C (compare_name): new functor to work with
	shared_ptr, layout as layout
	(Read): layout as layout
	(hasLayout): layout as layout
	(operator): layout as layout
	(delete_layout): layout as layout
	(defaultLayout): layout as layout

	* lyxlayout_ptr_fwd.h: new file

	* lyxlayout.C (Read): layout as layout

	* lyx_cb.C (MenuInsertLabel): layout as layout

	* bufferlist.C (newFile): layout as layout

	* buffer.C (readLyXformat2): layout as layout
	(parseSingleLyXformat2Token): layout as layout
	(insertStringAsLines): layout as layout
	(asciiParagraph): layout as layout
	(latexParagraphs): layout as layout
	(makeLinuxDocFile): layout as layout
	(simpleLinuxDocOnePar): layout as layout
	(makeDocBookFile): layout as layout
	(simpleDocBookOnePar): layout as layout
	(getLists): layout as layout

	* LaTeXFeatures.C (getTClassPreamble): layout as layout

	* CutAndPaste.C (cutSelection): layout as layout
	(pasteSelection): layout as layout
	(SwitchLayoutsBetweenClasses): layout as layout

	* BufferView_pimpl.C (Dispatch): layout as layout
	(smartQuote): layout as layout

	* BufferView2.C (unlockInset): layout as layout

2002-06-24  André Pönitz <poenitz@gmx.net>

	* lyxfunc.C: fix #487

2002-06-21  John Levon  <moz@compsoc.man.ac.uk>

	* lyxrc.h:
	* lyxrc.C:
	* lyxfunc.C: remove display_shortcuts, show_banner

2002-06-21  John Levon  <moz@compsoc.man.ac.uk>

	* Buffer_pimpl.C: oops, update on resize

2002-06-21  John Levon  <moz@compsoc.man.ac.uk>

	* buffer.C:
	* converter.C:
	* exporter.C:
	* lyxfunc.C:
	* BufferView.h:
	* BufferView.C: use repaint()

	* BufferView_pimpl.h:
	* BufferView_pimpl.C: s/updateScreen()/repaint()/
	  as it's a clearer description. Remove superfluous
	  redraws.

2002-06-21  John Levon  <moz@compsoc.man.ac.uk>

	* text.C: fix bug 488. Not ideal, but getting
	  getWord() to work properly for the insets that
	  matter is more difficult ...

2002-06-20  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C:
	* LyXAction.C:
	* commandtags.h:
	* lyxfunc.C: remove the six million index lyxfuncs to just
	  one, and DTRT (bug 458)

2002-06-20  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView.h:
	* BufferView.C:
	* BufferView_pimpl.h:
	* BufferView_pimpl.C: clean up resize() stuff,
	  and unnecessary updateScreen()s

2002-06-20  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView.h:
	* BufferView.C:
	* BufferView_pimpl.h:
	* BufferView_pimpl.C:
	* lyxfind.h:
	* lyxfind.C:
	* minibuffer.C: remove focus management of workarea,
	  not needed. Use screen's greyOut()

2002-06-17  Herbert Voss  <voss@lyx.org>

	* converter.C: (convert) do not post a message, when converting
	fails, let the calling function decide what to do in this case

2002-06-18  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfunc.C: tidy up a little

2002-06-16    <alstrup@diku.dk>

	* BufferView_pimpl.C (Pimpl): Use WorkAreaFactory.
	Got rid of FORMS_H_LOCATION include. Now we are
	GUII.

2002-06-15  LyX Development team  <lyx@rilke>

	* buffer.[Ch] (sgmlOpenTag):
	(sgmlCloseTag): Added support for avoiding pernicious mixed
	content. Return number of lines written.

	(makeLinuxDocFile):
	(makeDocBookFile): Fixed calls to sgml*Tag.
	Simple white space clean.

	(simpleDocBookOnePar): Simple white space clean.

	* tabular.[Ch] (docBook): Renamed to docbook and got another
	argument to related with the pernicious mixed content.

	(docbookRow): Fixed calls for docbook inset method.

2002-06-15  Lyx Development team  <larsbj@birdstep.com>

	* lyxfunc.[Ch]: Use LyXKeySym instead of KeySym,
	so it's X11 independent.

	* kb*.[Ch]: ditto.

	* BufferView_pimpl.[Ch] (workAreaKeyPress): ditto.

2002-06-15  Lyx Development team  <lyx@electronia>

	* intl.h: Renamed getTrans to getTransManager.

2002-06-14  Angus Leeming  <leeming@lyx.org>

	* Makefile.am: nuke forgotten stl_string_fwd.h.

2002-06-12  Angus Leeming  <leeming@lyx.org>

	* stl_string_fwd.h: unused and non-compliant anyway. Nuked.

2002-06-13  Angus Leeming  <leeming@lyx.org>

	* LaTeX.C:
	* vspace.C: wrap using std::sscanf inside a CXX_GLOBAL_CSTD block.

2002-06-12  Andrew Zabolotny  <zap@cobra.ru>

	* kbmap.C (getiso): add support for cyrillic and greek

2002-06-12  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView.h:
	* BufferView.C:
	* BufferView_pimpl.h:
	* BufferView_pimpl.C: move bogus scrolling logic
	  to xforms

2002-06-12  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfunc.C:
	* BufferView_pimpl.C: view->resize() change

2002-06-12  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: topCursorVisible
	  prototype change

2002-06-12  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am:
	* lyx_gui.h:
	* lyx_gui.C: move to frontends/

	* main.C:
	* lyx_main.h:
	* lyx_main.C: changes from above

2002-06-12  John Levon  <moz@compsoc.man.ac.uk>

	* intl.C:
	* intl.h:
	* kbmap.C:
	* kbsequence.C:
	* lyx_cb.C:
	* lyx_main.C: minor tidy

2002-06-12  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.h:
	* BufferView_pimpl.C:
	* BufferView.h:
	* BufferView.C: make painter() const,
	  remove dead code

	* BufferView2.C: use screen() accessor

	* lyx_main.h:
	* lyx_main.C: some minor cleanup

2002-06-12  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.h:
	* BufferView_pimpl.C: remove enter/leaveView,
	  use workHeight()

2002-06-12  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView.h:
	* BufferView.C:
	* BufferView2.C:
	* BufferView_pimpl.h:
	* BufferView_pimpl.C: only construct screen once,
	  rename

	* lyxrc.C: remove pointless comment

2002-06-11  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView.h:
	* BufferView.C: remove active() and belowMouse()

	* BufferView_pimpl.h:
	* BufferView_pimpl.C: use workarea() not workarea_,
	  and make it use a scoped_ptr instead

2002-06-11  John Levon  <moz@compsoc.man.ac.uk>

	* lyx_gui.C: add debug message on BadWindow

2002-06-10  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* sp_spell.C: fdopen is not part of the C++ standard.

	* paragraph.C (InsetIterator): use >= instead of ==

2002-06-07  Angus Leeming  <leeming@lyx.org>

	Fixes needed to compile with Compaq cxx 6.5.
	* BufferView_pimpl.C:
	* DepTable.C:
	* buffer.C:
	* converter.C:
	* encoding.C:
	* lyx_gui.C:
	* lyx_main.C:
	* lyxtextclasslist.C:
	* minibuffer.C:
	* sp_spell.C:
	* tabular_funcs.C:
	* vc-backend.C:
	all c-library variables have been moved into namespace std. Wrap
	using std::xyz declarations inside a #ifndef CXX_GLOBAL_CSTD block.

	* lyxlength.C:
	* tabular-old.C:
	* tabular.C:
	Add a using std::abs declaration.

	* kbmap.h (modifier_pair):
	* paragraph.h (InsetTable, InsetList):
	* lyxfont.h (FontBits):
	type definition made public.

	* bufferlist.C (emergencyWriteAll): the compiler complains that
	there is more than one possible lyx::class_fun template to choose from.
	I re-named the void specialisation as lyx::void_class_fun.

	* lyxfont.C (FontBits' operator==, operator!=): taken out of class.

	* tabular_funcs.C: lstrings.h must come before tabular_funcs.h or
	the compiler is is unable to find tostr in write_attribute.

2002-06-06  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* buffer.C (sgmlError): hide #warning

2002-06-05  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* xtl/*: get rid of xtl, which is not in use anyway

	* LyXAction.C (init):
	* commandtags.h: remove BUFFER_PRINT and BUFFER_PARAMS_GET, which
	were unimplemented xtl experimentation

2002-06-04  André Pönitz <poenitz@gmx.net>

	* lyxfunc.C: disable array operation on simple formulae

2002-06-03  John Levon  <moz@compsoc.man.ac.uk>

	* converter.C: constify a bit

2002-06-02  John Levon  <moz@compsoc.man.ac.uk>

	* lyx_gui.C: check xforms version correctly

2002-04-30  Herbert Voss  <voss@lyx.org>

	* buffer.C (parseSingleLyXformat2Token): fix bug with ignored
	"keep" option

2002-05-31  John Levon  <moz@compsoc.man.ac.uk>

	* lyxvc.C: fix bug 416 (make sure buffer is saved before
	  attempt to register it with a VCS)

2002-05-30  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyx_main.C (init): honor variables LYX_DIR_13x and
	LYX_USERDIR_13x

2002-05-30  John Levon  <moz@compsoc.man.ac.uk>

	* buffer.h:
	* buffer.C:
	* lyx_main.C: fix a crash on bad command line,
	  and give a useful exit status on error

	* lyxfunc.C (doImport): allow -i lyx to work

2002-03-30  André Pönitz <poenitz@gmx.net>

	* lyxfunc.C: mathed font changes

2002-05-30  John Levon  <moz@compsoc.man.ac.uk>

	* LaTeX.C:
	* importer.h:
	* importer.C:
	* lyx_sty.h:
	* lyx_sty.C:
	* lyxlex.C:
	* lyxrow.h:
	* lyxtext.h:
	* paragraph.h:
	* paragraph.C:
	* texrow.h:
	* texrow.C:
	* text.C:
	* trans_mgr.h: srcdocs, and some minor cleanups

2002-05-29  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* paragraph_pimpl.C (isTextAt): rewrite to be much faster (do not
	call getFont all the time)

2002-05-29  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* switch from SigC signals to boost::signals

2002-05-29  André Pönitz <poenitz@gmx.net>

	* paragraph_pimpl.C (getChar): don't call size() too often...

2002-05-29  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* paragraph_pimpl.C (insertChar): do not try to update tables when
	appending (pos == size())

	* buffer.C (parseSingleLyXformat2Token): reorder a bit the tests
	in order to reduce drastically the number of comparisons needed to
	parse a large document

2002-05-29  André Pönitz <poenitz@gmx.net>

	* text.C:
	* text2.C:
	* lyxtextclass.C:
	* sp_pspell.h:
	* textclasslist.[Ch]:
	* sp_ispell.h: whitespace change

2002-05-29  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxserver.C (callback): tentative fix of lyxserver. Does not use
	lyxaction directly now.

2002-05-27  John Levon  <moz@compsoc.man.ac.uk>

	* trans.C:
	* lyxfont.C:
	* lyxvc.C: remove unused headers

2002-05-26  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am:
	* buffer.h:
	* undostack.h:
	* undostack.C:
	* undo_funcs.h:
	* undo_funcs.C: some cleanups. Use shared_ptr
	  and a template for the undo stacks.

2002-05-26  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.h:
	* BufferView_pimpl.C:
	* kbmap.h:
	* kbmap.C:
	* kbsequence.h:
	* kbsequence.C:
	* lyxfunc.h:
	* lyxfunc.C:
	* text2.C: use key_state/mouse_state

2002-05-25  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* vc-backend.C (scanMaster): use boost regex and get rid of LRegex
	and LSubstring

	* chset.C: change include order
	(loadFile): use boost regex and get rid of LRegex and LSubstring

	* Makefile.am (BOOST_LIBS): new variable
	(lyx_LDADD): use it

	* LaTeX.C: change include order.
	(scanAuxFile): use boost regex and get rid of LRegex and
	LSubstring
	(deplog): ditto

2002-05-24  John Levon  <moz@compsoc.man.ac.uk>

	* ColorHandler.h:
	* ColorHandler.C:
	* FontInfo.h:
	* FontInfo.C: moved to frontends/xforms/

	* FontLoader.h:
	* FontLoader.C: moved into frontends for GUIIzation

	* Makefile.am:
	* lyx_gui.C:
	* lyxfont.C:
	* lyxfunc.C: changes from above

2002-05-24  John Levon  <moz@compsoc.man.ac.uk>

	* LColor.C: remove spurious X include

	* BufferView_pimpl.C:
	* Makefile.am:
	* font.h:
	* font.C:
	* text.C:
	* text2.C: move font metrics to frontends/

2002-05-24  Juergen Vigna  <jug@sad.it>

	* undo_funcs.C (textHandleUndo): fix the cursor selection after
	setting the undo_cursor.

	* ParagraphParameters.h: include local includes first.

2002-05-23  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C:
	* BufferView_pimpl.h:
	* Makefile.am:
	* WorkArea.h:
	* WorkArea.C:
	* screen.C: move WorkArea into frontends/

	* lyxscreen.h:
	* screen.C:
	* text.C:
	* BufferView.C:
	* BufferView2.C: move LyXScreen into frontends/

	* lyxlookup.h:
	* lyxlookup.C:
	* lyx_gui.C: move lyxlookup into frontends/xforms/

2002-05-23  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView2.C:
	* BufferView_pimpl.C:
	* FontLoader.C:
	* LyXView.h:
	* LyXView.C:
	* Makefile.am:
	* WorkArea.C:
	* XFormsView.h:
	* XFormsView.C:
	* buffer.C:
	* bufferlist.C:
	* bufferview_funcs.C:
	* converter.C:
	* importer.C:
	* lyx_cb.C:
	* lyx_gui.C:
	* lyx_main.C:
	* lyx_find.C:
	* lyxfunc.C:
	* lyxvc.C:
	* minibuffer.C:
	* text.C:
	* text2.C:
	* trans.C:
	* vc-backend.C: move LyX/XFormsView into frontends/

2002-05-23  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am:
	* PainterBase.C:
	* PainterBase.h:
	* Painter.C:
	* Painter.h:
	* WorkArea.C:
	* WorkArea.h:
	* screen.C:
	* tabular.C:
	* text.C:
	* text2.C: move Painter to frontends/

2002-05-22  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* buffer.C: comment out some some code that depend upon lyx_format
	< 220

	* paragraph.h (NO_PEXTRA_REALLY): turn off all pextra
	* ParagraphParameters.h (NO_PEXTRA_REALLY): ditto

	* buffer.h (NO_COMPABILITY): turn off compability

	* ColorHandler.C: include scoped_array.hpp

	* font.C: Use more specific smart_ptr header.
	* Painter.C: ditto
	* gettext.C: ditto
	* ShareContainer.h: ditto
	* lyx_main.h: ditto
	* kbmap.h: ditto
	* FontInfo.h: ditto
	* BufferView_pimpl.h: ditto
	* ColorHandler.h: ditto

	* kbmap.C (defkey): change call to shared_ptr::reset

2002-05-21  Juergen Vigna  <jug@sad.it>

	* buffer.C (insertErtContents): fix to insert ert asis if it is
	non empty. Skip it completely if it contains only whitespaces.

2002-05-15  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C:
	* BufferView2.C: clear selection on paste (bug 393)

2002-05-14  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* DepTable.C: include ctime

2002-05-11  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C (latexParagraphs): Add new argument (moving_arg).

2002-05-14  Juergen Vigna  <jug@sad.it>

	* text.C (breakParagraph): fixed function to honor the keepempty
	layout in the right maner and also to permit the right breaking
	algorithm on empty or non empyt keepempty paragraphs.

	* paragraph.C (breakParagraph): we have to check also if the par
	is really empty (!size()) for isempty otherwise we do the wrong
	paragraph break.

2002-05-10  Juergen Vigna  <jug@sad.it>

	* buffer.[Ch] : The following are only changes to the ert
	compatibility read reading old LaTeX layout and font stuff and
	convert it to ERTInsets.

	* buffer.h: added isErtInset().

	* buffer.C (struct ErtComp): add a fromlayout bool to check
	if we're inside a LaTeX layout.
	(isErtInset): new helper function.
	(insertErtContents): look for other ert insets before this one
	and insert the contents there, so that we don't have subsequent
	ERT insets with nothing between them. This way we create only one
	inset with multiple paragraphs. Also check if we don't insert only
	spaces ' ' as they are ignored anyway afterwards in the .tex file
	so if we have only spaces we will ignore this latex part in the
	new file.
	(parseSingleLyXformat2Token \\layout): better compatibility when
	reading layout-latex stuff.
	(parseSingleLyXformat2Token \\lang): put the insetERT in the right
	language tag.
	(parseSingleLyXformat2Token \\begin_inset): don't reset ert_comp
	stuff after reading the inset only get the information back from
	the stack.

2002-05-10  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C (makeLaTeXFile): Put language options after loading babel.

	* LaTeXFeatures.C (getBabelOptions): New method.

2002-05-08  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* BufferView_pimpl.C (Dispatch): work around missing argument for
	'layout'

2002-05-08  Juergen Vigna  <jug@sad.it>

	* text.C (leftMargin): handle paragraph leftindent.

	* paragraph.C (writeFile): write the new \\leftindent tag.
	(validate): handle leftindent code.
	(TeXEnvironment): handle paragraphleftindent code again.

	* lyx_sty.h: changed ParagraphIndent to ParagraphLeftIndent.

	* buffer.C (parseSingleLyXformat2Token): added compatibility code
	for paragrap_extra indent code and new token \\leftindent.
	(latexParagraphs): handle the leftindent as environment.

	* ParameterStruct.h: added leftindent support.

	* ParagraphParameters.C (leftIndent): added support functions for
	the paragraph left indent.

	* LaTeXFeatures.C: change paragraphindent to paragraphleftindent seems
	more appropriate.

2002-05-05  Dekel Tsur  <dekelts@tau.ac.il>

	* paragraph.C (isRightToLeftPar): Return false for a paragraph
	inside insetERT.

	* text.C (computeBidiTables): No bidi in insetERT.

	* BufferView_pimpl.C (setState): Fix keymap handling inside insetERT
	in RTL documents.

2002-05-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* version.C.in: pre 5

2002-05-02  José Matos  <jamatos@fep.up.pt>
	* buffer.C (makeDocBookFile): white space changes, add newline to
	command styles.
	(simpleDocBookOnePar): protect <emphasis> inside a CDATA section.

	* tabular.C (docBook): fix typo.

2002-05-03  Juergen Vigna  <jug@sad.it>

	* screen.C (drawFromTo): recalculate the rowpointer if we had a
	change in LyXText as we can not be sure it was not freed.
	(drawOneRow): remove unused code.

	* text.C (drawInset): redo the calculation of the need_break_row as
	it could have a row which was already freed.
	(draw): look at the return value of drawInset and return false if
	it also returned false.
	(paintRowText): look at the return value of draw and return false if
	it also returned false.

	* lyxtext.h: added bool return type to drawInset() and draw() so that
	if we have a change in the row so that the rowbreak has to be redone
	we abort drawing as it will be called again.

2002-05-02  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (moveCursorUpdate): make repaint if we had
	a change in the maintext also if we're inside an inset.
	(Dispatch): set the cursor again after a break line and after the
	screen has been updated as it could be we're in a different row.

	* text2.C (fixCursorAfterDelete): check to make sure we don't request
	to set the cursor behind the pargraph with > size().
	(setCursor): check also for the same paragraph when checking where
	to put the cursor if we have a NFR inset.

	* buffer.C (parseSingleLyXformat2Token): move the compatibility
	parts of layout read further up as it still was in the wrong
	position.

2002-05-02  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* screen.C (drawFromTo): change sine fullRebreak always return
	true.

	* buffer.C (parseSingleLyXformat2Token): reindent some

	* BufferView_pimpl.C (update): change since fullRebreak always
	return true.
	(Dispatch): git rid of the last hardcoded "Standard"s.

2002-05-01  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text2.[Ch] (fullRebreak): make it return void now that we always
	returned true.

2002-04-30  Juergen Vigna  <jug@sad.it>

	* buffer.C (parseSingleLyXformat2Token): reset the font before the
	ert compatibility check for "latex" layout.

2002-04-29  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C (parseSingleLyXformat2Token): Fix reading of old format
	minipages: use col% instead of p%, and also use the current font.
	(makeLaTeXFile): Fix use babel condition.
	(parseSingleLyXformat2Token): Correct font when reading old floats.

2002-04-28  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView_pimpl.C (Dispatch): Check that float type exists when
	inserting list of floats.

2002-04-25  Herbert Voss  <voss@lyx.org>

	* MenuBackend.C (expand): don't add the graphics extensions to the
	export menu

2002-04-24  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* CutAndPaste.C (SwitchLayoutsBetweenClasses): when converting a
	non-existing layout, do not complain if it was the default layout
	of the original class (bug #342)

2002-04-24  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (workAreaButtonPress): fix handling of mouse-wheel
	(workAreaButtonRelease): don't do anything if it was a mouse-wheel

2002-04-22  Angus Leeming  <a.leeming@ic.ac.uk>

	* buffer.C (getBibkeyList): If using \bibliography, return the
	option field with the reference itself. Enables us to provide natbib
	support when using \bibliography.

2002-04-23  Mike Ressler  <mike.ressler@alum.mit.edu>

	* lyxtextclass.[Ch]: add layout keyword ProvidesNatbib.

	* LaTeXFeatures.C: do not add \usepackage{natbib} to tex file if
	natbib is provided by the LaTeX class.

2002-04-23  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.[Ch]: remove use of wrong and unneeded insetSleep/
	Wakeup functions.

	* BufferView.[Ch]: remove not needed insetSleep/Wakeup functions.

2002-04-22  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxfunc.C (getStatus): LFUN_PROTECTED_SPACE is allowed in maths

	* paragraph_pimpl.C (simpleTeXSpecialChars): remove bogus
	ensuremath around textordmasculine, textordfeminine and
	textdegree.

2002-04-19  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (resizeCurrentBuffer): resize the insets before
	reinitializing the buffer otherwise row-dimensions may be wrong.
	(update): reset also the selection cursors if they do exits otherwise
	their x/y positions may be wrong.

	* text2.C (cursorDown): don't enter the inset if we came from a row
	above and are one row over the inset.

	* lyxfunc.C (dispatch): update paragraph layout after LFUN_ESCAPE when
	really leaving an inset.

2002-04-18  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (Dispatch): fixed to change layout also if one
	of the selected paragraph does not have the selected layout also if
	the last one had!

	* text2.C (setLayout): fixed bug which did not change last selected
	paragraph.

	* tabular.C (OldFormatRead): check also for \\end_inset as Lars
	changed the read and substituted \\end_float with \\end_inset!

	* BufferView_pimpl.C (cursorPrevious):
	(cursorNext): fixed to make it work with rows heigher than the work
	area without moving the cursor only the draw of the row.
	(workAreaMotionNotify): fix jumping over high rows.

2002-04-17  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxtextclass.C (Read): fix bit adding, bug discovered by Mike
	Ressler.

2002-04-16  Juergen Vigna  <jug@sad.it>

	* text2.C (setCursor): set also the irow().
	(setCursorFromCoordinates): fixed to set the (i) cursor values right!
	(cursorUp):
	(cursorDown): support for locking an inset if the x_fix value goes
	inside it. That way I can transverse insets too with cursor up/down.

	* lyxrow.h: added irow helper function same as other (i) functions.

	* BufferView_pimpl.C (cursorPrevious):
	(cursorNext): fixed for insets!

2002-04-15  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (insetDimensions): use ix/iy values for inset
	position otherwise it is wrong in some cases.

	* lyxfunc.C (dispatch): fix FINISHED UP/DOWN to handle x position
	inside the inset before the call.

2002-04-16  Angus Leeming  <a.leeming@ic.ac.uk>

	* buffer.[Ch] (getBibkeyList): make it const.

2002-04-12  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (workAreaMotionNotify): use new ix() cursor pos.

	* text2.C (getCursorX): new helper function
	(setCursor): compute also ix_
	(setCursorFromCoordinates): set also ix.

	* lyxcursor.h: added ix_ and helper functions.

	* BufferView_pimpl.C (workAreaMotionNotify): forgot to use iy().

	* buffer.C (insertStringAsLines): dont break paragraph if the this
	paragraph is inside an inset which does not permit it!

	* text.C (breakParagraph): honor keepempty flag and break the paragraph
	also with no chars on this paragraph.
	(paintRowText): only paint stuff if it's inside the workarea!

	* paragraph.C (breakParagraph): honor keepempty flag and break the
	paragraph always below not above.

	* BufferView2.C (unlockInset): update the paragraph layout on inset
	unlock as we changed paragraph in such a case.

	* lyxfind.C (LyXFind): clear the former selection if not found!

	* text2.C (insertInset): freeze Undo after setUndo so that it is not
	again called in insertChar().

	* text.C (leftMargin): return LYX_PAPER_MARGIN if this row contains
	an inset which uses the whole row!
	(rightMargin): ditto.
	(insertChar): force a rebreak if we inserted an inset!

2002-03-28  Herbert Voss  <voss@lyx.org>

	* lyxlength.[Ch]: add inBP() to get the right PS-point
	units (BigPoint). With inPixels we have rounding errors

2002-04-11  Juergen Vigna  <jug@sad.it>

	* text2.C (setCursorFromCoordinates): set iy to the right value.
	(setCursor): add check if row->previous exists!

	* buffer.C (parseSingleLyXformat2Token): reset font after read of
	an old float_type as this was the case in the old code!

	* paragraph.C (simpleTeXOnePar): fix closing of foreignlanguage tags.

	* BufferView2.C (showLockedInsetCursor): use iy
	(fitLockedInsetCursor): ditto

	* BufferView_pimpl.C (checkInset): use LyXCursor::iy for baseline of
	locked insets as there we have the right value now.

	* lyxcursor.C: added iy_ variable and iy functions to set to the
	baseline of cursor-y of the locked inset.

	* text2.C (setCursorFromCoordinates): set LyXCursor::iy.
	(setCursor): fixed for insets which need a full row.

	* text.C (rowLastPrintable): don't ignore the last space when before
	an inset which needs a full row.
	(numberOfSeparators): use rowLastPrintable and <= last to honor a space
	as last character of a row when before a inset which needs a full row.

2002-04-06  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* version.C.in: update date

	* text2.C (fullRebreak): try to always return true and see what
	happens...

2002-04-04  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* MenuBackend.C (expand): use Floating::listName

	* FloatList.C (FloatList): add listName argument to the built-in
	floats

	* Floating.[Ch]: add listName member, which is the 'List of XXX'
	text associated with the float.

2002-04-03  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* MenuBackend.C (expand): change label "Wide xxx" to "xxx (wide)".

2002-04-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* ShareContainer.h: add a couple of missing typenames.

2002-04-02  Angus Leeming  <a.leeming@ic.ac.uk>

	* lyxrc.C (getDescription): use _() correctly rather than N_().

2002-03-28  Herbert Voss  <voss@lyx.org>

	* lyxlength.C: compatibility stuff for < 1.1.6fix4 and
	"old" 1.2.0 files which use c%, l%, p% t% instead of text%, ...

2002-04-02  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyx_main.C (init): use environment variable LYX_DIR_12x instead
	of LYX_DIR_11x. Same for LYX_USERDIR_12x.

2002-03-29  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C (dispatch): add a missing fitCursor call.

	* BufferView2.C (fitLockedInsetCursor): the inset needs to know if
	it was scrolled by a cursor move, so return the bool status.

	* BufferView.C (fitCursor): return the bool flag also to the outside
	world as this is needed.

	* screen.C (toggleToggle): don't subtract the offset if it's positive.

	* BufferView_pimpl.C (workAreaButtonPress): just lock the inset don't
	call the edit() as it is not needed (and wrong) IMO.
	(workAreaButtonPress): set the screen_first variable before evt.
	unlock the inset as this may change screen_first and then we have
	a wrong y position for the click!

2002-03-28  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* MenuBackend.C (expand): another translation that I missed

2002-03-28  Juergen Vigna  <jug@sad.it>

	* screen.C (toggleToggle): fix for insettexts y_offset on drawing.

	* tabular.C (OldFormatRead): fix ert compatibility read inside cells.

2002-03-27  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxfunc.C (getStatus): return 'disabled' early for LFUN_NOACTION

	* MenuBackend.C (expand): fix export/view/update when there is no
	document open.

2002-03-27  Herbert Voss  <voss@lyx.org>

	* lengthcommon.C: change c%, l%, p% t% to col%, line%, page%
	and text%

2002-03-27  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* bufferview_funcs.C (currentState): only show paragraph number
	for is DEVEL_VERSION is set.

	* lyxfunc.C (dispatch): put warning in INFO channel

	* MenuBackend.C (expand): translate the name of floats

	* FloatList.C (FloatList): mark the float names for translation

	* converter.C (convert): use LibScriptSearch

2002-03-26  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* MenuBackend.C (defaults): fix default menu (we might as well get
	rid of it...)

2002-03-26  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxvc.C (registrer): register the file with CVS if it's in a CVS
	directory.

2002-03-25  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxvc.C: reorder includes.

2002-03-25  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C (updateScrollbar): update on buffer switch
	  properly

2002-03-19  John Levon  <moz@compsoc.man.ac.uk>

	* CutAndPaste.C: change layouts earlier on paste
	  to avoid crashing when calling getFont()

2002-03-22  Angus Leeming  <a.leeming@ic.ac.uk>

	* PrinterParams.h: #include "lyxrc.h" and remove that bloody
	irritating #error.

2002-03-21  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* WorkArea.C: remove 'Pending' debug message.

	* most files: ws cleanup

	* buffer.[Ch]: ws changes

	* Makefile.am (LYX_CONV_LIBS): remove ld -r stuff.

2002-03-21  Juergen Vigna  <jug@sad.it>

	* tabular.C (SetMultiColumn): collapse also the contents of the
	cells and set the last border right. Added a Buffer const * param.

2002-03-20  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* Makefile.am (LYX_CONV_LIBS): select libs depending on partial
	linking or not.

2002-03-19  Juergen Vigna  <jug@sad.it>

	* text2.C (clearSelection): reset also xsel_cache.

	* BufferView_pimpl.C (Dispatch): call WorkArea::haveSelection(false)
	where it needs to be called (John tells us to do so too :)
	(selectionLost): reset sel_cache.

	* WorkArea.C (event_cb): leave ret to 0 (John tells us to do so :)

2002-03-19  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* text2.C (setCursorIntern): put debuging code in INSETS channel

2002-03-19  André Pönitz <poenitz@gmx.net>

	* lyxfunc.C: tiny whitespace change

2002-03-19  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* ToolbarDefaults.C (init):
	* LyXAction.C (init):
	* commandtags.h:
	* BufferView_pimpl.C (Dispatch):
	* lyxfunc.C (dispatch): remove LFUN_DEPTH

2002-03-19  Allan Rae  <rae@lyx.org>

	* exporter.C (Export): removeAutoInsets before doing anything else.
	While I've just introduced a dependency on BufferView this really is
	the best place to clean the buffer otherwise you need to cleanup in
	a dozen places before calling export or cleanup in a dozen functions
	that export calls.

	* converter.C (runLaTeX):
	(scanLog): Better handling of removeAutoInsets and screen updates.

	* lyxfunc.C (dispatch): small whitespace changes

2002-03-18  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* WorkArea.C (C_WorkAreaEvent): return a value.
	(event_cb): return 1 if we handled the event, 0 otherwise.

	* lyx_gui.C (LyX_XErrHandler): don't abort on BadWindow

2002-03-18  Juergen Vigna  <jug@sad.it>

	* tabular.C (LeftAlreadyDrawed): fixed for multicolumn borders.
	(GetAdditionalWidth): ditto.
	(RightLine): ditto.
	(LeftLine): ditto.

	* BufferView2.C (copy): use getLyXText() so that we do it inside an
	inset if we're there actually (probably not used right now but this
	is the direction to go for unifying code).
	(paste): disable code to clear the selection.

	* BufferView_pimpl.C (workAreaButtonPress): check also for a selection
	inside an InsetText and move the check further up as it is in the
	wrong place.

	* text2.C (pasteSelection): set a selection over the pasted text.

2002-03-14  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* Makefile.am (lyx_DEPENDENCIES): Swap the order of libfrontend
	and libgraphics to build on Cygwin.

2002-03-15  Juergen Vigna  <jug@sad.it>

	* CutAndPaste.C (SwitchLayoutsBetweenClasses): fix the wrong use of
	inserting an Inset into the paragraph. I know this is not the best
	fix but we already use current_view in CutAndPaste so we will remove
	all of it's using at the same time.

	* buffer.C (sgmlError): deactivated function till it is rewritten in
	the right mode, now it can create problems.

	* paragraph.C (isLineSeparator): check if getInset returns != 0,
	before accessing it.

2002-03-14  Juergen Vigna  <jug@sad.it>

	* undo_funcs.C (textHandleUndo): do the right thing when updating
	the inset after the undo/redo.

	* text2.C (setCursor): just some testcode for #44 not ready yet.

	* undo_funcs.C (textHandleUndo): set the next() and previous()
	pointers of the paragraph to 0 before deleting otherwise we have
	problems with the Paragraph::[destructor].

	* text.C (breakParagraph): IMO we should ALWAYS force a real undo
	on a paragraph insertion.

2002-03-14  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* buffer.C (asciiParagraph): use += operator for char append to
	string.

	* paragraph.C (getFontSettings): compare >= not just >
	(highestFontInRange): ditto
	(setFont): ditto

2002-03-13  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.C: change several algorithm to be more appripriate for
	the problem domain. This is lookip in FontList and in the InsetList.

2002-03-13  André Pönitz <poenitz@gmx.net>

	* commandtags.h:
	* LyXAction.C: remove unused LFUN_MATH_MACROARG

2002-03-06  John Levon  <moz@compsoc.man.ac.uk>

	* commandtags.h:
	* LyXAction.C:
	* lyxfunc.C:
	* BufferView_pimpl.C: remove unused LFUN_CORE, LFUN_TEXT_INSET

2002-03-13  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* Painter.C (display): anon helper function, adjust code for this
	change.
	(pixmap): remove function.

	* Painter.h: remove private display variable.

	* PainterBase.[Ch]: remove dummy[123] cruft, ws changes

2002-03-13  Angus Leeming  <a.leeming@ic.ac.uk>

	* WorkArea.[Ch]: remove figinset_canvas cruft.

2002-03-12  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxtextclass.C (operator): add one item cache optimization.

	* bufferlist.h: doxy changes

	* bufferlist.C: ws changes

	* DepTable.[Ch] (ext_exist): place const in the right spot.

	* BufferView_pimpl.C (resizeCurrentBuffer): further refine when to
	call resizeInsets.
	(workAreaExpose): call resizeInsets when the with BufferView changes.
	(Dispatch): adjust for protectedBlank removal
	(specialChar): call updateInset if the insert went ok.

	* BufferView_pimpl.[Ch] (protectedBlank): remove func, use
	specialChar instead.

	* BufferView2.C (ChangeInsets): remove warning add FIXME comment

	* BufferView.h: doxy change

	* Makefile.am (INCLUDES): remove @FRONTEND_INCLUDES@

	* lyxtextclass.C (operator[]): remove non-const version
	(defaultLayout): remove non-const version

2002-03-12  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (resizeCurrentBuffer): only resize insets if we
	did resize the LyXText too.

	* buffer.C (readLyXformat2): set layout information on newly allocated
	paragraphs.

	* tabular.C (OldFormatRead): set layout information on the paragraph.

2002-03-12  José Abílio Oliveira Matos  <jamatos@novalis.fc.up.pt>

	* buffer.C (simpleDocBookOnePar): fix empty definition case for now.

2002-03-11  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (cursorPrevious): remove old cruft which is
	plainly wrong.
	(resizeCurrentBuffer): force also the insets to resize themselfes.
	(moveCursorUpdate): fixed up for InsetText.

2002-03-08  Angus Leeming  <a.leeming@ic.ac.uk>

	* commandtags.h:
	* LyXAction.C: add LFUN_TOOLTIPS_TOGGLE, "toggle-tooltips"
	* lyxfunc.C (getStatus(LFUN_TOOLTIPS_TOGGLE)): set flag based on
	value of Dialogs::tooltipsEnabled().
	(dispatch(LFUN_TOOLTIPS_TOGGLE)): emit signal Dialogs::toggleTooltips.

2002-03-08  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (updateInset): update inset inside inset also
	if it isn't inside theLockingInset().

2002-03-07  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* buffer.C (asciiParagraph): redo some of the word and line length
	handling.
	(getLists): look for Caption instead of caption.

2002-03-07  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* buffer.C (Buffer): initialize niceFile to true
	(makeLaTeXFile):
	(makeLinuxDocFile):
	(makeDocBookFile): make sure niceFile is true on exit

2002-03-06  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* buffer.C (makeLaTeXFile): escape ~ in \input@path

2002-03-07  Angus Leeming  <a.leeming@ic.ac.uk>

	* LyXSendto.C: remove.
	* LyXView.C (c-tor): clean-up Jürgen's #if 0 correctly.
	* lyx_gui.C: remove now-redundant comment.
	* ColorHandler.h: remove forward declaration of class WorkArea.
	* lyxfunc.C: remove #include "WorkArea.h".

2002-03-07  Juergen Vigna  <jug@sad.it>

	* undo_funcs.C (textHandleUndo): fix problems when the paragraph
	got moved away with the DEPM and also set the inset_owner always
	right which before could have been omitted.

2002-03-07  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* buffer.C (parseSingleLyXformat2Token): use default layout is the
	wanted layout is not found.

2002-03-07  Juergen Vigna  <jug@sad.it>

	* CutAndPaste.C (cutSelection): another layout settings forgotten.

2002-03-07  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.C (breakParagraph): use default layout not layout of
	prev paragraph.
	(Paragraph): clear ParagraphParameters.

2002-03-06  Juergen Vigna  <jug@sad.it>

	* buffer.C (parseSingleLyXformat2Token): changed "%" to "p%" as
	otherwise it would not be a valid lenght. Fixed a special case in
	the minipage compatibility read where we end the document with a
	minipage.

	* text2.C (deleteEmptyParagraphMechanism): check if old_cursor.par()
	was set as it could be 0 for InsetTexts first entry.

2002-03-06  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.C (writeFile): if layout is empty write out
	defaultLayoutName().

	* buffer.C (parseSingleLyXformat2Token): if we have a buggy .lyx
	file without named layout we set layout to defaultLayoutName().

2002-03-06  Juergen Vigna  <jug@sad.it>

	* CutAndPaste.C (copySelection): set layout for new paragraph.

	* text.C (prepareToPrint): leave ERT inset left aligned
	(leftMargin): don't indent paragraphs inside ERT insets

2002-03-06  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.C (breakParagraph): dont call clear do the work manually

	* paragraph.[Ch] (clear): remove function

2002-03-05  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.C (Paragraph): dont call clear, the work has already
	been done.

	* lyxtextclass.C (operator): assert if n is empty

	* CutAndPaste.C (cutSelection): dont call Paragraph::clear, do the
	work manually instead.

2002-03-01  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: protect selectionLost against text == 0

2002-03-05  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text.C (breakParagraph): fix a setting layout to '0' problem.

2002-03-05  José Abílio Oliveira Matos  <jamatos@novalis.fc.up.pt>

	* buffer.C (makeLinuxDocFile, makeDocBookFile): take in account the
	final location of file, for the included files, and graphics.

2002-03-05  Juergen Vigna  <jug@sad.it>

	* CutAndPaste.C (pasteSelection): fix the depth level on paste.

2002-03-04  Juergen Vigna  <jug@sad.it>

	* lyx_cb.C (getContentsOfAsciiFile): new helper function.

	* tabular.C (calculate_width_of_column_NMC): fixed to use also the
	last column of multicolumn cells.
	(SetWidthOfMulticolCell): recalculate NMC and real columns.

2002-03-04  Jose Abilio Oliveira Matos  <jamatos@novalis.fc.up.pt>

	* exporter.C (Export): for linuxdoc and docbook the buffer is a nice
	file if it doesn't go to a temporary file.

	* buffer.C (sgmlOpenTag):
	(sgmlCloseTag):  remove extra newline insertion.

2002-03-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text.C (getRowNearY): comment out debug msg

2002-03-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text2.C: first -> first_y

	* text.C (getRowNearY): add some attemts at a possible
	optimization, not working.

	* tabular.[Ch]: add BufferParams to several function so that newly
	created paragraph can be initialized to he default layotu for the
	buffers textclass.

	* tabular-old.C (ReadOld): add buf->params to call of Init

	* screen.C: rename text->first to text->first_y

	* paragraph.C (breakParagraph): always set layout in the broken
	paragraph

	* lyxtextclass.C (Read): remove lowercase
	(hasLayout): ditto
	(operator): ditto
	(delete_layout): ditto

	* lyxtext.h: rename first -> first_y

	* lyxlayout.C (Read): remove lowercase
	(name): ditto
	(setName): ditto
	(obsoleted_by): ditto

	* bufferlist.C (newFile): set layout on first paragrpah of new buffers.

	* buffer.C (insertErtContents): add params are to InsetERT
	(parseSingleLyXformat2Token): add code to check if a paragraphs
	layout really exist.
	(parseSingleLyXformat2Token): add params to several inset
	constructors
	(asciiParagraph): remove lowercase, do the layout comparisons with
	no_case

	* BufferView_pimpl.C (cursorNext): first -> first_y
	(resizeCurrentBuffer): first -> first_y
	(updateScrollbar): first -> first_y
	(scrollCB): first -> first_y
	(workAreaMotionNotify): first -> first_y
	(workAreaButtonPress): first -> first_y
	(checkInsetHit): first -> first_y
	(cursorPrevious): first -> first_y
	(cursorNext): first -> first_y
	(Dispatch): add buffer_->params to severl inset contructors

2002-03-02  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxlayout.C (Read): remove some debug info that I forgot.

	* buffer.C (makeLaTeXFile): fix calling of LaTeXFeatures, and
	clean up the code slightly.
	(makeLinuxDocFile): ditto
	(makeDocBookFile): ditto

	* text2.C: layout as string

	* text.C: layout as string

	* paragraph_pimpl.C: layout as string

	* paragraph.[Ch]: layout as string

	* lyxtextclasslist.[Ch]: layout as string

	* lyxtextclass.[Ch]: layout as string

	* lyxtext.h: layout as string

	* lyxlayout.[Ch]: layout as string

	* lyx_cb.C: layout as string

	* bufferview_funcs.C: layout as string

	* bufferparams.C: layout as string

	* buffer.C: layout as string

	* LyXView.[Ch]: layout as string

	* LaTeXFeatures.[Ch]: layout as string

	* CutAndPaste.C (SwitchLayoutsBetweenClasses): layout as string

	* BufferView_pimpl.C: change current_layout to string, remove
	lyx::layout_type.
	(Dispatch):
	(smartQuote):
	(insertInset):
	(workAreaButtonRelease): layout as string

	* BufferView2.C (unlockInset): adjust

	* vspace.C (asLatexCommand): use an explict temp variable.

2002-03-01  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am: use FRONTEND_*

2002-03-01  Juergen Vigna  <jug@sad.it>

	* tabular.C (SetWidthOfMulticolCell): changed to something better
	I hope but still work in progress.
	(recalculateMulticolumnsOfColumn): renamed function from
	recalculateMulticolCells as it is more appropriate now.
	(SetWidthOfCell): calculate multicols better.

2002-03-01  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* minibuffer.C (MiniBuffer): reset timout to 6000, as it was before.

	* lyxfunc.C (processKeySym): print sequence also if it is
	`deleted' (complete)

	* kbsequence.C (print): print sequence even if it is deleted
	(complete would be a better word, actually).

	* lyxfunc.C (dispatch): print complete options after a prefix key

	* vspace.C (asLatexCommand): rewrite in a slightly different form.

2002-03-01  Martin Vermeer  <martin.vermeer@hut.fi>

	* text2.C (setCharFont): eliminate setCharFont code duplication.

2002-03-01  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* BufferView_pimpl.C (Dispatch): remove bogus handling of
	LFUN_TABULAR_FEATURE (bug #177)

2002-02-29 ;-)  Angus Leeming  <a.leeming@ic.ac.uk>

	* Makefile.am: remove figure.h

2002-02-28  Angus Leeming  <a.leeming@ic.ac.uk>

	* Bufferview_pimpl.C:
	* CutAndPasteC:
	* LaTeX.C:
	* LyXSendto.C:
	* buffer.C:
	* bufferlist.C:
	* converter.C:
	* language.C:
	* lyxfunc.C:
	* lyxvc.C:
	* paragraph.C:
	* text.C:
	* text2.C: remove #include "lyx_gui_misc.h".

	* LaTeX.C: added #include <cstdio>

2002-02-28  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* paragraph.C (getMaxDepthAfter): new method. The maximal depth
	that the paragraph following this one can have.

	* text2.C (incDepth): use Paragraph::getMaxDepthAfter

	* vspace.C (asLatexCommand): fix bogus gcc warning

	* Makefile.am (lyx_SOURCES): remove vms_defines.h

2002-02-27  Martin Vermeer  <martin.vermeer@hut.fi>

	* text2.C (setLayout): get rid of redundant code

2002-02-26  Martin Vermeer  <martin.vermeer@hut.fi>

	* text2.C (incDepth): make sure depth cannot be increased beyond
	reasonable values.

2002-02-20  Angus Leeming  <a.leeming@ic.ac.uk>

	* lyxfunc.C (dispatch): act on LFUN_FORKS_SHOW and LFUN_FORKS_KILL.
	also call grfx::GCache::changeDisplay if the graphicsbg color changes.

	* PainterBase.h (image):
	* Painter.[Ch] (image): now accepts a grfx::GImage const & rather than
	a LyXImage const *.

2002-02-26  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView.C:
	* BufferView.h:
	* BufferView_pimpl.C:
	* BufferView_pimpl.h:
	* LaTeXFeatures.C:
	* LyXAction.C:
	* LyXView.C:
	* Makefile.am:
	* UpdateList.h:
	* UpdateList.C:
	* buffer.C:
	* figure.h:
	* figureForm.C:
	* figureForm.h:
	* figure_form.C:
	* figure_form.h:
	* lyx_cb.C:
	* lyx_gui.C:
	* lyx_gui_misc.C:
	* lyxfunc.C:
	* sp_base.h:
	* sp_ispell.h:
	* sp_pspell.h:
	* sp_spell.C: remove fig inset, and the crap house of
	  cards that follows it

2002-02-26  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am:
	* lyxserver.C:
	* os2_defines.h:
	* os2_errortable.h:
	* nt_defines.h: move .h into support/

	* vms_defines.h: remove

	* WorkArea.C: add space in debug output

	* text2.C:
	* paragraph.C:
	* buffer.C: add WITH_WARNINGS

	* vc-backend.h:
	* vc-backend.C:
	* bufferlist.C: s/retrive/retrieve/, add docs

	* vspace.h:
	* vspace.C:
	* kbmap.h:
	* lyxlength.h:
	* lyxgluelength.h:
	* length_common.h:
	* chset.h:
	* chset.C: add docs

	* lyxgui.C: add ID to X error handler

	* lyxtestclass.c: fix typo

2002-02-26  Juergen Vigna  <jug@sad.it>

	* tabular_funcs.C (write_attribute): changed so that some default
	attributes are not written at all.
	(getTokenValue): set default values before trying to read the
	value so we have the return value always set as default if we don't
	find the token we search for.

	* tabular.C (Write): write bools as bools not as strings!

2002-02-22  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (workAreaButtonPress): call edit() before calling
	insetButtonPress for HIGHLY_EDITABLE_INSETS seems saner (fix #250).

	* text.C (leftMargin): don't add an indent for paragraphs inside
	tabular cells (fix #208).

2002-02-21  José Matos  <jamatos@fep.up.pt>

	* tabular.C (docBook): fixed support for long tables.

2002-02-20  Juergen Vigna  <jug@sad.it>

	* text2.C (getFont): get the drawing font of the Inset if this
	paragraph is inside an inset (only important for InsetERT for now).

	* buffer.C (insertErtContents): use new lanugage params in ERT
	constructor.

	* CutAndPaste.C: commenting out seemingly uneeded code.

2002-02-19  Allan Rae  <rae@lyx.org>

	* BufferView2.C (removeAutoInsets): fix remaining freed memory read.
	Iterators might be simple to use but they also get invalidated.
	(removeAutoInsets): renamed saved cursor tracking variables and added
	some comments to clarify what everything does.

2002-02-18  Angus Leeming  <a.leeming@ic.ac.uk>

	* Chktex.C:
	* LaTeX.C:
	* LyXSendto.C:
	* converter.C:
	* lyx_cb.C:
	* vc-backend.C: Changes due to the renaming of support/syscall.[Ch] as
	support/systemcall.[Ch] and of class Systemcalls as class SystemCall.

	* lyxfunc.C:
	* vc-backend.h: remove #include "support/syscall.h"

	* LaTeX.C:
	* LyXSendto.C:
	* converter.C: rearrange #includes in Lars' approved fashion.

	* LyXView.[Ch]: make autosave_timeout a pointer to Timeout. Can thus
	forward declare class Timeout in the header file.

	* XFormsView.C: changes due to the above.

	* minibuffer.[Ch]: make timer and stored_timer pointers to Timeout,
	similar to LyXView.

	* commandtags.h: add LFUN_FORKS_SHOW and LFUN_FORKS_KILL to the enum.
	* LyXAction.C (init): add LFUN_FORKS_SHOW and LFUN_FORKS_KILL to items[]

2002-02-18  José Matos  <jamatos@fep.up.pt>

	* buffer.C (simpleDocBookOnePar): if paragraph style is CDATA escapes
	insets contents.

2002-02-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* a lot of small ws changes
	* add a lot of using std::XXX
	* use std construcs some places where approp.
	* use some exisint stuff from lyxfunctional where approp.
	* Make file changes to use partial linking (lets test this now...)

2002-02-16  Angus Leeming  <a.leeming@ic.ac.uk>

	* Chktex.C:
	* buffer.C:
	remove #include "support/syscontr.h" as it's redundant. Always has been.

	* Chktex.C:
	* LaTeX.C:
	* LyXSendto.C:
	* converter.C:
	* lyx_cb.C:
	* vc-backend.C:
	change Systemcalls::System to Systemcalls::Wait and
	change Systemcalls::SystemDontWait to Systemcalls::DontWait.
	No change of functionality, just reflects the stripped down Systemcalls
	class.

2002-02-16  Angus Leeming  <a.leeming@ic.ac.uk>

	* debug.[Ch]: add a GRAPHICS type to the enum.

2002-02-13  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* text.C (nextBreakPoint): use Paragraph::isLineSeparator

	* paragraph.C (isLineSeparator): call Inset::isLineSeparator if
	there is an inset.

2002-02-12  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxfunc.C (getStatus): change the rules for LFUN_INSET_TOGGLE to
	match the changes below.

	* text2.C (toggleInset): if there is not editable inset at cursor
	position, try to see if cursor is _inside_ a collapsable inset
	and close it.

2002-02-11  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxfunc.C (getStatus): handle LFUN_SWITCHBUFFER so that the
	document menu has a nice checkbox

2002-02-07  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxlength.C (asLatexString): change PW to output as percent of
	\textwidth.

	* lengthcommon.C: change '%' to 't%'

	* lyxfunc.C (dispatch): a few comments from Martin

2002-02-06  John Levon  <moz@compsoc.man.ac.uk>

	* WorkArea.h:
	* WorkArea.C:
	* BufferView_pimpl.h:
	* BufferView_pimpl.C: clear our selection when X tells us we've lost
	  the X selection.

2002-02-07  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* vspace.C (inPixels): fix compiler warning

2002-02-06  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxfunc.C (getStatus): fix status message for disabled commands.

2002-02-01  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: fix crash on close buffer
	during selection (#227)

2002-01-27  Herbert Voss  <voss@lyx.org>

	* buffer.C: link old Figure to new graphic inset

2002-01-26  Dekel Tsur  <dekelts@tau.ac.il>

	* FontLoader.C (getFontinfo): Change the latex font names in order
	to match the names of type1inst.

2002-01-21  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* WorkArea.C (WorkArea): initialize the scrollbar bounds.

	* DepTable.C (sumchange): do not evaluate end() on every iteratrion.
	(extchanged): ditto
	(ext_exist): ditto
	(remove_files_with_extension): ditto
	(remove_file): ditto
	(write): ditto

	* BufferView_pimpl.C (updateScrollbar): do the right thing if the
	document is smaller than the work area height. Do not initialize
	static variables to 0.

2002-01-20  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyx_gui.C (init): give the toolbar tooltips a normal font.

	* lyxfunc.C (getStatus): handle LFUN_LAYOUT like
	LFUN_LAYOUT_PARAGRAPHS.

	* tabular.C (GetCellFromInset): new method. Finds an inset in a
	tabular. It is possible to provide a possible cell, which will
	typically be the actcell from the corresponding insettabular

	* lyxfunc.C (getStatus): small cleanup; disable
	LFUN_LAYOUT_PARAGRAPHS in insets where forceDefaultParagraphs is
	true

2002-01-19  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* tabular.C (Validate): remove broken optimization (fixes bug #201)

	* paragraph.C (startTeXParParams):
	(endTeXParParams): new methods. The LaTeX code to
	start/end paragraph formatting
	(simpleTeXOnePar): call startTeXParParams also when paragraph is
	empty (fixes bug #200)

	* vspace.C (inPixels): adapt to the change below
	(inPixels): [later] more cleanups (remove unused variables)

	* lyxlength.C (inPixels): change to use a width and a height as
	parameter.

2002-01-18  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxlength.C (asLatexString): \pagewidth is not a LaTeX macro.
	Replaced with \paperwidth

	* DepTable.C (insert): add std:: qualifier

2002-01-18  Allan Rae  <rae@lyx.org>

	* text2.C (removeRow): add comment.  Should other refresh_?? vars be
	updated also?

	* text.C (drawInset): Turned out I didn't know enough about how
	rebreaking worked.  This fixes most of the redraw problems.  I see
	an occasional cursor trail when a line is broken now and the cursor
	placement can seem out by a few pixels also after a rebreak.

2002-01-17  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* buffer.C (parseSingleLyXformat2Token): update because minipage
	width is now a LyXLength

	* lyxlength.C (inPixels): new method, extracted from VSpace::inPixels

	* BufferView_pimpl.C (smartQuote): fix insertion of quote inset in
	math insets

2002-01-17  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C (dispatch): fixed PARAGRAPH_GOTO

	* BufferView2.C (lockInset): call edit() so that theLockingInset()
	is set correctly and the inset is updated correctly.

2002-01-17  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* CutAndPaste.C (pasteSelection): move the setInsetOwner call at
	the beginning of the loop.

2002-01-17  John Levon  <moz@compsoc.man.ac.uk>

	* lyxrc.C: improve help for use_scalable_fonts

2002-01-17  Allan Rae  <rae@lyx.org>

	* lyx_cb.C (ShowMessage): make sure we have a user and an owner.

2002-01-17  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* CutAndPaste.C (pasteSelection): when pasting multiple paragraph,
	make sure to set their inset_owner to the right value (bug #171)

2001-12-12  Ben Stanley  <bds02@uow.edu.au>

	* DepTable.h
	* DepTable.C: Implement mtime checking to reduce time spent doing
	CRCs.

2002-01-16  Juergen Vigna  <jug@sad.it>

	* tabular.C (GetAdditionalHeight): one of error fixed.

	* lyxrc.C (output): small fix in writing use_pspell.

2002-01-16  Angus Leeming  <a.leeming@ic.ac.uk>

	* sp_base.h: #include LString.h

2002-01-16  Allan Rae  <rae@lyx.org>

	* text2.C (removeRow): refresh_row needs a valid row.  Or does it?
	Can someone check this please?

	* text.C (drawInset): It was possible that p.row would be removed by
	breakAgainOneRow upsetting a few other settings.  There may be another
	small tweak possible by setting need_break_row = 0 when p.row has been
	removed but I don't know enough about the logic here.

2002-01-15  Allan Rae  <rae@lyx.org>

	* text.C (insertChar): removed conditional truism.

	* BufferView2.C (removeAutoInsets): More tweaks.
	cur_par_prev could be a stray pointer.  Check for trailing empty line
	in case last line was cur_par and only had an error inset on it.

2002-01-14  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyx_cb.C (MenuWrite): buffer->fileName is guaranteed to be
	absolute

	* vc-backend.C (most methods):
	* exporter.C (Export):
	* converter.C (convert):
	(runLaTeX):
	* LyXSendto.C (SendtoApplyCB):
	* lyxfunc.C (dispatch):
	(menuNew):
	(open):
	(doImport):
	* lyx_cb.C (AutoSave):
	(InsertAsciiFile):
	* BufferView_pimpl.C (MenuInsertLyXFile):
	* buffer.C (runChktex): use Buffer::filePath().

	* buffer.h: rename filename to filename_; rename filepath to
	filepath_ and make it private
	(filePath): new method

	* buffer.C (writeFile): use fileName()
	(getLatexName):

	* lyx_main.C (init): fix starting  of LyX when the binary is a
	link from so,ewhere else.

	* minibuffer.C: include <cctype> for isprint

2002-01-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* buffer.C (parseSingleLyXformat2Token): changes associated with the
	change of InsetMinipage::width to InsetMinipage::pageWidth to avoid the
	name clash with InsetCollapsable's width function.

2002-01-14  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lastfiles.C: include <iterator>

2002-01-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* BufferView2.C (ChangeRefsIfUnique): use lyx::count rather than
	std::count.

	* buffer.C (makeLaTeXFile): ditto.
	Also make loop operation more transparent.

2002-01-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* ToolbarDefaults.C: remove trailing comma closing namespace.

	* WorkArea.h: remove WorkArea:: from declaration of event_cb.

	* lyxfunc.[Ch]: clean-up declaration of verboseDispatch functions
	as in WorkArea.

	* trans.C (Load): comment out unused variable, allowed.

2002-01-11  Angus Leeming  <a.leeming@ic.ac.uk>

	* minibuffer.[Ch] (append_char): new method to recieve input from the
	drop-down completion browser. If a key was pressed, then recieve this
	char and append it to the existing string.
	(peek_event): modify the positioning data passed to the completion
	browser so that it can be placed above the minibuffer rather than below.
2002-01-14  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* LyXAction.C (init): alloe error-next for readonly documents.

	* BufferView2.C (ChangeRefsIfUnique): use standard version of
	count.

2002-01-13  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* bufferlist.C (readFile): create the buffer _after_ checking that
	the file exists.

	* lyxfunc.C (verboseDispatch): fix handling of arguments

	* lyxrc.C (setDefaults): do not initialize document_path to $HOME.

	* lyxrc.C: use string::erase() instead of initializing to "".


2001-11-26  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.h:
	* BufferView_pimpl.C:
	* WorkArea.h:
	* WorkArea.C:
	* text2.C: tell X when we have made a selection for copying

2002-01-13  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* BufferView_pimpl.C (MenuInsertLyXFile):
	* lyxfunc.C (menuNew):
	(open):
	(doImport): add shortcuts to directory buttons

	* BufferView_pimpl.C (workAreaButtonRelease): remove dead code (to
	open a float)

	* lyxfunc.C (setStatusMessage):
	(getStatusMessage): new methods
	(getStatus):use setStatusMessage instead of setErrorMessage
	(dispatch): when function is disabled, set error message here
	[instead of in getStatus previously]

	* BufferView_pimpl.C (workAreaButtonRelease): update
	toolbar/menubar here too.

2002-01-13  Allan Rae  <rae@lyx.org>

	* BufferView2.C (removeAutoInsets): finished off earlier fix.
	Now seems indestructible.  Remaining task is to audit all other
	code affected by deleteEmptyParagraphMechanism.  One small quirk
	left is that an empty document with an error in the preamble can
	be made to report an error but no error box appears.  I don't know
	where it goes.
	(removeAutoInsets): Improved comments.

2002-01-13  John Levon  <moz@compsoc.man.ac.uk>

	* Thesaurus.h:
	* Thesaurus.C: update for Aiksaurus 0.14

2002-01-13  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text2.C (firstParagraph): removed member function, all uses
	replaces with ownerParagraph
	(redoParagraphs): here
	(updateInset): here
	(toggleAppendix): here
	* BufferView2.C (insertErrors): here
	(setCursorFromRow): here

2002-01-13  Allan Rae  <rae@lyx.org>

	* BufferView2.C (removeAutoInsets): ensure we have a valid cursor if
	the old cursor is now invalid due to deleteEmptyParagraphMechanism.
	There is still a way to segfault this although you may have to do this
	multiple times: Have an InsetERT with an unknown command in it.
	View->DVI, move cursor between Error box and InsetERT and hit <Enter>,
	<down-arrow>, <Enter> again, View->DVI, BANG!

	* text2.C (setCursor):
	(deleteEmptyParagraphMechanism):
	* lyxtext.h (setCursor):
	(deleteEmptyParagraphMechanism): return true if the paragraph was deleted.
	Making use of the return value may help fix other bugs.

2002-01-12  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxfunc.C (dispatch): update toolbar/menubar after dispatching.

	* LyXView.C (updateMenubar): call MenuBar::update here
	(updateToolbar): but not here
	(showState): do not update toolbar/menubar

	* LyXAction.[Ch]: move isPseudoAction to the C file, since nobody
	should need to care about that.

	* lyxfunc.C (verboseDispatch): simplify a bit
	(getStatus): have a version which takes a pseudoaction, and
	another which requires a (kb_action,string).

	* LyXAction.C (retrieveActionArg): make it work also when action
	is not a pseudo-action.
	(getActionName): simplify a bit
	(helpText):

2002-01-11  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxfunc.C (verboseDispatch): new families of methods with
	several ways to specify a command and a bool to indicate whether
	the command name and shortcut should be displayed in minibuffer
	(eventually, we could extend that to a finer bitmask like
	SHORTCUT|CMDNAME|CMDRESULT, or whatever).
	(dispatch): the pristine dispatch command which just, well,
	dispatchs! Note it still sets its result to minibuffer; I'm not
	sure we want that.

	* lyxfunc.h: remove setHintMessage

	* vc-backend.C: use LFUN_MENURELOAD instead of "buffer-reload"

2002-01-10  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* BufferView_pimpl.C (specialChar): delete new inset if we have
	not been able to insert it.

	* kbmap.C: revert to using int instead of kb_action, since all we
	are dealing with is pseudo-actions.

	* LyXAction.C (searchActionArg): change to return int instead of
	kb_action, since the result is a pseudoaction.

2002-01-12  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C (insertErtContents): Fix (partially) the font bug.

2002-01-11  Angus Leeming  <a.leeming@ic.ac.uk>

	* BufferView2.C (ChangeRefsIfUnique): use the HP version of std::count
	as the other one is broken on my machine!

2002-01-10  Martin Vermeer  <martin.vermeer@hut.fi>

	* commandtags.h:
	* LyXAction.C: two new LFUNS, LFUN_FRAK and LFUN_ITAL.

2002-01-10  Angus Leeming  <a.leeming@ic.ac.uk>

	* lyxrc.[Ch]: change names and descriptions of popup font variables to
	reflect their actual use. Provide compatibility code for older lyxrc
	files.

	* lyx_gui.C (init): revoke change of 2002-01-07 of popup font style to
	FL_NORMAL_STYLE.
	change names of popup font variables in line with the changes to lyxrc.C

2002-01-10  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* buffer.C (asciiParagraph): avoid outputing a word twice after
	an inset.

	* lyxrc.C (getDescription): document that document_path and
	template_path can be empty.

2002-01-09  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* LaTeXFeatures.C (getMacros):
	* buffer.C (validate): rename feature "amsstyle" to "amsmath"

	* buffer.C (makeLaTeXFile): remove test for "amsstyle" from here.

	* LaTeXFeatures.C (useFloat): require "float" here instead of in
	getPackages.
	(getPackages): rename feature "floats" to "float". Use an array to
	iterate over 'simple' features (i.e. just a \usepackage). Add
	handling of "amsmath" (renamed from "amsstyle").

2001-12-29  Michael A. Koziarski  <michael@koziarski.org>

	* LaTeXFeatures.C (require): Prevent duplicate entries in the
	features list.

2002-01-08  Angus Leeming  <a.leeming@ic.ac.uk>

	* FuncStatus.C: small compile fix for DEC cxx. Doesn't like
	FuncStaus::FuncStatus & FuncStaus::some_method().

2002-01-08  Martin Vermeer  <martin.vermeer@hut.fi>

	* FuncStatus.[Ch]: new files. This is a rewrite as a proper class
	of the func_satus stuff. Edited and massaged in various ways by
	JMarc.

	* lyxfunc.C (getStatus): use FuncStatus

2002-01-08  Juergen Vigna  <jug@sad.it>

	* text.C (nextBreakPoint): use function Inset::isChar().

	* paragraph.C (TeXOnePar): use function
	Inset::forceDefaultParagraphs.

	* buffer.C (latexParagraphs): use function
	Inset::forceDefaultParagraphs.

2002-01-07  Angus Leeming  <a.leeming@ic.ac.uk>

	* lyx_gui.C (init): set the style of the menu popups to
	FL_BOLD_STYLE, thereby fixing bugzilla bug #32.

2002-01-07  Juergen Vigna  <jug@sad.it>

	* text.C (setHeightOfRow): small fix
	(prepareToPrint): don't look at alignment if we don't have the place
	for doing it.

2002-01-07  Angus Leeming  <a.leeming@ic.ac.uk>

	* box.C: New file. Move the Box methods and functions out of box.h,
	following Lars' suggestion.

2002-01-07  Angus Leeming  <a.leeming@ic.ac.uk>

	* box.h: #include "support/LOstream.h", needed for inlined function.

	* lyxtextclass.C:
	* lyxtextclasslist.C: added some using std declarations.

2002-01-06  John Levon  <moz@compsoc.man.ac.uk>

	* box.h: make signed dimensions to allow insets wider than
	  the screen (bug #162)

	* BufferView_pimpl.C: add some insetHit debug

2002-01-05  John Levon  <moz@compsoc.man.ac.uk>

	* vc-backend.C: add FIXME

2002-01-03  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxfunc.C (getStatus): enable code for showing math font status
	in toolbar/menu.

2002-01-07  Juergen Vigna  <jug@sad.it>

	* text.C (nextBreakPoint): removed debug output not needed anymore.

2002-01-06  Juergen Vigna  <jug@sad.it>

	* text.C (nextBreakPoint): fixed up this function we had this bug
	since ever but now hopefully we break row better.
	(insertChar): we have to check if an inset is the next char as it
	could now happen that a large inset is causing a break.

2002-01-05  Juergen Vigna  <jug@sad.it>

	* BufferView2.C (showLockedInsetCursor): don't draw the inset cursor
	if it doesn't like to be drawed.

2002-01-04  Juergen Vigna  <jug@sad.it>

	* BufferView2.C (lockInset): forgot to set a cursor.

	* lyxfunc.C (dispatch): add a finishUndo() in LFUN_ESCAPE.

2002-01-03  Martin Vermeer  <martin.vermeer@hut.fi>

	* FormMathsPanel.C:
	* FormMathsPanel.h
	* MathsSymbols.C:
	* form_maths_panel.C:
	* form_maths_panel.h:
	* form_maths_panel.fd: implemented sub- and super- buttons in math
	panel.

	* lyx_main.C: Revised hardwired bindings to allow original _ and ^
	(or ^ space) to be used as in TeX (req'd by André).

	* lyxfunc.C: Allow ^ and _ again to be used both as
	super/subscript (mathed) and as themselves (in text).

2002-01-03  Allan Rae  <rae@lyx.org>

	* LyXView.C (updateWindowTitle): Setup a short icon title of either
	"LyX" or the filename of the current buffer if it has one.  This is a
	modified form of John Levon's patch.

	* XFormsView.C (setWindowTitle): also set icon title.

	* LyXView.h (setWindowTitle): signature changed.
	* XFormsView.h (setWindowTitle): ditto.

2002-01-02  Juergen Vigna  <jug@sad.it>

	* tabular.C (AppendColumn): hopefully fixed this memory access problem.

2001-12-28  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* screen.C (topCursorVisible): introduce a temp var for
	text->cursor.row(), handle the case where this row is null. (kindo
	hachish)

	* text2.C (setCursor): add a couple of asserts.

	* paragraph.h (inset_iterator): add -> operator

	* paragraph.[Ch] (autoDeleteInsets): remove member function

	* BufferView2.C (removeAutoInsets): rewrite to handle the old
	cursor pos correctly and handle inset deletion by itself.
	(insertErrors): move iterator declaration out of for expression

	* lyxtextclass.C: add <algorithm>

	* Makefile.am: added the new files to sources, removed layout.C

	* layout.C: removed file

	* layout.h: remove LYX_DUMMY_LAYOUT

	* lyxtextclasslist.C (NumberOfLayout): do not special case dummy
	layout.

	* lyxlayout.[Ch]:
	* lyxtextclass.[Ch]:
	* lyxtextclasslist.[Ch]: new files

	* include order changes to a lot of files, also changes because of
	the six new files.

2001-12-27  Juergen Vigna  <jug@sad.it>

	* buffer.C (asciiParagraph): more fixes.

	* tabular.C (ascii): make ascii export support export of only the
	data separated by a column-delimiter.
	(ascii): better support for ascii export.

	* buffer.C (asciiParagraph): rewrote to hopefully work as expected!

2001-12-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* tabular_funcs.C: use a "using std::getline" instead of the
	previous fix from Angus (necessary for cxx + lyxstring)

2001-12-24  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (tripleClick): fixed for InsetText.

	* buffer.C (parseSingleLyXformat2Token): fixed 2 compatibility read
	problems. First check a minipage also if we have some ert-contents
	(not only on par->size(), second set the right depth of the paragraph
	on the relink to the root-paragraph-list!

	* undo_funcs.C (textHandleUndo): fixed a stupid earlier wrong fix
	which then did not anymore update the main paragraphs on undo/redo!

2001-12-21  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* lyxfunc.C (getStatus): use func_status::toggle to simplify the
	code. Support all font-changing funcs (even those which are not in
	menu currently). Support for reporting font settings in
	mathed (disabled until Andre provides a function on mathed's side).

	* func_status.h (toggle): small helper function to set toggle
	state on a flag.

2001-12-21  Angus Leeming  <a.leeming@ic.ac.uk>

	* tabular_funcs.C: getline -> std::getline

2001-12-21  Juergen Vigna  <jug@sad.it>

	* undo_funcs.C (textHandleUndo): fixed a case where tmppar3 is
	accessed and could be 0 (I couldn't generate this but it seems
	Michael could!).

2001-12-20  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* tabular_funcs.C: add LIstream.h, move write_attribute to..
	* tabular_funcs.h: here and include iosfwd

2001-12-20  Juergen Vigna  <jug@sad.it>

	* undo_funcs.C (textHandleUndo): fixed crash when undo_cursor not
	inside inset but undo_par was.

2001-12-19  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* Thesaurus.C: always include <config.h> in sources.

	* Painter.h:
	* lyxlookup.h:
	* box.h: do not include <config.h> in header files

	* text.C (paintLastRow): remove unused variable

	* text.C (transformChar):
	(insertChar):
	* tabular-old.C (getTokenValue): use IsDigit instead of isdigit.

	* Painter.C (text):
	* font.C (width): rewrite to use uppercase() instead of
	islower/toupper.

	* lyxfind.C (IsStringInText): use uppercase instead of toupper.

2001-12-12  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfind.C: clean up of find failure position change

2001-12-20  Juergen Vigna  <jug@sad.it>

	* Makefile.am (lyx_SOURCES): added tabular_funcs.[hC].

	* tabular.C (isValidRow): added to check if we're in a LT-h/f row.
	(TeXRow): added to LaTeX a single tabular row.
	(TeXLongtableHeaderFooter): added to output LT-h/f data.
	(Latex): simplified and finally good LT-h/f support.
	(various_functions): just small adaptions for LT-h/f support.

	* tabular_funcs.[hC]: added and moved here all not classfunctions
	of LyXTabular.

2001-12-19  Juergen Vigna  <jug@sad.it>

	* tabular.[Ch]: better support for longtabular options (not finished
	yet!)

2001-12-18  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* text.C (paintLastRow): use the label font instead of the font of
	the last character to compute the size of *_BOX. This makes more
	sense and avoids a crash with empty paragraphs.
	Use Painter::rectangle to draw EMPTY_BOX.

2001-12-19  Juergen Vigna  <jug@sad.it>

	* undo_funcs.C (textHandleUndo): fixed setting of inset_owner of
	the paragraphs if the replaced paragraph is not the first one!
	Tried to delete not used paragraphs but does not work yet so for
	now it's inside #ifdef's and by default off!

2001-12-18  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* MenuBackend.C: include "lyx_main.h" instead of declaring
	lastfiles (actually was declared as LastFiles* instead of a
	scoped_ptr).

2001-12-17  Juergen Vigna  <jug@sad.it>

	* tabular.C (AppendColumn): applied John's fix

2001-12-15  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView.h:
	* BufferView.C:
	* BufferView_pimpl.h:
	* BufferView_pimpl.C: cleanup and fix of checkInsetHit().

	* Makefile.am:
	* box.h: new start of class for above

	* lyxfunc.C: ignore space-only minibuffer dispatches.
	  Show the command name when it doesn't exist

	* minibuffer.C: don't add empty lines to the history

	* minibuffer.C: add a space on dropdown completion

2001-12-14  John Levon  <moz@compsoc.man.ac.uk>

	* text.C: fix line above/below drawing in insets

2001-12-15  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxlength.C (LyXLength): Initialize private variables.

2001-12-15  Dekel Tsur  <dekelts@tau.ac.il>

	* CutAndPaste.C (SwitchLayoutsBetweenClasses): Use buffer language
	when inserting error insets.

2001-12-13  Juergen Vigna  <jug@sad.it>

	* undo_funcs.C (textRedo/Undo): fixed as the first paragraph was
	actually sometimes the before-paragraph.
	(setUndo): don't clear the redostack if we're not actually undoing!

2001-12-06  Juergen Vigna  <jug@sad.it>

	* undo_funcs.C (textHandleUndo): well after John's hint I got here
	and fixed redoing of main paragraph, so we can use it now ;)

	* text2.C (redoParagraphs): fixed a crash when having only 1 row!

2001-12-13  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* undo_funcs.C (textHandleUndo): undo undo leak fix below, as per
	Juergen's request

2001-12-13  André Pönitz <poenitz@gmx.net>

	* undostack.[Ch]:
	* undo_func.C: minor cleanup

2001-12-12  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* FontLoader.C (getFontinfo): only use symbol fonts with encoding
	-adobe-fontspecific. At least Mandrake and Redhat have a symbol
	font in urw-fonts package which is marked as -urw-fontspecific and
	does not work (incidentally, changing the encoding in the
	fonts.dir of this package to -adobe-fontspecific fixes the
	problem).

	* undo_funcs.C (textHandleUndo): fix leak in undo, but now there
	is a crash when undoing first paragraph (Juergen, please take a
	look). THis does not mean the undo fix is wrong, just that it
	uncovers problems.

	* text2.C (ownerParagraph): let the (int,Paragraph*) version call
	the (Paragraph*) version when needed instead of duplicating the
	code.

	* text.C (workWidth): use Inset::parOwner to find out where the
	inset has been inserted. This is a huge performance gain for large
	documents with lots of insets. If Inset::parOwner is not set, fall
	back on the brute force method

	* paragraph_pimpl.C (insertInset):
	* paragraph.C (Paragraph):
	(cutIntoMinibuffer): set parOwner of insets when
	inserting/removing them

	* lyxtext.h: add short comment on deleteEmptyParagraphMechanism

2001-12-12  Martin Vermeer  <martin.vermeer@hut.fi>

	* commandtags.h:
	* LyXAction.C:
	* lyx_main.C:
	* lyxfunc.C:
	* mathed/formulabase.C:
	* mathed/math_cursor.[Ch]:
	make sub/superscript into functions LFUN_SUB/SUPERSCRIPT.


2001-12-12  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxlength.[Ch] (operator!=): new function

2001-12-12  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* text.C (workWidth): use Inset::parOwner to find out where the
	inset has been inserted. This is a huge performance gain for large
	documents with lots of insets. If Inset::parOwner is not set, fall
	back on the brute force method

	* paragraph_pimpl.C (insertInset):
	* paragraph.C (Paragraph):
	(cutIntoMinibuffer): set parOwner of insets when
	inserting/removing them

	* lyxtext.h: add short comment on deleteEmptyParagraphMechanism

2001-12-10  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* tabular-old.C (getTokenValue):
	* tabular.C (getTokenValue):
	(write_attribute): new versions for LyXLength
	(everywhere): adjust the use of widths

	* tabular.h: change the type of widths from string to LyXLength

2001-12-11  Ben Stanley <bds02@uow.edu.au>

	* paragraph.C: fixed missing line number count when exporting
	Environments to LaTeX file

	* buffer.C: added informational message for checking line numbers.

2001-12-11  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* text2.C (deleteEmptyParagraphMechanism): if there is only one
	paragraph, do the 'double space' part, but not the 'empty
	paragraph' one.

	* text.C (workWidth): small optimization
	(getLengthMarkerHeight): use minimal size for negative lengths.

2001-12-11  Dekel Tsur  <dekelts@tau.ac.il>

	* lyxfont.C (GUIFamilyNames): Fix GUIFamilyNames array

	* FontLoader.C (getFontinfo): Use "*-eufrak-medium"

2001-12-11  André Pönitz <poenitz@gmx.net>

	* FontLoader.C:
	* lyxfont.[Ch]: support for fraktur font used by \mathfrak

2001-12-06  John Levon  <moz@compsoc.man.ac.uk>

	* text2.C: keep selection on a setFont()

2001-12-06  John Levon  <moz@compsoc.man.ac.uk>

	* lyx_cb.C: another bv->text misuse, from insert label

2001-12-03  John Levon  <moz@compsoc.man.ac.uk>

	* kbsequence.h:
	* kbsequence.C: re-instate nmodifier mask

2001-12-12  Angus Leeming  <a.leeming@ic.ac.uk>

	* lyx_main.h: make lyxGUI private.

2001-12-06  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfind.C: place the cursor correctly on failed search

2001-12-09  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* text.C (getLengthMarkerHeight): for small heights, the arrows
	are not always on top/bottom of the text
	(drawLengthMarker): smaller arrows; take the left margin in
	account; draw also vfills.
	(paintFirstRow):
	(paintLastRow): remove special code for vfill and standard spaces,
	since everything is handled in drawLengthMarker now.

2001-12-08  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* buffer.C (insertErtContents): try to handle font and language
	interaction a bit better.g

	* ColorHandler.C (updateColor): change the hash to cover the whole
	LColor enum, ws cleanup
	(getGCLinepars): ditto
	(getGCLinepars): only lookup in the linecache once.

2001-12-07  Dekel Tsur  <dekelts@tau.ac.il>

	* iterators.C (operator++): Make the iterator more robust

	* BufferView2.C (removeAutoInsets): Use paragraph iterators
	(John's patch)
	* CutAndPaste.C (SwitchLayoutsBetweenClasses): Ditto

2001-12-05  John Levon  <moz@compsoc.man.ac.uk>

	* lyxtext.h:
	* text.C: better added space drawing

2001-12-05  John Levon  <moz@compsoc.man.ac.uk>

	* LyXView.C:
	* BufferView2.C: fix layout combo update on inset unlock

2001-12-05  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am: don't compile unused files

2001-12-05  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfunc.C:
	* commandtags.h:
	* LyXAction.C: remove old LFUN_LAYOUTNO

2001-12-05  John Levon  <moz@compsoc.man.ac.uk>

	* paragraph_pimpl.h:
	* paragraph_pimpl.C: isTextAt() doesn't need font param

2001-12-05  John Levon  <moz@compsoc.man.ac.uk>

	* lyxlex.h:
	* lyxlex.C: little cleanup

2001-12-05  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: fix insertAscii for insets

2001-12-05  Juergen Vigna  <jug@sad.it>

	* CutAndPaste.C (pasteSelection): remove not allowed insets/chars and
	set the right font on the "multi" paragraph paste!

2001-12-05  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* trans_decl.h:
	* trans_mgr.[Ch]:
	* trans.[Ch]:
	* lyxgluelength.C:
	* lyxlength.C: remove out-commented code.

	* BufferView_pimpl:
	* CutAndPaste.C:
	* DepTable.C:
	* buffer.C:
	* chset.C:
	* lastfiles.C:
	* lyxlex.C:
	* lyxlex_pimpl.C:
	* lyxserver.C:
	* screen.C:
	* tabular-old.C:
	* tabular.C:
	* text.C:
	* trans_mgr.C:
	* vc-backend.C: change "while(" to "while ("

	* lyxlength.[Ch]: add zero function to check if length is zero or
	not
	* lyxgluelength.C: use it

2001-12-05  Allan Rae  <rae@lyx.org>

	* lyxlength.C: Attempted a fix for the abs(int) header selection.
	Works for 2.95.3, from what I understand of Garst's reports this should
	work for other g++ versions.  We're screwed if the abs(int) definition
	changed between bugfix releases of gcc.

2001-12-04  John Levon  <moz@compsoc.man.ac.uk>

	* text.C: fix chapter label offset !

2001-12-04  John Levon  <moz@compsoc.man.ac.uk>

	* lyxtext.h:
	* text.C: fix hfill at end of line, clean up

2001-12-04  Juergen Vigna  <jug@sad.it>

	* undo_funcs.C (textHandleUndo): added a call to inset->update() so
	that we force an update of the inset and it's owners if neccessary.

2001-12-03  Juergen Vigna  <jug@sad.it>

	* text.C (rowLast): simplified code

2001-12-03  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfunc.C: fix show options on timeout

2001-12-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* screen.C (topCursorVisible): scroll half a page when the cursor
	reached top of bottom of screen

2001-12-02  John Levon  <moz@compsoc.man.ac.uk>

	* minibuffer.C: deactivate on loss of focus

2001-12-02  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* vspace.[Ch] (operator!=): add operator.

2001-12-01  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: refuse to open an inset when
	there's a selection.

2001-11-30  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: allow to click on RHS of full row insets

2001-11-30  Juergen Vigna  <jug@sad.it>

	* tabular.C (LyXTabular): add a same_id to set the same id's in the
	insets for undo reasons.

2001-11-28  André Pönitz <poenitz@gmx.net>

	* vspace.[Ch]: cosmetical changes

2001-11-26  John Levon  <moz@compsoc.man.ac.uk>

	* LyXAction.h:
	* LyXAction.C:
	* lyxfunc.h:
	* lyxfunc.C:
	* kbmap.h:
	* kbmap.C:
	* lyxrc.C:
	* kbsequence.h:
	* kbsequence.C: part re-write of old kb code

	* Painter.C:
	* WorkArea.C: remove Lgb_bug_find_hack

2001-11-30  José Matos <jamatos@fep.up.pt>

	* buffer.C (makeDocBookFile): add a comment to point a hack.
	(simpleDocBookOnePar): changed a PAR::META_INSET to isInset().
	Fixed a double write of labels.

2001-11-29 Ben Stanley <bds02@uow.edu.au>

	* LaTeX.C:
	* LaTeX.h Fixed bug in LaTeX class where it would not
	re-run latex if no depfiles were changed, but the .dvi was removed.

2001-11-28  André Pönitz <poenitz@gmx.net>

	* all the files from the change on 2001/11/26:
	use lyx::layout_type instead of LyXTextClass::size_type
	use lyx::textclass_type instead of LyXTextClassList::size_type

2001-11-29  Juergen Vigna  <jug@sad.it>

	* text.C: added support for paragraph::isFreeSpacing()

	* buffer.C: same as above

	* paragraph.h: inserted isFreeSpacing() function to enable
	FreeSpacing inside InsetERT.

	* CutAndPaste.C (cutSelection/copySelection): set the inset_owner
	of the paragraph's in the cut/copy buffer to 0!

	* text2.C (removeRow): remove the assert as it can!

	* lyxtext.h: added helper function firstRow returning firstrow and
	made firstrow private again.

	* BufferView2.C (lockInset): don't relock if we're already locked!

	* text2.C (deleteEmptyParagraphMechanism): don't do anything if it's
	the only paragraph.
	(removeRow): added Assert::(firstrow)

	* debug.C: forgot to add INSETTEXT here.

2001-11-28  Juergen Vigna  <jug@sad.it>

	* sp_spell.C (initialize): changed error text to more general
	spellchecker command use (not only ispell!)

	* bufferlist.C (qwriteAll): fixed "Cancel" button handling!

	* debug.h: inserted one for debugging INSETTEXT (and InsetTabular)!

2001-11-26  John Levon  <moz@compsoc.man.ac.uk>

	* vspace.C: initialise lyxgluelength on failure

2001-11-28  Allan Rae  <rae@lyx.org>

	* text.C (paintLastRow): g++-2.95.3 and others don't like variable
	declaration & definition that looks like a function declaration.

2001-11-27  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* BufferView2.C (copy):
	(copyEnvironment): do not clear the selection when doing a copy.

	* text.C (paintFirstRow): compilation fix

2001-11-27  Ben Stanley  <bds02@uow.edu.au>

	* tabular.C (Latex): correct line count when writing latex.

2001-11-27  John Levon  <moz@compsoc.man.ac.uk>

	* paragraph_pimpl.h:
	* paragraph_pimpl.C: tidy, and fix font-change in "LaTeX"
	  bug a bit

2001-11-26  John Levon  <moz@compsoc.man.ac.uk>

	* text.C:
	* LColor.h:
	* LColor.C: change vfillline->added_space

	* text.C: add markers and text for added space

	* vspace.C: fix comment

2001-11-28  André Pönitz <poenitz@gmx.net>

	* paragraph.C: whitespace changes
	* all the other files from the change on 2001/11/26:
	change *::pos_type into lyx::pos_type

2001-11-27  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C (parseSingleLyXformat2Token): Set the language to the
	language of the document when inserting error insets.

2001-11-26  André Pönitz <poenitz@gmx.net>

	* BufferView_pimpl.[Ch]:
	*	CutAndPaste.C:
	* buffer.[Ch]:
	* lyxcursor.[Ch]:
	* lyxfind.C:
	* lyxfunc.C:
	* lyxrow.[Ch]:
	* paragraph.[Ch]:
	* paragraph_pimpl.[Ch]:
	* sp_spell.C:
	* text.C:
	* text2.C: reduce header dependencies, introduce type for positions

2001-11-23  John Levon  <moz@compsoc.man.ac.uk>

	* <various>: change to use Alert.h

2001-11-25  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C (parseSingleLyXformat2Token): Insert an error inset
	when encountering an unknown token.
	(readLyXformat2): Show an error message if there were unknown tokens.

2001-11-22  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView2.C:
	* BufferView_pimpl.C:
	* buffer.C:
	* paragraph.h:
	* text.C:
	* text2.C: use par->isInset()

2001-11-23  John Levon  <moz@compsoc.man.ac.uk>

	* paragraph_pimpl.h:
	* paragraph_pimpl.C: cleanup

2001-11-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* text2.C (removeRow):
	* text.C (setHeightOfRow): remove useless (and costly) call to
	getRow.

2001-11-20  Allan Rae  <rae@lyx.org>

	* paragraph.C (insertFromMinibuffer): Fix for inset related crashes.
	Now need Inset*::checkInsertChar() to return true for appropriate
	cases so that the characters in the minibuffer will actually be
	inserted.

2001-11-15  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text.C: change the order of the includes.
	(workWidth): initialize it at once.
	(workWidth): make maxw unsigned
	(setHeightOfRow): remove unused variable (inset)
	(selectSelectedWord): remove unused variable (inset)
	(paintRowText): fix drawing of hfill characters, and clean up a bit.

2001-11-14  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxserver.C (emergencyCleanup): do not try to close pipes if
	server is not running.
	(openConnection):
	(closeConnection): add debug info when server is disabled.

	* ColorHandler.C (getGCForeground): send debug message to GUI
	channel.

	* lyxrc.C: do not include lyxserver.h and tex-strings.h.

	* kbmap.C (bind): modify because return conventions of
	kb_sequence::parse have changed.

	* kbsequence.C (parse): only ignore spaces and not any stupid
	control character. This avoids tests like s[i] <= ' ', which are
	guaranteed to fail with 8bit characters and signed chars.
	Change return code to string::npos when there have been no error
	(0 was a bad idea when error is at first character)

2001-11-14  José Matos  <jamatos@fep.up.pt>

	* buffer.h:
	* buffer.C (simpleDocBookOnePar): removed unused argument.

2001-11-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* text.C (selectNextWordToSpellcheck): do not test explicitely for
	insets which are part of a word. Paragraph::isLetter takes care of
	that now. Use Paragraph::isInset to identify insets.
	(selectSelectedWord): do not test for hyphenation break.

	* BufferView_pimpl.C (smartQuote): use Inset::isSpace, so
	that protected spaces are considered as spaces.

	* paragraph.C (isLetter): cleanup the code for ispell extras; use
	Inset::isLetter.

2001-11-12  John Levon  <moz@compsoc.man.ac.uk>

	* lyxserver.h:
	* lyxserver.C: fix it. and small cleanup.

2001-11-07  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: use inline helpers

	* LaTeXFeatures.h:
	* LaTeXFeatures.C: fix typos

	* Spacing.h:
	* Spacing.C: move spacing_string into class

	* ToolbarDefaults.C: move stuff into namespace anon

	* layout.h: update enum

	* lyxfunc.C: use better debug

	* minibuffer.h: fix typo

	* debug.h:
	* debug.C:
	* WorkArea.C: add and use Debug::WORKAREA

	* lyxtext.h:
	* text.C:
	* text2.C: code re-organisation, inline helpers

2001-11-09  Michael A. Koziarski <michael@koziarski.org>

	* Layout.C: replaced a few cases of std::vector.size() == 0 with
	std::vector.empty().

2001-11-09  Allan Rae  <rae@lyx.org>

	* paragraph.C (TeXOnePar): remove old, now-irrelevent comments about
	'\n's after tables.  Tabular and ERT inset work now makes this no
	longer necessary.

2001-11-07  John Levon  <moz@compsoc.man.ac.uk>

	* minibuffer.h:
	* minibuffer.C: fix crash, improve drop-down completion

2001-11-06  John Levon  <moz@compsoc.man.ac.uk>

	* lyxserver.h:
	* lyxserver.C: invalidate fd's when doing endPipe()

2001-11-08  José Matos  <jamatos@fep.up.pt>

	* buffer.C (sgmlLineBreak): renamed from linux_doc_line_break.
	(simpleDocBookOnePar): removed code made obsolete by the new inset code.

	* paragraph.h:
	* paragraph.C (sgmlConvertChar): renamed from linuxDocConvertChar.

2001-11-07  José Matos  <jamatos@fep.up.pt>

	* buffer.h:
	* buffer.C (sgmlError): linuxDocError renamed, and made public, added
	const qualifier.

	* buffer.C (sgmlOpenTag):
	* buffer.C (sgmlCloseTag): removed debug info.

	* buffer.h (sgmlOpenTag):
	* buffer.h (sgmlCloseTag): made public.

2001-11-07  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* buffer.C (saveParamsAsDefaults):
	* lyx_cb.C (MenuLayoutSave): remove

	* LyXAction.C (init):
	* commandtags.h:
	* lyxfunc.C (dispatch): remove LFUN_LAYOUT_SAVE_DEFAULT.

2001-11-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* buffer.C (setPaperStuff): removed from here...

	* bufferparams.C (setPaperStuff): ... and moved there.

2001-11-03  John Levon  <moz@compsoc.man.ac.uk>

	* minibuffer.h:
	* minibuffer.C:
	* XFormsView.C: add support for drop-down completion

2001-11-03  Dekel Tsur  <dekelts@tau.ac.il>

	* paragraph.C (TeXOnePar): Correct placement of \selectlanguage
	commands.

2001-10-31  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* gettext.C (locale_init): set LC_NUMERIC to "C" even if nls is
	disabled.

2001-10-30  John Levon  <moz@compsoc.man.ac.uk>

	* lyx_main.C: change ref to known bugs

2001-10-30  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* LaTeXFeatures.C (getPackages): Use lyxskak.sty now instead
	to work around older babel problems.

2001-10-28  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* LaTeXFeatures.[hC]: Now uses skak.sty for chess material.

2001-10-24  Juergen Vigna  <jug@sad.it>

	* tabular-old.C (ReadOld): below variable changes reflected.

	* tabular.[Ch]: added ltType struct for longtable header/footer
	defines and changed all instances where they are used. Added
	future support for double top/bottom rows.

2001-10-24  José Matos  <jamatos@fep.up.pt>

	* buffer.h (docbookHandleCaption):
	* buffer.C (docbookHandleCaption): removed unused function.
	(makeDocBookFile): moved docbook supported version to v4.1.

2001-10-24  José Matos  <jamatos@fep.up.pt>

	* tabular.h:
	* tabular.C (docbookRow): new function to export docbook code of a row.
	(DocBook): now honors the longtable flags.

2001-10-23  José Matos  <jamatos@fep.up.pt>

	* LaTeXFeatures.h:
	* LaTeXFeatures.C (getLyXSGMLEntities): new function to get the name
	of the lyx defined sgml entities used in a docbook/linuxdoc document.

	* buffer.C (makeLinuxDocFile):
	(makeDocBookFile): reworked the preamble, more clean, and with
	support for lyx defined entities. Changed the document declaration
	to be more XML friendly.

	* tabular.C (DocBook): removed / terminator to be more SGML friendly,
	if we need to output XML that should be done with a filter.

2001-10-22  Juergen Vigna  <jug@sad.it>

	* sp_pspell.h (class PSpell): add alive function needed in the
	controller to see if the spellchecker could be started.

2001-10-22  Juergen Vigna  <jug@sad.it>

	* buffer.C (insertStringAsLines): modify the font for inserting
	chars in certain conditions by calling checkInsertChar(font).

2001-10-19  Juergen Vigna  <jug@sad.it>

	* text.C (workWidth): use getRow instead of wrong algorithm.
	(setHeightOfRow): fix for MARGIN_RIGHT_ADDRESS_BOX

2001-10-19  John Levon  <moz@compsoc.man.ac.uk>

	* lyxserver.h:
	* lyxserver.C:
	* lyx_main.h:
	* lyx_main.C: add emergencyCleanup (remove pipes on crash)

2001-10-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* text.C (workWidth): do not search for the exact row when
	margintype is not MARGIN_RIGHT_ADDRESS_BOX. This is an
	optimization for big documents.

2001-10-18  Juergen Vigna  <jug@sad.it>

	* text.C (workWidth): new function with added Inset * parameter.

2001-10-16  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* text2.C (setCursorFromCoordinates): use Paragraph::size_type

	* lyxtext.h: change type of refresh_pos to Paragraph::size_type;
	change return type of getColumnNearX.


	* text.C (changeRegionCase): use uppercase/lowercase instead of
	toupper/tolower.
	(leftMargin):
	(rightMargin): simplify code by factoring out the uses of
	textclasslist.
	(labelFill):
	(numberOfHfills):
	(setHeightOfRow):
	(appendParagraph): use Paragraph::size_type

2001-10-15  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* vspace.C (asLatexString): add a missing break

2001-10-15  Herbert Voss  <voss@perce.de>

	* vspace.C (asLatexString): fix bug in output of string for l% and p%.

2001-10-11  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxfunc.C (getStatus): disable thesaurus when aiksaurus library
	is not available.

2001-10-10  André Pönitz <poenitz@gmx.net>

	* lyxfunc.C: removed greek_kb_flag.

2001-10-10  Herbert Voss  <voss@perce.de>

	* lyx_main.C: delete global string help_lyxdir.

2001-10-09  Herbert Voss  <voss@perce.de>

	* commandtags.h (kb_action): added LFUN_HELP_TEXINFO.

	* LyXAction.C (init): added LFUN_HELP_TEXINFO to items array.

	* lyx_main.C: added global string help_lyxdir.

	* lyxfunc.C (dispatch): added LFUN_HELP_TEXINFO to switch.

2001-10-07  Adrien Rebollo  <adrien.rebollo@gmx.fr>

	* lyxrc.C (set_font_norm_type): support iso8859-4

2001-07-02  Claus Hentschel  <claus.hentschel@mbau.fh-hannover.de>

	* LaTeX.C (deplog): add another regex for MikTeX

2001-10-05  Adrien Rebollo  <adrien.rebollo@gmx.fr>

	* lyxrc.C (set_font_norm_type): support iso8859-3

2001-10-04  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* BufferView_pimpl.C (tripleClick): fix stupid logic error.

	* LaTeXFeatures.C: remove special case of french and index

	* buffer.C (makeLaTeXFile): _really_ load babel late (i.e. just
	before \begin{document}). This solves several incompatibilities.

2001-10-03  Garst Reese  <reese@isn.net>

	* lyx_cb.C: change CheckTex error msg.

2001-10-03  José Matos  <jamatos@fep.up.pt>

	* buffer.C (simpleDocBookOnePar): add support for pass_thru.

2001-10-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* .cvsignore: update

	* lyx_main.C (commandLineVersionInfo): use new style version info.

	* buffer.C (writeFile):
	(makeLaTeXFile):
	(makeLinuxDocFile):
	(makeDocBookFile): use lyx_docversion instead of LYX_DOCVERSION.

	* WorkArea.C (WorkArea): use lyx_version instead of LYX_VERSION.

	* version.h: update to use stuff in version.C

	* version.C.in: new file. Contains version information determined
	at compile time. This is a merging of version.h and
	version_info.h.in.

2001-10-03  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (update): don't change "dirty" status in
	updateInset call.

2001-10-03  Angus Leeming  <a.leeming@ic.ac.uk>

	* WorkArea.C (c-tor): re-position version string slightly.

2001-10-02  Angus Leeming  <a.leeming@ic.ac.uk>

	* BufferView_pimpl.C (buffer): remove call to WorkArea::show() and
	revert to previous code.

	WorkArea.[Ch]: (show, destroySplash): methods removed.

	WorkArea.C: rework code so that it's an amalgam of the codes before and
	after the splash screen was moved to WorkArea.

2001-10-01  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxrc.C (read):
	* vspace.C (inPixels):
	(lyx_advance):
	* kbmap.C (bind):
	* buffer.C (insertStringAsLines):
	(asciiParagraph): fix types to be large enough

	* lyxlex_pimpl.h: change member status from short to int

	* layout.h: fix type of endlabeltype

	* kbmap.C (bind):
	* kbsequence.C (parse): change return type to string::size_type

	* LaTeX.C (updateBibtexDependencies): comment out unneeded
	variable

	* Bullet.C (bulletSize):
	(bulletEntry): do not use short ints as parameters

	* BufferView2.C (insertLyXFile): change a char to an int.

	* WorkArea.C (WorkArea): remove unneeded floats in computation

2001-10-01  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C (asciiParagraph): Treat '\\' as other chars.

	* paragraph.C (asString): Do not ignore newline/hfill chars when
	copying to the clipboard.

2001-09-29  Dekel Tsur  <dekelts@tau.ac.il>

	* paragraph_pimpl.C (simpleTeXSpecialChars): Call to textrow.start
	after a multi-line inset.

2001-09-28  Dekel Tsur  <dekelts@tau.ac.il>

	* paragraph.C (validate): Set NeedLyXFootnoteCode

2001-09-27  Angus Leeming  <a.leeming@ic.ac.uk>

	* lyxfont.C (LyXSizeNames): changed increase-error to increase
	and decrease-error to decrease.

2001-09-27  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* text2.C (deleteEmptyParagraphMechanism): reformat a bit to make
	it more readable (should be equivalent)

2001-09-27  Adrien Rebollo  <adrien.rebollo@gmx.fr>

	* paragraph_pimpl.C (simpleTeXSpecialChars): handle latin9 too.

2001-09-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* text2.C (fixCursorAfterDelete): new method. Fixes the parameters
	of a cursor (row, etc.) after a character has been deleted
	(deleteEmptyParagraphMechanism): call the method above on _all_
	cursors held by the LyXText when a double space has been
	detected/deleted.

2001-09-27  Angus Leeming  <a.leeming@ic.ac.uk>

	* BufferView_pimpl.C (buffer): call WorkArea::show to pop-up the
	pixmap.
	(resizeCurrentBuff): remove code to destroy the old splash dialog.

	* WorkArea.[Ch]: add the "LyX" pixmap and version string to the
	background. Use greyOut() and the new show() methods to toggle between
	the foreground and background. Add code to remove the splash after
	its initial showing.

	* lyx_gui.C: Remove dependency on frontends/Dialogs.h.
	(create_forms): no longer call Dialogs::showSplash.

2001-09-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* .cvsignore: add version_info.h

2001-09-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* version_info.h.in: new file

	* Makefile.am: add version_info.h.in

	* lyx_main.C (commandLineVersionInfo): use version_info defined in
	version_info.h instead of VERSION_INFO

2001-09-24  Angus Leeming  <a.leeming@ic.ac.uk>

	* text.C (selectNextWordToSpellcheck): reverted change to if-block.
	The ERT inset now returns string().

2001-09-21  Angus Leeming  <a.leeming@ic.ac.uk>

	* lyxtext.h, text.C (selectNextWord): renamed as
	selectNextWordToSpellcheck.

	* text.C (selectNextWordToSpellcheck): Modified to not select
	words inside an ERT inset.

2001-09-21  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyx_cb.C (MenuLayoutSave): change a bit the question

	* sp_base.h: include <sys/types.h>

2001-09-18  Angus Leeming  <a.leeming@ic.ac.uk>

	* LColor.[Ch]: added graphicsbg to color enum and to ColorEntry.

2001-09-20  Michael Schmitt  <Michael.Schmitt@teststep.org>

	* several files: fix typos in user-visible strings

2001-09-18  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* text2.C (pasteSelection): do not set the selection, since it
	will be cleared later. Actually, the intent was to fix the way the
	selection was set, but I figured rmoving the code was just as good.

2001-09-19  Dekel Tsur  <dekelts@tau.ac.il>

	* FontLoader.C (available): Check if font is available without
	loading the font.

2001-09-19  Jürgen Spitzmüller  <j.spitzmueller@gmx.de>

	* lyxrc.[Ch]: added auto_reset_options variable and associated code.

2001-09-13  Angus Leeming  <a.leeming@ic.ac.uk>

	* lyxrc.[Ch]: added display_graphics variable and associated code.

2001-09-17  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* bufferparams.C (hasClassDefaults): new method. Returns true if
	the buffer parameters correspond to known class defaults

2001-09-17  Angus Leeming  <a.leeming@ic.ac.uk>

	* XFormsView.C (show): set minimum size to the main window.

2001-09-12  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* text2.C (copySelection):
	(cutSelection):
	* lyxfind.C (LyXReplace):
	* BufferView_pimpl.C (Dispatch): pass the correct flag to
	LyXText::selectionAsString.

	* paragraph.C (asString): add "label" argument to the second form

	* text2.C (selectionAsString): add "label" argument and pass it to
	Paragraph::asString.

2001-09-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyx_main.C (commandLineHelp): remove version information

2001-09-08  Rob Lahaye  <lahaye@users.sourceforge.net>

	* lyx_main.C: add -version commandline option

2001-09-09  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.h: make the optional constructor arg required instead.
	some modifications to other files because of this.

	* minibuffer.C (C_MiniBuffer_peek_event): make it static

	* lyxserver.C (C_LyXComm_callback): make it static

	* lyx_main.C (error_handler): make it static

	* lyx_gui.C (LyX_XErrHandler): make it static

	* XFormsView.C (C_XFormsView_atCloseMainFormCB): make it static

	* WorkArea.C: make the extern "C" methods static.

	* Makefile.am (lyx_LDADD): simplify

2001-09-02  Angus Leeming  <a.leeming@ic.ac.uk>

	* commandtags.h: removed redundant LFUNs, LFUN_HELP_COPYRIGHT,
	LFUN_HELP_CREDITS, LFUN_HELP_VERSION.

	* LyXAction.C (init):
	* lyxfunc.C (dispatch): associated code removal.

2001-09-07  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxfont.h (isSymbolFont): shut off warning

	* text.C (setHeightOfRow):
	(getVisibleRow): fix crash with empty paragraphs which have a
	bottom line

2001-09-07  Rob Lahaye  <lahaye@users.sourceforge.net>

	* lyxrc.[Ch]: added dialogs_iconify_with_main variable and associated
	code.

2001-09-04  José Matos  <jamatos@fep.up.pt>
	* buffer.C
	* buffer.h
	* tabular.C (docbook): rename docBook method to docbook.

2001-09-02  Angus Leeming  <a.leeming@ic.ac.uk>

	* Makefile.am: add dependencies to main.o.

2001-09-03  Dekel Tsur  <dekelts@tau.ac.il>

	* FontLoader.C (available): Return false if !lyxrc.use_gui

2001-09-03  Michael Schmitt <schmitt@itm.mu-luebeck.de>

	* FontInfo.C (query):
	* converter.C (view):
	* importer.C (Import):
	* exporter.C (Export): Can not -> cannot.

2001-09-02  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: allow to create index inset even if
	  string is empty

2001-09-02  Angus Leeming  <a.leeming@ic.ac.uk>

	* buffer.C (getLists): replace boost::tie code with an explicit pair
	as boost::tie can break some compilers.

	* iterators.h: Added a std:: declaration to the return type of
	ParIterator::size.

2001-08-31  John Levon  <moz@compsoc.man.ac.uk>

	* lyxrc.C: add help for view_dvi_paper_option, default to safe
	  case.

2001-09-02  Dekel Tsur  <dekelts@tau.ac.il>

	* iterators.[Ch]: New files. Provide paragraph iterators.

	* buffer.C (changeLanguage): Use paragraph iterators.
	(isMultiLingual): ditto

	* BufferView2.C (ChangeInsets): Use paragraph iterators.

2001-09-01  Dekel Tsur  <dekelts@tau.ac.il>

	* FontLoader.C: Support for cmr font.

2001-08-31  Dekel Tsur  <dekelts@tau.ac.il>

	* FontLoader.C (getFontinfo): Handle latex symbol fonts.
	(available): New method.

	* FontInfo.C (getFontname): Use scalable fonts even when
	lyxrc.use_scalable_fonts is false, if no non-scalable fonts was
	found.

2001-08-23  Angus Leeming  <a.leeming@ic.ac.uk>

	* converter.C (Formats::view): reverted! Incorrect fix.

2001-08-23  Angus Leeming  <a.leeming@ic.ac.uk>

	* converter.C (Formats::view): only output the -paper option
	if the dvi viewer is xdvi, thereby fixing bug #233429.

2001-08-23  Herbert Voss  <voss@perce>

	* BufferView_pimpl.C: small fix for LFUN_INSERT_BIBTEX

2001-08-20  Dekel Tsur  <dekelts@tau.ac.il>

	* Spacing.h (Spacing): Set space to Default on in the default
	constructor.

2001-08-19  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* vc-backend.h (RCS::versionString): add RCS to version
	(CVS::versionString): add CVS to version

	* vc-backend.C (scanMaster): do not add CVS to version.
	(scanMaster): do not add RCS to version

	* lyxvc.C (versionString): new method

	* lyxfunc.C (initMiniBuffer): use LyXVC::versionString

2001-08-18  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* Spacing.C (set): initialize fval

2001-08-15  Dekel Tsur  <dekelts@tau.ac.il>

	* lyxlex_pimpl.C (next): Treat \ as normal char if not followed by
	" or \.

2001-08-16  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C (dispatch): implemented the new FINISHED states.

2001-08-16  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C:
	* figureForm.C:
	* lyxtext.h:
	* text2.C: setParagraph takes linespacing now

2001-08-15  John Levon  <moz@compsoc.man.ac.uk>

	* LyxAction.C: add internal LFUN_CITATION_INSERT

	* LyXView.C: actually apply fix

	* bufferlist.C: fix open non-existent file

	* lyxfind.C: fix indentation

	* lyxfunc.C: remove unneeded assert, fix typo

2001-08-16  John Levon  <moz@compsoc.man.ac.uk>

	* MenuBackend.C: use "Floatname List"

2001-08-14  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C (parseSingleLyXformat2Token): Do not generate errors
	when converting LaTeX layout to insetERT.
	Generate a non-collapsed float when reading old float

2001-08-13  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView2.C (showLockedInsetCursor): Use normal cursor shape in
	ERT insets.

2001-08-13  Juergen Vigna  <jug@sad.it>

	* text.C (fill): return 0 instead of 20 as this seems to be the more
	correct value.

2001-08-13  Dekel Tsur  <dekelts@tau.ac.il>

	* encoding.C (TransformChar): Use lyxrc.font_norm_type instead of
	lyxrc.font_norm.

2001-08-13  Juergen Vigna  <jug@sad.it>

	* lyxfind.C (LyXReplace): fixed not single-replacing characters with
	casesensitive off.
	(SearchBackward): comment out the unlocking of the inset_owner this
	should not be needed!

2001-08-11  Dekel Tsur  <dekelts@tau.ac.il>

	* Many files: Remove inherit_language, and add latex_language

	* BufferView2.C (showLockedInsetCursor): Fix cursor shape in
	collapsible insets.

2001-08-10  Juergen Vigna  <jug@sad.it>

	* text.C (prepareToPrint): fixed hfill-width in draw!

	* BufferView2.C (selectLastWord): save the selection cursor as this
	now is cleared in the function LyXText::clearSelection!

2001-08-08  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (Dispatch): use a non-cut-buffer cut on DELTE
	BACKSPACE type functions.

	* CutAndPaste.C (cutSelection): added a bool so that the stuff actually
	is only cutted from the document but not put in the cut-buffer, where
	still the old stuff should be.

	* text2.C (cutSelection): added bool to pass to CutAndPaste::cutSelection.

	* BufferView2.C (cut): added a bool to pass to LyXText::cutSelection.

	* tabular.C (SetWidthOfCell): fixed special case where the width
	was not updated!
	(LeftLine): handle '|' in align_special.
	(RightLine): ditto
	(LeftAlreadyDrawed): ditto
	(SetWidthOfCell): ditto

2001-08-07  Juergen Vigna  <jug@sad.it>

	* lyx_main.C (readUIFile): fixed some forgotten lowercase!

2001-08-06  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxlex_pimpl.[Ch]: converto to lowercase funcs
	* lyxlex.[hC]: ditto

2001-08-06  Juergen Vigna  <jug@sad.it>

	* text.C (getVisibleRow): fix up row clearing a bit.

2001-08-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* minibuffer.C: make sure the X server sees the changes in the input.

2001-08-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.C (getFont): split into...
	(getLabelFont): this
	(getLayoutFont): and this
	* paragraph_pimpl.C (realizeFont): calling this

	* text2.C (getFont): split into...
	(getLayoutFont): this
	(getLabelFont): and this
	(realizeFont): all three calling this

	* lyxfont.h: remove all NO_LATEX macros and code... adjust all
	files where used.

2001-08-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxfunc.C (getStatus): add checkbox support for LFUN_APPENDIX

2001-08-02  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* BufferView_pimpl.C (smartQuote): Added code to exempt pass_thru
	layouts from the Quote inset insertion.

2001-08-03  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (update): do the fitCursor only at the end!

	* screen.C (drawFromTo): don't call fitcursor here and do the loop
	only if status not is already CHANGED_IN_DRAW (second level).

	* text.C (draw): don't set the need_break_row when inside an
	InsetText LyXText.

2001-08-02  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* buffer.C (parseSingleLyXformat2Token): handle more latex
	conversion cases.

	* bufferview_funcs.[hC]: change function names to
	begin with small char, adjust other files.

2001-08-02  André Pönitz <poenitz@gmx.net>

	* lyxfunc.C:
	BufferView_pimpl.C: remove broken special code for math-greek

2001-08-02  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (update): redone this function so that we
	update the text again if there was a CHANGE_IN_DRAW.

	* screen.C (cursorToggle): removed LyXText parameter and recoded.
	(drawFromTo): added a new internal bool which is used by draw() and
	redraw() function.
	(general): some cursor drawing problems fixed.

2001-08-01  Juergen Vigna  <jug@sad.it>

	* lyxfind.C (LyXFind): fixed
	(SearchForward): ditto
	(SearchBackward): ditto

	* BufferView_pimpl.C (workAreaMotionNotify): hopefully fixed the
	spurius drawing of the cursor in the main area.

	* text2.C (status): small fix which could lead to a segfault!
	(clearSelection): remove unneeded BufferView param.

2001-08-01  André Pönitz <poenitz@gmx.net>

	* lyxfunc.C: small change due to changed mathed interface

2001-08-01  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* bufferlist.C (loadLyXFile): add .lyx to file name if necessary

2001-08-01  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfunc.c: fail gracefully if file doesn't exist

	* LyXSendto.C:
	* buffer.C:
	* lyxfunc.C:
	* BufferView_pimpl.C: IsDirWriteable() proto changed

	* LyXView.C: fix updateWindowTitle() to store the last title

2001-07-31  Juergen Vigna  <jug@sad.it>

	* text.C (setHeightOfRow): fixed setting of ascent/descent based on
	the font (wrong since using of Paragraph::highestFontInRange).

	* paragraph.C (highestFontInRange): added a default_size parameter.

	* text.C (getVisibleRow): minor clear row changes (still not perfect).
	(setHeightOfRow): reformat

2001-07-30  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* converter.[hC] + affected files: move to (inital-char)lowercase
	function names.

	* ParagraphParameters.C (ParagraphParameters): remove commented code

	* PainterBase.[Ch]: remove commented code

	* LaTeXFeatures.h: add "bool floats" for float.sty

	* LaTeXFeatures.C (LaTeXFeatures): init floats
	(require): handle float
	(getPackages): do it with floats

2001-07-30  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* BufferView_pimpl.C (Dispatch): improve handling of
	LFUN_INDEX_INSERT_LAST and LFUN_INDEX_CREATE

	* commandtags.h: #include lyxfont.h here temporarily to avoid
	keybinding bug.

	* bufferlist.h: include LString.h here.

2001-07-27  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* text2.C (getStringToIndex): new method.

2001-07-29  Asger Alstrup Nielsen  <alstrup@alstrup>

	* *: Reduced header file dependencies all over.

2001-07-30  Baruch Even  <baruch@lyx.org>

	* buffer.C (readInset): Stop auto-converting InsetFig to InsetGraphics.

2001-07-29  Baruch Even  <baruch@lyx.org>

	* buffer.C (readInset): Changed GRAPHICS to Graphics.

2001-07-27  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* ParameterStruct.h (endif): add a default constructor to make
	sure that all variables is initialized.

	* ParagraphParameters.C (ParagraphParameters): adjust

2001-07-27  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* BufferView_pimpl.C (Dispatch): use WHOLE_WORD selection for
	index; also, check that there is something to index, and that it
	does not span over several paragraphs.
	(doubleClick): use WHOLE_WORD_STRICT for double click.

	* text.C (getWord): handle new WHOLE_WORD_STRICT word_location value.

	* text2.C (toggleFree): do selection with WHOLE_WORD_STRICT
	scheme.

2001-07-26  Baruch Even  <baruch@lyx.org>

	* buffer.C (readInset): Changed to call up InsetGraphics when reading
	an InsetFig figure, backwards compatible reading of old figure code.

2001-07-27  Juergen Vigna  <jug@sad.it>

	* text2.C: font.realize function adaption.

	* text.C (draw): add a warnings lyxerr text if needed.

	* layout.C: font.realize function adaption.

	* language.C: add inherit_language and implement it's handlings

	* bufferview_funcs.C (StyleReset): remove language parameter from
	font creation (should be language_inherit now).

	* bufferparams.C (writeFile): handle ignore_language.

	* paragraph.C (getFontSettings): the language has to be resolved
	otherwise we have problems in LyXFont!

	* lyxfont.C (lyxWriteChanges): added document_language parameter
	(update): removed unneeded language parameter

	* paragraph.C (validate): fixed wrong output of color-package when
	using interface colors for certain fonts in certain environments,
	which should not seen as that on the final output.

2001-07-26  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C:
	* Thesaurus.h:
	* Thesaurus.C:
	* Makefile.am:
	* commandtags.h:
	* LyXAction.C: add thesaurus support

	* lyxfind.h:
	* lyxfind.C: add "once" parameter, for thesaurus, to not
	  move to the next match

2001-07-26  Juergen Vigna  <jug@sad.it>

	* lyxfont.C (realize): honor ignore_language too!
	(resolved): ditto.

	* paragraph.C (TeXOnePar): handle ignore language right (hopefully).

	* text.C (draw): one place more for ignore_language to not draw
	itself!

2001-07-25  Angus Leeming  <a.leeming@ic.ac.uk>

	* LaTeXFeatures.C (getPackages): clean-up a little of the natbib code.

2001-07-26  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* buffer.C (parseSingleLyXformat2Token): a more general fix for
	the minipage conversion problem.

2001-07-26  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* buffer.C (parseSingleLyXformat2Token): check minipage if we
	insert an inset.

2001-07-25  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* BufferView.h: don't forward declare WorkArea

	* BufferView.C: don't include WorkArea.h

2001-07-25  André Pönitz <poenitz@gmx.net>

	* commandtags.h:
	* LyXAction.C:
	* lyxfunc.C:  new LFUN 'math-space'

	* BufferView.[Ch]: remove unneeded reference to 'WorkArea'

2001-07-25  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text2.C (toggleInset): call open/close

2001-07-24  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxfunc.C (dispatch): add debug for the disabled case

	* font.C (buttonText): make similar to rectText

	* buffer.C (readInset): comment out parsing of insetlist and
	insttheorem

	* PainterBase.C (rectText): small correction

	* BufferView_pimpl.C: comment out insettheorem and insetlist
	* LyXAction.C: ditto
	* commandtags.h: ditto

2001-07-24  Juergen Vigna  <jug@sad.it>

	* text.C (draw): honor the ignore_language.

	* lyxfont.C (LyXFont): set language to ignore_language in FONT_INIT1.

2001-07-24  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxfunc.C (getStatus): BREAKLINE does _not_ insert a special
	char inset.

2001-07-24  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* lyxtext.h: remove unused (and unimplemented) methods

2001-07-23  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* text.C (getVisibleRow): honor background color

	* PainterBase.h:
	* Painter.h: remove default color argument for fillRectangle

	* text.C (backgroundColor): new method

2001-07-24  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text.C (getVisibleRow): adjust

	* font.[Ch] (rectText): new method, metrics
	(buttonText): new method, metrics

	* PainterBase.[hC]: make rectText and buttonText always draw and take
	fewer paramteres.

2001-07-22  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* ToolbarDefaults.C (read):
	* MenuBackend.C (read): allow escaping in all strings

	* BufferView_pimpl.C (insertAndEditInset): new method.
	(Dispatch): use insertAndEditInset whenever appropriate.

	* BufferView_pimpl.C (insertNote): removed

	* BufferView_pimpl.C (smartQuote): new method, moved from
	BufferView; if an insetquote cannot be inserted, insert a '"'
	character instead.

	* BufferView2.C: remove insertCorrectQuote();

	* lyxfunc.C (getStatus): Add support for all remaingin
	inset-insert lfuns.

	* trans_mgr.C (insertVerbatim): do not treat '"' specially.

	* lyxrc.C (read): in RC_BIND, allow escaped sequences in the
	command (necessary to pass " as parameter of self-insert.

	* text.C (selectWordWhenUnderCursor):
	(selectWord): add word_location parameter
	(selectWordWhenUnderCursor): same + remove special code for word
	boundary.
	(selectNextWord): use kind() to guess type of insetspecialchar,
	not latex().

	* buffer.C (insertStringAsLines): new method, extracted from LyXText.
	(insertErtContents): create ert insets as collapsed.
	(readInset): better compatibility code for Info inset.

2001-07-20  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C (dispatch): use always LyXFind now!

	* text2.C (init): add a reinit flag so that the LyXText can be
	reinited instead of deleted and reallocated (used in InsetText).

	* BufferView_pimpl.C: use the new Inset::edit(BV, bool) where needed.

	* text.C: ditto

	* text2.C: ditto

2001-07-18  Juergen Vigna  <jug@sad.it>

	* text.C (selectNextWord): handle insets inside inset by calling
	always the bv->text functions so that we can go up the_locking_inset!

	* BufferView_pimpl.C (show/hideCursor): fixed cursor showing up
	in strange locations when inside an inset!

	* lyxfind.[Ch]: give all functions a LyXText * parameter and implement
	handling to include insets.

	* lyxfunc.C (dispatch): changes to calls SearchBackward/Forward.

2001-07-20  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LyXAction.C (init):
	* commandtags.h:
	* BufferView_pimpl.C (Dispatch): change HYPHENATION_BREAK to
	LIGATURE_BREAK, since the name is so stupid.

2001-07-20  Angus Leeming  <a.leeming@ic.ac.uk>

	* buffer.C (readInset): enable reading of new InsetNotes as well as old
	InsetInfos.

	* FontLoader.C: remove FORMS_H_LOCATION cruft.

	* sp_form.[Ch]: remove.

	* src/LColor.[Ch]: remove noteframe. Change note to "yellow".

	* src/BufferView_pimpl.C (insertNote): use InsetNote in place of
	InsetInfo.

	* src/buffer.C (readInset): ditto.

2001-07-19  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* BufferView_pimpl.C (specialChar): new method. Obsoletes
	menuSeparator(), endOfSentenceDot(), ldots() and
	hyphenationPoint(), which are therefore removed.
	(Dispatch): handle LFUN_HYPHENATION_BREAK.

	* LyXAction.C (init):
	* commandtags.h: add LFUN_HYPHENATION_BREAK.

	* paragraph.C (getWord): removed.

	* BufferView_pimpl.C (Dispatch): use last word or selection for
	LFUN_INDEX_INSERT_LAST and LFUN_INDEX_CREATE.

	* lyx_main.C (queryUserLyXDir): do not ask before creating
	user_dir, except if it has been named explicitely.

2001-07-20  Angus Leeming  <a.leeming@ic.ac.uk>

	* BufferView_pimpl.C (updateScrollbar): Fix crash when reading in
	a document of zero size.

2001-07-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* LaTeXFeatures.[Ch]: add variable "bool natbib" and set it
	approriately in the c-tor and in require().
	(getPackages): output the appropriate LaTeX for natbib support.

	* buffer.C (parseSingleLyXformat2Token): set the new bufferparams
	variables "use_natbib" and "use_numerical_citations" when reading the
	LyX file.
	(readInset): read the various natbib cite commands.
	(validate): white-space change.

	* bufferparams.[Ch]: new variables "bool use_natbib" and
	"bool use_numerical_citations".
	(writeFile): output them in the LyX file.

2001-07-19  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* lyxfunc.C (getStatus): add support for all the inset insertion
	commands.

	* text2.C (insertInset):
	* paragraph.C (insetAllowed):
	* BufferView_pimpl.C (insertInset): update to take in account the
	renaming of insertInsetAllowed

	* lyxfunc.C (getStatus): add support for LFUN_INSET_TOGGLE.

	* text2.C (getInset): new method. returns inset at cursor position.

	* BufferView_pimpl.C (Dispatch): changes because of this.

	* LyXAction.C (init): rename open-stuff to inset-toggle.

	* commandtags.h: rename LFUN_OPENSTUFF to LFUN_INSET_TOGGLE.

	* text2.C (toggleInset): renamed from openStuff; use
	Inset::open().

2001-07-13  Yves Bastide  <stid@libd-pc11.univ-bpclermont.fr>

	* lyxrc.C (set_font_norm_type): recognise ISO_8859_15.

	* lyxrc.h: added ISO_8859_15 to enum FontEncoding.

2001-07-18  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C (readLyXformat2): Add filename to the error dialog

2001-07-18  Juergen Vigna  <jug@sad.it>

	* tabular.C (GetCellNumber): put an assert here instead of the check!

2001-07-17  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (toggleSelection): adapted too.

	* text.C (selectNextWord): adapted for use with insets.
	(selectSelectedWord): ditto

2001-07-17  Juergen Vigna  <jug@sad.it>

	* sp_spell.C (PSpell): fix initialitation order.

2001-07-17  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.C: spacing

2001-07-17  Edwin Leuven  <leuven@fee.uva.nl>

	* sp_spell.C: repair language selection for pspell

2001-07-12  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxfunc.h: change more methods to begin with lower char.

2001-07-16  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C (parseSingleLyXformat2Token): Generate error insets
	for unknown layouts.

2001-07-13  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C (readLyXformat2): Generate an error dialog if there are
	unknown layouts.

2001-07-16  Juergen Vigna  <jug@sad.it>

	* sp_spell.C: always compile ISpell part.

	* lyxrc.C: added use_pspell entry and it's handling.

2001-07-13  Juergen Vigna  <jug@sad.it>

	* sp_spell.C: removed double includes.

2001-07-13  Angus Leeming  <a.leeming@ic.ac.uk>

	Consistent use of Lsstream.h:
	* Lsstream.h: added using std::stringstream for consistencies sake.

	* buffer.C: removed using std::stringstream

	* lyxfont.C (stateText):
	* paragraph.C (asString):
	* text.C (selectNextWord, selectSelectedWord):
	* text2.C (setCounter):
	* vspace.C (asString, asLatexString):
	std::ostringstream -> ostringstream.

2001-07-13  Edwin Leuven  <leuven@fee.uva.nl>

	* LyXAction.C: add LFUN_HELP_ABOUTLYX
	* commandtags.h: add LFUN_HELP_ABOUTLYX
	* lyxfunc.C: add about lyx remove credits/copyright/version stuff

2001-07-13  Edwin Leuven  <leuven@fee.uva.nl>

	* BufferView_pimpl.C: sigchldchecker instead of sigchldhandeler in
	cursorToggle()
	* lyx_gui_misc.C: remove spellchecker
	* lyxfunc.C: showSpellchecker
	* sp_base.h: added
	* sp_ispell.h: added
	* sp_pspell.h: added
	* sp_spell.C: added
	* sp_form.[Ch]: removed
	* spellchecker.[Ch]: removed

2001-07-12  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* paragraph_pimpl.C (simpleTeXBlanks): Simply return if pass_thru
	is set.
	(simpleTeXSpecialChars): Simply print the input character without
	any special translation if pass_thru is set.

	* layout.h: Added bool pass_thru to layout class for being able to
	implement pass through of a paragraph for Literate Programming.

	* layout.C: add LT_PASS_THRU to LayoutTags enum.
	* layout.C (LyXLayout): set pass_thru to flase in constructor.
	* layout.C (Read): add "passthru" to list of layout tags and add
	code to set the pass_thru boolean when it is read.

2001-07-12  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* trans_decl.h: remove allowed from KmodInfo

	* trans.[Ch] (AddDeakkey): change prototype to not have allowd.
	remove allowed code
	(Load): adjust

	* paragraph_pimpl.C (erase): use boost::prior

	* Painter.C (text): use data() instead of c_str() when length is
	also provided.
	* WorkArea.C (putClipboard): ditto
	* font.h (width): ditto

	* BufferView2.C: use it-> instead of (*it). for iterators
	* texrow.C: ditto
	* paragraph_pimpl.C: ditto
	* paragraph.C: ditto
	* minibuffer.C: ditto
	* language.C: ditto
	* kbmap.C: ditto
	* encoding.C: ditto
	* counters.C: ditto
	* converter.C: ditto
	* chset.C: ditto
	* Variables.C: ditto
	* TextCache.C: ditto
	* MenuBackend.C: ditto
	* LyXAction.C: ditto
	* LColor.C: ditto
	* FloatList.C: ditto
	* DepTable.C: ditto
	* ColorHandler.C (LyXColorHandler): ditto

2001-07-10  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* BufferView_pimpl.C (Dispatch): handle LFUN_OPENSTUFF.

	* text2.C (openStuff): reintroduce this method (which had been
	nuked in NEW_INSETS frenzy).

	* lyxfunc.C (Dispatch): when an action has not been handled, use
	its name in the error message, not its number.

	* paragraph.C (inInset): change method name to begin with lowercase.

	* undo_funcs.C:
	* text2.C: updates because of this.

2001-07-09  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* ToolbarDefaults.C (add): add spaces in error message

2001-07-10  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* buffer.C (readLyXformat2): initialize the ert comp. variables.
	(readLyXformat2): rename return_par to first_par, use lyxlex's
	pushToken and remove the manual push handling.
	(parseSingleLyXformat2Token): add another ert comp. variable:
	in_tabular, rename return_par to first_par. handle newlines better

2001-07-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* kbsequence.C (getiso): redirect debug info to Debug::KBMAP.

2001-07-09  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text2.C (getParFromID): removed

	* buffer.C (getParFromID): new method moved form lyxtext.
	* BufferView2.C (insertErrors): adjust
	(setCursorFromRow): adjust
	* BufferView_pimpl.C (restorePosition): adjust
	* lyxfunc.C (Dispatch): adjust
	* undo_funcs.C (textUndo): adjust
	(textRedo): adjust
	(textHandleUndo): adjust
	(textHandleUndo): adjust

2001-07-08  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* buffer.C: up' the LYX_FORMAT

	* lyxfont.h: turn NO_LATEX on as default

	* buffer.C (insertErtContents): new methods of tex style compability.
	(parseSingleLyXformat2Token): use it several places.
	* tabular.C (OldFormatRead): and here

2001-07-07  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text2.C: remove some commented code.
	reindent file.

	* trans_mgr.[Ch]: simplify normalkey to only take a char as arg.
	* trans.C: changes because of the above.

2001-07-07  Dekel Tsur  <dekelts@tau.ac.il>

	* text2.C (setCounter): Fix counters bug with bibliography layout.

2001-07-06  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph_pimpl.C (simpleTeXBlanks): don't go through owner_ for
	own member functions
	(simpleTeXSpecialChars): ditto

2001-07-06  Juergen Vigna  <jug@sad.it>

	* a lot of files: changed the access to LyXText::status and the
	call of undo-functions.

	* undo.[Ch]: added a inset_id to the undo informations.

	* undo_funcs.[Ch]: added and moved here all undo functions.

	* lyxtext.h: give the status enum a weight, made status_ a private
	variable and made accessor functions for it, removed the whole bunch
	of undo-functions as they are now in their own file, make some
	functions publically available. Added function ownerParagraph with
	int parameter.

	* paragraph.[Ch]: added "bool same_ids" to the constructor,
	made InInset() a const function, added getParFromID() function.

	* buffer.[Ch]: added const version for inset_iterator functions,
	added getInsetFromID() function.

	* BufferView2.C, BufferView_pimpl.C, text.C, text2.C, lyxfunc.C:
	changed undo functions for new version.

2001-07-05  Juergen Vigna  <jug@sad.it>

	* paragraph_pimpl.C (Pimpl): set id_ also here (this is because some
	unknow mechanism does not call the proper constructor but only this
	one also if I request the other!?

2001-07-06  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* BufferView_pimpl.C (resizeCurrentBuffer): init the new LyXText

	* text2.C (LyXText): use initialization lists.

	* lyxtext.h (Selection): initialize set_ and mark_
	(init): remove method

2001-07-05  Dekel Tsur  <dekelts@tau.ac.il>

	* LaTeX.C (scanLogFile): Parse rerun messages from latex packages.

2001-07-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* screen.[Ch]: change method names to begin with lowercase

	* BufferView_pimpl.C (updateScrollbar): simplify further and
	hopefully make it a bit faster.

2001-07-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* ColorHandler.C (LyXColorHandler): use GUIRunTime instead of
	calling directly xforms functions.

	* Painter.C (Painter):
	* lyx_cb.C (MenuWrite):
	* FontInfo.C (query): use GUIRunTime::x11Display() instead of
	fl_display.

	* lyx_gui.C: remove bogus guiruntime extern declaration.

2001-07-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text2.C (redoHeightOfParagraph): comment out stuff we don't need
	in NEW_INSETS
	(redoDrawingOfParagraph): ditto
	(redoParagraphs): ditto
	(cutSelection): don't create a object for CutAndPaste use the
	static method directly
	(pasteSelection): ditto

	* bufferview_funcs.[Ch]: move ProhibitInput and AllowInput to
	LyXview (+ rename)

2001-07-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* modifications to some other files because of this.

	* Makefile.am (lyx_SOURCES): add XFormsView

	* XFormsView.[Ch]: new files

	* LyXView.[Ch]: make LyXView a base class for the gui handling for
	the main window. Move the gui dependent stuff to XFormsView

2001-07-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* tabular.C (GetCellInset): update cur_cell also in the row/col
	version of this function.

	* lyxfunc.C: no need to include figure_form.h here.

	* FontLoader.h:
	* lyxfunc.h:
	* lyxscreen.h:
	* text2.C:
	* lyxvc.C: no need to include forms.h here.

2001-06-29  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxrc.C (read): change debugging channel for RC_BIND to lyxrc.

	* lyxfunc.C (Dispatch):
	* Spacing.C (set):
	* BufferView_pimpl.C (Dispatch): use .c_str() on istringstream
	constructor argument.

2001-06-29  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.C (Paragraph): dont't clear, and just set layout.
	(makeSameLayout): use params's copy contructor.

	* ParagraphParameters.[Ch] (makeSame): delete method

2001-06-29  John Levon  <moz@compsoc.man.ac.uk>

	* Variables.[Ch]: fix indentation, rename set to isSet

2001-06-29  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxfunc.C (Dispatch): fix typo

2001-06-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* paragraph_pimpl.C: add std:: qualifier to lower_bound and
	upper_bound.

	* bufferlist.C: include assert.h for emergencyWrite().

2001-06-22  John Levon  <moz@compsoc.man.ac.uk>

	* lyx_main.C: if we can't even find a readable LYX_DIR directory,
	  give up at last (bug #425202) !

2001-06-27  John Levon  <moz@compsoc.man.ac.uk>

	* lyx_gui_misc.C:
	* sp_form.h:
	* sp_form.C:
	* spellchecker.h:
	* spellchecker.C: strip spellchecker options and bring up
	  preferences tab instead

2001-06-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* BufferView_pimpl.C (Dispatch): add .c_str() to the argument of
	the istringstream constructor

2001-06-27  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* paragraph.C (getLayout): fix return value

	* paragraph.h: do not declare getLayout as inline.

	* lyxtext.h: remove LyXText:: qualifier to changeRegionCase

2001-06-27  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxcursor.h (operator<): new func
	(operator>): new func
	(operator>=): new func
	(operator<=): new func

	* text.C (changeCase): use selection.start and selection.end
	(changeRegionCase): require from to be <= to. Require par to be a
	valid paragraph.

	* LaTeXFeatures.C (getFloatDefinitions): std:: qualify ostream

2001-06-27  Juergen Vigna  <jug@sad.it>

	* text.C (cursorLeftOneWord): changed to return the cursor and added
	overlay with BufferView * parameter which calls this one.
	(getWord): added
	(selectWord): use new getWord function.
	(changeCase): renamed from changeWordCase as and extended to work
	also on selections.

	* lyxtext.h: added enum word_location

	* BufferView_pimpl.C (Dispatch): change function changeWordCase to
	changeCase as this operates now also on selections.

2001-06-26  The LyX Project  <lyx@violet.home.sad.it>

	* lyxfunc.C (getStatus): support LFUN_MATH_MUTATE

	* many files: send debug output to Debug::INFO instead of
	Debug::ANY.

	* converter.C (View):
	(Convert):
	(Move): send debug output to Debug::FILES instead of console.

2001-06-26  The LyX Project  <lyx@rose.home.sad.it>

	* lyxfunc.C (getStatus): use func_status

	* func_status.h: new header, describing the results of
	LyXFunc::getStatus;

	* lyxfunc.C (getStatus): add support for LFUN_MATH_VALIGN and
	LFUN_MATH_HALIGN.

2001-06-25  The LyX Project  <jug@sad.it>

	* buffer.C (sgmlOpenTag):
	(sgmlCloseTag):
	(SimpleDocBookOnePar):	disable the depth spaces, for the moment.

2001-06-26  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text2.C: remove some dead code

	* tabular.C (GetCellInset): store the last cell checked (gotten)

	* tabular.h: add the helper for the speedup

	* lyxtext.h: remove some dead code

2001-06-26  The LyX Project  <Asger>

	* paragraph.C: Change export to LaTeX of alignment to
	\begin{center} and family for better roundtrip work with reLyX.

	* Tune the math drawing a bit.

2001-06-25  The LyX Project  <Asger>

	* LColor.C (LColor): New color for math background. New color
	for buttons.

2001-06-25  The LyX Project  <jug@sad.it>

	* lyxfunc.C (MenuNew): remove extra check for .lyx file

	* lyxfunc.C (Open):
	* bufferlist.C (newFile): do not restrict to files ending with
	.lyx

	* BufferView_pimpl.C (MenuInsertLyXFile):

2001-06-24  The LyX Project  <jug@sad.it>

	* lyxlex_pimpl.C (compare_tags): use compare_ascii_no_case instead
	of compare_no_case

2001-06-24  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxtext.h: rename most methods to begin with a small char.
	Lots of changes because of this.

	* paragraph.C (Paragraph): do not call fitToSize
	(erase): call Pimpl::erase
	(insertChar): call Pimpl::insertChar
	(insertInset): call Pipl::insertInset
	(breakParagraph): do not call fitToSize
	(breakParagraphConservative): do not call fitToSize
	(fitToSize): remove method

	* buffer.C (parseSingleLyXformat2Token): do not call fitToSize

2001-06-24  The LyX Project  <Asger>

	* Fix Qt compilation^2

2001-06-24  The LyX Project  <jug@sad.it>

	* paragraph.[Ch] (outerHook): new method. mostly equivalent to
	depthHook(getDepth()-1).

	* paragraph.h:
	* ParagraphParameters.h:
	* ParameterStruct.h: change type of depth to unsigned int ==
	depth_type. Many adaptations to other files before of that.

2001-06-24  The LyX Project  <Asger>

	* Fix Qt compilation.

2001-06-24  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.h: renamed several methods to begin with small letter.
	several changes to many parts of the code because of this.

2001-06-23  The LyX Project  <jug@sad.it>

	* text2.C (InsertStringAsLines): renamed from InsertStringA;
	rewritten to discard all double spaces when KeepEmpty is off
	(InsertStringAsParagraphs): renamed from InsertStringB; rewritten
	to only handle newlines but not fiddle with spaces and friends.

	* lyxfunc.C (MenuNew): when doing 'new from template', use
	template_path as default directory

2001-06-23  The LyX Project  <Asger>

	* Clean-up of header file includes all over
	* paragraph.h: Move some of the stuff into paragraph_pimpl.h

2001-06-23  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.h: renamed from lyxparagraph.h

2001-06-23  Asger  <lyx@violet.home.sad.it>

	* Buffer.h: Removed Buffer::resize
	* BufferList.h: Removed BufferList::resize
	* LyXView.h: Added LyXView::resize. This way, we will only reflow
	the document lazily when we change the width, or the font settings.

2001-06-22  John Levon  <moz@compsoc.man.ac.uk>

	* lyxfunc.C: silently ignore empty dispatches from the minibuffer

2001-06-22  John Levon  <moz@compsoc.man.ac.uk>

	* buffer.h: remove out of date comment

2001-06-22  John Levon  <moz@compsoc.man.ac.uk>

	* lyxscreen.h:
	* screen.C: fix "theoretical" GC leak

2001-06-20  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LaTeX.C (scanAuxFile):
	(deplog): remove trailing \r when reading stream (useful under
	win32)

2001-06-15  Angus Leeming  <a.leeming@ic.ac.uk>

	* BufferView_pimpl.C (fitCursor): emit a signal updateParagraph.
	(resizeCurrentBuffer): have functions BufferView::theLockingInset()
	and BufferView::theLockingInset(Inset*), so should use them and not
	access bv_->text->the_locking_inset directly.

	* lyxfunc.C (Dispatch): cosmetic name change of three signals.

2001-06-02  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am:
	* tex-defs.h: remove old unused file

2001-06-15  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: fix typo, remove minibuffer message
	  when buffer has loaded

2001-06-14  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxfunc.C (Dispatch): use stringstream
	(MenuNew): use stringstream
	(Open): use stringstream

	* importer.C (Import): use stringstream

	* bufferview_funcs.C (CurrentState): use stringstream

	* LaTeX.C (run): use stringstream

	* BufferView_pimpl.C (savePosition): use stringstream
	(restorePosition): use stringstream
	(MenuInsertLyXFile): use stringstream

2001-06-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* BufferView.C:
	* Bullet.C:
	* ColorHandler.C:
	* FontInfo.C:
	* FontLoader.C:
	* LColor.C:
	* LaTeXFeatures.C:
	* Painter.C:
	* gettext.C:
	* lyx_gui_misc.C:
	* lyxserver.C:
	* vspace.C: removed // -*- C++ -*- as first line.

	* lyxfind.h:
	* version.h: added // -*- C++ -*- as first line.

2001-06-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxfunc.C (getStatus): support LFUN_READ_ONLY_TOGGLE

	* text2.C (SetSelectionOverString): do not test str[i]==0 for end
	of string

2001-06-13  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* buffer.C (parseSingleLyXformat2Token): fix compatability reading
	of floats.

2001-06-12  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* gettext.C: include LString.h even when --disable-nls is on.

2001-06-12  Angus Leeming  <a.leeming@ic.ac.uk>

	* converter.h (Get): changed argument type from int to
	FormatList::size_type to avoid unnecessary conversion.

	* bufferview_funcs.C (ToggleAndShow): check state of LyXText pointer
	before using it.

2001-06-07  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* gettext.h: include LString.h even when --disable-nls is on.

2001-06-07  Juergen Vigna  <jug@sad.it>

	* text.C (BreakAgain): subst spaces with tabs.

	* paragraph.C (deleteInsetsLyXText): set recursive on deleteLyXText.
	(resizeInsetsLyXText): set force on resizeLyXText.

2001-06-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* gettext.h (gettext_init):
	(locale_init): use a real definition instead of a macro

2001-06-02  John Levon  <moz@compsoc.man.ac.uk>

	* Bufferview_pimpl.C:
	* LColor.h:
	* LColor.C: further lcolor tidies

2001-06-05  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* BufferView_pimpl.C (updateScrollbar): simplify.

	* BufferView2.C: don't include insets/insetinfo.h, change
	prototype for insertInset and call the Pimpl version. let
	updateInset call Pimpl version.

	* BufferView.h: move inset_slept to BufferView::Pimpl, move
	gotoInset to BufferView::Pimpl

2001-06-01  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C (Dispatch): LFUN_PREFIX don't call the update if we're
	inside a LockingInset (is the update needed at all?).

2001-05-31  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (Dispatch): we need a new instanze of cursor
	here not the old one otherwise how should we compare it afterwards
	if it's the same!

2001-06-01  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxfont.C:
	* tabular.C:
	* tabular-old.C:
	* FontInfo.C: bring C functions into global namespace when
	necessary

2001-05-30  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LString.h: make sure config.h has been loaded before LString.h.

	* lyxlex_pimpl.C (EatLine): comment out annoying debug messages
	(one for each char read by EatLine!).

	* lyx_main.C (init): constify lyxdir. Lowercase the name of some
	variables.

2001-06-01  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.C (BreakParagraph): set the inset_owner in the new par
	to the same as the par we break from

2001-05-31  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* commandtags.h: add LFUN_INSET_WIDE_FLOAT

	* MenuBackend.C (expand): also create menu entries for wide
	versions of the floats.

	* LyXAction.C (init): add entry for LFUN_INSET_WIDE_FLOAT

	* BufferView_pimpl.C (Dispatch): implement LFUN_INSET_WIDE_FLOAT

	* Makefile.am (lyx_DEPENDENCIES): adjust for change in
	frontends/Makefile.am

	* text2.C: adjust
	* text.C: adjust


	* tabular.C (getTokenValue): add std::

	* tabular-old.C (getTokenValue): add std::
	(getTokenValue): ditto
	(getTokenValue): ditto

	* screen.C (ToggleSelection): adjust

	* lyxtext.h: put selection cursors inside a Selection struct.

	* lyxfunc.C (moveCursorUpdate): adjust

	* lyxfont.C (latexWriteStartChanges): add std::

	* lyxfind.C: adjust

	* font.h: delete with(char const *, LyXFont const &)

	* buffer.C (parseSingleLyXformat2Token): use contains instead of strstr

	* FontInfo.C (getFontname): add std::

	* BufferView_pimpl.C (resizeCurrentBuffer): adjust
	(workAreaButtonPress): adjust
	(tripleClick): adjust
	(update): adjust
	(moveCursorUpdate): adjust
	(Dispatch): adjust

	* BufferView2.C (gotoInset): adjust

2001-05-30  Juergen Vigna  <jug@sad.it>

	* spellchecker.C (USE_ORIGINAL_MANAGER_FUNCS): as it seems only I use
	to check pspell I add this as default as I now have new pspell
	libraries and they seem to use this.

2001-05-30  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text2.C (CutSelection): make the cursor valid before the call to
	ClearSelection.

2001-05-29  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* kbsequence.C (parse): de-uglify a bit the parsing code, which
	relied on 0 terminated strings and other horrors. Bug found due to
	the new assert in lyxstring!

	* lyx_main.C (defaultKeyBindings): add bindings the cursor-related
	KP_ keys.

2001-05-29  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyx_main.C (defaultKeyBindings): move self-insert KP_ bindings
	to latinkeys.bind.

	* lyxfunc.C (processKeySym): change method of getting to the
	self-insert char.

	* BufferView(2).[Ch]: move hfill, protectedBlank, newline,
	menuSeparator, endOfSentenceDot, ldots, hypenationPoint and menuUndo
	* BufferView_pimpl.[Ch]: here as private methods.

2001-05-28  Juergen Vigna  <jug@sad.it>

	* text.C (SetHeightOfRow): added the update() call again as it is
	needed to initialize inset dimensions!

2001-05-16  Juergen Vigna  <jug@sad.it>

	* text2.C (SetCharFont): Add new function with BufferView * and
	bool toggleall parameters for setting insets internal fonts.
	(SetFont): Freeze the undo as we may change fonts in Insets and
	all this change should be inside only one Undo!

	* bufferview_funcs.C (ToggleAndShow): fixed this functions for
	setting font's in insets as for them we have the SetFont function!

2001-05-15  Juergen Vigna  <jug@sad.it>

	* text2.C (ClearSelection): to be sure we REALLY don't have any
	selection anymore!

	* tabular.C (TeXCellPreamble): fixed the left border problem for
	multicolumn cells.

2001-05-27  Dekel Tsur  <dekelts@tau.ac.il>

	* LaTeX.C (deplog): Make sure that the main .tex file is in the
	dependancy file

2001-05-23  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyx_main.C (defaultKeyBindings): set KP_enter to point at
	LFUN_BREAKPARAGRAPH.

	* LyXAction.C (init): remove external name for LFUN_LAYOUTNO, set
	help test to "internal only", similar for LFUN_INSERT_URL

	* BufferView_pimpl.C (Dispatch::LFUN_QUOTE): change it to to the insertcorrectQuote.
	(Dispatch::LFUN_SELFINSERT): fix to handle math greek,
	auto_region_delete and deadkeys.

2001-05-22  John Levon  <moz@compsoc.man.ac.uk>

	* LColor.h:
	* LColor.C: remove some dead entries, tidy a little

2001-05-18  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxfunc.C (processKeySym): comment the Escape handling, remove
	commented code.
	(Dispatch): implement LFUN_ESCAPE

	* commandtags.h: add LFUN_ESCAPE

	* LyXAction.C (init): add entry for LFUN_ESCAPE

	* BufferView_pimpl.C (Dispatch): adjust for open_new_inset move.
	Remove commented code.
	(insertNote): moved here
	(open_new_inset): moved here

	* BufferView[2].[Ch]: move insertNote and open_new_inset to
	BufferView_pimpl

2001-05-16  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* kbmap.C (findbinding): clean it up and make it work correctly.

	* lyx_main.C (init): do not pass argc and argv as parameters

2001-05-16  Ruurd Reitsma  <r.a.reitsma@wbmt.tudelft.nl>

	* buffer.C: fix path for OS/2 & Win32

	* lyx_gui.C:
	* lyx_main:
	* lyx_main.C: Added os:: class.

	* os2_defines.h: update

2001-05-17  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxfunc.[Ch] (processKeySym): return void. Handle unknown actions
	better by trying again with reduced state.

2001-05-16  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxrc.C (read): print error about invalid key sequence only when
	debugging (because not all latinX keysyms are known to some X
	servers)

	* kbsequence.C (getiso): add a few std:: qualifiers
	(getiso): comment out extra return statement.

2001-05-11  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* BufferView_pimpl.C (Dispatch): comment out the old "default" key
	handling.
	(Dispatch): enhance the accent inset a bit. (not perfect)

2001-05-10  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* buffer.C (makeLaTeXFile): use stringstream on language_optons.

2001-05-09  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* bufferlist.C (emergencyWrite): fix assert() call

2001-05-04  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* text.C (InsertChar): Added trivial patch to only send the "you
	can not do multiple spaces this way" message once during a
	session.

2001-05-08  Baruch Even  <baruch@lyx.org>

	* Makefile.am: Changed order of libraries to get LyX to link properly
	with the gnome frontend.

2001-05-09  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LaTeXFeatures.h: add a std:: qualifier

2001-05-09  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.C (String): use stringstream

2001-05-08  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* paragraph.C (writeFile): remove footflag arg

	* buffer.C (makeLaTeXFile): use stringstream
	(latexParagraphs): remove footnot gurba

	* LaTeXFeatures.C (getPackages): use stringstream
	(getMacros): likewise
	(getTClassPreamble): likewise
	(getFloatDefinitions): new method

	* paragraph.C (writeFile): reindent
	(Erase): reindent

	* WorkArea.h: revert the xpos + etc changes.

	* CutAndPaste.C (SwitchLayoutsBetweenClasses): constify name and s

	* lyxparagraph.[Ch]: add copy constructor, remove Clone

	* CutAndPaste.C (copySelection): use LyXParagraph copy constructor
	(pasteSelection): likewise
	* text2.C (CreateUndo): likewise

2001-05-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* minibuffer.C (peek_event): temporarily reduce the functionality
	of the minibuffer (to allow args on lfuns)

	* commandtags.h: remove LFUN_LOA_INSERT, LFUN_LOF_INSERT,
	LFUN_LOT_INSERT. add LFUN_FLOAT_LIST

	* buffer.C (readInset): add compability reading of old float
	lists, add reading of new style float list.
	(readInset): avoid reevaluation of inscmd.getCmdName()
	(getLists): reindent

	* MenuBackend.C (MenuItem): implement parsing of
	md_floatlistinsert and md_floatinsert.
	(expand::LastFiles): move initalizaton of iterators out of loop,
	avoid reevaluation.
	(expand::Documents): introduce typdedef vector<string> Strings,
	and use it.
	(expand::ExportFormats): introduce typedef vector<Format const *>
	Formats, and use it.
	(expand): implement FloatListInsert and FloatInsert.

	* LyXAction.C (init): remove entries for LFUN_LOA_INSERT,
	LFUN_LOA_VIEW, LFUN_LOF_INSERT, LFUN_LOFVIEW, LFUN_LOT_INSERT,
	LFUN_LOTVIEW. Add entry for LFUN_FLOAT_LIST

	* BufferView_pimpl.C (Dispatch::LFUN_TOC_INSERT): remvoe the float
	handling.
	(Dispatch::LFUN_FLOAT_LIST): implement

2001-04-28  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* LaTeX.C (run): Fix problem with --export code.

2001-04-26  Angus Leeming  <a.leeming@ic.ac.uk>

	* BufferView.[Ch] (workarea): removed.
	(getClipboard) new method; wrapper for workarea()->getClipboard()

	* ToolbarDefaults.C (read): removed final lex.next() command; it's a
	bug.

	* WorkArea.h (width, height, xpos, ypos): These methods all
	returned the dimensions of the work_area sub-area of WorkArea,
	resulting in a position error if the WorkArea were resized. Now
	return the dimensions of the entire WorkArea.

	* lyx_main.C (ReadUIFile): don't print out spurious warnings.

2001-05-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LaTeX.C (deplog): correct the syntax of regex reg1

2001-05-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* undo.C: remove !NEW_INSETS cruft

2001-04-28  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text2.C: remove !NEW_INSETS cruft

	* text.C: remove !NEW_INSETS cruft

	* tabular.C: remove !NEW_INSETS cruft

	* spellchecker.C: remove !NEW_INSETS cruft

	* lyxtext.h: remove !NEW_INSETS cruft

	* lyxlex_pimpl.C: remove !NEW_INSETS cruft

	* lyxfunc.C: remove !NEW_INSETS cruft

	* lyxfind.C: remove !NEW_INSETS cruft

	* lyx_cb.C: remove !NEW_INSETS cruft

	* figureForm.C: remove  !NEW_INSETS cruft

	* bufferview_funcs.[Ch]: remove !NEW_INSETS cruft

	* buffer.[Ch]: remove !NEW_INSETS cruft

	* ToolbarDefaults.C: remove !NEW_INSETS cruft

	* CutAndPaste.C: remove !NEW_INSETS cruft

	* BufferView_pimpl.C: remove !NEW_INSETS cruft

	* BufferView2.C: remove !NEW_INSETS cruft

	* BufferView.h: remove !NEW_INSETS cruft

2001-05-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* Lsstream.h: include LString.h before the sstream headers to
	fix problem with gcc 2.95.3 and lyxstring

2001-05-02  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyx_main.C: add using directives when needed for C functions
	declared in std:: namespace.

2001-04-27  Juergen Vigna  <jug@sad.it>

	* text.C (Fill): return 20 instead of 0 if paper_width < 0 (endless)
	(SetHeightOfRow): comment out the update call should not be needed!

2001-04-13  Juergen Vigna  <jug@sad.it>

	* tabular.C (GetAdditionalHeight): changed parameter from cell to row.
	(LyXTabular): tried to minimize operator= operations (and realized
	hopfully Lars wish).

2001-04-27  Juergen Vigna  <jug@sad.it>

	* spellchecker.C (sc_check_word): fixed Assert to lyx::Assert.

2001-04-27  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxfunc.C (Dispatch): hack to make listof algorithm work

	* buffer.C (readInset): hack to make listof algorithm work

	* BufferView_pimpl.C: hack to make listof algorithm work

2001-04-26  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* LyXAction.C: removed all !NEW_INSETS cruft
	(init): moved lfun_item in method

	* lyxparagraph.[Ch]: removed all !NEW_INSETS cruft

2001-04-26  Angus Leeming  <a.leeming@ic.ac.uk>

	* BufferView2.C (theLockingInset): white space.

2001-04-25  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* minibuffer.C: include <iostream>

	* BufferView_pimpl.C: implement LFUN_TRANSPOSE_CHARS

	* LyXAction.C (init): add LFUN_TRANSPOSE_CHARS

	* commandtags.h: add LFUN_TRANSPOSE_CHARS

	* text.[Ch] (TransposeChars): new method

2001-04-24  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* call message directly through LyXView instead of through LyXFunc
	* BufferView2.C: adjust
	* BufferView_pimpl.C: adjust
	* FontLoader.C: adjust
	* buffer.C: adjust
	* bufferview_funcs.C: adjust
	* converter.C: adjust
	* figureForm.C: adjust
	* importer.C: adjust
	* lyx_cb.C: adjust
	* lyx_gui_misc.C: adjust
	* lyxfunc.C: adjust
	* lyxvc.C: adjust
	* text2.C: adjust
	+ more files in subdirs

	* lyxparagraph.h (size): move up int file
	(GetLayout): ditto

	* adjust all uses of Assert to lyx::Assert.

	* BufferView2.C (ChangeCitationsIfUnique): adjust for
	lyxfunctional in namespace lyx
	* layout.C (hasLayout): ditto
	(GetLayout): ditto
	(GetLayout): ditto
	(delete_layout): ditto
	(NumberOfClass): ditto
	* converter.C (GetFormat): ditto
	(GetNumber): ditto
	(Add): ditto
	(Delete): ditto
	(SetViewer): ditto
	* bufferlist.C (getFileNames): ditto
	(emergencyWriteAll): ditto
	(exists): ditto
	(getBuffer): ditto
	* MenuBackend.C (hasSubmenu): ditto
	(hasMenu): ditto
	(getMenu): ditto
	* BufferView_pimpl.C (getInsetByCode): ditto

2001-04-18  Juergen Vigna  <jug@sad.it>

	* vspace.C (asLatexString): fixed the 100% problem.

2001-04-18  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxfunc.C (Dispatch):
	* minibuffer.C:
	* minibuffer.h: add a few std:: qualifiers

2001-04-17  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* minibuffer.[Ch]: reimplement so that commands is initiated and
	run from lyxfunc, simplified som handling, and made the completion
	and history code for complete. wip.

	* lyxfunc.C (processKeySym): call message
	(miniDispatch): new temporary method
	(LFUN_EXEC_COMMAND): reimplement for new minibuffer
	(LFUN_MESSAGE): implement
	(LFUN_MESSAGE_PUSH): implement
	(LFUN_MESSAGE_POP): implement
	(initMiniBuffer): the initial/defualt minibuffer message.

	* lyxfont.[Ch]: inline some more getters

	* lyx_gui_misc.C (WriteAlert): use LFUN_MESSAGE

	* lyx_gui_misc.[Ch] (WriteStatus): remove method

	* lyx_cb.[Ch] (ShowMessage): remove delay arg, use LFUN_MESSAGE
	(AutoSave): use LFUN_MESSAGE
	(Reconfigure): ditto

	* importer.C (Import): constify som local vars, use LFUN_MESSAGE

	* figureForm.C: use LFUN_MESSAGE

	* converter.C (runLaTeX): use LFUN_MESSAGE

	* bufferview_funcs.C: use LFUN_MESSAGE
	(Melt): ditto
	(changeDepth): ditto

	* bufferparams.h: use boost::

	* bufferlist.h: inherit privately from noncopyable

	* bufferlist.C (loadLyXFile): remove some commented code.

	* buffer.C (runChktex): use LFUN_MESSAGE

	* ShareContainer.h: inherit privately from noncopyable

	* ParagraphParameters.[hC] (depth): inline it.

	* LyXView.[Ch] (LyXView): connect the minibuffer signals to lyxfunc
	methods.
	(message): new method
	(messagePush): ditto
	(messagePop): ditto
	(show): init minibuffer
	(showState): direct call

	* LaTeX.[Ch]: inherit privately from noncopyable
	(run): change second arg to LyXFunc*, use LFUN_MESSAGE
	instead of WriteStatus.

	* FontLoader.C (doLoad): use LFUN_MESSAGE_PUSH and LFUN_MESSAGE_POP

	* BufferView_pimpl.C (buffer): don't init minibuffer
	(workAreaButtonPress): use LFUN_MESSAGE
	(workAreaButtonRelease): ditto
	(savePosition): ditto
	(restorePosition): ditto
	(MenuInsertLyXFile): ditto
	(workAreaExpose): don't init minibuffer
	(update): remove commented code, simplify

	* BufferView2.C (openStuff): use LFUN_MESSAGE
	(toggleFloat): ditto
	(menuUndo): ditto
	(menuRedo): ditto
	(copyEnvironment): ditto
	(pasteEnvironment): ditto
	(copy): ditto
	(cut): ditto
	(paste): ditto
	(gotoInset): ditto
	(updateInset): remove some commented code

	* lastfiles.h: inherit privately from noncopyable
	* layout.h: ditto
	* lyx_gui.h: ditto
	* lyx_main.h: ditto
	* lyxlex.h: ditto
	* lyxlex_pimpl.h: ditto

	* commandtags.h: comment out LFUN_FOOTMELT, LFUN_MARGINMELT,
	LFUN_FLOATSOPERATE, LFUN_MELT, add LFUN_MESSAGE,
	LFUN_MESSAGE_PUSH, LFUN_MESSAGE_POP

	* LyXAction.h: inherit privately from noncopyable, add methods
	func_begin, func_end, returning iterators to the func map.

	* LyXAction.C (init): comment out LFUN_FLOATSOPERATE, LFUN_MELT,
	add entries for LFUN_MESSAGE, LFUN_MESSAGE_PUSH, LFUN_MESSAGE_POP
	(func_begin): new method
	(func_end): new method

	* CutAndPaste.C (cutSelection): split into two versons (NEW_INSETS
	and not)
	(copySelection): ditto
	(pasteSelection): ditto

	* BufferView.C: whitespace change
	* BufferView.h: inherit privately from noncopyable

2001-04-16  Allan Rae  <rae@lyx.org>

	* tabular-old.C (l_getline):
	* spellchecker.C (sc_check_word):
	* lyxfunc.C (Dispatch): #warning triggers an error on Sun CC 6.0 as
	an unrecognised preprocessor directive.  So ensure they're wrapped.

2001-04-14  Dekel Tsur  <dekelts@tau.ac.il>

	* src/exporter.C (Export): Give an error message when path to file
	contains spaces.

2001-04-12  Dekel Tsur  <dekelts@tau.ac.il>

	* LaTeX.C (deplog): Always check that foundfile exists.

2001-04-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyx_main.h:
	* lyx_main.C (ReadLanguagesFile): fix weird typo in method name

2001-04-06  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* tabular.[Ch] (getLabelList): implement new method

	* minibuffer.h: comment ouf setTiimer

	* minibuffer.C (ExecutingCB): constify res
	(peek_event): constify s
	(Set): constify ntext
	(Init): constify nicename

	* BufferView2.C (updateInset): comment out Minibuffer::setTimer

	* BufferView_pimpl.C (update): comment out Minibuffer::setTimer
	(savePosition): use two params to Minibuffer::Set
	(restorePosition): ditto

2001-04-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyx_main.C: include language.h

	* Makefile.am (lyx_main.o): add language.h

2001-04-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* exporter.C:
	* paragraph.C:
	* screen.C:
	* tabular.C:
	* CutAndPaste.C: include gettext.h

	* lyxfont.h: remove old hack with ON and OFF.

	* lyxparagraph.h:
	* lyxfont.h: do not include language.h...

	* BufferView2.C:
	* LaTeXFeatures.C:
	* Painter.C:
	* bufferview_funcs.C:
	* font.C:
	* lyxfont.C:
	* text.C:
	* text2.C:
	* trans_mgr.C:
	* paragraph.C: ... but do it here instead

2001-04-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* text2.C (SetLayout): split in NEW_INSETS and non NEW_INSETS version

	* tabular.C: small reformat

	* paragraph.C (GetFontSettings): split in NEW_INSETS and non
	NEW_INSETS version
	(GetChar): ditto
	(BreakParagraph): ditto
	(SetOnlyLayout): ditto
	(SetLayout): ditto

	* lyxparagraph.h: add definitions for SetLayout and SetOnlyLayout
	with one arg less.

	* lastfiles.C: removed most using decl, add std:: where needed

	* buffer.C: ws changes

	* MenuBackend.C (class compare_format): put into anon namespace
	(expand): constify label, names, action, action2
	(expand):

	* text.C (SingleWidth): constify font
	(IsBoundary): constify rtl2
	(GetVisibleRow): constify ww

	* LaTeX.C (deplog): constify logfile

	* BufferView_pimpl.C (checkInsetHit): constify width, inset_x,
	start_x, end_x
	(workAreaExpose): constify widthChange, heightChange

	* lyxrow.C (par): moved
	(height): moved
	(next): moved
	* lyxrow.h: as inlines here

	* lyxfont.h (shape): moved from lyxfont.C
	(emph): moved from lyxfont.C

	* lyxfont.C (LyXFont): use initialization list for all
	constructors
	(shape): move to lyxfont.h as inline
	(emph): move to lyxfont.h as inline


2001-04-04  Juergen Vigna  <jug@sad.it>

	* vspace.C: had to include stdio.h for use of sscanf

2001-04-03  Angus Leeming  <a.leeming@ic.ac.uk>

	* BufferView.h:
	* BufferView_pimpl.h: remove xforms cruft. Both classes are
	independent of xforms.

2001-04-02  Juergen Vigna  <jug@sad.it>

	* spellchecker.C: fixed namespace placing!

2001-03-30  Angus Leeming  <a.leeming@ic.ac.uk>

	* lyxfunc.C (Dispatch): prevent crash in LFUN_GOTO_PARAGRAPH when
	the LyXParagraph * is 0.

2001-03-29  Juergen Vigna  <jug@sad.it>

	* vspace.C: added support for %, c%, p%, l%.
	(stringFromUnit): added helper function.
	(asLatexString): changed to give right results for the %-values.

	* buffer.C: convert the widthp in a width%.

2001-03-28  Angus Leeming  <a.leeming@ic.ac.uk>

	* Makefile.am: removed form1.[Ch], lyx.[Ch] and added figure_form.[Ch],
	figureForm.[Ch].

	* figureForm.[Ch]: stripped the FD_from_figure manipulation
	code out of lux_cb.[Ch], ready for its (imminent?) removal.

	* lyx_cb.[Ch]: see above.

	* figure_form.[Ch]: fdesign generated code, combining lyx.[Ch] and
	form1.[Ch].

	* form1.[Ch]:
	* lyx.[Ch]: replaced by figure_form.[Ch].

	* lyx_gui.C:
	* lyx_gui_misc.C:
	* lyxfunc.C: changed headers associated with above changes.

2001-03-27  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C: set the temporary cursor right!

2001-03-27  Angus Leeming  <a.leeming@ic.ac.uk>

	* BufferView_pimpl.C (Dispatch): corrected spelling givven -> given.

2001-03-23  Angus Leeming  <a.leeming@ic.ac.uk>

	* LString.h: removed "using std::getline"!

	* BufferView_pimpl.C (Dispatch): changes due to changes in
	InsetInclude::Params.

	* buffer.C (tag_name): removed redundant break statements as they were
	producing lots of warnings with my compiler.

2001-03-23  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LString.h: add "using std::getline" when using the real <string>.

2001-03-23  José Abílio Matos  <jamatos@fep.up.pt>

	* buffer.C: removed bitset usage.
	PAR_TAG moved to an anonymous name space.
	(tag_name): new funtion, also in the anonymous namespace.
	(SimpleLinuxDocOnePar): replaced all the references to bitset by PAR_TAG.
	(makeDocBookFile): clean code. Completed transition from string arrays
	to string vectors.
	(SimpleDocBookOnePar): code clean.

2001-03-23  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* tabular.C: add some comments.

2001-03-22  Juergen Vigna  <jug@sad.it>

	* buffer.C (parseSingleLyXformat2Token): redone the minipage
	compatibility read a bit and fixed bug with minipage in different
	depth.

2001-03-21  José Abílio Matos  <jamatos@fep.up.pt>

	* buffer.C (pop_tag): removed.
	(push_tag): removed.
	(makeLinuxDocFile): cleaner C++ code, declarations near usage point,
	array replaced with vector. Added support for CDATA sections.
	(SimpleLinuxDocOnePar): ditto. Paragraph tags are correctly handled,
	at any nest level.
	(makeDocBookFile): XML conformant declaration of CDATA section,
	fixed bug related to <emphasis> in the first paragraph char.
	(sgmlOpenTag): exclude empty tags.
	(sgmlCloseTag): ditto.

	* buffer.h (pop_tag): removed.
	(push_tag): removed.

2001-03-20  Angus Leeming  <a.leeming@ic.ac.uk>

	* language.h (Languages): added size_type and size().

2001-03-20  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* buffer.C (parseSingleLyXformat2Token): Try to give a bit better
	response on compability reading of minipages. One probliem is that
	the old usage of minipages was «flertydig»

	* several files here and in subdirs: don't use static at file
	scope use anon namespaces instead.

2001-03-19  Kayvan A. Sylvan <kayvan@sylvan.com>

	* paragraph.C (TeXEnvironment): Added \n to \end{environment}
	LaTeX output. This is necessary for Literate document
	processing.

2001-03-17  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* buffer.C: insert hfill when needed.

	* tabular.C (l_getline): use string::erase, small whitespace change.

	* BufferView_pimpl.C: try the anon namespace.
	* WorkArea.C: ditto

2001-03-16  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (workAreaButtonRelease): return only on button==2
	otherwise it won't open options-dialogs.

	* buffer.C: honor pextraWidth(p) on converting minipages.

	* tabular.C (l_getline): changed the functions to strip trailing \r.

2001-03-16  Angus Leeming  <a.leeming@ic.ac.uk>

	* BufferView_pimpl.C:
	* minibuffer..C: added "using SigC::slot" declaration.

2001-03-16  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* lyxlex_pimpl.h: noncopyable is in namespace boost.

	* text2.C: ditto

	* text.C: ditto

	* paragraph.C: ditto

	* lyxtext.h: NO_PEXTRA

	* buffer.C: NO_PEXTRA_REALLY, NO_PEXTRA

	* ParagraphParameters.C (clear): NO_PEXTRA_REALLY
	* ParameterStruct.h: ditto
	* ParagraphParameters.h: ditto
	* lyxparagraph.h: ditto

2001-03-15  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* buffer.C: add compability for minipage alignment.
	(latexParagraphs): remove unwanted pextra check.

	* several files: remove CXX_WORKING_NAMESPACES

	* buffer.C (pop_tag): tie is in namespace boost

	* BufferView.h: noncopyable is in namespace boost
	* lyxlex.h: ditto
	* lyx_main.h: ditto
	* lyx_gui.h: ditto
	* layout.h: ditto
	* lastfiles.h: ditto
	* bufferlist.h: ditto
	* ShareContainer.h: ditto
	* LyXView.h: ditto
	* LyXAction.h: ditto
	* LaTeX.h: ditto

2001-03-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* Merging changes from BRANCH_MVC back into HEAD.

	* Makefile.am: added controllers/libcontrollers.la to lyx_DEPENDENCIES

2001-03-15  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: change from intl.C

	* combox.h:
	* combox.C:
	* Makefile.am: move combox.*

	* form1.h:
	* form1.C:
	* lyx_gui.C:
	* intl.h:
	* intl.C: remove dialog (covered by prefs)

2001-03-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* lyxfunc.C (Dispatch): removed redundant break statement.

2001-03-14  Juergen Vigna  <jug@sad.it>

	* tabular.C (l_getline): pay attention on \r\n (from Windows-files)

2001-03-14  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* buffer.C: add hack to fix compability reading of minipages.

2001-03-13  Dekel Tsur  <dekelts@tau.ac.il>

	* buffer.C (getLists): Cleanup.

2001-03-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxfont.C (update): don't honor toggleall on font size.

2001-03-13  John Levon  <moz@compsoc.man.ac.uk>

	* bmtable.c:
	* bmtable.h:
	* Makefile.am: moved to frontends/xforms/

	* lyx_gui_misc.C:
	* lyxfunc.C:
	* BufferView_pimpl.C: changes for moved mathpanel

2001-03-12  John Levon  <moz@compsoc.man.ac.uk>

	* gettext.h: fix gettext_init() in --disable-nls

2001-03-12  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LaTeXFeatures.C (getMacros): add a .c_str() when using sstream.

2001-03-09  John Levon  <moz@compsoc.man.ac.uk>

	* lyx.C:
	* lyx.h: strip external form

2001-03-12  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: add comment, destroySplash()

2001-03-12  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C:
	* LyXAction.C:
	* buffer.C:
	* commandtags.h:
	* lyxfunc.C: use re-worked insetinclude

2001-03-12  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* buffer.C: add using std::stringstream.

	* lyx_cb.C: readd using std::ios.

	* buffer.C: add using std::map.

	* BufferView_pimpl.C: add using std::vector.

	* ShareContainer.h: add std:: to swap.

	* buffer.h: add some typedefs
	* buffer.C (getLists): use them
	(getLists): renamed from getTocList.
	add a counter for the different float types and use it in the
	generated string.
	(getLists): use the same counter for the NEW_INSETS and the "non"
	NEW_INSETS

	* lyx_cb.h: remove unused items, includes, using etc.

	* ShareContainer.h: remove some commented code, add more comments
	and "documentation".

2001-03-11  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* buffer.C (getTocList): make the list also when NEW_INSETS is
	defined.

	* buffer.h: remove TocType

	* buffer.C (getTocList): change to return a map<string,
	vector<TocItem> >, implement for dynamic number of list.

	* CutAndPaste.[Ch] (checkPastePossible): remove unused arg
	* text2.C (PasteSelection): adjust
	* CutAndPaste.C (pasteSelection): adjust

	* FloatList.C (FloatList): update from the new_insets branch.
	* Floating.[Ch]: ditto
	* LaTeXFeatures.C: ditto
	* buffer.C: ditto
	* lyxlex_pimpl.C: ditto

	* paragraph.C (Last): remove when NEW_INSETS is defined.

	* other file: changes because of the above.

2001-03-09  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* lyxparagraph.h: rename next to next_, previous to previous_,
	make them private for NEW_INSETS. Rename Next() to next(),
	Previous() to previous().

	* other files: changes because of the above.

2001-03-08  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView.h:
	* lyxparagraph.h: Add '#include "LString.h"' to fix compilation
	problem.

2001-03-08  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* main.C (main): pass lyx_localedir to gettext_init().

	* gettext.h: remove locale_init and gettext_init macros

	* gettext.C (locale_init): new function
	(gettext_init): new function

	* lyx_gui.C (LyXGUI): use locale_init() instead of explicit
	setlocale().

2001-03-07  Edwin Leuven  <leuven@fee.uva.nl>

	* Moved credits to frontends:
	* credits.[Ch]: removed
	* credits_form.[Ch]: removed
	* lyx_gui_misc.C: remove credits stuff
	* Makefile.am:

2001-03-07  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* lyx_main.C: make toplevel_keymap a boost::scoped_ptr.

	* kbmap.[Ch]: make kb_key::table a boost::shared_ptr, remove
	unneeded destructor.

	* intl.[Ch] (Intl): free the fd_form_keymap, make the fd_form_keymap
	a standalone pointer again.

	* ColorHandler.[Ch]: make lyxColorHandler a boost::scoped_ptr

2001-03-06  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am:
	* filedlg.h:
	* filedlg.C:
	* LyXAction.C:
	* ToolbarDefaults.C:
	* bufferlist.C:
	* commandtags.h:
	* form1.C:
	* form1.h:
	* lyx_cb.C:
	* lyx_cb.h:
	* lyxfunc.h:
	* lyxfunc.C:
	* BufferView_pimpl.C: use new file dialog in GUII

	* lyx_cb.h:
	* lyx_cb.C: remove LayoutsCB to Toolbar

2001-03-07  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* ShareContainer.h (get): add std:: qualifier

2001-03-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* ShareContainer.h: define a proper ShareContainer::value_type
	type (and use typename to please compaq cxx)

2001-03-06  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* lyxparagraph.h: move serveral local vars to
	ParameterStruct/ParagraphParameters., use ShareContainer in
	FontTable., make vars in FontTable private and add getter and
	setter.

	* paragraph.C: changes because of the above.

	* lyxfont.h: remove copy constructor and copy assignment. (the
	default ones is ok), move number inside FontBits. move inlines to
	lyxfont.C

	* lyxfont.C: add number to initializaton of statics, move several
	inlines here. constify several local vars. some whitespace
	cleanup. Dont hide outerscope variables.

	* Spacing.h: add two new constructors to match the set methods.

	* ShareContainer.h: new file, will perhaps be moved to support

	* ParameterStruct.h: new file

	* ParagraphParameters.h: new file

	* ParagraphParameters.C: new file

	* Makefile.am (lyx_SOURCES): add ParagraphParameters.C,
	ParagraphParameters.h, ParameterStruct.h and ShareContainer.h

	* BufferView_pimpl.C: ParagraphParameter changes.
	* buffer.C: Likewise.
	* bufferview_funcs.C: Likewise.
	* text.C: Likewise.
	* text2.C: Likewise.

2001-03-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxfind.C (LyXReplace): do not redefine default argument in
	implementation.
	(IsStringInText): ditto
	(SearchForward): ditto
	(SearchBackward): ditto

2001-03-06  Juergen Vigna  <jug@sad.it>

	* lyxfind.C (IsStringInText): put parentes around expressions.

2001-03-05  Edwin Leuven  <leuven@fee.uva.nl>

	* lyxfind.[Ch]: find stuff moved out of text2.C/lyxtext.h

2001-02-23  John Levon  <moz@compsoc.man.ac.uk>

	* lyx_main.C: add ISO_Left_Tab as bind synonym for Tab

	* stl_string_fwd.h: add comment

	* lyx_gui_misc.C: killed ALWAYS_CLOSE_MATH_PANELS

	* tabular.h:
	* tabular.C: remove unused DocBook methods

	* intl.C:
	* language.C:
	* paragraph.C:
	* buffer.C:
	killed DO_USE_DEFAULT_LANGUAGE

2001-03-01  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyx_gui.C: do not include language.h.

	* bufferview_funcs.C (ToggleAndShow): do not provide optional
	arguments in function implementation.

2001-02-28  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* BufferView_pimpl.C: add <ctime>

2001-02-27  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* BufferView_pimpl.C: add using std::find_if

2001-02-27  José Matos  <jamatos@fep.up.pt>

	* LaTeXFeatures.C (getIncludedFiles): call to BasePath replaced
	by OnlyPath.

2001-02-11  José Matos  <jamatos@fep.up.pt>

	* buffer.C (makeDocBookFile): command styles now have a parameter as
	"title" by default.

2001-02-23  Edwin Leuven <leuven@fee.uva.nl>

	* layout_forms.[Ch]: removed
	* lyx_cb.[Ch]: out character
	* lyx_gui.C: out character
	* lyx_gui_misc.C: out character
	* bufferview_funcs.C: : out character,
	added toggleall as parameter in ToggleAndShow

2001-02-26  Dekel Tsur  <dekelts@tau.ac.il>

	* lyxfunc.C (getStatus): Fix the LFUN_EXPORT case.

	* text2.C (SetCurrentFont): Disable number property at boundary.

2001-02-26  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C (getStatus): added a string argument override function so
	that this is correctly called from LyXFunc::Dispatch if it contains a
	do_not_use_argument which is used!
	(Dispatch): added check for "custom" export and call appropriate func.

2001-02-23  Dekel Tsur  <dekelts@tau.ac.il>

	* lyxrc.C: Add language_command_local, language_use_babel and
	language_global_options.

	* lyxfont.C (latexWriteStartChanges): Use language_command_local.

	* buffer.C (makeLaTeXFile): Use language_use_babel and
	language_global_options.

2001-02-23  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C (Dispatch): removed the whole part of the switch statement
	which works with LyXText and putted it inside BufferView. Here now we
	only call for that part the BufferView::Dispatch() function.

	* BufferView.C (Dispatch): added.

	* BufferView_pimpl.C (Dispatch): added! Here are now all dispatch
	functions which needs to use a LyXText over from LyXFunc.
	(MenuInsertLyXFile): added
	(getInsetByCode): added
	(moveCursorUpdate): added
	(static TEXT): added

2001-02-22  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (update): call a status update to see if LyXText
	needs it.

2001-02-20  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* vc-backend.C (revert): implement for CVS
	(getLog): implement for CVS

2001-02-20  Juergen Vigna  <jug@sad.it>

	* text2.C (ClearSelection): added BufferView param for inset_owner call

	* lyxfunc.C (TEXT): added this function and use it instead of
	directly owner->view()-text of getLyXText().

2001-02-20  Edwin Leuven <leuven@fee.uva.nl>

	* src/layout_forms.C: out preamble
	* src/layout_forms.h: out preamble
	* src/lyx_cb.C: out preamble
	* src/lyx_cb.h: out preamble
	* src/lyx_gui.C: out preamble
	* src/lyx_gui_misc.C: out preamble
	* src/lyxfunc.C: connect with guii preamble

2001-02-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/buffer.h: tiny clean-ups to allow compilation with DEC cxx.

2001-02-17  Dekel Tsur  <dekelts@tau.ac.il>

	* LaTeX.C (run): Do not use 'scanres & RERUN' when deciding
	whether to run bibtex.

2001-02-16  Dekel Tsur  <dekelts@tau.ac.il>

	* Makefile.am (lyx_SOURCES): Remove BackStack.h

2001-02-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* Makefile.am (lyx_SOURCES): removed bibforms.h

	* vspace.h: doxygen

	* text.C (GetVisibleRow): make several local vars const

	* tabular.C: small cleanup.

	* lyxserver.C (callback): use compare instead of strncmp

	* lyxparagraph.h: remove all code dep. on HAVE_ROPE, move inclass
	inlines to after class or to paragraph.C

	* lyxfont.h: remove friend operator!=

	* converter.h: move friend bool operator< to non friend and after
	class def.

	* combox.h: small cleanup

	* buffer.h: doxygen, remove unused constructor, move inclas inlies
	to inlines after class def.

	* buffer.C (pop_tag): use string operations instead of strcmp

	* bmtable.c: doxygen, small cleanup

	* LaTeX.h: remove friend operator==

2001-02-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* screen.C:
	* lyxrc.[Ch]:
	* lyxfunc.C:
	* lyxfont.[Ch]:
	* lyx_cb.C:
	* intl.[Ch]:
	* commandtags.h:
	* buffer.C:
	* WorkArea.[Ch]:
	* LyXAction.C:
	* BufferView_pimpl.C:
	* BufferView.[Ch]: remove cruft

2001-02-14  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C: removed #if 0 unused code

	* lyxfunc.C (Dispatch): make LFUN_QUOTE work for InsetText.

	* BufferView_pimpl.C (update): set updatestatus of inset if needed.

	* text2.C (SetSelection): added a BufferView * parameter

2001-02-13  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C (Dispatch): fixed protected blank problem.
	* BufferView2.C (protectedBlank): added LyxText * parameter.

	* tabular.C (AppendRow): forgot to set row_info of newly added row.
	(AppendColumn): same as above for column_info.

	* lyxfunc.C (Dispatch): supported some more functions in InsetText.
	(moveCursorUpdate): use a LyXText param for support of InsetText.

	* BufferView_pimpl.C (doubleClick): added support for InsetText.
	(tripleClick): ditto

	* lyxfunc.C (LFUN_APPENDIX): changed to use "text" pointer.

	* BufferView_pimpl.C (update): added LyXText param to honor insets.

	* bufferview_funcs.C (ToggleAndShow): fixed for text in insets.

	* text2.C (SetSelection): set correct update status if inset_owner
	(ToggleFree): ditto

2001-02-12  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* tabular.C: remove some commented code.

2001-02-12  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: call hideSplash()

	* LyXAction.C: make buffer-child-insert use LFUN_CHILD_CREATE

	* include_form.h:
	* bibforms.h: remove

	* lyxfunc.C:
	* src/commandtags.h: LFUN_CHILDINSERT -> LFUN_CHILD_INSERT,
	  add LFUN_CHILD_CREATE

	* counters.h: fix tiny typo

	* lyx_cb.C:
	* lyx.h:
	* lyx_gui.C:
	* lyx.C: move splash to frontends/xforms/

	* lyx_gui_misc.C: move Include and Bibform to frontends

	* lyxvc.h: clarify comment

	* vspace.C: tiny housekeeping

2001-02-10  Dekel Tsur  <dekelts@tau.ac.il>

	* text.C (PrepareToPrint): RTL Fix.

	* paragraph.C (GetUChar): New method.
	(String):  Use GetUChar.

	* buffer.C (asciiParagraph): Use GetUChar.

2001-02-09  Dekel Tsur  <dekelts@tau.ac.il>

	* text.C (GetVisibleRow): Fix selection drawing for RTL text in tables.

2001-02-09  John Levon  <moz@compsoc.man.ac.uk>

	* buffer.h:
	* buffer.C: rename to getLogName(), handle
	  build log / latex log nicely

2001-02-09  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* MenuBackend.C:
	* MenuBackend.h: remove support for reference menuitem type.

2001-02-07  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: housekeeping
	* BufferView_pimpl.h:
	* LyXView.h:
	* Makefile.am:
	* Timeout.C:
	* Timeout.h:
	* minibuffer.h: move Timeout GUI-I

2001-02-07  Dekel Tsur  <dekelts@tau.ac.il>

	* lyxrc.C (read): Update converters data-structures.

2001-02-07  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* LaTeX.h (operator!=): add operator != for Aux_Info

2001-02-06  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am: remove LaTeXLog.C, log_form.[Ch]

	* LaTeXLog.C: deleted, useful code moved to Buffer

	* buffer.h:
	* buffer.C: new function getLatexLogName()

	* lyx_gui_misc.C:
	* lyx_gui.C:
	* lyxvc.C:
	* lyxvc.h:
	* lyxfunc.C: use frontends for LaTeX and VC logs

2001-02-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LaTeX.h: yet another std:: that Allan forgot.

	* Variables.C (set): renamed from isset(), because this clashes
	with some HP-UX macros (grr).

2001-02-06  Allan Rae  <rae@lyx.org>

	* LaTeX.h: Another bug fix.  Missing std:: this time.

2001-02-04  Allan Rae  <rae@lyx.org>

	* paragraph.C (TeXOnePar): Partial fix for the '\n' generation in
	floats problem. I've left it commented out because it's not quite
	correct.  It should also test that the current object is a table or
	figure inset.  But I haven't gotten around to figuring out how to do
	that.  I *think* it'll be something like: "table" == inset.type()

	* LaTeX.h (operator==): Aux_Info should have a friend that returns a
	bool.

2001-02-02  Dekel Tsur  <dekelts@tau.ac.il>

	* LaTeX.C (scanAuxFile): A rewrite of this method. It now returns
	all the citation/databases/styles in the auxilary file.
	(run): Rerun latex if there was a babel language error.

2001-02-01  Dekel Tsur  <dekelts@tau.ac.il>

	* text.C (Backspace): Preserve the font when changing newline char
	with a space.
	(BreakParagraph): If the cursor is before a space, delete the space.

	* lyx_cb.C (QuitLyX): Do not save files when running with no gui.

2001-01-31  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView2.C (ChangeInsets): Renamed from ChangeRefs. Accept a
	new argument (code).
	(ChangeCitationsIfUnique): New method.

	* paragraph.C (GetPositionOfInset): Handle bibkey.

2001-01-29  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* BufferView_pimpl.h: change type of Position::par_pos to
	LyXParagraph::size_type.

2001-01-29  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView_pimpl.C (savePosition, restorePosition): Write
	messages to minibuffer.

2001-01-28  José Matos  <jamatos@fep.up.pt>

	* buffer.C (makeDocBookFile): adds support for document language.
	A silly restriction on the name of LatexCommand types where removed.
	Added support for CDATA sections, allows to chars unescaped, used
	among others in code, to avoid escape < and >.

2001-01-27  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView_pimpl.C (savePosition, restorePosition): Use a vector of
	saved positions instrad of a stack. Furthermore, a position is
	stored using paragraph id/paragraph position.

	* commandtags.h: Add LFUN_BOOKMARK_SAVE and LFUN_BOOKMARK_GOTO.
	Remove LFUN_REF_BACK.

2001-01-27  Dekel Tsur  <dekelts@tau.ac.il>

	* converter.C (dvipdfm_options): New method.

2001-01-26  Dekel Tsur  <dekelts@tau.ac.il>

	* vspace.C (isValidLength): Fix for empty input string.

2001-01-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LyXAction.C (init): change description of LFUN_FIGURE to
	"Insert Graphics"

2001-01-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LaTeX.C: add using directive

2001-01-24  Dekel Tsur  <dekelts@tau.ac.il>

	* MenuBackend.C (expand): Fix the sorting of the formats.

2001-01-24  John Levon  <moz@compsoc.man.ac.uk>

	* lyx_main.C: tiny error message fix

2001-01-24  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyx_gui.C (LyXGUI): force the LC_NUMERIC locale to "C" after
	calling fl_initialize(). This fixes the problem with ',' as
	decimal separator in text files.

2001-01-24  Dekel Tsur  <dekelts@tau.ac.il>

	* trans.C (process): Fix the keymap bug.

2001-01-23  Dekel Tsur  <dekelts@tau.ac.il>

	* LaTeX.C (scanAuxFiles): New method. Provides support for
	multiple bibliographies (when using the bibtopic/bibunits pacakges).
	(scanLogFile) Scan for "run BibTeX" messages.

	* buffer.C (makeLaTeXFile): Do not load the ae package when using
	OT1 font encoding. Also, load the aecompl package if the ae
	package is loaded.

	* tex-strings.C: Add "ae" to tex_fonts[] (from Matej Cepl).

2001-01-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* texrow.C (increasePos): turn two error messages into debug
	messages.

2001-01-20  Dekel Tsur  <dekelts@tau.ac.il>

	* LaTeX.C (scanAux): Handle the \@input macro.
	(runBibTeX): Use scanAux().

	* language.C (latex_options_): New field.

	* LaTeXFeatures.C (getMacros): Add language macros.

	* buffer.C (makeLaTeXFile): Small fix.

2001-01-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxfunc.C: fix the name of the inset for LFUN_CHILDINSERT

	* text2.C: add a using directive.

2000-01-17  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView2.C:
	* lyx_gui_misc.h:
	* lyxfr1.C:
	* lyxfunc.C: kill LyXBell.

2001-01-17  Dekel Tsur  <dekelts@tau.ac.il>

	* text.C (IsBoundary): Remove the error message

	* WorkArea.C (work_area_handler): Decrease keyboard purge threshold.

	* lyxrc.C (setDefaults): Correct initialization value for
	font_norm_type.

2001-01-15  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView2.C (gotoInset): New method. Replaces gotoNote() and
	gotoError().

	* text2.C (GotoNextInset): New method. Replaces GotoNextError()
	and GotoNextNote().

	* src/LyXAction.C: Added reference-next.

	* text.C (InsertChar): Use contains instead of strchr.

	* lyx_cb.C (MenuInsertLabel): Enable default value code.

2001-01-13  Dekel Tsur  <dekelts@tau.ac.il>

	* paragraph.C (SimpleTeXOnePar) Put \protect before paragraph
	alignment commands (when needed).

	* text.C (InsertChar): Add ':' to number separator chars.
